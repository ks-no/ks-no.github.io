<!DOCTYPE html>
<html>
  <head>
    <title>KS Fiks</title>
    
      <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<meta name="revised" content="2019-08-07T09:55:10 CEST">
<title>Digisos :: KS Fiks</title>
<link rel="shortcut icon" href="/images/favicon.png" type="image/x-icon" />
<link href="/css/nucleus.css" rel="stylesheet">
<link href="/css/font-awesome.min.css" rel="stylesheet">
<link href="/css/hybrid.css" rel="stylesheet">
<link href="/css/featherlight.min.css" rel="stylesheet">
<link href="/css/auto-complete.css" rel="stylesheet">
<link href="/theme-original/style.css" rel="stylesheet">

<link rel="stylesheet" href="/css/bootstrap.min.css">
<script src="/js/jquery-2.x.min.js"></script>
<style type="text/css">
  :root #header + #content > #left > #rlblock_left {
    display:none !important;
  }
</style>
<meta name="description" content="">


    
  </head>
  <body data-url="/fiks-platform/tjenester_under_utvikling/digisos/">
    
      <div id="headermain"></div>
<nav id="sidebar" class="">



<div class="highlightable">
  <div id="header-wrapper">
    <div id="header">
      
	
  
    <p><img src="/images/ks-logo.svg" width="30%"></p>

  


    </div>
        <div class="searchbox">
		    <label for="search-by"><i class="fa fa-search"></i></label>
		    <input data-search-input id="search-by" type="text" placeholder="">
		    <span data-search-clear=""><i class="fa fa-close"></i></span>
		</div>
		<script type="text/javascript" src="/js/lunr.min.js"></script>
		<script type="text/javascript" src="/js/auto-complete.js"></script>
		<script type="text/javascript">
        
            var baseurl = "\/";
        
		</script>
		<script type="text/javascript" src="/js/search.js"></script>
  </div>

      <ul class="topics">
            <li data-nav-id="/" class="dd-item">
            <a href="/"><i class="fa fa-fw fa-home"></i></a>
            </li>
    <li data-nav-id="/fiks-platform/" class="dd-item parent haschildren
        ">
      <div>
      <a href="/fiks-platform/">Fiks-plattformen</a>
            <i class="fa fa-angle-down fa-lg category-icon"></i>
      </div>
        <ul>
      <li data-nav-id="/fiks-platform/integrasjoner/" class="dd-item">
        <div>
          <a href="/fiks-platform/integrasjoner/">
            Integrasjonsutvikling
          </a>
        </div>
    </li>
      <li data-nav-id="/fiks-platform/sikkerhet/" class="dd-item">
        <div>
          <a href="/fiks-platform/sikkerhet/">
            Sikkerhet og personvern
          </a>
        </div>
    </li>
      <li data-nav-id="/fiks-platform/testmiljo/" class="dd-item">
        <div>
          <a href="/fiks-platform/testmiljo/">
            Testmiljø
          </a>
        </div>
    </li>
    <li data-nav-id="/fiks-platform/tjenester/" class="dd-item haschildren
        ">
      <div>
      <a href="/fiks-platform/tjenester/">Tjenester</a><i class="fa fa-angle-right fa-lg category-icon"></i>
      </div>
        <ul>
      <li data-nav-id="/fiks-platform/tjenester/dokumentlager/" class="dd-item">
        <div>
          <a href="/fiks-platform/tjenester/dokumentlager/">
            Dokumentlager
          </a>
        </div>
    </li>
      <li data-nav-id="/fiks-platform/tjenester/fiksio/" class="dd-item">
        <div>
          <a href="/fiks-platform/tjenester/fiksio/">
            Fiks IO
          </a>
        </div>
    </li>
      <li data-nav-id="/fiks-platform/tjenester/fullmakt/" class="dd-item">
        <div>
          <a href="/fiks-platform/tjenester/fullmakt/">
            Fullmakt
          </a>
        </div>
    </li>
      <li data-nav-id="/fiks-platform/tjenester/innsyn/" class="dd-item">
        <div>
          <a href="/fiks-platform/tjenester/innsyn/">
            Innsyn
          </a>
        </div>
    </li>
      <li data-nav-id="/fiks-platform/tjenester/minside/" class="dd-item">
        <div>
          <a href="/fiks-platform/tjenester/minside/">
            MinSide
          </a>
        </div>
    </li>
        </ul>
    </li>
    <li data-nav-id="/fiks-platform/tjenester_under_utvikling/" class="dd-item parent haschildren
        ">
      <div>
      <a href="/fiks-platform/tjenester_under_utvikling/">Tjenester under utvikling</a>
            <i class="fa fa-angle-down fa-lg category-icon"></i>
      </div>
        <ul>
      <li data-nav-id="/fiks-platform/tjenester_under_utvikling/audit/" class="dd-item">
        <div>
          <a href="/fiks-platform/tjenester_under_utvikling/audit/">
            Audit
          </a>
        </div>
    </li>
      <li data-nav-id="/fiks-platform/tjenester_under_utvikling/digisos/" class="dd-item active">
        <div>
          <a href="/fiks-platform/tjenester_under_utvikling/digisos/">
            Digisos
          </a>
        </div>
    </li>
        </ul>
    </li>
      <li data-nav-id="/fiks-platform/utviklingsmetodikk/" class="dd-item">
        <div>
          <a href="/fiks-platform/utviklingsmetodikk/">
            Utviklingsfilosofi
          </a>
        </div>
    </li>
        </ul>
    </li>
    <li data-nav-id="/svarut/" class="dd-item haschildren
        ">
      <div>
      <a href="/svarut/">SvarUt</a><i class="fa fa-angle-right fa-lg category-icon"></i>
      </div>
        <ul>
      <li data-nav-id="/svarut/edialog/" class="dd-item">
        <div>
          <a href="/svarut/edialog/">
            Edialog
          </a>
        </div>
    </li>
    <li data-nav-id="/svarut/integrasjon/" class="dd-item haschildren
        ">
      <div>
      <a href="/svarut/integrasjon/">Integrasjon mot SvarUt</a><i class="fa fa-angle-right fa-lg category-icon"></i>
      </div>
        <ul>
      <li data-nav-id="/svarut/integrasjon/forsendelserestservicev1/" class="dd-item">
        <div>
          <a href="/svarut/integrasjon/forsendelserestservicev1/">
            ForsendelseRestServiceV1
          </a>
        </div>
    </li>
      <li data-nav-id="/svarut/integrasjon/forsendelseservicev1/" class="dd-item">
        <div>
          <a href="/svarut/integrasjon/forsendelseservicev1/">
            ForsendelseServiceV1
          </a>
        </div>
    </li>
      <li data-nav-id="/svarut/integrasjon/forsendelseservicev2/" class="dd-item">
        <div>
          <a href="/svarut/integrasjon/forsendelseservicev2/">
            ForsendelseServiceV2
          </a>
        </div>
    </li>
      <li data-nav-id="/svarut/integrasjon/forsendelseservicev3/" class="dd-item">
        <div>
          <a href="/svarut/integrasjon/forsendelseservicev3/">
            ForsendelseServiceV3
          </a>
        </div>
    </li>
      <li data-nav-id="/svarut/integrasjon/forsendelseservicev4/" class="dd-item">
        <div>
          <a href="/svarut/integrasjon/forsendelseservicev4/">
            ForsendelseServiceV4
          </a>
        </div>
    </li>
      <li data-nav-id="/svarut/integrasjon/forsendelseservicev5/" class="dd-item">
        <div>
          <a href="/svarut/integrasjon/forsendelseservicev5/">
            ForsendelseServiceV5
          </a>
        </div>
    </li>
      <li data-nav-id="/svarut/integrasjon/forsendelseservicev6/" class="dd-item">
        <div>
          <a href="/svarut/integrasjon/forsendelseservicev6/">
            ForsendelseServiceV6
          </a>
        </div>
    </li>
      <li data-nav-id="/svarut/integrasjon/forsendelseservicev7/" class="dd-item">
        <div>
          <a href="/svarut/integrasjon/forsendelseservicev7/">
            ForsendelseServiceV7
          </a>
        </div>
    </li>
      <li data-nav-id="/svarut/integrasjon/forsendelseservicev8/" class="dd-item">
        <div>
          <a href="/svarut/integrasjon/forsendelseservicev8/">
            ForsendelseServiceV8
          </a>
        </div>
    </li>
      <li data-nav-id="/svarut/integrasjon/forsendelseservicev9/" class="dd-item">
        <div>
          <a href="/svarut/integrasjon/forsendelseservicev9/">
            ForsendelseServiceV9
          </a>
        </div>
    </li>
      <li data-nav-id="/svarut/integrasjon/forsendelsesservicev10/" class="dd-item">
        <div>
          <a href="/svarut/integrasjon/forsendelsesservicev10/">
            ForsendelsesServiceV10
          </a>
        </div>
    </li>
      <li data-nav-id="/svarut/integrasjon/forsendelsesservicev11/" class="dd-item">
        <div>
          <a href="/svarut/integrasjon/forsendelsesservicev11/">
            ForsendelsesServiceV11
          </a>
        </div>
    </li>
      <li data-nav-id="/svarut/integrasjon/kodeeksempeldotnet/" class="dd-item">
        <div>
          <a href="/svarut/integrasjon/kodeeksempeldotnet/">
            Kodeeksempel .Net
          </a>
        </div>
    </li>
      <li data-nav-id="/svarut/integrasjon/kodeeksempeljava/" class="dd-item">
        <div>
          <a href="/svarut/integrasjon/kodeeksempeljava/">
            Kodeeksempel Java
          </a>
        </div>
    </li>
      <li data-nav-id="/svarut/integrasjon/kodeeksempelmottakerrest/" class="dd-item">
        <div>
          <a href="/svarut/integrasjon/kodeeksempelmottakerrest/">
            Kodeeksempel MottaksserviceV1
          </a>
        </div>
    </li>
      <li data-nav-id="/svarut/integrasjon/mottaksservice-rest/" class="dd-item">
        <div>
          <a href="/svarut/integrasjon/mottaksservice-rest/">
            MottakService v1
          </a>
        </div>
    </li>
        </ul>
    </li>
      <li data-nav-id="/svarut/konfigurasjon-av-svarut/" class="dd-item">
        <div>
          <a href="/svarut/konfigurasjon-av-svarut/">
            Konfigurasjon av SvarUT
          </a>
        </div>
    </li>
      <li data-nav-id="/svarut/signeringstjeneste/" class="dd-item">
        <div>
          <a href="/svarut/signeringstjeneste/">
            Signeringstjeneste
          </a>
        </div>
    </li>
      <li data-nav-id="/svarut/forsendelser-og-sikkerhet/" class="dd-item">
        <div>
          <a href="/svarut/forsendelser-og-sikkerhet/">
            Sikkerhet
          </a>
        </div>
    </li>
      <li data-nav-id="/svarut/svarinn-mottakservice/" class="dd-item">
        <div>
          <a href="/svarut/svarinn-mottakservice/">
            SvarInn - Mottaksservice
          </a>
        </div>
    </li>
      <li data-nav-id="/svarut/svarut-svarinn-adressering/" class="dd-item">
        <div>
          <a href="/svarut/svarut-svarinn-adressering/">
            SvarUt - SvarInn adressering
          </a>
        </div>
    </li>
      <li data-nav-id="/svarut/testmiljo/" class="dd-item">
        <div>
          <a href="/svarut/testmiljo/">
            SvarUt Testmiljø
          </a>
        </div>
    </li>
      <li data-nav-id="/svarut/endringer/" class="dd-item">
        <div>
          <a href="/svarut/endringer/">
            SvarUt endringer
          </a>
        </div>
    </li>
        </ul>
    </li>



        <section id="shortcuts">
                <li class="" role=""><h3>More</h3><a href="https://github.com/ks-no/ks-no.github.io" target="_blank" rel="noopener"><i class='fa fa-github'></i> <label>Github repo</label></a></li>
                <li class="" role=""><a href="/index.xml" target="_blank" rel="noopener"><img src='/images/feed-icon-28x28.png'></a></li>
        </section>

    <hr />
    <li></li>
    
    </ul>

 <section id="footer">
    </section>
  </div>
</nav>



<section id="body">
<div id="overlay"></div>
<div class="padding highlightable">

  <div id="top-bar">
    
      
      
      
    <div id="top-github-link">
      <a class="github-link" href="https://github.com/ks-no/ks-no.github.io/edit/source/content/fiks-platform/tjenester_under_utvikling/digisos.md" target="blank">
        <i class="fa fa-code-fork"></i>
        
      </a>
    </div><div id="breadcrumbs" itemscope="" itemtype="http://data-vocabulary.org/Breadcrumb">
        <span id="sidebar-toggle-span">
          <a href="#" id="sidebar-toggle" data-sidebar-toggle="">
            <i class="fa fa-bars"></i>
          </a>
        </span>
        <span id="toc-menu"><i class="fa fa-list-alt"></i></span>
        <span class="links">
        










 <a href='/'>KS Fiks dokumentasjon</a> > <a href='/fiks-platform/'>Fiks-plattformen</a> > <a href='/fiks-platform/tjenester_under_utvikling/'>Tjenester under utvikling</a> > Digisos

 

 

 

   
        </span>
    </div>
    
    
    <div class="progress">
        <div class="wrapper">
    <nav id="TableOfContents">
<ul>
<li>
<ul>
<li><a href="#sikkerhet">Sikkerhet</a></li>
<li><a href="#flyt">Flyt</a></li>
<li><a href="#integrasjonsutvikling-fagsystem">Integrasjonsutvikling Fagsystem</a>
<ul>
<li><a href="#fiks-io-meldingsprotokoll">Fiks IO meldingsprotokoll</a>
<ul>
<li><a href="#til-fagsystem-mottak-av-søknad-og-ettersendelse">Til fagsystem - mottak av søknad og ettersendelse</a></li>
<li><a href="#fra-fagsystem-kvittering-på-mottatt-søknad-og-ettersendelse">Fra fagsystem - kvittering på mottatt søknad og ettersendelse</a></li>
</ul></li>
<li><a href="#sak-oppdatering-fra-fagsystem">Sak oppdatering fra Fagsystem</a></li>
</ul></li>
<li><a href="#integrasjonsutvikling-for-nav">Integrasjonsutvikling (for NAV)</a></li>
<li><a href="#innsending-av-søknad">Innsending av søknad</a></li>
</ul></li>
</ul>
</nav>
        </div>
    </div>
    

  </div>


<div id="body-inner">
  
    <h1>Digisos</h1>
  



    
    
    
    

<p><strong>STATUS: under utvikling</strong></p>

<p>Fiks Digisos er en tjeneste for å tilrettelegge for kommunal behandling av sosialsøknader via et brukergrensesnitt på nav.no.</p>

<p>Fiks Digisos tilbyr:</p>

<ul>
<li>Enkelt oppsett for den enkelte kommune gjennom Fiks Konfigurasjon</li>
<li>Innbygger får fortløpende oppdatering på saksgang, tilgjengelig både gjennom Fiks Innsyn og på nav.no.</li>
<li>Innbygger får tilgang til alle dokumenter og mulighet til å sende inn nye søknader basert på data fra tidligere søknader.</li>
<li>Ansatte/brukerstøtte i nav kan se utvalgte deler av saken via nav sine systemer.</li>
</ul>

<h2 id="sikkerhet">Sikkerhet</h2>

<p>Systemet er lagt opp slik at NAV ikke trenger å lagre data, disse fjernes fra Navs systemer når søknaden sendes til Fiks. All tilstand lagres dermed på Fiks plattformen og hos kommunen. Innsending av søknad kan utelukkende gjøres med brukerens ID-Porten autentisering.</p>

<p>Kommunikasjonen mellom aktørene (Nav, Fiks, fagsystem) foregår med SSL kryptering, i tillegg er alle dokumenter kryptert med mottakers nøkkel. Nav krypterer med Fiks sin nøkkel, Fiks krypterer med fagsystemets, og fagsystemet vil igjen bruke fiks-nøkkelen.</p>

<p>Dokument og melding i Fiks Innsyn er utelukkende tilgjengelig for innbygger, dette gjelder også bruker-delen av den generelle metadataen som er lagret i Fiks Digisos. Et begrenset utvalg av metadata er også tilgjengelig for NAV ansatte. Uthenting av disse krever autentisering med NAVs virksomhetssertifikat og integrasjonslogin, og alle slike spørringer logges i Fiks Audit. Ansvaret for den videre autorisering av den enkelte NAV-ansatte ligger hos NAV.</p>

<h2 id="flyt">Flyt</h2>

<ol>
<li>Innbygger fyller ut søknad om sosialstønad på nav.no, som sender denne til Fiks Digisos gjennom et synkront http api.</li>
<li>Fiks Digisos mottar søknaden.

<ol>
<li>Søknadsfilen legges i Fiks Dokumentlager, og innbyggeren autoriseres for tilgang.</li>
<li>Fiks Digisos henter valgt leveransekanal for søknaden fra kommunens konfigrasjon, enten anbefalt kanal 2a) Fiks IO med SvarUt som alternativ eller 2b) Bare SvarUt.

<ul>
<li>a. Fiks IO - Det gjøres oppslag i Fiks IO Kontokatalog for å se om det finnes en mottaker som støtter mottak av digisos-meldinger til kommunen. Dersom det støttes, gjøres et kall mot Fiks IO, hvor filen blir validert og sendt til mottakeren. Dersom digisos-meldinger ikke støttes vil søknaden bli sendt til SvarUt.</li>
<li>b. SvarUt - Søknaden sendes til SvarUt enten fordi den er valgt som eneste leveransekanal, eller fordi kommunen ikke kan motta digisos-meldinger gjennom Fiks IO (se punkt 6).</li>
</ul></li>
<li>Hvis punktene over blir gjennomført ok opprettes en digisos-melding i Fiks Innsyn. Denne autoriseres for innbyggeren.</li>
<li>Fiks returnerer 202 ACCEPTED på http-kallet fra NAV. Dette markerer ansvarsoverføring fra NAV til Fiks, som fra nå garanterer at saken leveres til kommune for behandling.</li>
</ol></li>
<li>Kommunen mottar meldingen gjennom Fiks IO. Den vil være tilgjengelig i køen i en fastsatt periode. Om kommunen ikke bekrefter mottak før denne perioden går ut vil meldingen bli trukket og alternativ kanal benyttes (se punkt 6).</li>
<li>Søknanded opprettes i kommunalt fagsystem.</li>
<li>Det kommunale fagsystemet bekrefter mottak av søknaden og oppdaterer status i Fiks Digisos.

<ol>
<li>Evt. nye filer legges i Fiks Dokumentlager, autorisert for innbygger.</li>
<li>Digisos saken i Fiks Innsyn oppdateres</li>
<li>Saken er tilgengelig for nav.no og nav ansatte/brukerstøtte.</li>
</ol></li>
<li>Om fagsystemet avviser eller unnlater å bekrefte mottak av saken via Fiks IO vil SvarUt benyttes som alternativ kanal, der det inkluderes en fil som inneholder både NAV og Fiks Digisos sin id for saken. I praksis betyr dette at meldingen blir sendt til kommunens Altinn-konto, evt. sendt til print og postlagt.<br /></li>
</ol>

<p><img src="/images/fiks_digisos.png" alt="fiks_digisos" title="Fiks Digisos" /></p>

<h2 id="integrasjonsutvikling-fagsystem">Integrasjonsutvikling Fagsystem</h2>

<p>For generell integrasjonsutvikling mot Fiks, se <a href="/fiks-platform/integrasjoner/">Integrasjonsutvikling</a>. Fagsystemet må da bruke Integrasjon som autentiseringsmetode.</p>

<p>For at fagsystemet skal få tilgang til Digisos-api-et for en kommune, må kommunen først konfigurere og aktivere Digisos gjennom Fiks Konfigurasjon der man også gir fagsystemet sin integrasjon tilgang til Digisos.</p>

<h3 id="fiks-io-meldingsprotokoll">Fiks IO meldingsprotokoll</h3>

<p>Ved bruk av Fiks IO som leveringskanal må fagsystemet støtte meldingsprotokollen <code>no.nav.digisos.fagsystem.v1</code>, som er definert for bruk av Digisos-meldinger, som inneholder kontrakter i form av json-schema som gjelder både for mottak og svar på Fiks IO meldinger. Fagsystemet må derfor støtte meldingstypene for denne protokollen, for mottak og sending av meldinger for både søknader og ettersendelser:</p>

<h4 id="til-fagsystem-mottak-av-søknad-og-ettersendelse">Til fagsystem - mottak av søknad og ettersendelse</h4>

<p>For ny søknad, <code>no.nav.digisos.soknad.v1</code>, som definert i <a href="https://github.com/ks-no/fiks-io-meldingstype-katalog/tree/test/schema/no.nav.digisos.soknad.v1">json-skjema for søknad</a>.<br />
For ettersendelse, <code>no.nav.digisos.ettersendelse.v1</code>, som definert i <a href="https://github.com/ks-no/fiks-io-meldingstype-katalog/tree/test/schema/no.nav.digisos.ettersendelse.v1">json-skjema for ettersendelse</a>.</p>

<h4 id="fra-fagsystem-kvittering-på-mottatt-søknad-og-ettersendelse">Fra fagsystem - kvittering på mottatt søknad og ettersendelse</h4>

<p>For ny søknad, <code>no.nav.digisos.soknad.mottatt.v1</code>, med tom body.<br />
For ettersendelse, <code>no.nav.digisos.ettersendelse.mottatt.v1</code>, med tom body.</p>

<h3 id="sak-oppdatering-fra-fagsystem">Sak oppdatering fra Fagsystem</h3>

<p>Sak oppdaterings api <a href="https://editor.swagger.io/?url=https://ks-no.github.io/api/digisos-sak-api-v1.json">(api-spec)</a></p>

<p>Bruker filformatet for digisos-soker.json, som definert her: <a href="https://navikt.github.io/soknadsosialhjelp-filformat/#/data%20fra%20fagsystem/getdigisos_soker_json">soknadsosialhjelp-filformat
</a>.</p>

<ul>
<li>Filer må lastes opp på forhånd, da digisos-soker.json inneholder referanse-id til dokumentene som kan linkes til søkeren, som gjelder både for filer som lastes opp til Dokumentlager via Digios-api (som beskrevet under) eller som er <a href="https://ks-no.github.io/svarut/integrasjon/forsendelsesservicev10/">sendt via SvarUt</a>.</li>
<li>Når en sakoppdatering skjer, må derfor alle filer være tilgjenglige på saken.</li>
<li>Filer som ikke lenger skal ligge på sak, kan fjernes etter at sakoppdatering uten filene er lastet opp.</li>
<li>Fagsystemet må ha kontroll på listen med filer og sjekke at denne er korrekt.</li>
<li>Når en sakoppdatering skjer, må saken eksistere i digisos, enten fordi skjema fra nav er sendt via Digisos eller at fagsystem har opprettet en sak.</li>
<li>Hver sakoppdatering inneholder en komplett historikk av alle tidligere hendelser, og vil alltid overskrive tidligere sakoppdatering lagret i Fiks.</li>
</ul>

<p><strong>Opplasting av filer</strong></p>

<p>Før en sakoppdatering, må alle refererte filer være lastet opp på forhånd.</p>

<p>Filer lastes opp til Fiks Digisos ved bruk av en multipart streaming request, der man spesifiserer HTTP-headeren &ldquo;Transfer-Encoding&rdquo; til å sende data i chunks, <code>Transfer-Encoding: chunked</code>.</p>

<p>Alle filene må krypteres før opplasting, med public-key fra Fiks som kan hentes fra endepunktet <code>/digisos/api/v1/dokumentlager-public-key</code>.
Fiks tilbyr en referanseimplementasjon av hvordan en slik request skal defineres, som krypterer alle filene og som kan brukes for filopplasting: <a href="https://github.com/ks-no/fiks-digisos-klient">https://github.com/ks-no/fiks-digisos-klient</a>.</p>

<p>URL-stien til filopplasting er <code>/digisos/api/v1/{fiksOrgId}/{digisosId}/filer</code>, der <code>{fiksOrgId}</code> og <code>{digososId}</code> er FiksOrgId-en og FiksDigisosId-en som filene skal legges til.</p>

<p>Endepunktet tar inn en liste, der man for hver fil som skal lastes opp legger til en metadata-blokk som inneholder informasjon om filen og en base64-encodet blokk som inneholder selve filen.
Metadata består av filnavn på filen (<em>filnavn</em>), type (<em>mimetype</em>) og størrelse på filen i bytes (<em>storrelse</em>), der metadata-blokken er av typen &ldquo;application/json&rdquo;. Alle felter må oppgis.</p>

<p>Eksempel på metadata-blokk:</p>

<pre><code>{
    &quot;filnavn&quot;: &quot;test.pdf&quot;,
    &quot;mimetype&quot;: &quot;application/pdf&quot;,
    &quot;storrelse&quot; : 1024
}   
</code></pre>

<p><strong><em>Returtype</em></strong>
<br />
Ved en vellykket opplasting får man tilbake en liste av dokumentmetadata som inneholder filnavn, unik referanse (UUID) til Fiks-Dokumentlager, og størrelse på filen.</p>

<p>Eksempel:</p>

<pre><code>200 OK
{
    [
        {
            &quot;filnavn&quot;: &quot;test.pdf&quot;,
            &quot;dokumentlagerDokumentId&quot;: &quot;ab35e9088-bcfa-4096-ba68-f07777ed167c&quot;,
            &quot;storrelse&quot; : 1024
        }
    ]
}
</code></pre>

<p>Ved feil ved opplasting får man 400 Bad Request når multipart-requesten ikke er definert med riktige data.</p>

<h2 id="integrasjonsutvikling-for-nav">Integrasjonsutvikling (for NAV)</h2>

<p>For generell integrasjonsutvikling mot Fiks, se <a href="/fiks-platform/integrasjoner/">Integrasjonsutvikling</a></p>

<h2 id="innsending-av-søknad">Innsending av søknad</h2>

<p>Soknad api <a href="https://editor.swagger.io/?url=https://ks-no.github.io/api/digisos-api-v1.json">(api-spec)</a></p>

<p>For innsending av søknad/ettersendelse brukes person-integrasjon autentisering med OIDC, se <a href="/fiks-platform/integrasjoner/">Integrasjonsutvikling</a> for mer detaljer.</p>

<p><strong>Innsending av ny søknad</strong></p>

<p>Innsending av ny søknad til Fiks Digisos bruker multipart streaming request, på lik linje som opplasting av filer for fagsystemene, der man spesifiserer HTTP-headeren &ldquo;Transfer-Encoding&rdquo; til å sende data i chunks, <code>Transfer-Encoding: chunked</code>.</p>

<p>URL-stien til ny søknad er <code>/digisos/api/v1/soknader/{kommunenummer}/{navEkseternRefId}</code>, der <code>{kommunenummer}</code> er kommunenummer søknaden skal sendes til og <code>{navEkseternRefId}</code> er en unik id fra NAV for søknaden.</p>

<p>Endepunktet tar inn påkrevde felter for innsending av en ny søknad, som består av metadataene soknad.json (json-encodet String) og vedlegg.json (json-encodet String), samt filen soknad.pdf (metadata + base64-encodet blokk) pluss eventuelle vedlegg (metadata + base64-encodet blokk). Disse dataene må da være definert i denne rekkefølgen i multipart requesten.</p>

<p>For hver fil som skal lastes opp (soknad.pdf og hvert vedlegg) legger man til en metadata-blokk som inneholder informasjon om filen og en base64-encodet blokk som inneholder selve filen. Base64-blokkene må også være kryptert med public key til Fiks Dokumentlager, som blir eksponert via endepunktet <code>/digisos/api/v1/dokumentlager-public-key</code>, på lik linje med kryptering av filer for for fagsystemene, som definert i Fiks Digisos klienten.
<br />
Metadata består av filnavn på filen (<em>filnavn</em>), type (<em>mimetype</em>) og størrelse på filen i bytes (<em>storrelse</em>), der metadata-blokken er av typen &ldquo;application/json&rdquo;. Alle felter må oppgis.</p>

<p>Eksempel på metadata-blokk, som må defineres for hver fil:</p>

<pre><code>{
    &quot;filnavn&quot;: &quot;soknad.pdf&quot;,
    &quot;mimetype&quot;: &quot;application/pdf&quot;,
    &quot;storrelse&quot; : 1024
}   
</code></pre>

<p>Innholdet i en request vil da kunne bestå av:</p>

<pre><code>soknadJson, vedleggJson, metadata + soknad.pdf, metadata + vedlegg1.pdf, metadata + vedlegg2.pdf
</code></pre>

<p><strong><em>Returtype</em></strong>
<br />
Ved en vellykket innsending får man tilbake <code>202 ACCEPTED</code> og en unik Fiks DigisosId (UUID) som er ID-en til opprettet søknad i Fiks Digisos.</p>

<p>Ved feil ved opplasting får man 400 Bad Request når multipart-requesten ikke er definert med riktige data.</p>

<p><strong>Innsending av ny ettersendelse</strong></p>

<p>Innsending av ny ettersendelse til Fiks Digisos bruker også multipart streaming request.</p>

<p>URL-stien til ny ettersendelse er <code>/digisos/api/v1/soknader/{kommunenummer}/{soknadId}/{navEkseternRefId}</code>, der <code>{kommunenummer}</code> er kommunenummer søknaden tilhører, <code>{soknadId}</code> er Fiks DigisosId-en for søknaden det skal ettersendes til og <code>{navEkseternRefId}</code> er en unik id fra NAV for denne ettersendelsen.</p>

<p>Endepunktet tar inn påkrevde felter for innsending av en ny ettersendelse, som består av metadataen vedlegg.json (String), samt en liste med vedlegg (metadata + base64-encodet blokk). Base64-blokkene for filene må krypteres på lik linje som for ny søknad.</p>

<p>For hvert vedlegg som skal lastes opp legger man til en metadata-blokk som inneholder informasjon om filen (samme som innsending av ny søknad) og en base64-encodet blokk som inneholder selve filen.</p>

<p><strong><em>Returtype</em></strong>
<br />
Det er ingen returtype på dette endepunktet.</p>

<p>Ved feil ved opplasting får man 400 Bad Request når multipart-requesten ikke er definert med riktige data.</p>


    
    
          <footer class=" footline" >
	
</footer>
  </div>
</div>

<div id="navigation">
</div>

</section>
<div style="left: -1000px; overflow: scroll; position: absolute; top: -1000px; border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;">
  <div style="border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;"></div>
</div>    

<script src="/js/clipboard.min.js"></script>
<script src="/js/featherlight.min.js"></script>
<script src="/js/html5shiv-printshiv.min.js"></script>

<script src="/js/modernizr.custom.71422.js"></script>
<script src="/js/docdock.js"></script>
<script src="/theme-original/script.js"></script>


    

    
    

    
  </body>
</html>
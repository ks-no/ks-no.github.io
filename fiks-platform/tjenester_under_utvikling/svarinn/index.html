<!DOCTYPE html>
<html>
  <head>
    <title>KS Fiks</title>
    
      <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<meta name="revised" content="2019-02-13T12:02:13 CET">
<title>SvarInn 2 :: KS Fiks</title>
<link rel="shortcut icon" href="/images/favicon.png" type="image/x-icon" />
<link href="/css/nucleus.css" rel="stylesheet">
<link href="/css/font-awesome.min.css" rel="stylesheet">
<link href="/css/hybrid.css" rel="stylesheet">
<link href="/css/featherlight.min.css" rel="stylesheet">
<link href="/css/auto-complete.css" rel="stylesheet">
<link href="/theme-original/style.css" rel="stylesheet">

<link rel="stylesheet" href="/css/bootstrap.min.css">
<script src="/js/jquery-2.x.min.js"></script>
<style type="text/css">
  :root #header + #content > #left > #rlblock_left {
    display:none !important;
  }
</style>
<meta name="description" content="">


    
  </head>
  <body data-url="/fiks-platform/tjenester_under_utvikling/svarinn/">
    
      <div id="headermain"></div>
<nav id="sidebar" class="">



<div class="highlightable">
  <div id="header-wrapper">
    <div id="header">
      
	
  
    <p><img src="/images/ks-logo.svg" width="30%"></p>

  


    </div>
        <div class="searchbox">
		    <label for="search-by"><i class="fa fa-search"></i></label>
		    <input data-search-input id="search-by" type="text" placeholder="">
		    <span data-search-clear=""><i class="fa fa-close"></i></span>
		</div>
		<script type="text/javascript" src="/js/lunr.min.js"></script>
		<script type="text/javascript" src="/js/auto-complete.js"></script>
		<script type="text/javascript">
        
            var baseurl = "\/";
        
		</script>
		<script type="text/javascript" src="/js/search.js"></script>
  </div>

      <ul class="topics">
            <li data-nav-id="/" class="dd-item">
            <a href="/"><i class="fa fa-fw fa-home"></i></a>
            </li>
    <li data-nav-id="/fiks-platform/" class="dd-item parent haschildren
        ">
      <div>
      <a href="/fiks-platform/">Fiks-plattformen</a>
            <i class="fa fa-angle-down fa-lg category-icon"></i>
      </div>
        <ul>
      <li data-nav-id="/fiks-platform/integrasjoner/" class="dd-item">
        <div>
          <a href="/fiks-platform/integrasjoner/">
            Integrasjonsutvikling
          </a>
        </div>
    </li>
      <li data-nav-id="/fiks-platform/konfigurasjon/" class="dd-item">
        <div>
          <a href="/fiks-platform/konfigurasjon/">
            Konfigurasjon
          </a>
        </div>
    </li>
      <li data-nav-id="/fiks-platform/sikkerhet/" class="dd-item">
        <div>
          <a href="/fiks-platform/sikkerhet/">
            Sikkerhet og personvern
          </a>
        </div>
    </li>
      <li data-nav-id="/fiks-platform/testmiljo/" class="dd-item">
        <div>
          <a href="/fiks-platform/testmiljo/">
            Testmiljø
          </a>
        </div>
    </li>
    <li data-nav-id="/fiks-platform/tjenester/" class="dd-item haschildren
        ">
      <div>
      <a href="/fiks-platform/tjenester/">Tjenester</a><i class="fa fa-angle-right fa-lg category-icon"></i>
      </div>
        <ul>
      <li data-nav-id="/fiks-platform/tjenester/dokumentlager/" class="dd-item">
        <div>
          <a href="/fiks-platform/tjenester/dokumentlager/">
            Dokumentlager
          </a>
        </div>
    </li>
      <li data-nav-id="/fiks-platform/tjenester/fullmakt/" class="dd-item">
        <div>
          <a href="/fiks-platform/tjenester/fullmakt/">
            Fullmakt
          </a>
        </div>
    </li>
      <li data-nav-id="/fiks-platform/tjenester/innsyn/" class="dd-item">
        <div>
          <a href="/fiks-platform/tjenester/innsyn/">
            Innsyn
          </a>
        </div>
    </li>
      <li data-nav-id="/fiks-platform/tjenester/minside/" class="dd-item">
        <div>
          <a href="/fiks-platform/tjenester/minside/">
            Minside
          </a>
        </div>
    </li>
        </ul>
    </li>
    <li data-nav-id="/fiks-platform/tjenester_under_utvikling/" class="dd-item parent haschildren
        ">
      <div>
      <a href="/fiks-platform/tjenester_under_utvikling/">Tjenester under utvikling</a>
            <i class="fa fa-angle-down fa-lg category-icon"></i>
      </div>
        <ul>
      <li data-nav-id="/fiks-platform/tjenester_under_utvikling/audit/" class="dd-item">
        <div>
          <a href="/fiks-platform/tjenester_under_utvikling/audit/">
            Audit
          </a>
        </div>
    </li>
      <li data-nav-id="/fiks-platform/tjenester_under_utvikling/digisos/" class="dd-item">
        <div>
          <a href="/fiks-platform/tjenester_under_utvikling/digisos/">
            Digisos
          </a>
        </div>
    </li>
      <li data-nav-id="/fiks-platform/tjenester_under_utvikling/samtykke/" class="dd-item">
        <div>
          <a href="/fiks-platform/tjenester_under_utvikling/samtykke/">
            Samtykke
          </a>
        </div>
    </li>
      <li data-nav-id="/fiks-platform/tjenester_under_utvikling/svarinn/" class="dd-item active">
        <div>
          <a href="/fiks-platform/tjenester_under_utvikling/svarinn/">
            SvarInn 2
          </a>
        </div>
    </li>
        </ul>
    </li>
      <li data-nav-id="/fiks-platform/utviklingsmetodikk/" class="dd-item">
        <div>
          <a href="/fiks-platform/utviklingsmetodikk/">
            Utviklingsfilosofi
          </a>
        </div>
    </li>
        </ul>
    </li>
    <li data-nav-id="/svarut/" class="dd-item haschildren
        ">
      <div>
      <a href="/svarut/">SvarUt</a><i class="fa fa-angle-right fa-lg category-icon"></i>
      </div>
        <ul>
      <li data-nav-id="/svarut/edialog/" class="dd-item">
        <div>
          <a href="/svarut/edialog/">
            Edialog
          </a>
        </div>
    </li>
    <li data-nav-id="/svarut/integrasjon/" class="dd-item haschildren
        ">
      <div>
      <a href="/svarut/integrasjon/">Integrasjon mot SvarUt</a><i class="fa fa-angle-right fa-lg category-icon"></i>
      </div>
        <ul>
      <li data-nav-id="/svarut/integrasjon/forsendelseservicev1/" class="dd-item">
        <div>
          <a href="/svarut/integrasjon/forsendelseservicev1/">
            ForsendelseServiceV1
          </a>
        </div>
    </li>
      <li data-nav-id="/svarut/integrasjon/forsendelseservicev2/" class="dd-item">
        <div>
          <a href="/svarut/integrasjon/forsendelseservicev2/">
            ForsendelseServiceV2
          </a>
        </div>
    </li>
      <li data-nav-id="/svarut/integrasjon/forsendelseservicev3/" class="dd-item">
        <div>
          <a href="/svarut/integrasjon/forsendelseservicev3/">
            ForsendelseServiceV3
          </a>
        </div>
    </li>
      <li data-nav-id="/svarut/integrasjon/forsendelseservicev4/" class="dd-item">
        <div>
          <a href="/svarut/integrasjon/forsendelseservicev4/">
            ForsendelseServiceV4
          </a>
        </div>
    </li>
      <li data-nav-id="/svarut/integrasjon/forsendelseservicev5/" class="dd-item">
        <div>
          <a href="/svarut/integrasjon/forsendelseservicev5/">
            ForsendelseServiceV5
          </a>
        </div>
    </li>
      <li data-nav-id="/svarut/integrasjon/forsendelseservicev6/" class="dd-item">
        <div>
          <a href="/svarut/integrasjon/forsendelseservicev6/">
            ForsendelseServiceV6
          </a>
        </div>
    </li>
      <li data-nav-id="/svarut/integrasjon/forsendelseservicev7/" class="dd-item">
        <div>
          <a href="/svarut/integrasjon/forsendelseservicev7/">
            ForsendelseServiceV7
          </a>
        </div>
    </li>
      <li data-nav-id="/svarut/integrasjon/forsendelseservicev8/" class="dd-item">
        <div>
          <a href="/svarut/integrasjon/forsendelseservicev8/">
            ForsendelseServiceV8
          </a>
        </div>
    </li>
      <li data-nav-id="/svarut/integrasjon/forsendelseservicev9/" class="dd-item">
        <div>
          <a href="/svarut/integrasjon/forsendelseservicev9/">
            ForsendelseServiceV9
          </a>
        </div>
    </li>
      <li data-nav-id="/svarut/integrasjon/forsendelsesservicev10/" class="dd-item">
        <div>
          <a href="/svarut/integrasjon/forsendelsesservicev10/">
            ForsendelsesServiceV10
          </a>
        </div>
    </li>
      <li data-nav-id="/svarut/integrasjon/kodeeksempeldotnet/" class="dd-item">
        <div>
          <a href="/svarut/integrasjon/kodeeksempeldotnet/">
            Kodeeksempel .Net
          </a>
        </div>
    </li>
      <li data-nav-id="/svarut/integrasjon/kodeeksempeljava/" class="dd-item">
        <div>
          <a href="/svarut/integrasjon/kodeeksempeljava/">
            Kodeeksempel Java
          </a>
        </div>
    </li>
      <li data-nav-id="/svarut/integrasjon/kodeeksempelmottakerrest/" class="dd-item">
        <div>
          <a href="/svarut/integrasjon/kodeeksempelmottakerrest/">
            Kodeeksempel MottaksserviceV1
          </a>
        </div>
    </li>
      <li data-nav-id="/svarut/integrasjon/mottaksservice-rest/" class="dd-item">
        <div>
          <a href="/svarut/integrasjon/mottaksservice-rest/">
            MottakService v1
          </a>
        </div>
    </li>
        </ul>
    </li>
      <li data-nav-id="/svarut/konfigurasjon-av-svarut/" class="dd-item">
        <div>
          <a href="/svarut/konfigurasjon-av-svarut/">
            Konfigurasjon av SvarUT
          </a>
        </div>
    </li>
      <li data-nav-id="/svarut/signeringstjeneste/" class="dd-item">
        <div>
          <a href="/svarut/signeringstjeneste/">
            Signeringstjeneste
          </a>
        </div>
    </li>
      <li data-nav-id="/svarut/forsendelser-og-sikkerhet/" class="dd-item">
        <div>
          <a href="/svarut/forsendelser-og-sikkerhet/">
            Sikkerhet
          </a>
        </div>
    </li>
      <li data-nav-id="/svarut/svarinn-mottakservice/" class="dd-item">
        <div>
          <a href="/svarut/svarinn-mottakservice/">
            SvarInn - Mottaksservice
          </a>
        </div>
    </li>
      <li data-nav-id="/svarut/svarut-svarinn-adressering/" class="dd-item">
        <div>
          <a href="/svarut/svarut-svarinn-adressering/">
            SvarUt - SvarInn adressering
          </a>
        </div>
    </li>
      <li data-nav-id="/svarut/testmiljo/" class="dd-item">
        <div>
          <a href="/svarut/testmiljo/">
            SvarUt Testmiljø
          </a>
        </div>
    </li>
      <li data-nav-id="/svarut/endringer/" class="dd-item">
        <div>
          <a href="/svarut/endringer/">
            SvarUt endringer
          </a>
        </div>
    </li>
        </ul>
    </li>



        <section id="shortcuts">
                <li class="" role=""><h3>More</h3><a href="https://github.com/ks-no/ks-no.github.io" target="_blank" rel="noopener"><i class='fa fa-github'></i> <label>Github repo</label></a></li>
                <li class="" role=""><a href="/index.xml" target="_blank" rel="noopener"><img src='/images/feed-icon-28x28.png'></a></li>
        </section>

    <hr />
    <li></li>
    
    </ul>

 <section id="footer">
    </section>
  </div>
</nav>



<section id="body">
<div id="overlay"></div>
<div class="padding highlightable">

  <div id="top-bar">
    
      
      
      
    <div id="top-github-link">
      <a class="github-link" href="https://github.com/ks-no/ks-no.github.io/edit/source/content/fiks-platform/tjenester_under_utvikling/svarInn.md" target="blank">
        <i class="fa fa-code-fork"></i>
        
      </a>
    </div><div id="breadcrumbs" itemscope="" itemtype="http://data-vocabulary.org/Breadcrumb">
        <span id="sidebar-toggle-span">
          <a href="#" id="sidebar-toggle" data-sidebar-toggle="">
            <i class="fa fa-bars"></i>
          </a>
        </span>
        <span id="toc-menu"><i class="fa fa-list-alt"></i></span>
        <span class="links">
        










 <a href='/'>KS Fiks dokumentasjon</a> > <a href='/fiks-platform/'>Fiks-plattformen</a> > <a href='/fiks-platform/tjenester_under_utvikling/'>Tjenester under utvikling</a> > SvarInn 2

 

 

 

   
        </span>
    </div>
    
    
    <div class="progress">
        <div class="wrapper">
    <nav id="TableOfContents">
<ul>
<li>
<ul>
<li>
<ul>
<li><a href="#forhold-til-svarut">Forhold til SvarUt</a></li>
<li><a href="#konfigurasjon-og-adresser">Konfigurasjon og adresser</a></li>
<li><a href="#adresse-oppslag">Adresse-oppslag</a></li>
<li><a href="#sending-og-mottak">Sending og mottak</a></li>
<li><a href="#sikkerhet">Sikkerhet</a></li>
<li><a href="#klienter">Klienter</a></li>
</ul></li>
</ul></li>
</ul>
</nav>
        </div>
    </div>
    

  </div>


<div id="body-inner">
  
    <h1>SvarInn 2</h1>
  



    
    
    
    

<p><strong>STATUS: under utvikling</strong></p>

<p>SvarInn er en kanal for sikker maskin-til-maskin integrasjon. Denne kommer nå i ny versjon: vi har flyttet den eksistende SvarInn tjenesten over på Fiks Plattformen, og frikoblet den fra SvarUt. Det er nå mulig å sende direkte til SvarInn. Dette åpner mange muligheter:</p>

<ul>
<li><em>Rask leveranse</em>: ved hjelp av meldingskø-basert arkitektur kan SvarInn nå levere meldinger mye raskere, under ett sekund plus eventuelt overføring av data. Dette oppnås ved at meldinger nå sendes til det mottakende fagystemet i det øyeblikket de ankommer, i stede for at fagsystemet må hente meldingen.</li>
<li><em>Kvitteringer</em>: avsender vil motta kvitteringer fra mottaker, slik at man vet om meldingen man sendte faktisk ble behandlet. Mottaker kan også sende et utvidet svar på en mottatt melding.</li>
<li><em>Sikker kommunikasjon med ende-til-ende kryptering</em>: SvarInn2 meldinger vil som default være ende-til-ende kryptert med mottakers offentlige nøkkel.</li>
<li><em>Sikker identifisering av avsender</em>: Standard for kryptografisk signatur på meldinger gjør at man kan være sikker på identiteten til avsender.</li>
<li><em>Støtte for ulike typer identifikatorer</em>: I den orginale versjonen av SvarInn bestod en adresse av en organisasjonsnummer-meldingtype-sikkerhetsnivå kombinasjon. Den første bestanddelen kan nå være ulike typer identifikatorer, initielt er organisasjonsnummer og nav-enhet-id støttet.</li>
</ul>

<p>Alle ekisterende grensesnitt for å hente meldinger blir videreført, men merk at disse ikke gir fullt utbytte av sikkerhet- og ytelses-fordelene i SvarInn2.</p>

<p>Grunnleggende prinsipper fra den eksisterende SvarUt baserte plattformen blir heller ikke forandret: en organisasjon oppretter en <em>konto</em>, og legger til en eller flere <em>adresser</em>, som hver består av en identifikator-meldingtype-sikkerhetsnivå kombinasjon. Disse adressene blir benyttet når andre organisasjoner gjør oppslag i konto-katalogen. Identifikatoren i adressen kan være av forskjellige typer, hittil støttes organisajonsnummer og nav-enhet-id.</p>

<h3 id="forhold-til-svarut">Forhold til SvarUt</h3>

<p>SvarInn er nå en selvstendig kanal, men den vil fortsatt benyttes som meldingskanal i SvarUt, basert på samme prinsipper som tidligere: hvis identifikator (organisasjonsnummer), meldingstype og nivå gir treff i SvarInns adressekatalog vil den aktuelle SvarInn kontoen brukes for å levere meldingen.</p>

<p>En viktig endring fra den tidligere flyten er at meldinger i SvarInn nå har en levetid: de ligger ikke på kontoen til evig tid, slik tilfellet er i dag. Når en meldings levetid er utgått, det vil si at den har ligget i kø uten å bli hentet i en viss periode, vil SvarUt sende meldingen via alternativ kanal: for eksempel Altinn eller post.</p>

<p>Dette leder oss inn på et viktig spørsmål: skal man bruke SvarInn eller SvarUt for å integrere to systemer? Tabellen under forsøker å svare på dette:</p>

<p>*<em>Ønsker man å unngå at meldingen kan bli sendt i post?</em> Benytt SvarInn, denne leverer utelukkende til spesifisert mottakerkonto og benytter ingen alternative kanaler.
*<em>Skal meldingen sikres gjennom ende-til-ende kryptering?</em> Benytt SvarInn, SvarUt meldinger kan bare krypteres med Fiks plattformens nøkkel, ikke mottakers.
*<em>Trenger man rask levering?</em> Benytt SvarInn for å få leveranse på sekunder, ved bruk av SvarUt kan det ta flere dager å levere en melding, siden SvarUt prøver ulike kanaler etter tur.
*<em>Vil man at fiks-plattformen skal garantere at meldingen blir levert?</em> Benytt SvarUt, ved SvarInn forsendelser risikerer man at meldingen ikke blir håndtert eller avvist av mottaker.</p>

<h3 id="konfigurasjon-og-adresser">Konfigurasjon og adresser</h3>

<p>SvarInn settes nå opp gjennom Fiks Konfigurasjon, det er også her man konfigurerer kontoer, spesifiserer adresser, og styrer autorisasjoner. Både personer og integrasjoner må autoriseres før de kan sende meldinger fra en konto.</p>

<p>Man kan opprette flere kontoer, og hver konto kan ha en eller flere adresselinjer. En adresselinje består av en identifikator-melding-sikkerhetsnivå kombinasjon. Systemet vil verifisere at ingen kontoer har overlappende adresselinjer, også på tvers av Fiks organisasjoner.</p>

<p>For hver konto lastes det opp et virksomhetsertifikat. Dette sertifikatet benyttes for å kryptere meldinger sendt til konto, og kan også brukes (sammen med en privat nøkkel) for å signere meldinger sendt fra kontoen.</p>

<h3 id="adresse-oppslag">Adresse-oppslag</h3>

<p>For å sende en SvarInn melding må man vite konto-identifikatoren til kontoen man ønsker å sende til. Man kan få denne utlevert direkte fra mottaker, men i de fleste tilfeller vil det være nyttig å gjøre et oppslag mot SvarInn Katalog. Oppslaget består av identifikator-meldingtype-sikkerhetsnivå. Det første kan være et organisasjonsnummer eller nav-enhet-id (flere alternativer kan bli lagt til etter hvert), det andre meldingstypen man ønsker å sende, og det tredje er sikkerhetsnivået man ønsker at mottakeren skal behandle meldingstypen med.</p>

<h3 id="sending-og-mottak">Sending og mottak</h3>

<p>Meldinger sendes gjennom et REST api på Fiks Plattformen. Integrasjoner mot dette api&rsquo;et følger de samme reglene for autentisering og autorisering som andre integrasjoner på Fiks: integrasjonId, integrasjonPassord og et virksomhetsertifikat-basert Oauth2 token fra ID-Porten settes som headere på forespørselen, og den aktuelle integrasjonen må være autorisert for å sende meldinger fra den spesifiserte avsenderkontoen i Fiks Konfigurasjon.</p>

<p>På mottakssiden har man nå to alternativer. Man kan endten benytte det samme REST api&rsquo;et som man har brukt for å hente SvarInn 1 meldinger, eller man kan integrere via <a href="https://en.wikipedia.org/wiki/Advanced_Message_Queuing_Protocol">AMQP</a> mot Fiks Plattformens <a href="https://www.rabbitmq.com/RabbitMQ">RabbitMQ</a> baserte køsystem. Den siste løsningen er anbefalt, hovedsakelig på grunn av ytelsesforbedringen bruk av push teknologi vil gi.</p>

<h3 id="sikkerhet">Sikkerhet</h3>

<p>I utgangspunktet legger ikke SvarInn2 føringer på hvordan (eller om) en melding sendt over plattformen sikres, men alle klienter som utvikles av KS, og alle meldingstyper som Fiks spesifiserer, vil benytte signerte, ende-til-ende krypterte meldinger gjennom <a href="https://github.com/difi/asic">ASIC-E</a> containere. Denne standarden benyttes også av DIFI i forbindelse med integrasjonspunktet.</p>

<h3 id="klienter">Klienter</h3>

<p>For å gjøre integrasjon lettere vil KS utvikle klienter som benyttes for både sending og mottak av meldinger fra Fiks SvarInn. Først ut er en <a href="https://github.com/ks-no/fiks-svarinn2-klient-java">java-klient</a>, men det er også planlagt en .net implentasjon av denne. Andre språk vil vurderes, og vi vil gjerne høre fra deg om det blir jobbet med selvstendig utvikling av klienter.</p>

<p><img src="/images/fiks_svarinn.png" alt="fiks_svarinn" title="Fiks SvarInn" /></p>


    
    
          <footer class=" footline" >
	
</footer>
  </div>
</div>

<div id="navigation">
</div>

</section>
<div style="left: -1000px; overflow: scroll; position: absolute; top: -1000px; border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;">
  <div style="border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;"></div>
</div>    

<script src="/js/clipboard.min.js"></script>
<script src="/js/featherlight.min.js"></script>
<script src="/js/html5shiv-printshiv.min.js"></script>

<script src="/js/modernizr.custom.71422.js"></script>
<script src="/js/docdock.js"></script>
<script src="/theme-original/script.js"></script>


    

    
    

    
  </body>
</html>
[
{
	"uri": "/tjenester/",
	"title": "Tjenester",
	"tags": [],
	"description": "",
	"content": "I menyen til venstre finner du oversikt over tjenestene som vi tilbyr på fiks plattformen. Noen tjenester er gruppe tjenester som inneholder tjenester som tilhører samme kategori av tjenester. Det er spesielt ved signering av tjeneste vedlegg at dette gjør deg gjeldende da gruppetjenesten fungerer som tjenestevedlegg for alle tjenestene i gruppen.\n"
},
{
	"uri": "/tjenester/register/kontaktregisteret/",
	"title": "Kontaktregisteret",
	"tags": [],
	"description": "",
	"content": "Kort beskrivelse Kontaktregisteret, tidligere kontakt- og reservasjonsregisteret, er et register som inneholder kontaktinformasjon for personer.\nHva må være på plass før man kan integrere Alle steg for å sette opp folkeregister er nødvendig for å kunne integrere mot dette apiet, da folkeregister ligger i bunn for alle registertjenestene på fiksplattformen. Det må være satt opp en rolle for å få lov til å gjøre spørringer.\nMiljøer OpenAPI/Swagger og oppbygging av endepunkter** Miljø URL Test (Integrasjon) http​s://api.fiks.test.ks.no Produksjon http​s://api.fiks.ks.no Spec finner man her.\nKontakt Tekniske spørsmål og henvendelser kan rettes til fiks-utvikling@ks.no, øvrige henvendelser kan rettes til fiks@ks.no\n"
},
{
	"uri": "/tjenester/svarut/testmiljo/",
	"title": "SvarUt og SvarInn Testmiljø",
	"tags": [],
	"description": "",
	"content": "For å lage integrasjoner mot SvarUt kan en teste mot vårt testmiljø. Testmiljøet har ingen garantier for oppetid, men vi prøver at det er tilgjengelig hele tiden. Testmiljøet inneholder de siste endringene også endringer som ikke er produksjonsatt.\nTestmiljøet er tilgjengelig på https://test.svarut.ks.no/\nVi ønsker ikke sensitive data i testmiljøet. Vi ønsker primært at det blir benyttet data fra Tenor.\nTestbrukere Vi anbefaler at man bruker testbrukere fra Tenor: https://www.skatteetaten.no/skjema/testdata/. Her finner man både personer og organisasjoner\nFinne gyldig organisasjonsnummer med tilhørende daglig leder Logge inn i Tenor. For å finne daglig leder, er det enklest å søke etter personer som har rollen \u0026lsquo;Daglig leder\u0026rsquo; i seksjonen \u0026ldquo;Enhetsregisteret og Foretaksregisteret\u0026rdquo;. Da får man opp data som viser organisasjoner som er knyttet mot personer med rollen Daglig leder. Alternativt kan man, når man forsøker å logge inn i vårt testmiljø (https://test.svarut.ks.no/), bruke TestID som påloggingsmetode, og her velge \u0026lsquo;Hent tilfeldig daglig leder\u0026rsquo;. Dette vil gi fødselsnummer og organisasjonsnummer som kan brukes videre Print I test kan en velge Strålfors som printleverandør, men det vil kun simuleres at disse sendes print. Vi anbefaler derfor å bruke Manuell print og fra det grensesnittet sette forsendelser til printet.\nAltinn Altinn går i test mot deres tt02-testmiljø: https://tt02.altinn.no. Her kan dere lese meldinger sendt til testbrukere og testorganisasjoner.\nDigitale postkasser Digipost og e-Boks har egne testmiljøer:\nDigipost: https://difitest.digipost.no/\ne-Boks: https://demo2-www.e-boks.no/privat\nValg av digital postkasse gjøres i Kontakt- og reservasjonsregisteret på https://minprofil.test.kontaktregisteret.no/\nFor å sette opp en SvarUt-konto for Digital Post til innbygger må en bruke et organsisasjonsnummer som er satt opp riktig hos Digdir og Altinn. I testmiljøet kan man bruke KS sitt organisasjonsnummer, 971 032 146. Alternativt kan man legge inn egne organisasjonsnummer. En må gjennomføre samme prosess som når man skal sette opp et ekte organisasjonsnummer for å sende til digital postkasse:\nDet må sendes en epost til servicedesk hos Digdir med beskjed om at en ønsker å få på plass en avtale for Digital post for dette organisasjonsnummeret. Det må også delegeres rettigheter til KS slik at KS Digital kan sende på vegne av organisasjonsnummeret Logge inn i https://tt02.altinn.no med en bruker som har tilgang til organisasjonsnummeret (for eksempel en som har rolle Daglig leder) man skal delegere rettigheter til KS sitt organisasjonsnummer med Trykke på ikon for organisasjonsnummer og finne Innstillinger. Finne ‘Tilgang til programmeringsgrensesnitt - API’ og deretter \u0026lsquo;Gi og fjerne tilganger\u0026rsquo; Deleger nytt API Søk etter ‘Deleger rettighet til å sende DPI-meldinger på vegne av virksomheten’. Da får man opp at dette gjelder scope digitalpostinnbygger:send Trykk så på pluss-tegnet og deretter \u0026lsquo;Neste\u0026rsquo; Nå kan du søke opp KS sitt orgnummer: 971032146, når det er gjort kan du trykke \u0026lsquo;Neste\u0026rsquo; og til slutt \u0026lsquo;Lagre\u0026rsquo; SvarInn For å teste SvarInn må en registrere et organisasjonsnummer i mottakersystemet.\nFordi det kreves at den som legger inn et organisasjonsnummer på et mottakersystem, har tilgang til organisasjonen i Altinn, så må man finne et fødselsnummer som har tilgang til en organisasjon, og deretter finne organisasjonen som person er knytta mot. Et eksempel på person med en slik tilgang, er daglig leder for en organisasjon, se oppkrift over for å finne slike fødselsnummer i Tenor. Logg så inn med en bruker som har administrator-rettigheter i SvarUt: https://test.svarut.ks.no/. Om du ikke har dette, må du ta kontakt med vår brukerstøtte (se \u0026lsquo;Tilgang til SvarUt test\u0026rsquo;) I fanen Mottakersystem (https://test.svarut.ks.no/mottaker#/) vil du finne mottakersystem som din administratorbruker har tilgang til. Om du ikke finner noen mottakersystem, må du be brukerstøtte om at de må gi brukeren tilgang til relevante mottakersystem. For et gitt mottakersystem kan du nå også gi tilgang videre til andre, for eksempel fødselsnummer som har tilgang til organisasjonen i Altinn (i fanen Tilganger på et gitt mottakersystem). Logg inn i SvarUt igjen med fødselsnummer som er knyttet mot Testbruker som har tilgang til organisasjonen i Altinn Nå er du klar for å legge inn organisasjonsnummer på mottakersystemet. NB! Får du opp \u0026ldquo;Andre mottakersystemer som er konfigurert med samme organisasjonsnummer\u0026rdquo; når du har klikket på \u0026lsquo;Gi tilgang\u0026rsquo;? Og finner du organisasjonsnummeret i listen som kommer opp, knyttet mot et annet mottakersystem enn det du er inne på? Da bør du finne et nytt organisasjonsnummer og gjøre samme operasjon på nytt, det betyr at noen andre allerede har brukt dette organisasjonsnummeret. Følg samme oppskrift om man tidligere har registrert et ekte organisasjonsnummer på et SvarInn mottakersystem og nå har fått problemer med å sende til dette organisasjonsnummeret i våre test-miljø. Oppdater med nytt organisasjonsnummer på mottakersystem, og så er det klart for å sende forsendelser til dette organisasjonsnummeret i stedet for.\nTilgang til SvarUt test For å få tilgang til testmiljøet kan man sende en mail til fiks@ks.no.\n"
},
{
	"uri": "/tjenester/minkommune_barnevern/",
	"title": "Min kommune - barnevern",
	"tags": [],
	"description": "",
	"content": "Kort beskrivelse Min kommune – barnevern er en digital innbyggertjeneste som skal bidra til økt tillit og tilgjengelighet for dem som har en sak hos barnevernet. Innlogging skjer sikkert gjennom ID-porten på høyeste nivå og løsningen gjør det lettere å medvirke, påvirke og samhandle.\nSystemet har flere funksjoner, og det er planer for videreutvikling og ny funksjonalitet.\nFiks Innsyn Fagsystem for barnevernsaker tilgjengeliggjør saker for innbygger vha Fiks Innsyn. For detaljer se Innsyn\nMeldingsversjonen som skal brukes mot Fiks Innsyn:\nMeldingstype Versjon Barnevernmappe V1 BARNEVERNMAPPE_V1 Spec Barnevernjournalpost V1 BARNEVERNJOURNALPOST_V1 Spec Aktører For øyeblikket er det støtte for å eksponere saken til ulike parter i saken. Dette er HOVEDPERSON, MOR, FAR, MEDMOR, MEDFAR, VERGE\nFor hver aktør må man indeksere separate mapper/journalposter, og disse kan ha ulikt innhold avhengig av hva aktøren skal få se.\nDokumenter Selve dokumentene blir tilgjengeliggjort via andre kanaler (f.eks Dokumentlager). barnevernjournalpost-meldingen inneholder lenker til hvor disse kan lastes ned. Hvis dokumentet er sendt via SvarUt, kan man fylle ut svarutForsendelsesId og svarutFilnummer feltene.\nPost til barnevernet En barnevernmappe representerer en barnevernsak. Hvis man ønsker å åpne opp for at innbygger skal kunne sende meldinger relatert til barnevernsaken må edialogSkjemaer-feltet fylles ut. Bruker man predefinert type POST, bruker man en standardisert edialog-mal opprettet av Min kommune - Barnevern. Edialog-meldingen vil bli sendt via SvarUt til organisasjonsnummeret definert i barnevernmappe-meldingen. Mottaker må ha konfigurert en Svarinn-klient som håndterer dokumenter på nivå 4 med forsendelsestype: ks.digibarnevern.dokumentmedvirkning eller forsendelsesType: Alle Hvis man bruker SvarInn V2 får man tilgang på Noark-metadata knyttet til barnevernmappen. Altinn er fallback.\nDokumentmedvirkning En barnevernjournalpost representerer en journalpost på saken. Hvis man ønsker å åpne opp for at innbygger skal kunne sende meldinger relatert til journalposten må edialogSkjemaer-feltet fylles ut. Bruker man predefinert type SVAR, bruker man en standardisert edialog-mal opprettet av Min kommune - Barnevern. Edialog-meldingen vil bli sendt via SvarUt til organisasjonsnummeret definert i barnevernmappe-meldingen som barnevernjournalposten er knyttet til. Mottaker må ha konfigurert en Svarinn-klient som håndterer dokumenter på nivå 4 med forsendelsestype: ks.digibarnevern.dokumentmedvirkning eller forsendelsesType: Alle Hvis man bruker SvarInn V2 får man tilgang på Noark-metadata knyttet til barnevernjournalposten. Altinn er fallback.\nInnsynsforespørsel I noen tilfeller får aktøren bare tilgang til tittelen på dokumentet. Da har man mulighet til å sende en melding til fagsystem for å forespørre tilgang.\nInnsynsforespørsel fungerer på følgende måte:\nEn innbygger ber om innsyn på en eller flere av sine journalposter tilgjengeliggjort via Min kommune – Barnevern En melding blir sendt via Fiks protokoll og protokoll Når innsynsforespørselen er ferdigbehandlet i fagsystemet, oppdateres innsynsforesporselStatus på journalposten basert på resultatet av saksbehandlingen. Og nytt dokument blir evt tilgjengeliggjort. Samtykke Hvis fagsystemet ønsker å hente inn samtykke fra en eller flere aktører kan man bruke tjenesten Samtykke. Barnevernjournalposten må også inneholde samtykkeId som ble generert fra den tjenesten.\n"
},
{
	"uri": "/tjenester/ks-kunnskap/",
	"title": "KS kunnskap",
	"tags": [],
	"description": "",
	"content": "Kort beskrivelse KS kunnskap er en plattform som tillater kommunene å lage, dele, arrangere og gjennomføre kurs. Plattformen er basert på Læringsplattformen Valamis.\nTilgjengelige grensesnitt Grensesnitt Støtte Web portal Ja Maskin til maskin Brukersynkronisering ved hjelp av SCIM2, samt API for synkronisering av organisasjonsstruktur og roller. Snarveier Om KS kunnskap\nLenke til kort informasjon om pålogging og synkronisering i KS kunnskap her\nLenke til SSO-info kommer her\nLenke til info om brukerynskronisering kommer her\nLenke til synkronisering av organisasjonsstruktur og roller kommer her\n"
},
{
	"uri": "/tjenester/fiksprotokoll/protokoll-link/",
	"title": "Protokoll - Fiks Link",
	"tags": [],
	"description": "",
	"content": "Fiks Link - protokoll som erstatning for GI Link Les mer om protokollen i Github repoet:\nfiks-link-specification "
},
{
	"uri": "/tjenester/fiksprotokoll/protokoll-saksfaser/",
	"title": "Protokoll - Fiks Saksfaser",
	"tags": [],
	"description": "",
	"content": "Fiks Saksfaser - protokoll for henting av saksfaser Les mer om protokollen i Github repoet:\nfiks-saksfaser-specification "
},
{
	"uri": "/tjenester/bekymringsmelding/bekymringsmelding_v2/",
	"title": "Fiks bekymringsmelding V2",
	"tags": [],
	"description": "",
	"content": "Endringer fra forrige versjon til denne Nytt valgfritt felt på offentlig bekymringsmelding andreSynspunkter, se nye protokollen her. Fagsystem som konsument Ved bruk av Fiks IO som leveringskanal må fagsystemet støtte meldingsprotokollen no.ks.fiks.bekymringsmelding.v2, som er definert til bruk av bekymringsmeldinger. Meldingsprotokollen vil inneholde kontrakter i form av JSON-skjema som gjelder både for mottak og svar på Fiks IO-meldinger.\nTil fagsystem - mottak av bekymringsmeldinger Fagsystemet vil motta enten en privat bekymringsmelding, no.ks.fiks.bekymringsmelding.privat.v2, med en ASiC-E-fil i body eller en offentlig bekymringsmelding, no.ks.fiks.bekymringsmelding.offentlig.v2, med en ASiC-E-fil i body. I tillegg vil det være en header «bydel-ressurs-id», som vil være ID til bydelsressursen, og en header «bekymringsmelding-id» som vil være bekymringsmeldingens unike ID. I de fleste tilfeller kan man se bort fra disse.\nAsiC-E-filen er på navneformatet «FiksIO_encrypted_[FIKS_ORG_ID]_[BYDELSNUMMER].zip», hvor FIKS_ORG_ID er en unik ID for kommunen, mens bydelsnummeret vil være et tosifret tall. Er det en kommune uten bydeler, vil bydelsnummeret være «00».\nASiC-E-filen vil inneholde to filer, «bekymringsmelding.json» og «bekymringsmelding.pdf». «bekymringsmelding.json» er en JSON-fil definert i JSON-skjema for privat bekymringsmelding eller offentlig bekymringsmelding - avhengig om meldingstypen er en privat eller offentlig bekymringsmelding. «bekymringsmelding.pdf» vil være bekymringsmeldingen på PDF-format.\nFra fagsystem - kvittering på mottatt bekymringsmelding Når fagsystemet har importert og lagret bekymringsmeldingen må det sendes tilbake en kvittering som bekrefter mottatt bekymringsmelding, no.ks.fiks.bekymringsmelding.mottatt.v1, med tom body.\nDersom fagsystemet ikke klarer å lagre bekymringsmeldingen kan man sende tilbake en kvittering som signaliserer feil ved mottak, no.ks.fiks.bekymringsmelding.feilet.v1, med body bestående av en JSON-fil «feilmelding.json» med hva som gikk galt. JSON-skjema finnes her. Ved feil vil bekymringsmeldingen bli sendt som brevpost.\nFullstendig skjemadefinisjon med eksempler finner man her. Det anbefales at man setter ttl (time-to-live) for en Fiks IO-melding til 24 timer. Får man meldingstype no.ks.fiks.kvittering.tidsavbrudd, så trenger dere ikke sende noe tilbake, da vi alltid har en fallback til brevpost. Men det anbefales at man logger det, og sier fra så vi kan feilsøke. For mer informasjon om Fiks IO, se dokumentasjon for Fiks IO. Trondheim kommune har også laget en Fiks IO-klient i Go som er spesifikt rettet mot bekymringsmelding. Den finner man her.\nFagsystem som produsent Swagger-spesifikasjon for å sende inn bekymringsmeldinger via API finnes her: Bekymringsmelding mottak fagsystem og Bekymringsmelding kommune service. Merk at filene som skal sendes med, sendes som multipart request. Ikke alle Swagger-genererte klienter genererer dette riktig i henhold til OpenAPI 3.0-spesifikasjonen. Du kan se et eksempel på multipartforsendelse i Java her.\nFeltet \u0026ldquo;Leveringskanal\u0026rdquo;, jmf JSON-skjemaene, skal settes til navn på organisasjonen (Politiet, navnet på skolen, etc.) som sender bekymringsmeldingen. Feltet \u0026ldquo;Sendingstidspunkt\u0026rdquo; forventer ISO-8601 norsk tid uten tidssone, eksempelvis \u0026ldquo;2021-11-08T09:24:45\u0026rdquo;.\nFiler Det må sendes med to krypterte filer, en AsiC-E-fil og en PDF-fil. De offentlige nøklene som brukes ved kryptering hentes fra API-et Bekymringsmelding mottak fagsystem.\nAsiC-E-fil AsiC-E-filen må inneholde to filer, «bekymringsmelding.json» og «bekymringsmelding.pdf». «bekymringsmelding.json» er en JSON-fil definert i JSON-skjema for privat bekymringsmelding eller offentlig bekymringsmelding - avhengig om meldingstypen er en privat eller offentlig bekymringsmelding. Skjemadefinisjon med eksempler finner man her. AsiC-E-filen må være kryptert med mottakersystemets offentlige nøkkel.\nPDF-fil «bekymringsmelding.pdf» vil være selve bekymringsmeldingen på PDF-format og må være kryptert med printleverandørens offentlige nøkkel. Fagsystemet har ansvar for å lage PDF. Eksempler på PDF for privat melder og offentlig melder.\nSekvensdiagram 1 - 2. Før fagsystemet skal sende bekymringsmelding må det gjøres et oppslag på kommunenummer for å finne ut hvilke barnevernskontorer (bydeler) som støttes av løsningen. Returnerer liste med bydeler i kommunen. Dersom det returneres en tom liste har ikke kommunen aktivert løsningen. Dersom listen ikke er tom vil det alltid være et element (en bydel) som er satt opp som kan brukes dersom bydel/barnevernskontor er ukjent.\n3 - 4. Når kommune og bydel er valgt må fagsystemet hente krypteringsnøkler. Det returneres en liste med to elementer som inneholder krypteringsnøkler. Den ene nøkkelen brukes for å kryptere PDF-versjonen av bekymringsmeldingen slik at det er mulig å sende den som brevpost. Den andre nøkkelen brukes for å kryptere ASIC-E filen som inneholder både JSON-dokumentet og PDF-dokumentet for nedlastning via fagsystem, alternativt via manuell nedlastning.\n5 - 5. Fagsystemet må lage PDF basert på innholdet i bekymringsmeldingen. PDF må krypteres med printleverandør sin nøkkel.\n6 - 6. Fagsystemet må lage PDF og JSON-dokument basert på innholdet i bekymringsmeldingen. Både PDF og JSON-dokument må pakkes inn i ASiC-E-kontainer, som deretter krypteres med nøkkel for maskinintegrasjon.\n7 - 10. De krypterte filene (bekymringsmelding.pdf og asice.zip) sendes over til bekymringsmeldingsapiet som multipart-filer. Endepunkt bestemmes av om det er en privat melder eller offentlig melder som har skrevet bekymringsmeldingen. API-et returnerer en UUID som referanse på forsendelsen. Størrelsen på forsendelsen kan ikke overstige 5MB.\nEksempel på innsending (Java med Jersey client)\nStreamDataBodyPart bekymringsmeldingPdf = new StreamDataBodyPart(\u0026#34;bekymringsmelding\u0026#34;, {bekymringsmeldingPdfInputStream}, \u0026#34;bekymringsmelding.pdf\u0026#34;); StreamDataBodyPart asiceZip = new StreamDataBodyPart(\u0026#34;asice\u0026#34;, {bekymringsmeldingAsiceInputStream}, \u0026#34;asice.zip\u0026#34;); Client client = ClientBuilder.newBuilder().register(MultiPartFeature.class).build(); MultiPart multipart = new FormDataMultiPart().bodyPart(bekymringsmeldingPdf).bodyPart(asiceZip); client.target({url}) .request() .header(\u0026#34;IntegrasjonId\u0026#34;, {integrasjonId}) .header(\u0026#34;IntegrasjonPassord\u0026#34;, {integrasjonPassord}) .header(\u0026#34;Authorization\u0026#34;, \u0026#34;Bearer {token}\u0026#34;) .post(Entity.entity(multipart, multipart.getMediaType())); hvor:\nbekymringsmeldingPdfInputStream: InputStream av bekymringsmelding.pdf\nbekymringsmeldingAsiceInputStream: InputStream av asice.zip\nurl\nPrivat bekymringsmelding test: https://api.fiks.test.ks.no/bekymringsmelding/api/v2/mottak/fagsystem/{fraFiksOrgId}/{kommunenummer}/{bydelsnummer}/privat\nOffentlig bekymringsmelding test: https://api.fiks.test.ks.no/bekymringsmelding/api/v2/mottak/fagsystem/{fraFiksOrgId}/{kommunenummer}/{bydelsnummer}/offentlig\nPrivat bekymringsmelding prod: https://api.fiks.ks.no/bekymringsmelding/api/v2/mottak/fagsystem/{fraFiksOrgId}/{kommunenummer}/{bydelsnummer}/privat\nOffentlig bekymringsmelding prod: https://api.fiks.ks.no/bekymringsmelding/api/v2/mottak/fagsystem/{fraFiksOrgId}/{kommunenummer}/{bydelsnummer}/offentlig\nUrl-param fraFiksOrgId: Fiks Organisasjon ID til organisasjonen som fagsystemet sender meldinger på vegne av\nUrl-param kommunenummer: Kommunenummer man sender til\nUrl-param bydelsnummer: Bydelsnummer man sender til\nintegrasjonsId: Integrasjonsid i form av en UUID\nintegrasjonPassord: Integrasjonspassord\ntoken: Gyldig aksesstoken fra maskinporten\nHente status for sendt bekymringsmelding Et fagsystem kan hente status med tilhørende historikk for sendte bekymringsmeldinger via API-et Bekymringsmelding mottak fagsystem.\nEndepunktet /bekymringsmelding/api/v2/mottak/fagsystem/{fraFiksOrgId}/bekymringsmelding/{bekymringsmeldingId}/status returnerer en liste av alle hendelsene for den angitte bekymringsmelding-id-en. Hver hendelse inneholder en tilstand for bekymringsmeldingen, som kan inneholde følgende verdier:\nAKSEPTERT (alltid 1. tilstand) - Fiks Bekymringsmelding har mottatt og lagret bekymringsmeldingen. SENDT_FAGSYSTEM (alltid 2. tilstand) - Bekymringsmeldingen er sendt til fagsystemet til mottakeren. AVVIST_FAGSYSTEM - Fagsystemet har avvist mottak av bekymringsmeldingen. Fiks Bekymringsmelding vil automatisk sende denne til brevpost. SENDT_PRINT - Bekymringsmeldingen er sendt til printleverandør for å sende den med brevpost. AVVIST_PRINT - Printleverandøren kan ikke printe ut bekymringsmeldingen for brevpost. Fiks følger opp bekymringsmeldingen manuelt. LEVERT (alltid siste tilstand) - Bekymringsmeldingen er levert fagsystem eller sendt som brevpost til barnevernskontoret. LEVERT vil alltid være den siste endelige tilstanden til en bekymringsmelding. Da vil den enten ha blitt bekreftet mottatt til fagsystemet, eller i tilfelle man tidligere har mottatt SENDT_PRINT, så vil den ha blitt levert posten for levering som brevpost.\n"
},
{
	"uri": "/tjenester/svarut/svarinn-rest/",
	"title": "API: SvarInn REST",
	"tags": [],
	"description": "",
	"content": "Her beskrives funksjonalitet for bruk av SvarInn V2. Dokumentasjon for tidligere versjoner finnes i versjonsoversikten.\nTilgang Tjenesten bruker HTTP Basic autentication med brukernavn og generert service-passord. Mottakersystem opprettes av administrator hos KS Digital. Service-passordet genereres av person med tilgang via mottakersystem-siden. Dersom autentiseringen feiler returneres HTTP-status 401 Unauthorized, og ukjent URL gir HTTP-status 404. Detaljerte feilmeldinger følger også ved feil.\nHenting og kvittering av forsendelser Forsendelser er tilgjengelig for direkte import til sakssystem helt til de kvitteres ut. Dersom en forsendelse markeres som permanent feilet vil den gå videre i det normale løpet med varsling i Altinn og eventuelt fysisk post dersom den ikke leses digitalt og avsender har sagt at post til virksomheter skal ettersendes.\nDersom forsendelsen ikke er kvittert ut etter to timer vil denne bli inkludert i varsel-epost om manglende import, som sendes ut tre ganger om dagen.\nAPI Miljø Base URL Test https://test.svarut.ks.no/api/ Prod https://svarut.ks.no/api/ Endepunkter og modeller er definert i OpenAPI-spec:\nOpenAPI SvarInn V2 (Åpne i swagger editor)\nKryptering Alle forsendelser som lastes ned via SvarInn er kryptert. For at dette skal fungere må den offentlige nøkkelen dere ønsker å bruke lastes opp til mottakersystemet i SvarUt med nivå 4-innlogging. Den private nøkkelen må være tilgjengelig i systemet som skal laste ned forsendelsene, slik at disse kan dekrypteres. I begge eksemplene under er disse filene kalt henholdsvis public.pem og privatekey.pem, og blir generert med en gyldighet på 99999 dager.\nUnix For å generere RSA nøkkelpar med OpenSSL kan følgende kommando brukes:\nopenssl req -x509 -newkey rsa:2048 -nodes -keyout privatekey.pem -out public.pem -days 99999\nWindows For windows kan man for eksempel laste ned denne OpenSSL-implementasjonen: https://slproweb.com/products/Win32OpenSSL.html\nopenssl req -x509 -newkey rsa:2048 -nodes -keyout privatekey.pem -out public.pem -days 99999 -config c:\\\u0026lt;opensslinstallmappe\u0026gt;\\bin\\openssl.cfg\n"
},
{
	"uri": "/tjenester/samtykke/",
	"title": "Fiks samtykke",
	"tags": [],
	"description": "",
	"content": "Kort beskrivelse Fiks samtykke er en løsning laget for Norges innbyggere for å kunne ta stilling til ulike samtykker. Løsningen består av en web-portal brukt av innbyggere til å ta stilling til samtykke og et API for eksterne fag-system brukt saksbehandlere til å opprette og endre samtykker.\nFørste iterasjon av denne tjenesten omfatter samtykker knyttet til Barnevern, og det er den løsningen som i hovedsak beskrives her. Den overordnede flyten for opprettelse av et samtykke i forbindelse med barnevern er som følger:\nSamtykke opprettes via /opprettSamtykke i dette API-et og en samtykke-id returneres Dokument for samtykke lastes opp kryptert til Dokumentlager Journalpost indekseres med url til dokumentet i Dokumentlager og med samtykke-id returnert av opprettSamtykke-kallet Tilgjengelige grensesnitt Grensesnitt Støtte Web portal Ja Maskin til maskin Ja Beskrivelse av api Statuser Det er to typer statuser som er definert i samtykke-løsningen. En overordnet samtykkeStatus per samtykke og en samtykkeSvarStatus per part.\nSamtykkeStatus SamtykkeStatus kan være følgende verdier:\nSAMTYKKET: Forteller at alle partene for et samtykke har samtykket. TRUKKET: Forteller at minst en part tilknyttet et samtykket har trukket samtykket. IKKE_SAMTYKKET: Forteller at minst en part tilknyttet samtykket har avslått samtykket. VENTER_PAA_SVAR: Forteller at det er minst en part som fortsatt har status \u0026ldquo;VenterPaaSvar\u0026rdquo; tilknyttet samtykket SVARFRIST_PASSERT: Forteller at svarfristen er passert. UTLOPT: Forteller at samtykket har utløpt. SamtykkeSvarStatus SamtykkeSvarStatus kan være følgende verdier:\nVENTER_PAA_SVAR: Forteller at part ikke har tatt stilling til samtykket. SAMTYKKET: Forteller at part har samtykket. IKKE_SAMTYKKET: Forteller at part har avslått samtykket. TRUKKET: Forteller at part har trukket samtykket. Ekstern-api api-spec POST /opprettSamtykke Et samtykke opprettes av saksbehandler i fagsystem via API. I denne requesten sendes informasjon om samtykket, tilhørende mappe, saksbehandler og involverte personer. Vær oppmerksom på flagget \u0026ldquo;harTilgangTilInnbyggerTjenester\u0026rdquo; som styrer om innbygger skal kunne se samtykket i web-portal eller ikke. Dette api-endepunktet returnerer en nyopprettet SamtykkeId (UUID)\nPUT /endreSamtykke/{samtykkeId} En saksbehandler kan endre et samtykke. Svarfrist og utløpsdato er verdiene som på nåværende tidspunkt kan endres via dette endepunktet. Det er ingen validering på disse datoene mot hverandre eller bakover i tid verken ved opprettelse eller endring på vår side grunnet behov for opprettelse av historiske samtykker.\nPUT /invaliderSamtykke/{samtykkeId} En saksbehandler kan invalidere/avbryte et samtykke. Dette er en ugjenkallelig operasjon. Et samtykke som er invalidert vil vises for involverte parter via innbyggertjenester som avbrutt. Et invalidert samtykke vil ikke kunne endres ytterligere etter invalidering verken av involverte parter eller av saksbehandler.\nGET /samtykkeHistorikk/{samtykkeId} Et fagsystem kan hente samtykkeHistorikk for et samtykke. Dette gir en oversikt over alle endringer som er gjort på samtykket.\nPUT /oppdaterSamtykkeStatusForPart/{samtykkeId} Dette endepunktet brukes for å oppdatere status for en part i et samtykke. Dette kan være tilfeller der en part ikke har tilgang til innbyggertjenester eller der en part ønsker å utføre en handling som ikke støttes i web-portal og må ta kontakt med saksbehandler. Reglene for hvilke handlinger som kan utføres er friere enn i web-portalen for innbyggere.\nMatrise for regler vedrørende endring av samtykke-status for part Nåværende/Neste Samtykket Ikke samtykket Venter på svar Trukket Samtykket Nei Nei Ja Ja Ikke samtykket Ja Nei Ja Nei Venter på svar Ja Ja Nei Nei Trukket Ja Nei Ja Nei Altså:\nIngen statuser kan endres til samme status. \u0026ldquo;Samtykket\u0026rdquo; kan endres tilbake til \u0026ldquo;Venter på svar\u0026rdquo; eller til \u0026ldquo;Trukket\u0026rdquo;, men ikke til \u0026ldquo;Ikke samtykket\u0026rdquo; siden den statusen innebærer at part ikke har samtykket fra før. \u0026ldquo;Ikke samtykket\u0026rdquo; kan endres rett til \u0026ldquo;Samtykket\u0026rdquo; eller \u0026ldquo;Venter på svar\u0026rdquo;, men ikke til \u0026ldquo;Trukket\u0026rdquo; siden den statusen innebærer at part først har samtykket. \u0026ldquo;Venter på svar\u0026rdquo; kan endres til \u0026ldquo;Samtykke\u0026rdquo; eller \u0026ldquo;Ikke samtykket\u0026rdquo;, men ikke til \u0026ldquo;Trukket\u0026rdquo; siden den statusen innebærer at part først har samtykket. \u0026ldquo;Trukket\u0026rdquo; kan endres til \u0026ldquo;Samtykket\u0026rdquo; eller \u0026ldquo;Venter på svar\u0026rdquo;, men ikke til \u0026ldquo;Ikke samtykket\u0026rdquo; siden den statusen innebærer at part ikke har samtykket. PUT /endreInnbyggertjenesteTilgangForPart/{samtykkeId} Dette endepunktet brukes av en saksbehandler for å endre tilgang til innbyggertjenester for en part i et samtykke.\nDiverse linker Base-path ekstern-api dev: https://api.fiks.dev.ks.no/samtykke/api/v1/ekstern/ Base-path ekstern-api test: https://api.fiks.test.ks.no/samtykke/api/v1/ekstern/ Base-path ekstern-api prod: https://api.fiks.ks.no/samtykke/api/v1/ekstern/ "
},
{
	"uri": "/tjenester/register/skatteoginntektsopplysninger_ny/",
	"title": "Skatte- og inntektsopplysninger (Ny)",
	"tags": [],
	"description": "",
	"content": "Kort beskrivelse Fiks register tilbyr skatte- og inntektsopplysninger for kommunalt ansatte via et web-basert grensesnitt for innbyggere som søker om kommunale tjenester. Dette grensesnittet er også tilgjengelig som API for kommunene sine fagsystem.\nTilgjengelige grensesnitt Grensesnitt Støtte Web portal Ja Maskin til maskin Api spec Beskrivelse av tjenesten Innbyggertjeneste Gyldige tjenesteområde for rollen Beregningstype Redusert foreldrebetaling SFO/barnehage Foreldrebetaling SFO/barnehage BARNEHAGE_SFO Praktisk bistand og opplæring Helse og omsorg: Praktisk bistand PRAKTISK_BISTAND Langtidsopphold institusjon Helse og omsorg: Langtidsopphold institusjon LANGTIDSOPPHOLD_INSTITUSJON For å bruke API-ene, både proxy og vårt overbygg, må rollen som opprettes være i rett tjenesteområde.\nMiljø Miljø URL Test (Integrasjon) http​s://api.fiks.test.ks.no Produksjon http​s://api.fiks.ks.no APIene er tilgjengelig via Fiks-plattformen som proxy-tjeneste eller via vårt overbygg.\nOppslag via overbygg Vi har laget vårt eget overbygg som gir mulighet for å søke på flere personer. Vi søker om personene har stadie OPPGJØR. Ved redusert foreldrebetaling SFO/barnehage, søkes det også etter UTKAST dersom de ikke har OPPGJØR. Datamodellen er en sammenstilling av det som kommer fra skatteetaten sine APIer og har summert alle poster som hører sammen. For hver tjeneste finnes det en beregningstype som må sendes inn som en del av payloaden, dette erstatter behovet for å bruke rettighetspakke.\nAPI-dokumentasjon Swagger dokumentasjon for overbygg finner du her. Bruk også dokumentasjon fra Skatteetaten.\nEkstraposter Det finnes også en del ulike poster som har andre kilder enn Skatteetaten. Disse kan sendes med som en del av requesten, og vil da bli kalkulert sammen med data fra Skatteetaten. Oversikt over gyldige ekstraposter kan hentes fra verdier endepunktet.\nMerk: ved å sende inn postene kommune.oektNaeringsinntekt og kommune.redusertNaeringsinntekt vil man ikke få disse tilbake igjen i responsen, men det vil påvirke posten naeringsinntektForPaaroerende. Les mer om næringsinntekt for pårørende her\nEndepunkter For payload for POST-spørringene, se swagger dokumentasjon.\nBeregning for langtidsopphold (POST)\n\u0026lt;MILJØ_URL\u0026gt;/register/api/v1/ks/{rolleId}/skatteoginntektsopplysninger/beregning\nBeregning for langtidsopphold som PDF (POST)\n\u0026lt;MILJØ_URL\u0026gt;/register/api/v1/ks/{rolleId}/skatteoginntektsopplysninger/beregning/pdf\nBeregning for praktisk bistand (POST)\n\u0026lt;MILJØ_URL\u0026gt;/register/api/v1/ks/{rolleId}/skatteoginntektsopplysninger/beregning/praktisk-bistand\nBeregning for praktisk bistand som pdf (POST)\n\u0026lt;MILJØ_URL\u0026gt;/register/api/v1/ks/{rolleId}/skatteoginntektsopplysninger/beregning/praktisk-bistand/pdf\nBeregning for redusert foreldrebetaling (POST)\n\u0026lt;MILJØ_URL\u0026gt;/register/api/v1/ks/{rolleId}/skatteoginntektsopplysninger/beregning/redusert-foreldrebetaling\nBeregning for redusert foreldrebetaling som pdf (POST)\n\u0026lt;MILJØ_URL\u0026gt;/register/api/v1/ks/{rolleId}/skatteoginntektsopplysninger/beregning/redusert-foreldrebetaling/pdf\nGyldige persontyper og ekstraposter (POST)\n\u0026lt;MILJØ_URL\u0026gt;/register/api/v1/ks/{rolleId}/skatteoginntektsopplysninger/verdier.\nYAML-filer I løsningen er postene som blir brukt i beregningen definert i YAML-filer som forteller hvordan disse behandles, f.eks. ved at verdien deres skal legges til eller trekkes fra. Disse filene er mulig å hente ut i en ZIP-fil ved å gjøre en GET-spørring mot:\n\u0026lt;MILJØ_URL\u0026gt;/register/api/v1/ks/{rolleId}/skatteoginntektsopplysninger/yaml/{beregningstype}/{inntektsaar}\nZIP-filen vil inneholde to filer for den spesifiserte beregningstypen for det gitte inntektsåret. Filen med prefiks beregning innholder alle poster brukt i beregningen og grupperinger av disse. Filen med prefiks visning inneholder alle poster fra Skatteetaten og vår gruppering av disse.\nFeilkoder for egenandelsberegning Kode Feilmelding SI-01 Klarte ikke å hente navn SI-02 Du mangler rettighet i Altinn for å få informasjon om skatt til gode, restskatt og innbetalt skatt. Eksempel med bruk av API-overbygg Payload\n{ \u0026#34;beregningstype\u0026#34;:\u0026#34;LANGTIDSOPPHOLD_INSTITUSJON\u0026#34;, \u0026#34;inntektsaar\u0026#34;:2023, \u0026#34;personer\u0026#34;:[ { \u0026#34;identifikator\u0026#34;:\u0026#34;04817299771\u0026#34;, \u0026#34;type\u0026#34;:\u0026#34;SOEKER\u0026#34;, \u0026#34;ekstraposter\u0026#34;:[ ] }, { \u0026#34;identifikator\u0026#34;:\u0026#34;27847099416\u0026#34;, \u0026#34;type\u0026#34;:\u0026#34;ANNET\u0026#34;, \u0026#34;ekstraposter\u0026#34;:[ { \u0026#34;tekniskNavn\u0026#34;:\u0026#34;kommune.tenktEtterlattePensjon\u0026#34;, \u0026#34;beloep\u0026#34;:0 } ] } ] } Svar\n{ \u0026#34;inntektsaar\u0026#34;:2023, \u0026#34;stadie\u0026#34;:\u0026#34;OPPGJOER\u0026#34;, \u0026#34;personer\u0026#34;:[ { \u0026#34;identifikator\u0026#34;:\u0026#34;04817299771\u0026#34;, \u0026#34;type\u0026#34;:\u0026#34;SOEKER\u0026#34;, \u0026#34;skjermet\u0026#34;:false, \u0026#34;stadie\u0026#34;:\u0026#34;OPPGJOER\u0026#34;, \u0026#34;navn\u0026#34;:{ \u0026#34;etternavn\u0026#34;:\u0026#34;PÅFUNN\u0026#34;, \u0026#34;fornavn\u0026#34;:\u0026#34;UPERSONLIG\u0026#34;, \u0026#34;mellomnavn\u0026#34;:null }, \u0026#34;skatteoppgjoersdato\u0026#34;:\u0026#34;2024-02-15\u0026#34;, \u0026#34;registreringstidpunkt\u0026#34;:\u0026#34;2024-02-15T09:47:37.874Z\u0026#34; }, { \u0026#34;identifikator\u0026#34;:\u0026#34;27847099416\u0026#34;, \u0026#34;type\u0026#34;:\u0026#34;ANNET\u0026#34;, \u0026#34;skjermet\u0026#34;:false, \u0026#34;stadie\u0026#34;:\u0026#34;OPPGJOER\u0026#34;, \u0026#34;navn\u0026#34;:{ \u0026#34;etternavn\u0026#34;:\u0026#34;DAMESYKKEL\u0026#34;, \u0026#34;fornavn\u0026#34;:\u0026#34;OPPRIKTIG\u0026#34;, \u0026#34;mellomnavn\u0026#34;:null }, \u0026#34;skatteoppgjoersdato\u0026#34;:\u0026#34;2024-02-19\u0026#34;, \u0026#34;registreringstidpunkt\u0026#34;:\u0026#34;2024-02-19T07:21:24.518Z\u0026#34; } ], \u0026#34;visningsposter\u0026#34;:[ { \u0026#34;kategori\u0026#34;:\u0026#34;INNTEKT\u0026#34;, \u0026#34;poster\u0026#34;:[ { \u0026#34;personer\u0026#34;:[ { \u0026#34;identifikator\u0026#34;:\u0026#34;04817299771\u0026#34;, \u0026#34;beloep\u0026#34;:4392 }, { \u0026#34;identifikator\u0026#34;:\u0026#34;27847099416\u0026#34;, \u0026#34;beloep\u0026#34;:3600 } ], \u0026#34;beloep\u0026#34;:7992, \u0026#34;tekniskNavn\u0026#34;:\u0026#34;avkortetFordelVedElektroniskKommunikasjon\u0026#34;, \u0026#34;visningstekst\u0026#34;:\u0026#34;Fordel elektronisk kommunikasjon\u0026#34;, \u0026#34;infotekst\u0026#34;:null }, { \u0026#34;personer\u0026#34;:[ { \u0026#34;identifikator\u0026#34;:\u0026#34;04817299771\u0026#34;, \u0026#34;beloep\u0026#34;:767670 }, { \u0026#34;identifikator\u0026#34;:\u0026#34;27847099416\u0026#34;, \u0026#34;beloep\u0026#34;:142622 } ], \u0026#34;beloep\u0026#34;:910292, \u0026#34;tekniskNavn\u0026#34;:\u0026#34;samletLoennsinntektMedTrygdeavgiftspliktOgMedTrekkplikt\u0026#34;, \u0026#34;visningstekst\u0026#34;:\u0026#34;Lønn og naturalytelser med mer\u0026#34;, \u0026#34;infotekst\u0026#34;:null }, { \u0026#34;personer\u0026#34;:[ { \u0026#34;identifikator\u0026#34;:\u0026#34;04817299771\u0026#34;, \u0026#34;beloep\u0026#34;:0 } ], \u0026#34;beloep\u0026#34;:0, \u0026#34;tekniskNavn\u0026#34;:\u0026#34;/beregnetSkattFastland/skattOgAvgift/trygdeavgiftAvNaeringsinntekt\u0026#34;, \u0026#34;visningstekst\u0026#34;:\u0026#34;Personinntekt fra næringsinntekt\u0026#34;, \u0026#34;infotekst\u0026#34;:\u0026#34;Samlepost for pårørendes næringsinntekt. Se veileder for mer informasjon.\u0026#34; }, { \u0026#34;personer\u0026#34;:[ { \u0026#34;identifikator\u0026#34;:\u0026#34;04817299771\u0026#34;, \u0026#34;beloep\u0026#34;:2163 } ], \u0026#34;beloep\u0026#34;:2163, \u0026#34;tekniskNavn\u0026#34;:\u0026#34;samledeOpptjenteRenterIInnenlandskeBanker\u0026#34;, \u0026#34;visningstekst\u0026#34;:\u0026#34;Renter av bankinnskudd\u0026#34;, \u0026#34;infotekst\u0026#34;:null }, { \u0026#34;personer\u0026#34;:[ { \u0026#34;identifikator\u0026#34;:\u0026#34;27847099416\u0026#34;, \u0026#34;beloep\u0026#34;:2234 } ], \u0026#34;beloep\u0026#34;:2234, \u0026#34;tekniskNavn\u0026#34;:\u0026#34;renteinntektAvSkadeforsikring\u0026#34;, \u0026#34;visningstekst\u0026#34;:\u0026#34;Renter av skadeforsikring\u0026#34;, \u0026#34;infotekst\u0026#34;:null }, { \u0026#34;personer\u0026#34;:[ { \u0026#34;identifikator\u0026#34;:\u0026#34;04817299771\u0026#34;, \u0026#34;beloep\u0026#34;:27493 } ], \u0026#34;beloep\u0026#34;:27493, \u0026#34;tekniskNavn\u0026#34;:\u0026#34;utbytteFraAksje\u0026#34;, \u0026#34;visningstekst\u0026#34;:\u0026#34;Aksjeutbytte\u0026#34;, \u0026#34;infotekst\u0026#34;:null }, { \u0026#34;personer\u0026#34;:[ { \u0026#34;identifikator\u0026#34;:\u0026#34;04817299771\u0026#34;, \u0026#34;beloep\u0026#34;:19795 } ], \u0026#34;beloep\u0026#34;:19795, \u0026#34;tekniskNavn\u0026#34;:\u0026#34;oppjustertTilleggTilUtbytteFraAksje\u0026#34;, \u0026#34;visningstekst\u0026#34;:\u0026#34;Oppjustering av aksjeutbytte\u0026#34;, \u0026#34;infotekst\u0026#34;:null } ] }, { \u0026#34;kategori\u0026#34;:\u0026#34;FRADRAG\u0026#34;, \u0026#34;poster\u0026#34;:[ { \u0026#34;personer\u0026#34;:[ { \u0026#34;identifikator\u0026#34;:\u0026#34;04817299771\u0026#34;, \u0026#34;beloep\u0026#34;:234591 } ], \u0026#34;beloep\u0026#34;:234591, \u0026#34;tekniskNavn\u0026#34;:\u0026#34;/beregnetSkattFastland/informasjonTilSkattelister/beregnetSkatt\u0026#34;, \u0026#34;visningstekst\u0026#34;:\u0026#34;Beregnet skatt\u0026#34;, \u0026#34;infotekst\u0026#34;:null }, { \u0026#34;personer\u0026#34;:[ { \u0026#34;identifikator\u0026#34;:\u0026#34;04817299771\u0026#34;, \u0026#34;beloep\u0026#34;:8211577 }, { \u0026#34;identifikator\u0026#34;:\u0026#34;27847099416\u0026#34;, \u0026#34;beloep\u0026#34;:0 } ], \u0026#34;beloep\u0026#34;:8211577, \u0026#34;tekniskNavn\u0026#34;:\u0026#34;/fastland/beloepTilgode\u0026#34;, \u0026#34;visningstekst\u0026#34;:\u0026#34;For mye innbetalt skatt - til utbetaling\u0026#34;, \u0026#34;infotekst\u0026#34;:null }, { \u0026#34;personer\u0026#34;:[ { \u0026#34;identifikator\u0026#34;:\u0026#34;04817299771\u0026#34;, \u0026#34;beloep\u0026#34;:0 } ], \u0026#34;beloep\u0026#34;:0, \u0026#34;tekniskNavn\u0026#34;:\u0026#34;/beregnetSkattFastland/skattOgAvgift/formuesskattTilKommune/beloep\u0026#34;, \u0026#34;visningstekst\u0026#34;:\u0026#34;Formuesskatt til kommune\u0026#34;, \u0026#34;infotekst\u0026#34;:\u0026#34;Kommuner som gir fradrag for formueskatt må justere denne bort. Se veileder for mer informasjon.\u0026#34; }, { \u0026#34;personer\u0026#34;:[ { \u0026#34;identifikator\u0026#34;:\u0026#34;04817299771\u0026#34;, \u0026#34;beloep\u0026#34;:0 } ], \u0026#34;beloep\u0026#34;:0, \u0026#34;tekniskNavn\u0026#34;:\u0026#34;/beregnetSkattFastland/skattOgAvgift/formuesskattTilStat/beloep\u0026#34;, \u0026#34;visningstekst\u0026#34;:\u0026#34;Formueskatt til stat\u0026#34;, \u0026#34;infotekst\u0026#34;:\u0026#34;Kommuner som gir fradrag for formueskatt må justere denne bort. Se veileder for mer informasjon.\u0026#34; }, { \u0026#34;personer\u0026#34;:[ { \u0026#34;identifikator\u0026#34;:\u0026#34;04817299771\u0026#34;, \u0026#34;beloep\u0026#34;:0 } ], \u0026#34;beloep\u0026#34;:0, \u0026#34;tekniskNavn\u0026#34;:\u0026#34;/beregnetSkattFastland/skattefradrag/skattefradragForFormuesskattBetaltIUtlandet\u0026#34;, \u0026#34;visningstekst\u0026#34;:\u0026#34;Skattefradrag for formuesskatt betalt i utlandet\u0026#34;, \u0026#34;infotekst\u0026#34;:\u0026#34;Kommuner som gir fradrag for skatt betalt i utlandet må justere denne bort. Se veileder for mer informasjon.\u0026#34; }, { \u0026#34;personer\u0026#34;:[ { \u0026#34;identifikator\u0026#34;:\u0026#34;04817299771\u0026#34;, \u0026#34;beloep\u0026#34;:0 } ], \u0026#34;beloep\u0026#34;:0, \u0026#34;tekniskNavn\u0026#34;:\u0026#34;/beregnetSkattFastland/skattefradrag/skattefradragForInntektsskattBetaltIUtlandet\u0026#34;, \u0026#34;visningstekst\u0026#34;:\u0026#34;Skattefradrag for inntektsskatt betalt i utlandet\u0026#34;, \u0026#34;infotekst\u0026#34;:\u0026#34;Kommuner som gir fradrag for skatt betalt i utlandet må justere denne bort. Se veileder for mer informasjon.\u0026#34; }, { \u0026#34;personer\u0026#34;:[ { \u0026#34;identifikator\u0026#34;:\u0026#34;04817299771\u0026#34;, \u0026#34;beloep\u0026#34;:0 }, { \u0026#34;identifikator\u0026#34;:\u0026#34;27847099416\u0026#34;, \u0026#34;beloep\u0026#34;:9290575 } ], \u0026#34;beloep\u0026#34;:9290575, \u0026#34;tekniskNavn\u0026#34;:\u0026#34;/fastland/restskatt\u0026#34;, \u0026#34;visningstekst\u0026#34;:\u0026#34;Skyldig restskatt\u0026#34;, \u0026#34;infotekst\u0026#34;:null }, { \u0026#34;personer\u0026#34;:[ { \u0026#34;identifikator\u0026#34;:\u0026#34;04817299771\u0026#34;, \u0026#34;beloep\u0026#34;:0 }, { \u0026#34;identifikator\u0026#34;:\u0026#34;27847099416\u0026#34;, \u0026#34;beloep\u0026#34;:0 } ], \u0026#34;beloep\u0026#34;:0, \u0026#34;tekniskNavn\u0026#34;:\u0026#34;/fastland/avregnetForskuddstrekk\u0026#34;, \u0026#34;visningstekst\u0026#34;:\u0026#34;Sum innbetalt skatt\u0026#34;, \u0026#34;infotekst\u0026#34;:null }, { \u0026#34;personer\u0026#34;:[ { \u0026#34;identifikator\u0026#34;:\u0026#34;27847099416\u0026#34;, \u0026#34;beloep\u0026#34;:876 } ], \u0026#34;beloep\u0026#34;:876, \u0026#34;tekniskNavn\u0026#34;:\u0026#34;betalteForsinkelsesrenter\u0026#34;, \u0026#34;visningstekst\u0026#34;:\u0026#34;Betalte forsinkelsesrenter\u0026#34;, \u0026#34;infotekst\u0026#34;:null } ] }, { \u0026#34;kategori\u0026#34;:\u0026#34;FORMUE\u0026#34;, \u0026#34;poster\u0026#34;:[ { \u0026#34;personer\u0026#34;:[ { \u0026#34;identifikator\u0026#34;:\u0026#34;04817299771\u0026#34;, \u0026#34;beloep\u0026#34;:108147 } ], \u0026#34;beloep\u0026#34;:108147, \u0026#34;tekniskNavn\u0026#34;:\u0026#34;innskudd\u0026#34;, \u0026#34;visningstekst\u0026#34;:\u0026#34;Bankinnskudd\u0026#34;, \u0026#34;infotekst\u0026#34;:null }, { \u0026#34;personer\u0026#34;:[ { \u0026#34;identifikator\u0026#34;:\u0026#34;04817299771\u0026#34;, \u0026#34;beloep\u0026#34;:1135929 } ], \u0026#34;beloep\u0026#34;:1135929, \u0026#34;tekniskNavn\u0026#34;:\u0026#34;bruttoformue\u0026#34;, \u0026#34;visningstekst\u0026#34;:\u0026#34;Bruttoformue\u0026#34;, \u0026#34;infotekst\u0026#34;:null } ] }, { \u0026#34;kategori\u0026#34;:\u0026#34;GJELD\u0026#34;, \u0026#34;poster\u0026#34;:[ { \u0026#34;personer\u0026#34;:[ { \u0026#34;identifikator\u0026#34;:\u0026#34;27847099416\u0026#34;, \u0026#34;beloep\u0026#34;:29188 } ], \u0026#34;beloep\u0026#34;:29188, \u0026#34;tekniskNavn\u0026#34;:\u0026#34;samletGjeld\u0026#34;, \u0026#34;visningstekst\u0026#34;:\u0026#34;Sum gjeld\u0026#34;, \u0026#34;infotekst\u0026#34;:null } ] }, { \u0026#34;kategori\u0026#34;:\u0026#34;ANNET\u0026#34;, \u0026#34;poster\u0026#34;:[ { \u0026#34;personer\u0026#34;:[ { \u0026#34;identifikator\u0026#34;:\u0026#34;04817299771\u0026#34;, \u0026#34;beloep\u0026#34;:717063 }, { \u0026#34;identifikator\u0026#34;:\u0026#34;27847099416\u0026#34;, \u0026#34;beloep\u0026#34;:80318 } ], \u0026#34;beloep\u0026#34;:797381, \u0026#34;tekniskNavn\u0026#34;:\u0026#34;alminneligInntektFoerSaerfradrag\u0026#34;, \u0026#34;visningstekst\u0026#34;:\u0026#34;Alminnelig inntekt før særfradrag\u0026#34;, \u0026#34;infotekst\u0026#34;:null }, { \u0026#34;personer\u0026#34;:[ { \u0026#34;identifikator\u0026#34;:\u0026#34;04817299771\u0026#34;, \u0026#34;beloep\u0026#34;:104450 }, { \u0026#34;identifikator\u0026#34;:\u0026#34;27847099416\u0026#34;, \u0026#34;beloep\u0026#34;:67262 } ], \u0026#34;beloep\u0026#34;:171712, \u0026#34;tekniskNavn\u0026#34;:\u0026#34;minstefradragIInntekt\u0026#34;, \u0026#34;visningstekst\u0026#34;:\u0026#34;Minstefradrag i egen inntekt\u0026#34;, \u0026#34;infotekst\u0026#34;:null }, { \u0026#34;personer\u0026#34;:[ { \u0026#34;identifikator\u0026#34;:\u0026#34;04817299771\u0026#34;, \u0026#34;beloep\u0026#34;:821513 }, { \u0026#34;identifikator\u0026#34;:\u0026#34;27847099416\u0026#34;, \u0026#34;beloep\u0026#34;:148456 } ], \u0026#34;beloep\u0026#34;:969969, \u0026#34;tekniskNavn\u0026#34;:\u0026#34;sumInntekterIAlminneligInntektFoerFordelingsfradrag\u0026#34;, \u0026#34;visningstekst\u0026#34;:\u0026#34;Sum inntekter\u0026#34;, \u0026#34;infotekst\u0026#34;:null }, { \u0026#34;personer\u0026#34;:[ { \u0026#34;identifikator\u0026#34;:\u0026#34;04817299771\u0026#34;, \u0026#34;beloep\u0026#34;:1284727 } ], \u0026#34;beloep\u0026#34;:1284727, \u0026#34;tekniskNavn\u0026#34;:\u0026#34;verdiFoerVerdsettingsrabattForAksje\u0026#34;, \u0026#34;visningstekst\u0026#34;:\u0026#34;Aksjer\u0026#34;, \u0026#34;infotekst\u0026#34;:null } ] } ], \u0026#34;beregningsbeloep\u0026#34;:567127, \u0026#34;inntekt\u0026#34;:{ \u0026#34;beloep\u0026#34;:801718, \u0026#34;beregning\u0026#34;:[ { \u0026#34;tekniskNavn\u0026#34;:\u0026#34;arbeidsinntekt\u0026#34;, \u0026#34;visningstekst\u0026#34;:\u0026#34;Arbeidsinntekt\u0026#34;, \u0026#34;beloep\u0026#34;:772062, \u0026#34;operasjon\u0026#34;:\u0026#34;ADDERE\u0026#34;, \u0026#34;type\u0026#34;:\u0026#34;POST\u0026#34;, \u0026#34;beregningsgrunnlag\u0026#34;:[ ], \u0026#34;beregningsposter\u0026#34;:[ { \u0026#34;tekniskNavn\u0026#34;:\u0026#34;samletLoennsinntektMedTrygdeavgiftspliktOgMedTrekkplikt\u0026#34;, \u0026#34;visningstekst\u0026#34;:\u0026#34;Lønn og naturalytelser med mer\u0026#34;, \u0026#34;operasjon\u0026#34;:\u0026#34;ADDERE\u0026#34;, \u0026#34;beloep\u0026#34;:767670, \u0026#34;kilde\u0026#34;:\u0026#34;SKATTEETATEN\u0026#34;, \u0026#34;kanEndreVisningstekst\u0026#34;:false, \u0026#34;identifikator\u0026#34;:\u0026#34;04817299771\u0026#34;, \u0026#34;infotekst\u0026#34;:null, \u0026#34;eksempeltekst\u0026#34;:null }, { \u0026#34;tekniskNavn\u0026#34;:\u0026#34;avkortetFordelVedElektroniskKommunikasjon\u0026#34;, \u0026#34;visningstekst\u0026#34;:\u0026#34;Fordel elektronisk kommunikasjon\u0026#34;, \u0026#34;operasjon\u0026#34;:\u0026#34;ADDERE\u0026#34;, \u0026#34;beloep\u0026#34;:4392, \u0026#34;kilde\u0026#34;:\u0026#34;SKATTEETATEN\u0026#34;, \u0026#34;kanEndreVisningstekst\u0026#34;:false, \u0026#34;identifikator\u0026#34;:\u0026#34;04817299771\u0026#34;, \u0026#34;infotekst\u0026#34;:null, \u0026#34;eksempeltekst\u0026#34;:null } ] }, { \u0026#34;tekniskNavn\u0026#34;:\u0026#34;renteinntekt\u0026#34;, \u0026#34;visningstekst\u0026#34;:\u0026#34;Renteinntekt\u0026#34;, \u0026#34;beloep\u0026#34;:2163, \u0026#34;operasjon\u0026#34;:\u0026#34;ADDERE\u0026#34;, \u0026#34;type\u0026#34;:\u0026#34;POST\u0026#34;, \u0026#34;beregningsgrunnlag\u0026#34;:[ ], \u0026#34;beregningsposter\u0026#34;:[ { \u0026#34;tekniskNavn\u0026#34;:\u0026#34;samledeOpptjenteRenterIInnenlandskeBanker\u0026#34;, \u0026#34;visningstekst\u0026#34;:\u0026#34;Renter av bankinnskudd\u0026#34;, \u0026#34;operasjon\u0026#34;:\u0026#34;ADDERE\u0026#34;, \u0026#34;beloep\u0026#34;:2163, \u0026#34;kilde\u0026#34;:\u0026#34;SKATTEETATEN\u0026#34;, \u0026#34;kanEndreVisningstekst\u0026#34;:false, \u0026#34;identifikator\u0026#34;:\u0026#34;04817299771\u0026#34;, \u0026#34;infotekst\u0026#34;:null, \u0026#34;eksempeltekst\u0026#34;:null } ] }, { \u0026#34;tekniskNavn\u0026#34;:\u0026#34;avkastningFormue\u0026#34;, \u0026#34;visningstekst\u0026#34;:\u0026#34;Avkastning av formue\u0026#34;, \u0026#34;beloep\u0026#34;:27493, \u0026#34;operasjon\u0026#34;:\u0026#34;ADDERE\u0026#34;, \u0026#34;type\u0026#34;:\u0026#34;POST\u0026#34;, \u0026#34;beregningsgrunnlag\u0026#34;:[ ], \u0026#34;beregningsposter\u0026#34;:[ { \u0026#34;tekniskNavn\u0026#34;:\u0026#34;utbytteFraAksje\u0026#34;, \u0026#34;visningstekst\u0026#34;:\u0026#34;Aksjeutbytte\u0026#34;, \u0026#34;operasjon\u0026#34;:\u0026#34;ADDERE\u0026#34;, \u0026#34;beloep\u0026#34;:27493, \u0026#34;kilde\u0026#34;:\u0026#34;SKATTEETATEN\u0026#34;, \u0026#34;kanEndreVisningstekst\u0026#34;:false, \u0026#34;identifikator\u0026#34;:\u0026#34;04817299771\u0026#34;, \u0026#34;infotekst\u0026#34;:null, \u0026#34;eksempeltekst\u0026#34;:null } ] } ] }, \u0026#34;fradrag\u0026#34;:{ \u0026#34;beloep\u0026#34;:234591, \u0026#34;beregning\u0026#34;:[ { \u0026#34;tekniskNavn\u0026#34;:\u0026#34;skatt\u0026#34;, \u0026#34;visningstekst\u0026#34;:\u0026#34;Skatt\u0026#34;, \u0026#34;beloep\u0026#34;:234591, \u0026#34;operasjon\u0026#34;:\u0026#34;ADDERE\u0026#34;, \u0026#34;type\u0026#34;:\u0026#34;GRUNNLAG\u0026#34;, \u0026#34;beregningsgrunnlag\u0026#34;:[ { \u0026#34;tekniskNavn\u0026#34;:\u0026#34;beregnetSkatt\u0026#34;, \u0026#34;visningstekst\u0026#34;:\u0026#34;Beregnet skatt\u0026#34;, \u0026#34;beloep\u0026#34;:234591, \u0026#34;operasjon\u0026#34;:\u0026#34;ADDERE\u0026#34;, \u0026#34;beregningsposter\u0026#34;:[ { \u0026#34;tekniskNavn\u0026#34;:\u0026#34;/beregnetSkattFastland/informasjonTilSkattelister/beregnetSkatt\u0026#34;, \u0026#34;visningstekst\u0026#34;:\u0026#34;Beregnet skatt\u0026#34;, \u0026#34;operasjon\u0026#34;:\u0026#34;ADDERE\u0026#34;, \u0026#34;beloep\u0026#34;:234591, \u0026#34;kilde\u0026#34;:\u0026#34;SKATTEETATEN\u0026#34;, \u0026#34;kanEndreVisningstekst\u0026#34;:false, \u0026#34;identifikator\u0026#34;:\u0026#34;04817299771\u0026#34;, \u0026#34;infotekst\u0026#34;:null, \u0026#34;eksempeltekst\u0026#34;:null } ] } ], \u0026#34;beregningsposter\u0026#34;:[ ] }, { \u0026#34;tekniskNavn\u0026#34;:\u0026#34;forsorgerfradrag\u0026#34;, \u0026#34;visningstekst\u0026#34;:\u0026#34;Forsørgerfradrag\u0026#34;, \u0026#34;beloep\u0026#34;:0, \u0026#34;operasjon\u0026#34;:\u0026#34;ADDERE\u0026#34;, \u0026#34;type\u0026#34;:\u0026#34;GRUNNLAG\u0026#34;, \u0026#34;beregningsgrunnlag\u0026#34;:[ { \u0026#34;tekniskNavn\u0026#34;:\u0026#34;mellomregningPaarorende\u0026#34;, \u0026#34;visningstekst\u0026#34;:\u0026#34;Forsørgerfradrag OPPRIKTIG DAMESYKKEL (ANNET)\u0026#34;, \u0026#34;beloep\u0026#34;:0, \u0026#34;operasjon\u0026#34;:\u0026#34;ADDERE\u0026#34;, \u0026#34;beregningsposter\u0026#34;:[ { \u0026#34;tekniskNavn\u0026#34;:\u0026#34;kommune.tenktEtterlattePensjon\u0026#34;, \u0026#34;visningstekst\u0026#34;:\u0026#34;Tenkt etterlattepensjon\u0026#34;, \u0026#34;operasjon\u0026#34;:\u0026#34;ADDERE\u0026#34;, \u0026#34;beloep\u0026#34;:0, \u0026#34;kilde\u0026#34;:\u0026#34;MANUELL_INPUT\u0026#34;, \u0026#34;kanEndreVisningstekst\u0026#34;:false, \u0026#34;identifikator\u0026#34;:\u0026#34;27847099416\u0026#34;, \u0026#34;infotekst\u0026#34;:null, \u0026#34;eksempeltekst\u0026#34;:\u0026#34;Tenkt etterlattepensjon beregnes etter reglene i egenandelsforskriften. Hvis etterlattepensjon ikke er aktuelt, fyller du inn 0.\u0026#34; }, { \u0026#34;tekniskNavn\u0026#34;:\u0026#34;avkortetFordelVedElektroniskKommunikasjon\u0026#34;, \u0026#34;visningstekst\u0026#34;:\u0026#34;Fordel elektronisk kommunikasjon\u0026#34;, \u0026#34;operasjon\u0026#34;:\u0026#34;SUBTRAHERE\u0026#34;, \u0026#34;beloep\u0026#34;:3600, \u0026#34;kilde\u0026#34;:\u0026#34;SKATTEETATEN\u0026#34;, \u0026#34;kanEndreVisningstekst\u0026#34;:false, \u0026#34;identifikator\u0026#34;:\u0026#34;27847099416\u0026#34;, \u0026#34;infotekst\u0026#34;:null, \u0026#34;eksempeltekst\u0026#34;:null }, { \u0026#34;tekniskNavn\u0026#34;:\u0026#34;samletLoennsinntektMedTrygdeavgiftspliktOgMedTrekkplikt\u0026#34;, \u0026#34;visningstekst\u0026#34;:\u0026#34;Lønn og naturalytelser med mer\u0026#34;, \u0026#34;operasjon\u0026#34;:\u0026#34;SUBTRAHERE\u0026#34;, \u0026#34;beloep\u0026#34;:142622, \u0026#34;kilde\u0026#34;:\u0026#34;SKATTEETATEN\u0026#34;, \u0026#34;kanEndreVisningstekst\u0026#34;:false, \u0026#34;identifikator\u0026#34;:\u0026#34;27847099416\u0026#34;, \u0026#34;infotekst\u0026#34;:null, \u0026#34;eksempeltekst\u0026#34;:null } ] } ], \u0026#34;beregningsposter\u0026#34;:[ ] } ] }, \u0026#34;soeketidspunkt\u0026#34;:\u0026#34;2024-08-13T13:47:36.829089195Z\u0026#34;, \u0026#34;beregningstype\u0026#34;:\u0026#34;LANGTIDSOPPHOLD_INSTITUSJON\u0026#34;, \u0026#34;feilmeldinger\u0026#34;:[ ] } "
},
{
	"uri": "/tjenester/svarut/konfigurasjon-av-svarut/",
	"title": "Konfigurasjon av SvarUT",
	"tags": [],
	"description": "",
	"content": "Konfigurasjon av SvarUt Etter at det er signert avtale med KS om bruk av SvarUt oversendes en veiledning i konfigurasjon av tjenesten:\nKonfigurasjon av SvarUt\nInformasjon på nettstedet https://ksdif.no er beregnet på kommuner og andre virksomheter som har tegnet avtale om bruk av SvarUt.\n"
},
{
	"uri": "/tjenester/klientpakker/",
	"title": "Distribuerte pakker og klienter - risikovurdering",
	"tags": [],
	"description": "",
	"content": "Kort beskrivelse KS leverer pakker for Java og .NET gjennom henholdsvis Maven Central og nuget.org for flere av tjenestene våre. Eksempelvis Fiks-IO klient, Maskinporten klient og pakker til protokollene Fiks-Arkiv, Fiks-Plan osv.\nRisikovurderinger Det er gjort vurderinger og tiltak for å sikre pakkene som leveres. Risiko kan ligge i kompromitterte pakker i de sentraliserte repositories. Dette kan hende som resultat av:\nTredjepart laster opp kompromitterte pakker til Maven Central eller nuget.org som KS At man har et kompromittert byggemiljø som leverer kompromitterte pakker Avhengige pakker, tredjepart pakker, som følger med KS sine pakker er kompromittert og følger med ut med KS sine pakker Tiltak Felles For å mitigere risiko for kompromitterte pakker til Maven Central og nuget.org gjøres følgende:\nByggeserver er beskyttet Det brukes statisk verktøy som følger med på avhengigheter og manuell gjennomgang ved oppdateringer av pakkene Sentral distribusjonstjener gjør automatiserte tester på pakken for å sjekke at den følger formelle krav før den blir gjort tilgjengelig Maven Alle pakker som skal distribueres til sentral maven distribusjonstjener signeres med egen GPG nøkkel eid av KS Den private delen av GPG nøkkelen og passkey er lagret som credential på bygg server og er bare tilgjengelig for bygg-agenten når den skal publisere pakken Pakkene lastes opp til egen konto på sentral distribusjontjeneste som har tilgang til namespace/groupId no.ks. Ingen andre kontoer vil kunne distribuere pakker under dette namespace (og underliggende namespace) Nuget For å mitigere risiko for kompromitterte nuget pakker til nuget.org gjøres følgende\nNuget pakker signeres med et eget codesign sertifikat som er koblet til KS sitt organisasjonsnummer Opplasting til nuget.org gjøres vha codesign sertifikatet Nuget pakkene på nuget.org er publisert med KS som eier Kodesigneringssertifikat er trygt lagret på bygg server og blir kun tilgjengelig for bygg-agenten når den skal publisere pakken "
},
{
	"uri": "/tjenester/fiksmelding/edialog/",
	"title": "eDialog",
	"tags": [],
	"description": "",
	"content": "Sikker innsending av brev fra innbyggere til organisasjoner via SvarUt. For å bruke eDialog bør man allerede ha tatt i bruk SvarUt og SvarInn. Dersom SvarInn ikke er konfigurert opp for organisasjonsnummeret som mottar meldingene vil disse bli sendt til Altinn.\nBeskrivelse Konfigurasjon av eDialog-mottakere skjer via https://forvaltning.fiks.ks.no under «Fiks melding»-tjenesten og «eDialog». Hver mottaker vil ha en SvarUt-konto tilknyttet seg som vil faktureres for alle meldinger som sendes inn.\neDialog med predefinert mottaker Man kan lenke direkte til eDialog ved å bruke https://min.kommune.no/s/{organisasjonsnummer}. Man kan også bruke mottakerens fire bokstavers id i stedet for organisasjonsnummeret. Denne id\u0026rsquo;en kan finnes i konfigurasjonen for hver enkelt mottaker på https://forvaltning.fiks.ks.no/fiks-konfigurasjon/tjenester/melding/edialog/mottakere.\nSvare på forsendelse ved bruk av eDialog Beskrevet i SvarUt-dokumentasjon\n"
},
{
	"uri": "/tjenester/svarut/edialog/",
	"title": "Fiks eDialog",
	"tags": [],
	"description": "",
	"content": "eDialog er nå en del av Fiks melding. Dokumentasjon for tjenesten finnes her.\nSvare på forsendelse ved bruk av eDialog Dersom man benytter V6 eller nyere av SOAP-service, eller hvilken som helst versjon av REST, for sending av forsendelser til SvarUt, kan man sende med en lenke til eDialog for å besvare forsendelsen. Denne linken vil da ha forhåndsutfylt avsender, mottaker og tittel. Bruk av denne funksjonaliteten krever ikke at man har konfigurert noen mottakere i eDialog, da svaret på forsendelsen vil bli sendt fra den opprinnelige avsenderen i SvarUt og også faktureres denne.\nEn sender inn forsendelse med svarPaForsendelseLink satt til true, og svarSendesTil utfylt med organisasjonsnummeret og adressen man ønsker at et svar skal sendes til. Avsender får en forsendelseid i retur. SvarUt sender vanlig varsel til SDP/Altinn med link for å kunne svare på forsendelsen. Mottaker klikker på \u0026ldquo;svar på forsendelse\u0026rdquo; link i Altinn/SDP. Mottaker fyller ut eDialog skjema og sender det inn. eDialog sender kvittering på innsendt skjema til innbygger på epost. eDialog lager en ny forsendelse til avsender. Dette er utfylt med svarPaForsendelse lik forsendelseid til opprinnelig forsendelse. Sak/Arkivsystem mottar forsendelse via SvarInn og ser at dette er svar på utgående forsendelse og putter svaret på samme sak. "
},
{
	"uri": "/tjenester/fiksprotokoll/protokoll-ssbbarnevern/",
	"title": "Protokoll - Barnevern - fagsysteminnrapportering til Barnevernsregisteret",
	"tags": [],
	"description": "",
	"content": "Barnevern - fagsysteminnrapportering til Barnevernsregisteret er en asynkron protokoll over Fiks IO.\nMeldinger Hver melding består av en zip fil ASIC-E som inneholder payload.json og eventuelle tilhørende vedlegg. Hver melding kan ikke overskride 5GB.\nJson skjema\nFinnes i repoet: https://github.com/statisticsnorway/fiks-protokoll-json-schemas\nMeldingstyper:\nType Navn Innrapportering no.ssb.barnevern.fagsystem.v1.innrapportering Valideringsrapport no.ssb.barnevern.fagsystem.v1.valideringsrapport "
},
{
	"uri": "/tjenester/fiksmelding/del_dokument/",
	"title": "Fiks del dokument",
	"tags": [],
	"description": "",
	"content": "Kort beskrivelse Fiks del dokument er en felleskomponent som brukes i flere av Fiks tjenestene. En typisk oppgave for Fiks SMS komponeneten er når kommunalt ansatte ønsker å dele dokumenter på en sikker måte med kryptering.\n"
},
{
	"uri": "/tjenester/fiksmelding/fiks-sms/",
	"title": "Fiks SMS",
	"tags": [],
	"description": "",
	"content": "Kort beskrivelse Fiks SMS er en felleskomponent som brukes i flere av Fiks tjenestene. En typisk oppgave for Fiks SMS komponeneten er utsendelse av tekstmelding til innbyggere i kommunen som har til formål å få innbygger til å utføre en handling. Dette kan være alt fra informasjon om at byggesaken er ferdig til å varsle om flom eller nedetid for vanntjenester.\nBruk av Fiks SMS Swagger-dokumentasjon: https://editor-next.swagger.io/?url=https://developers.fiks.ks.no/api/varsling-sms-api-v2.json\nFor å sende enkel SMS: POST /varsling/api/v2/sms/{kontoId}/send\n{ \u0026#34;tekst\u0026#34;: \u0026#34;string\u0026#34;, \u0026#34;fnr\u0026#34;: \u0026#34;08956609002\u0026#34;, \u0026#34;telefonnummer\u0026#34;: \u0026#34;string\u0026#34; } For å sende batch SMS på opptil 1000 mottakere: POST /varsling/api/v2/sms/{kontoId}/sendBatch\n{ \u0026#34;telefonnummere\u0026#34;: [ \u0026#34;string\u0026#34; ], \u0026#34;tekst\u0026#34;: \u0026#34;string\u0026#34; } For å gjøre oppslag i Kontakt- og reservasjonsregisteret på opp til 1000 fødselsnummer: POST /varsling/api/v2/sms/{kontoId}/oppslag\n[ { \u0026#34;fnrOrgnr\u0026#34;: \u0026#34;string\u0026#34;, \u0026#34;telefonnummer\u0026#34;: \u0026#34;string\u0026#34;, \u0026#34;telefonnummerStatus\u0026#34;: \u0026#34;GYLDIG\u0026#34; } ] "
},
{
	"uri": "/tjenester/innreise/",
	"title": "Fiks innreise",
	"tags": [],
	"description": "",
	"content": "Kort beskrivelse KS har sammen med Helsedirektoratet (HDIR) utviklet et API som gjør det mulig å hente informasjon om innreisende elektronisk fra HDIR sitt nasjonale kontrollsenter for innreise, til kommunen. Tjenesten heter Fiks innreise. Flere leverandører (Fiks smittesporing (DHIS2), ReMin og Oslo kommune) arbeider med utvikling av funksjonalitet for innreiseoppfølging i kommunene. Fiks innreise er sammen med Fiks prøvesvar sentrale komponenter i dette arbeidet. API-et er også tilgjengelig for kommuner som benytter andre løsninger for innreiseoppfølging enn de nevnte.\nTilgjengelige grensesnitt Grensesnitt Støtte Web portal Nei Maskin til maskin Api-spec Produktbeskrivelse Tjenesten tilbyr et API hvor kommuner kan spørre etter personer som er registrert som innreisende. Dette kan for eksempel være å spørre etter innreisende til et gitt kommunenummer eller fødselsnummer, d-nummer eller nasjonalt hjelpenummer (hentes fra PREG).\nFiks innreise gjør ingenting med dataene som blir importert fra HDIR. Datagrunnlaget vil være basert på en daglig uttrekk fra HDIR. Hver natt vil KS importere data for de siste 10 dager fra HDIR. Siste oppdatering på dataene som ligger hos KS vil være ved midnatt samme dag. Dette betyr at man ikke kan spørre etter innreiser fra dagens dato.\nIntegrasjon (api-spec) Autentisering skjer ved hjelp av en Integrasjon-mekanismen beskrevet her\nEn kan enten velge å sende med fiksOrgId som en del av URL\u0026rsquo;en eller la API\u0026rsquo;et ta seg av å finne tilhørende fiksOrgId til integrasjonsId\u0026rsquo;en som spør.\nUtover dette kan man sende med et request-objekt som inneholder filter-parametrene.\nTestdata Data som ligger i test-miljøet er produksjonsdata KS har fått fra HDIR, som er vasket for personlig informasjon. Det er verdt å merke seg at testdataene stort sett vil vere eldre enn 10 dager. Produksjonsdata vil alltid vere yngre enn 10 dager gamle, så dette vil altså ikke vere gjenspeilet i testdatagrunnlaget.\n"
},
{
	"uri": "/tjenester/klinikermelding/",
	"title": "Fiks klinikermelding",
	"tags": [],
	"description": "",
	"content": "Kort beskrivelse KS har sammen med Folkehelseinstituttet (FHI) utviklet et API som gjør det mulig å sende MSIS klinikermelding direkte fra smittesporingsverktøyet eller EPJ til MSIS ved FHI. Tjenesten heter Fiks klinikermelding. API-et vil bli tatt i bruk av Fiks smittsporing så snart som mulig, og er tilgjengelig for kommuner som benytter andre løsninger til smittesporing enn de nevnte.\nTilgjengelige grensesnitt Grensesnitt Støtte Web portal Nei Maskin til maskin Api-spec Brukeradministrasjon og tilgangsstyring Autentisering skjer ved hjelp av en IntegrasjonPerson-mekanismen beskrevet her Merk at token som sendes med må være et personlig HelseID-token.\nKommunen må også gi tilgang til applikasjonen sin integrasjon samt alle sluttbrukere som skal kunne sende klinikermeldinger på Fiks forvaltning.\nSikkerhet Kommunikasjonen vil være kryptert med TLS. Autentisering med HelseID og Fiks integrasjon.\nEndepunkt (api-spec) For alle endepunktene hentes autentisert bruker fra access token i \u0026ldquo;Authorization\u0026rdquo;-headeren på requesten. Dette tokenet må være utstedt av HelseID med aud-verdi ks:fiks, scope-verdi fhi:msisklinikermeldingapi/api, helseid://scopes/hpr/hpr_number helseid://scopes/identity/security_level helseid://scopes/identity/pid og nivå 3.\n"
},
{
	"uri": "/tjenester/register/",
	"title": "Fiks register",
	"tags": [],
	"description": "",
	"content": "Kort beskrivelse Fiks register en en samling av register tjenester. Fiks register inneholder: Kontaktregisteret Skatte- og inntektsopplysninger (Ny) Skatte- og inntektsopplysninger (Gammel) Skatte- og inntektsopplysninger proxy Folkeregister Revisjoner Dato Kommentar 28.10.2020 Første versjon av Folkeregisteret 19.11.2020 Utvidet dokumentasjon av Folkeregisteret 27.11.2020 Oppdatert Folkeregisteret med API-eksempler 29.09.2021 Oppdatert Folkeregisteret med Oppvekst-uttrekk 12.12.2022 Første versjon av skatte- og inntektsopplysninger 18.04.2023 Oppdatert skatte- og inntektsopplysninger med API-eksempler 16.10.2023 Oppdatert skatte- og inntektsopplysninger med nytt API-eksempel 14.08.2024 Andre versjon av skatte- og inntektsopplysninger 06.09.2024 Oppdatert skatte- og inntektsopplysninger med feilkoder 06.11.2024 Utvidet dokumentasjon av skatte- og inntektsopplysninger "
},
{
	"uri": "/tjenester/register/skatteoginntektsopplysninger_gammel/",
	"title": "Skatte- og inntektsopplysninger (Gammel)",
	"tags": [],
	"description": "",
	"content": "Kort beskrivelse Fiks register tilbyr skatte- og inntektsopplysninger for kommunalt ansatte via et web-basert grensesnitt for innbyggere som søker om kommunale tjenester. Dette grensesnittet er også tilgjengelig som API for kommunene sine fagsystem. API-grensesnittet er ikke ferdig utviklet og endringer kan fortsatt forekomme.\nTilgjengelige grensesnitt Grensesnitt Støtte Web portal Ja Maskin til maskin Api spec v2 Beskrivelse av tjenesten Innbyggertjeneste Gyldige tjenesteområde for rollen Beregningstype Redusert foreldrebetaling SFO/barnehage Foreldrebetaling SFO/barnehage BARNEHAGE_SFO Praktisk bistand og opplæring Helse og omsorg: Praktisk bistand PRAKTISK_BISTAND Langtidsopphold institusjon Helse og omsorg: Langtidsopphold institusjon LANGTIDSOPPHOLD_INSTITUSJON For å bruke API-ene, både proxy og vårt overbygg, må rollen som opprettes være i rett tjenesteområde.\nMiljø Miljø URL Test (Integrasjon) http​s://api.fiks.test.ks.no Produksjon http​s://api.fiks.ks.no APIene er tilgjengelig via Fiks-plattformen som proxy-tjeneste eller via vårt overbygg.\nOppslag via overbygg Vi har laget vårt eget overbygg som gir mulighet for å søke på flere personer. Vi søker om personene har stadie OPPGJØR. Ved redusert foreldrebetaling SFO/barnehage, søkes det også etter UTKAST dersom de ikke har OPPGJØR. Datamodellen er en sammenstilling av det som kommer fra skatteetaten sine APIer og har summert alle poster som hører sammen. For hver tjeneste finnes det en beregningstype som må sendes inn som en del av payloaden, dette erstatter behovet for å bruke rettighetspakke.\nURL for fiks-api (POST): \u0026lt;MILJØ_URL\u0026gt;/register/api/v2/ks/{rolleId}/summertskattegrunnlag Payload, se swagger dokumentasjon\nAPI-dokumentasjon Swagger dokumentasjon for overbygg finner du her. Bruk også dokumentasjon fra Skatteetaten.\nManuelle poster Det finnes også en del ulike poster som har andre kilder enn Skatteetaten. Disse kan sendes med som en del av requesten, og vil da bli kalkulert sammen med data fra Skatteetaten. For å hente ut hvilke poster som er gyldig kan endepunktet \u0026lt;MILJØ_URL\u0026gt;/register/api/v2/ks/{rolleId}/summertskattegrunnlag/verdier/{beregningstype}/{inntektsaar} brukes. Hvilke poster som er gyldige er avhengig av beregningstype, inntektsår og persontype.\nEksempel med bruk av API-overbygg Payload\n{ \u0026#34;soekere\u0026#34;: [ { \u0026#34;personidentifikator\u0026#34;: \u0026#34;25851449852\u0026#34;, \u0026#34;personType\u0026#34;: \u0026#34;SOEKER\u0026#34;, \u0026#34;poster\u0026#34;: [ { \u0026#34;tekniskNavn\u0026#34;: \u0026#34;nav.hjelpestoenadFraFolketrygden\u0026#34;, \u0026#34;beloep\u0026#34;: \u0026#34;2000\u0026#34; }, { \u0026#34;tekniskNavn\u0026#34;: \u0026#34;nav.omsorgsloennEtterHelseOgOmsorgstjenesteloven\u0026#34;, \u0026#34;beloep\u0026#34;: \u0026#34;1000\u0026#34; }, { \u0026#34;tekniskNavn\u0026#34;: \u0026#34;kommune.skjoennsmessigeFradrag\u0026#34;, \u0026#34;visningsnavn\u0026#34;: \u0026#34;Fradrag 1\u0026#34;, \u0026#34;beloep\u0026#34;: \u0026#34;3000\u0026#34; } ] }, { \u0026#34;personidentifikator\u0026#34;: \u0026#34;06882949409\u0026#34;, \u0026#34;personType\u0026#34;: \u0026#34;EKTEFELLE\u0026#34; } ], \u0026#34;beregningstype\u0026#34;: \u0026#34;PRAKTISK_BISTAND\u0026#34;, \u0026#34;inntektsaar\u0026#34;: 2021 } Svar\n{ \u0026#34;inntektsaar\u0026#34;: 2021, \u0026#34;stadie\u0026#34;: \u0026#34;OPPGJOER\u0026#34;, \u0026#34;summertSkattegrunnlagPersoner\u0026#34;: [ { \u0026#34;personidentifikator\u0026#34;: \u0026#34;25851449852\u0026#34;, \u0026#34;personType\u0026#34;: \u0026#34;SOEKER\u0026#34;, \u0026#34;skjermet\u0026#34;: false, \u0026#34;stadie\u0026#34;: \u0026#34;OPPGJOER\u0026#34;, \u0026#34;beloep\u0026#34;: 93431, \u0026#34;grunnlag\u0026#34;: [ { \u0026#34;navn\u0026#34;: \u0026#34;1\u0026#34;, \u0026#34;beskrivelse\u0026#34;: \u0026#34;Alminnelig inntekt før særfradrag\u0026#34;, \u0026#34;beloep\u0026#34;: 6700, \u0026#34;operasjon\u0026#34;: \u0026#34;ADDERE\u0026#34;, \u0026#34;poster\u0026#34;: [ { \u0026#34;tekniskNavn\u0026#34;: \u0026#34;alminneligInntektFoerSaerfradrag\u0026#34;, \u0026#34;visningsnavn\u0026#34;: \u0026#34;Alminnelig inntekt før særfradrag\u0026#34;, \u0026#34;beloep\u0026#34;: 6700, \u0026#34;kilde\u0026#34;: \u0026#34;SKATTEETATEN\u0026#34;, \u0026#34;kanEndreVisningsnavn\u0026#34;: false } ] }, { \u0026#34;navn\u0026#34;: \u0026#34;3\u0026#34;, \u0026#34;beskrivelse\u0026#34;: \u0026#34;Summerte poster oppjustert av gevinst\u0026#34;, \u0026#34;beloep\u0026#34;: 39199, \u0026#34;operasjon\u0026#34;: \u0026#34;SUBTRAHERE\u0026#34;, \u0026#34;poster\u0026#34;: [ { \u0026#34;tekniskNavn\u0026#34;: \u0026#34;oppjustertTilleggTilGevinstVedRealisasjonAvAksje\u0026#34;, \u0026#34;visningsnavn\u0026#34;: \u0026#34;Oppjustering av gevinst ved salg av aksjer\u0026#34;, \u0026#34;beloep\u0026#34;: 39199, \u0026#34;kilde\u0026#34;: \u0026#34;SKATTEETATEN\u0026#34;, \u0026#34;kanEndreVisningsnavn\u0026#34;: false } ] }, { \u0026#34;navn\u0026#34;: \u0026#34;4\u0026#34;, \u0026#34;beskrivelse\u0026#34;: \u0026#34;Summerte poster tap\u0026#34;, \u0026#34;beloep\u0026#34;: 88840, \u0026#34;operasjon\u0026#34;: \u0026#34;ADDERE\u0026#34;, \u0026#34;poster\u0026#34;: [ { \u0026#34;tekniskNavn\u0026#34;: \u0026#34;tapVedRealisasjonAvAksje\u0026#34;, \u0026#34;visningsnavn\u0026#34;: \u0026#34;Tap ved salg av aksjer\u0026#34;, \u0026#34;beloep\u0026#34;: 88840, \u0026#34;kilde\u0026#34;: \u0026#34;SKATTEETATEN\u0026#34;, \u0026#34;kanEndreVisningsnavn\u0026#34;: false } ] }, { \u0026#34;navn\u0026#34;: \u0026#34;5\u0026#34;, \u0026#34;beskrivelse\u0026#34;: \u0026#34;Summerte poster oppjustering av tap\u0026#34;, \u0026#34;beloep\u0026#34;: 39090, \u0026#34;operasjon\u0026#34;: \u0026#34;ADDERE\u0026#34;, \u0026#34;poster\u0026#34;: [ { \u0026#34;tekniskNavn\u0026#34;: \u0026#34;oppjustertTilleggTilTapVedRealisasjonAvAksje\u0026#34;, \u0026#34;visningsnavn\u0026#34;: \u0026#34;Oppjustering av tap ved salg av aksjer\u0026#34;, \u0026#34;beloep\u0026#34;: 39090, \u0026#34;kilde\u0026#34;: \u0026#34;SKATTEETATEN\u0026#34;, \u0026#34;kanEndreVisningsnavn\u0026#34;: false } ] }, { \u0026#34;navn\u0026#34;: \u0026#34;NAV.HJELPESTOENADFRAFOLKETRYGDEN\u0026#34;, \u0026#34;beskrivelse\u0026#34;: \u0026#34;Hjelpestønad fra Folketrygden\u0026#34;, \u0026#34;beloep\u0026#34;: 2000, \u0026#34;operasjon\u0026#34;: \u0026#34;ADDERE\u0026#34;, \u0026#34;poster\u0026#34;: [ { \u0026#34;tekniskNavn\u0026#34;: \u0026#34;nav.hjelpestoenadFraFolketrygden\u0026#34;, \u0026#34;visningsnavn\u0026#34;: \u0026#34;Hjelpestønad fra Folketrygden\u0026#34;, \u0026#34;beloep\u0026#34;: 2000, \u0026#34;kilde\u0026#34;: \u0026#34;NAV\u0026#34;, \u0026#34;kanEndreVisningsnavn\u0026#34;: false } ] }, { \u0026#34;navn\u0026#34;: \u0026#34;NAV.OMSORGSLOENNETTERHELSEOGOMSORGSTJENESTELOVEN\u0026#34;, \u0026#34;beskrivelse\u0026#34;: \u0026#34;Omsorgslønn etter helse- og omsorgstjenesteloven § 3-6\u0026#34;, \u0026#34;beloep\u0026#34;: 1000, \u0026#34;operasjon\u0026#34;: \u0026#34;SUBTRAHERE\u0026#34;, \u0026#34;poster\u0026#34;: [ { \u0026#34;tekniskNavn\u0026#34;: \u0026#34;nav.omsorgsloennEtterHelseOgOmsorgstjenesteloven\u0026#34;, \u0026#34;visningsnavn\u0026#34;: \u0026#34;Omsorgslønn etter helse- og omsorgstjenesteloven § 3-6\u0026#34;, \u0026#34;beloep\u0026#34;: 1000, \u0026#34;kilde\u0026#34;: \u0026#34;NAV\u0026#34;, \u0026#34;kanEndreVisningsnavn\u0026#34;: false } ] }, { \u0026#34;navn\u0026#34;: \u0026#34;KOMMUNE.SKJOENNSMESSIGEFRADRAG\u0026#34;, \u0026#34;beskrivelse\u0026#34;: \u0026#34;Skjønnsmessig fradrag\u0026#34;, \u0026#34;beloep\u0026#34;: 3000, \u0026#34;operasjon\u0026#34;: \u0026#34;SUBTRAHERE\u0026#34;, \u0026#34;poster\u0026#34;: [ { \u0026#34;tekniskNavn\u0026#34;: \u0026#34;kommune.skjoennsmessigeFradrag\u0026#34;, \u0026#34;visningsnavn\u0026#34;: \u0026#34;Fradrag 1\u0026#34;, \u0026#34;beloep\u0026#34;: 3000, \u0026#34;kilde\u0026#34;: \u0026#34;KOMMUNE\u0026#34;, \u0026#34;kanEndreVisningsnavn\u0026#34;: true } ] } ], \u0026#34;personnavn\u0026#34;: { \u0026#34;etternavn\u0026#34;: \u0026#34;APPELSIN\u0026#34;, \u0026#34;fornavn\u0026#34;: \u0026#34;GLAD\u0026#34;, \u0026#34;mellomnavn\u0026#34;: null }, \u0026#34;skatteoppgjoersdato\u0026#34;: \u0026#34;2023-08-30\u0026#34;, \u0026#34;registreringstidpunkt\u0026#34;: \u0026#34;2023-08-30T13:04:58Z\u0026#34;, \u0026#34;skattFeilmelding\u0026#34;: null }, { \u0026#34;personidentifikator\u0026#34;: \u0026#34;06882949409\u0026#34;, \u0026#34;personType\u0026#34;: \u0026#34;EKTEFELLE\u0026#34;, \u0026#34;skjermet\u0026#34;: false, \u0026#34;stadie\u0026#34;: \u0026#34;OPPGJOER\u0026#34;, \u0026#34;beloep\u0026#34;: 6381000, \u0026#34;grunnlag\u0026#34;: [ { \u0026#34;navn\u0026#34;: \u0026#34;1\u0026#34;, \u0026#34;beskrivelse\u0026#34;: \u0026#34;Alminnelig inntekt før særfradrag\u0026#34;, \u0026#34;beloep\u0026#34;: 6801000, \u0026#34;operasjon\u0026#34;: \u0026#34;ADDERE\u0026#34;, \u0026#34;poster\u0026#34;: [ { \u0026#34;tekniskNavn\u0026#34;: \u0026#34;alminneligInntektFoerSaerfradrag\u0026#34;, \u0026#34;visningsnavn\u0026#34;: \u0026#34;Alminnelig inntekt før særfradrag\u0026#34;, \u0026#34;beloep\u0026#34;: 6801000, \u0026#34;kilde\u0026#34;: \u0026#34;SKATTEETATEN\u0026#34;, \u0026#34;kanEndreVisningsnavn\u0026#34;: false } ] }, { \u0026#34;navn\u0026#34;: \u0026#34;2\u0026#34;, \u0026#34;beskrivelse\u0026#34;: \u0026#34;Summerte gevinstposter\u0026#34;, \u0026#34;beloep\u0026#34;: 200000, \u0026#34;operasjon\u0026#34;: \u0026#34;SUBTRAHERE\u0026#34;, \u0026#34;poster\u0026#34;: [ { \u0026#34;tekniskNavn\u0026#34;: \u0026#34;gevinstVedSalgAvAndelISDF\u0026#34;, \u0026#34;visningsnavn\u0026#34;: \u0026#34;Gevinst ved salg mv. av andel i selskap med deltakerfastsetting\u0026#34;, \u0026#34;beloep\u0026#34;: 200000, \u0026#34;kilde\u0026#34;: \u0026#34;SKATTEETATEN\u0026#34;, \u0026#34;kanEndreVisningsnavn\u0026#34;: false } ] }, { \u0026#34;navn\u0026#34;: \u0026#34;3\u0026#34;, \u0026#34;beskrivelse\u0026#34;: \u0026#34;Summerte poster oppjustert av gevinst\u0026#34;, \u0026#34;beloep\u0026#34;: 88000, \u0026#34;operasjon\u0026#34;: \u0026#34;SUBTRAHERE\u0026#34;, \u0026#34;poster\u0026#34;: [ { \u0026#34;tekniskNavn\u0026#34;: \u0026#34;oppjustertTilleggTilGevinstVedSalgAvAndelISDF\u0026#34;, \u0026#34;visningsnavn\u0026#34;: \u0026#34;Oppjustering av gevinst ved salg mv. av andel i selskap med deltakerfastsetting\u0026#34;, \u0026#34;beloep\u0026#34;: 88000, \u0026#34;kilde\u0026#34;: \u0026#34;SKATTEETATEN\u0026#34;, \u0026#34;kanEndreVisningsnavn\u0026#34;: false } ] }, { \u0026#34;navn\u0026#34;: \u0026#34;7\u0026#34;, \u0026#34;beskrivelse\u0026#34;: \u0026#34;Summerte poster oppjustering av utbytte\u0026#34;, \u0026#34;beloep\u0026#34;: 132000, \u0026#34;operasjon\u0026#34;: \u0026#34;SUBTRAHERE\u0026#34;, \u0026#34;poster\u0026#34;: [ { \u0026#34;tekniskNavn\u0026#34;: \u0026#34;oppjustertTilleggTilAndelIFellesTilleggIAlminneligInntektFraSDFInnenAnnenNaering\u0026#34;, \u0026#34;visningsnavn\u0026#34;: \u0026#34;Oppjustering av tillegg i alminnelig inntekt fra selskap med deltakerfastsetting\u0026#34;, \u0026#34;beloep\u0026#34;: 132000, \u0026#34;kilde\u0026#34;: \u0026#34;SKATTEETATEN\u0026#34;, \u0026#34;kanEndreVisningsnavn\u0026#34;: false } ] } ], \u0026#34;personnavn\u0026#34;: { \u0026#34;etternavn\u0026#34;: \u0026#34;VEVSTOL\u0026#34;, \u0026#34;fornavn\u0026#34;: \u0026#34;KONSERVATIV\u0026#34;, \u0026#34;mellomnavn\u0026#34;: null }, \u0026#34;skatteoppgjoersdato\u0026#34;: \u0026#34;2023-08-30\u0026#34;, \u0026#34;registreringstidpunkt\u0026#34;: \u0026#34;2023-08-30T13:04:56Z\u0026#34;, \u0026#34;skattFeilmelding\u0026#34;: null } ], \u0026#34;samletBeloep\u0026#34;: 6474431, \u0026#34;samletGrunnlag\u0026#34;: [ { \u0026#34;navn\u0026#34;: \u0026#34;1\u0026#34;, \u0026#34;beskrivelse\u0026#34;: \u0026#34;Alminnelig inntekt før særfradrag\u0026#34;, \u0026#34;beloep\u0026#34;: 6807700, \u0026#34;operasjon\u0026#34;: \u0026#34;ADDERE\u0026#34;, \u0026#34;poster\u0026#34;: [ { \u0026#34;tekniskNavn\u0026#34;: \u0026#34;alminneligInntektFoerSaerfradrag\u0026#34;, \u0026#34;visningsnavn\u0026#34;: \u0026#34;Alminnelig inntekt før særfradrag\u0026#34;, \u0026#34;beloep\u0026#34;: 6807700, \u0026#34;kilde\u0026#34;: \u0026#34;SKATTEETATEN\u0026#34;, \u0026#34;kanEndreVisningsnavn\u0026#34;: false } ] }, { \u0026#34;navn\u0026#34;: \u0026#34;2\u0026#34;, \u0026#34;beskrivelse\u0026#34;: \u0026#34;Summerte gevinstposter\u0026#34;, \u0026#34;beloep\u0026#34;: 200000, \u0026#34;operasjon\u0026#34;: \u0026#34;SUBTRAHERE\u0026#34;, \u0026#34;poster\u0026#34;: [ { \u0026#34;tekniskNavn\u0026#34;: \u0026#34;gevinstVedSalgAvAndelISDF\u0026#34;, \u0026#34;visningsnavn\u0026#34;: \u0026#34;Gevinst ved salg mv. av andel i selskap med deltakerfastsetting\u0026#34;, \u0026#34;beloep\u0026#34;: 200000, \u0026#34;kilde\u0026#34;: \u0026#34;SKATTEETATEN\u0026#34;, \u0026#34;kanEndreVisningsnavn\u0026#34;: false } ] }, { \u0026#34;navn\u0026#34;: \u0026#34;3\u0026#34;, \u0026#34;beskrivelse\u0026#34;: \u0026#34;Summerte poster oppjustert av gevinst\u0026#34;, \u0026#34;beloep\u0026#34;: 127199, \u0026#34;operasjon\u0026#34;: \u0026#34;SUBTRAHERE\u0026#34;, \u0026#34;poster\u0026#34;: [ { \u0026#34;tekniskNavn\u0026#34;: \u0026#34;oppjustertTilleggTilGevinstVedRealisasjonAvAksje\u0026#34;, \u0026#34;visningsnavn\u0026#34;: \u0026#34;Oppjustering av gevinst ved salg av aksjer\u0026#34;, \u0026#34;beloep\u0026#34;: 39199, \u0026#34;kilde\u0026#34;: \u0026#34;SKATTEETATEN\u0026#34;, \u0026#34;kanEndreVisningsnavn\u0026#34;: false }, { \u0026#34;tekniskNavn\u0026#34;: \u0026#34;oppjustertTilleggTilGevinstVedSalgAvAndelISDF\u0026#34;, \u0026#34;visningsnavn\u0026#34;: \u0026#34;Oppjustering av gevinst ved salg mv. av andel i selskap med deltakerfastsetting\u0026#34;, \u0026#34;beloep\u0026#34;: 88000, \u0026#34;kilde\u0026#34;: \u0026#34;SKATTEETATEN\u0026#34;, \u0026#34;kanEndreVisningsnavn\u0026#34;: false } ] }, { \u0026#34;navn\u0026#34;: \u0026#34;4\u0026#34;, \u0026#34;beskrivelse\u0026#34;: \u0026#34;Summerte poster tap\u0026#34;, \u0026#34;beloep\u0026#34;: 88840, \u0026#34;operasjon\u0026#34;: \u0026#34;ADDERE\u0026#34;, \u0026#34;poster\u0026#34;: [ { \u0026#34;tekniskNavn\u0026#34;: \u0026#34;tapVedRealisasjonAvAksje\u0026#34;, \u0026#34;visningsnavn\u0026#34;: \u0026#34;Tap ved salg av aksjer\u0026#34;, \u0026#34;beloep\u0026#34;: 88840, \u0026#34;kilde\u0026#34;: \u0026#34;SKATTEETATEN\u0026#34;, \u0026#34;kanEndreVisningsnavn\u0026#34;: false } ] }, { \u0026#34;navn\u0026#34;: \u0026#34;5\u0026#34;, \u0026#34;beskrivelse\u0026#34;: \u0026#34;Summerte poster oppjustering av tap\u0026#34;, \u0026#34;beloep\u0026#34;: 39090, \u0026#34;operasjon\u0026#34;: \u0026#34;ADDERE\u0026#34;, \u0026#34;poster\u0026#34;: [ { \u0026#34;tekniskNavn\u0026#34;: \u0026#34;oppjustertTilleggTilTapVedRealisasjonAvAksje\u0026#34;, \u0026#34;visningsnavn\u0026#34;: \u0026#34;Oppjustering av tap ved salg av aksjer\u0026#34;, \u0026#34;beloep\u0026#34;: 39090, \u0026#34;kilde\u0026#34;: \u0026#34;SKATTEETATEN\u0026#34;, \u0026#34;kanEndreVisningsnavn\u0026#34;: false } ] }, { \u0026#34;navn\u0026#34;: \u0026#34;7\u0026#34;, \u0026#34;beskrivelse\u0026#34;: \u0026#34;Summerte poster oppjustering av utbytte\u0026#34;, \u0026#34;beloep\u0026#34;: 132000, \u0026#34;operasjon\u0026#34;: \u0026#34;SUBTRAHERE\u0026#34;, \u0026#34;poster\u0026#34;: [ { \u0026#34;tekniskNavn\u0026#34;: \u0026#34;oppjustertTilleggTilAndelIFellesTilleggIAlminneligInntektFraSDFInnenAnnenNaering\u0026#34;, \u0026#34;visningsnavn\u0026#34;: \u0026#34;Oppjustering av tillegg i alminnelig inntekt fra selskap med deltakerfastsetting\u0026#34;, \u0026#34;beloep\u0026#34;: 132000, \u0026#34;kilde\u0026#34;: \u0026#34;SKATTEETATEN\u0026#34;, \u0026#34;kanEndreVisningsnavn\u0026#34;: false } ] }, { \u0026#34;navn\u0026#34;: \u0026#34;NAV.HJELPESTOENADFRAFOLKETRYGDEN\u0026#34;, \u0026#34;beskrivelse\u0026#34;: \u0026#34;Hjelpestønad fra Folketrygden\u0026#34;, \u0026#34;beloep\u0026#34;: 2000, \u0026#34;operasjon\u0026#34;: \u0026#34;ADDERE\u0026#34;, \u0026#34;poster\u0026#34;: [ { \u0026#34;tekniskNavn\u0026#34;: \u0026#34;nav.hjelpestoenadFraFolketrygden\u0026#34;, \u0026#34;visningsnavn\u0026#34;: \u0026#34;Hjelpestønad fra Folketrygden\u0026#34;, \u0026#34;beloep\u0026#34;: 2000, \u0026#34;kilde\u0026#34;: \u0026#34;NAV\u0026#34;, \u0026#34;kanEndreVisningsnavn\u0026#34;: false } ] }, { \u0026#34;navn\u0026#34;: \u0026#34;NAV.OMSORGSLOENNETTERHELSEOGOMSORGSTJENESTELOVEN\u0026#34;, \u0026#34;beskrivelse\u0026#34;: \u0026#34;Omsorgslønn etter helse- og omsorgstjenesteloven § 3-6\u0026#34;, \u0026#34;beloep\u0026#34;: 1000, \u0026#34;operasjon\u0026#34;: \u0026#34;SUBTRAHERE\u0026#34;, \u0026#34;poster\u0026#34;: [ { \u0026#34;tekniskNavn\u0026#34;: \u0026#34;nav.omsorgsloennEtterHelseOgOmsorgstjenesteloven\u0026#34;, \u0026#34;visningsnavn\u0026#34;: \u0026#34;Omsorgslønn etter helse- og omsorgstjenesteloven § 3-6\u0026#34;, \u0026#34;beloep\u0026#34;: 1000, \u0026#34;kilde\u0026#34;: \u0026#34;NAV\u0026#34;, \u0026#34;kanEndreVisningsnavn\u0026#34;: false } ] }, { \u0026#34;navn\u0026#34;: \u0026#34;KOMMUNE.SKJOENNSMESSIGEFRADRAG\u0026#34;, \u0026#34;beskrivelse\u0026#34;: \u0026#34;Skjønnsmessig fradrag\u0026#34;, \u0026#34;beloep\u0026#34;: 3000, \u0026#34;operasjon\u0026#34;: \u0026#34;SUBTRAHERE\u0026#34;, \u0026#34;poster\u0026#34;: [ { \u0026#34;tekniskNavn\u0026#34;: \u0026#34;kommune.skjoennsmessigeFradrag\u0026#34;, \u0026#34;visningsnavn\u0026#34;: \u0026#34;Fradrag 1\u0026#34;, \u0026#34;beloep\u0026#34;: 3000, \u0026#34;kilde\u0026#34;: \u0026#34;KOMMUNE\u0026#34;, \u0026#34;kanEndreVisningsnavn\u0026#34;: true } ] } ], \u0026#34;soeketidspunkt\u0026#34;: \u0026#34;2023-09-27T10:47:23.356207606+02:00\u0026#34;, \u0026#34;beregningstype\u0026#34;: \u0026#34;PRAKTISK_BISTAND\u0026#34; } "
},
{
	"uri": "/tjenester/register/skatteoginntektsopplysninger_proxy/",
	"title": "Skatte- og inntektsopplysninger proxy",
	"tags": [],
	"description": "",
	"content": "Oppslag via proxy Det er mulig å bruke Skatteetatens delingstjeneste for skatte og inntektsopplysninger som en proxy-tjeneste i Fiks register og samtidig benytte seg av roller, rettighetsstyring og dataminimering som Fiks register tilbyr. Oppbygging av URL gjøres så likt som mulig Skatteetatens egen URL. Datamodellen forblir uendret.\nSummert skattegrunnlag URL for proxy-api (GET): \u0026lt;MILJØ_URL\u0026gt;/skatteetaten/formueinntekt/summertskatt/api/v2/{ROLLE_ID}/{STADIE}/{RETTIGHETSPAKKE}/{INNTEKTSAAR}/{PERSONIDENTIFIKATOR}\nAPI-dokumentasjon Skatteetaten har lagt ut dokumentasjon her Summert skattegrunnlag og Swagger\nEksempel { \u0026#34;personidentifikator\u0026#34;: \u0026#34;03870349520\u0026#34;, \u0026#34;inntektsaar\u0026#34;: \u0026#34;2021\u0026#34;, \u0026#34;skjermet\u0026#34;: false, \u0026#34;grunnlag\u0026#34;: [ { \u0026#34;tekniskNavn\u0026#34;: \u0026#34;samledeOpptjenteRenterIInnenlandskeBanker\u0026#34;, \u0026#34;beloep\u0026#34;: 19015, \u0026#34;kategori\u0026#34;: \u0026#34;inntekt\u0026#34; }, { \u0026#34;tekniskNavn\u0026#34;: \u0026#34;samletPensjonFraFolketrygden\u0026#34;, \u0026#34;beloep\u0026#34;: 894828, \u0026#34;kategori\u0026#34;: \u0026#34;inntekt\u0026#34; }, { \u0026#34;tekniskNavn\u0026#34;: \u0026#34;samletAvkastningAvKapitalforsikringsavtale\u0026#34;, \u0026#34;beloep\u0026#34;: 286299, \u0026#34;kategori\u0026#34;: \u0026#34;inntekt\u0026#34; } ], \u0026#34;skatteoppgjoersdato\u0026#34;: \u0026#34;2022-02-10\u0026#34;, \u0026#34;stadie\u0026#34;: \u0026#34;oppgjoer\u0026#34;, \u0026#34;ajourholdstidspunkt\u0026#34;: \u0026#34;2022-02-10T15:17:37Z\u0026#34; } Beregnet skatt URL for proxy-api (GET): \u0026lt;MILJØ_URL\u0026gt;/skatteetaten/formueinntekt/beregnetskatt/api/v1/{ROLLE_ID}/{RETTIGHETSPAKKE}/{INNTEKTSAAR}/{PERSONIDENTIFIKATOR}\nAPI-dokumentasjon Skatteetaten har lagt ut dokumentasjon her Beregnet skatt og Swagger\nEksempel { \u0026#34;personidentifikator\u0026#34;: \u0026#34;12345678910\u0026#34;, \u0026#34;inntektsaar\u0026#34;: 2022, \u0026#34;skjermet\u0026#34;: false, \u0026#34;beregnetSkattFastland\u0026#34;: { \u0026#34;skatteklasse\u0026#34;: \u0026#34;1\u0026#34;, \u0026#34;beregnetSkatt\u0026#34;: 120148, \u0026#34;beregnetSkattFoerSkattefradrag\u0026#34;: 120148, \u0026#34;skatteregnskapskommune\u0026#34;: \u0026#34;3816\u0026#34;, \u0026#34;anvendtStandardfradrag\u0026#34;: false, \u0026#34;skattOgAvgift\u0026#34;: { \u0026#34;formuesskattTilStat\u0026#34;: { \u0026#34;grunnlag\u0026#34;: 5200000, \u0026#34;beloep\u0026#34;: 8750 }, \u0026#34;inntektsskattTilKommune\u0026#34;: { \u0026#34;kommunefordeltSkatt\u0026#34;: [ { \u0026#34;kommune\u0026#34;: \u0026#34;3816\u0026#34;, \u0026#34;grunnlag\u0026#34;: 305050, \u0026#34;beloep\u0026#34;: 27025 } ], \u0026#34;grunnlag\u0026#34;: 305050, \u0026#34;beloep\u0026#34;: 27025 }, \u0026#34;inntektsskattTilFylkeskommune\u0026#34;: { \u0026#34;kommunefordeltSkatt\u0026#34;: [ { \u0026#34;kommune\u0026#34;: \u0026#34;3816\u0026#34;, \u0026#34;grunnlag\u0026#34;: 305050, \u0026#34;beloep\u0026#34;: 5923 } ], \u0026#34;grunnlag\u0026#34;: 305050, \u0026#34;beloep\u0026#34;: 5923 }, \u0026#34;inntektsskattTilKommuneOgFylkeskommune\u0026#34;: { \u0026#34;grunnlag\u0026#34;: 305050, \u0026#34;beloep\u0026#34;: 32948 }, \u0026#34;formuesskattTilKommune\u0026#34;: { \u0026#34;kommunefordeltSkatt\u0026#34;: [ { \u0026#34;kommune\u0026#34;: \u0026#34;3816\u0026#34;, \u0026#34;grunnlag\u0026#34;: 5200000, \u0026#34;beloep\u0026#34;: 24500 } ], \u0026#34;grunnlag\u0026#34;: 5200000, \u0026#34;beloep\u0026#34;: 24500 }, \u0026#34;fellesskatt\u0026#34;: { \u0026#34;grunnlag\u0026#34;: 305050, \u0026#34;beloep\u0026#34;: 21348 }, \u0026#34;trinnskatt\u0026#34;: { \u0026#34;grunnlag\u0026#34;: 350000, \u0026#34;beloep\u0026#34;: 4602 }, \u0026#34;trygdeavgiftAvLoennsinntekt\u0026#34;: { \u0026#34;grunnlag\u0026#34;: 350000, \u0026#34;beloep\u0026#34;: 28000 }, \u0026#34;sumTrygdeavgift\u0026#34;: { \u0026#34;grunnlag\u0026#34;: 350000, \u0026#34;beloep\u0026#34;: 28000 } }, \u0026#34;oevrigeResultaterAvBeregning\u0026#34;: { \u0026#34;alminneligInntektFoerSaerfradrag\u0026#34;: 355050, \u0026#34;anvendtSaerfradrag\u0026#34;: 50000, \u0026#34;pensjonsgivendeInntekt\u0026#34;: 350000, \u0026#34;samletGrunnlagForInntektsskattTilKommuneOgFylkeskommuneStatsskattOgFellesskatt\u0026#34;: 305050, \u0026#34;alminneligInntektFoerFordelingsfradrag\u0026#34;: [ { \u0026#34;beloep\u0026#34;: 355050 } ], \u0026#34;oevrigFormue\u0026#34;: [ { \u0026#34;beloep\u0026#34;: 350000 } ] }, \u0026#34;informasjonTilSkattelister\u0026#34;: { \u0026#34;nettoinntekt\u0026#34;: 355050, \u0026#34;nettoformue\u0026#34;: 5200000, \u0026#34;beregnetSkatt\u0026#34;: 120148, \u0026#34;kommune\u0026#34;: [ \u0026#34;3816\u0026#34; ] } }, \u0026#34;skatteoppgjoersdato\u0026#34;: \u0026#34;2022-09-27\u0026#34;, \u0026#34;anvendtTolvdelForTrinnskatt\u0026#34;: 12, \u0026#34;anvendtTolvdelVedArbeidsoppholdINorge\u0026#34;: 12 } Avregning URL for proxy-api (GET): \u0026lt;MILJØ_URL\u0026gt;/skatteetaten/formueinntekt/avregning/api/v1/{ROLLE_ID}/{RETTIGHETSPAKKE}/{INNTEKTSAAR}/{PERSONIDENTIFIKATOR}\nAPI-dokumentasjon Skatteetaten har lagt ut dokumentasjon her Avregning og Swagger\nEksempel { \u0026#34;personidentifikator\u0026#34;: \u0026#34;12345678910\u0026#34;, \u0026#34;inntektsaar\u0026#34;: \u0026#34;2020\u0026#34;, \u0026#34;skjermet\u0026#34;: false, \u0026#34;skatteoppgjoersdato\u0026#34;: \u0026#34;2021-02-04\u0026#34;, \u0026#34;fastland\u0026#34;: { \u0026#34;restskatt\u0026#34;: 2300, \u0026#34;avregnetForskuddstrekk\u0026#34;: 90000, \u0026#34;beloepTilgode\u0026#34;: 9271429 }, \u0026#34;svalbard\u0026#34;: { \u0026#34;restskatt\u0026#34;: 500, \u0026#34;avregnetForskuddstrekk\u0026#34;: 7000, \u0026#34;beloepTilgode\u0026#34;: 1529 } } Oppslag via proxy (gammel) Det er mulig å bruke Skatteetatens delingstjeneste for skatte og inntektsopplysninger som en proxy-tjeneste i Fiks register og samtidig benytte seg av roller, rettighetsstyring og dataminimering som Fiks register tilbyr. Oppbygging av URL gjøres så likt som mulig Skatteetatens egen URL. Datamodellen forblir uendret.\nURL for proxy-api (GET): \u0026lt;MILJØ_URL\u0026gt;/skatteetaten/formueinntekt/summertskatt/api/v1/{ROLLE_ID}/{STADIE}/{RETTIGHETSPAKKE}/{INNTEKTSAAR}/{PERSONIDENTIFIKATOR}\nAPI-dokumentasjon Skatteetaten har lagt ut dokumentasjon her Summert skattegrunnlag og Swagger\nEksempel { \u0026#34;personidentifikator\u0026#34;: \u0026#34;03870349520\u0026#34;, \u0026#34;inntektsaar\u0026#34;: \u0026#34;2021\u0026#34;, \u0026#34;skjermet\u0026#34;: false, \u0026#34;grunnlag\u0026#34;: [ { \u0026#34;tekniskNavn\u0026#34;: \u0026#34;samledeOpptjenteRenterIInnenlandskeBanker\u0026#34;, \u0026#34;beloep\u0026#34;: 19015, \u0026#34;kategori\u0026#34;: [\u0026#34;inntekt\u0026#34;] }, { \u0026#34;tekniskNavn\u0026#34;: \u0026#34;samletPensjonFraFolketrygden\u0026#34;, \u0026#34;beloep\u0026#34;: 894828, \u0026#34;kategori\u0026#34;: [\u0026#34;inntekt\u0026#34;] }, { \u0026#34;tekniskNavn\u0026#34;: \u0026#34;samletAvkastningAvKapitalforsikringsavtale\u0026#34;, \u0026#34;beloep\u0026#34;: 286299, \u0026#34;kategori\u0026#34;: [\u0026#34;inntekt\u0026#34;] } ], \u0026#34;skatteoppgjoersdato\u0026#34;: \u0026#34;2022-02-10\u0026#34;, \u0026#34;stadie\u0026#34;: \u0026#34;oppgjoer\u0026#34;, \u0026#34;registreringstidpunkt\u0026#34;: \u0026#34;2022-02-10T15:17:37Z\u0026#34; } "
},
{
	"uri": "/tjenester/fiksprotokoll/veiledning_1_huskeliste_for_opprette_protokoll/",
	"title": "Veiledning 1 - Huskeliste før man starter å sette opp protokoll",
	"tags": [],
	"description": "",
	"content": "Hvorfor Før man begynner på arbeidet med å sette opp Fiks Protokoll er det lurt å sjekke at man har alt man trenger og personer med riktig tilgang tilgjengelig.\nPersoner Person fra kunden Det må være en person fra kundeorganisasjonen (kommunen) som skal opprette protokoll system/konto, og som da kan logge seg på Fiks forvaltning og gjøre minstekravet for oppsett. Minstekravet for oppsettet er å få opprettet et \u0026ldquo;system\u0026rdquo; hvis leverandør(ene) setter opp resten via API. Se mer om dette lenger nede.\nPerson fra kundeorganisasjon må da på forhånd ha registrert brukerkonto på Fiks plattformen slik at det kun er å logge inn.\nDenne personen må også ha rettighet og tilgang til å:\nSignere avtale for bruk av Fiks protokoll hvis ikke dette er gjort tidligere Tilgang til Fiks protokoll som tjeneste i Fiks Forvaltning. Person(er) fra leverandør/tjenestetilbyder Det bør være en person for hver leverandør/tjenestetilbyder som kan hjelpe til med eventuelle mangler og som har tilgang til ressurser som trengs. Se huskelisten lenger nede for hvilke ressurser det gjelder.\nHuskeliste 1. Maskinporten Leverandør(ene) skal ha satt opp integrasjon med Maskinporten på forhånd. Her kan man velge å enten bruke leverandøren sitt organisasjonsnummer med leverandørens virksomhetssertifikat, eller kunden (kommunen) sitt organisasjonsnummer med kundens virksomhetssertifikat. Det samme organsiasjonsnummeret som man velger å bruke må brukes i oppsett av \u0026ldquo;system\u0026rdquo; i FIKS forvaltning. Se mer om dette i punkt 3.\n2. Avtale om å bruke Fiks Protokoll Person fra kundeorganisasjon oppretter avtale om bruk av Fiks protokoll hvis ikke dette er gjort tidligere.\n3. Opprette \u0026ldquo;system\u0026rdquo; under Fiks Protokoll Person fra kundeorganisasjon oppretter \u0026ldquo;system\u0026rdquo; og bruker det samme organisasjonsnummeret som ble brukt i maskinporten integrasjonen og i det tilhørende virksomhetssertifikatet (se punkt 1). Dette organisasjonsnummeret må man ha klart til oppsett. \u0026ldquo;Systemet\u0026rdquo; blir da et system for leverandøren som kan inneholder protokoll-kontoer for flere forskjellige protokoller.\nEt godt valg av navn på \u0026ldquo;system\u0026rdquo; er leverandørens navn pluss eventuelt leverandørens navn på applikasjon, eller internt navn i organisasjonen på systemet. Da er det lett å kjenne igjen og forstå hva det er i listen over systemer man etter hvert kan få.\n3.1 Skal \u0026ldquo;system\u0026rdquo; støtte API? Leverandør(ene) må ha avklart på forhånd om \u0026ldquo;systemet\u0026rdquo; som settes opp for dem skal støtte å bruke API. Dette er et valg man må gjøre under oppsett av \u0026ldquo;system\u0026rdquo;.\n4. Dele integrasjonsid og passord Når \u0026ldquo;system\u0026rdquo; er opprettet skal integrasjonsid og integrasjonspassord som man får i oppsettet deles med leverandøren på en sikker måte. Hvordan dette kan deles på en sikker måte bør man ha klarert på forhånd.\nHvis leverandør skal bruke API for resten av oppsett er man ferdig, hvis ikke se videre i huskelisten\n5. Gyldig generert public key Når man setter opp en \u0026ldquo;protokoll-konto\u0026rdquo; i forvaltningssidene må leverandøren ha gjort klar en public-key som man har generert på forhånd i form av et X509 sertifikat lagret i .pem filformat. Dette må personen fra kundeorganisasjon ha fått slik at man kan laste det opp i forvaltningssidene. Vi anbefaler at leverandøren deler filen slik at den kan lastes ned.\nHusk: Ikke alle e-post kontoer godtar filformatene for public-key og deling via e-post anbefales dermed ikke.\n6. Valg av protokoll og part Leverandør(ene) har klart hvilken protokoll og hvilken \u0026ldquo;part\u0026rdquo; sin side skal være i kommunikasjonen\n7. Gi tilgang Man må huske å gi tilganger mellom kontoene. Det enkleste er å gjøre det fra \u0026ldquo;tjener\u0026rdquo; siden, søke opp og gi tilgang til \u0026ldquo;klient\u0026rdquo; kontoen slik at \u0026ldquo;klient\u0026rdquo; konto kan sende meldinger til \u0026ldquo;tjener\u0026rdquo; kontoen. Alternativt kan man søke opp \u0026ldquo;tjener\u0026rdquo; kontoen man ønsker å sende meldinger til fra \u0026ldquo;klient\u0026rdquo; siden, og så be om å få tilgang. Men da må man inn på \u0026ldquo;tjener\u0026rdquo; siden igjen og bekrefte tilgangsforespørselen.\n"
},
{
	"uri": "/tjenester/fiksprotokoll/veiledning_2_ta_ibruk_protokoll/",
	"title": "Veiledning 2 - Ta i bruk tjenesten",
	"tags": [],
	"description": "",
	"content": "Det første som må gjøres for bruke Fiks Protokoll, er å skrive under på avtale om bruk og ta i bruk tjenesten.\nSteg 1: Logg inn Logg først inn på forvaltning.fiks.ks.no (forvaltning.fiks.test.ks.no for testmiljø). I produksjon må dette gjøres av en person som har administrasjonstilgang til organisasjonen i Fiks. I test gjøres det med en testbruker som har tilgang til organisasjonen i test. Ta kontakt med brukerstøtte fiks@ks.no om du trenger hjelp med å opprette testbruker og testorganisasjon. Brukerautentisering gjøres via ID-Porten. I test brukes typisk MINID, BANKID eller TESTID. Steg 2: Gå til konfigurasjon Her kommer du til en oversikt over tjenester. Trykk på Konfigurasjon. Steg 3: Ta i bruk tjenesten Her kommer du til tjenesteoversikten. Finn Fiks Protokoll. Det kan hende du må scrolle for å finne den. Trykk på \u0026ldquo;Ta i bruk\u0026rdquo; for å komme til signering Steg 4: Gå til signering Nå vil det åpnes en dialog. Velg \u0026ldquo;Gå til signering\u0026rdquo;. Merk: I produksjonsmiljøet må dette gjøres av noen som har rett til å signere avtale på vegne av kommunen. Steg 5: Gå til signering Du kommer nå til dokumentet som skal signeres. Trykk på \u0026ldquo;Signer dokument\u0026rdquo; Steg 5: Signering i ID-Porten For å signere må du autentisere deg i ID-Porten igjen. Samme prosedyre som i Steg 1 Steg 6: Ta i bruk tjenesten (igjen) Nå som avtalen er signert kan du ta i bruk Fiks Protokoll. Trykk på \u0026ldquo;Ta i bruk Fiks Protokoll\u0026rdquo; Steg 7: Ferdig Du skal nå komme til en tom liste av systemer. I så fall har du tatt i bruk Fiks Protokoll og kan legge til systemer. "
},
{
	"uri": "/tjenester/fiksprotokoll/veiledning_3_opprette_system/",
	"title": "Veiledning 3 - Opprette system",
	"tags": [],
	"description": "",
	"content": "For å bruke Fiks Protokoll må du opprette et system. Hvert system i kommunen som skal bruke Fiks Protokoll, må opprette et protokollsystem. F.eks fagsystem eller arkiv. Logg først inn på forvaltning.fiks.ks.no (forvaltning.fiks.test.ks.no for testmiljø). Og gå inn på konfigurasjon.\nSteg 1: Velg Fiks Protokoll Finn Fiks Protokoll i listen over tjenester. Tjenester som er tatt i bruk ligger øverst. Klikk på \u0026ldquo;Fiks Protokoll\u0026rdquo;-knappen Steg 2: Klikk opprett system Her vil det være en liste over systemer. Denne listen vil være tom dersom det ikke er blitt opprettet system. Klikk på \u0026ldquo;Opprett nytt system\u0026rdquo; for å opprette nytt system. Steg 3: Wizard - Systeminfo Det vil nå åpne seg en dialog med 4 steg. I første steg skal du fylle ut:\nSystemnavn - Navnet på systemet. Dette vil være visningsnavnet til systemet i Fiks. Dette navnet vil være synlig for andre organisasjoner som kommunisere med systemet Beskrivelse - En mer detaljert beskrivelse av systemet. Dette vil også være synlig for andre organisasjoner E-post(er) for varsling - En liste (minimum en) av eposter som blir brukt for å kontakte ansvarlige for systemet Trykk \u0026ldquo;Neste\u0026rdquo; for å komme videre Steg 4: Wizard - Sett opp integrasjon For å kunne sende og motta meldinger gjennom Fiks Protokoll kreves en integrasjon. Integrasjonen brukes via maskinporten, hvor et virksomhetssertifikat identifiserer eier av integrasjonen. Virksomhetssertifikatet hører til et organisasjonsnummer som må fylles ut her. I produksjon vil det variere om dette er kommunens virksomhetssertifikat eller om det er leverandørens.\nNB: Det vil ikke være mulig å bruke Fiks Protokoll i test uten et virksomhetssertifikat. Det er mulig å endre organisasjonsnummer for integrasjonen senere dersom du velger feil i dette steget. Se hvordan opprette klient hos maskinporten her\nDersom du ønsker å konfigurere systemet gjennom API kan du velge dette her. Da vil det være mulig å endre på systemet og opprette kontoer uten å bruke webgrensesnittet.\nTrykk \u0026ldquo;Neste\u0026rdquo; for å komme videre Steg 5: Wizard - Opprett system Da er systemet klar til å opprettes. Trykk \u0026ldquo;Opprett Fiks Protokoll-system\u0026rdquo; for å opprette Steg 6: Wizard - System opprettet Systemet er nå opprettet.\nPå denne siden vises nødvendig nøkkelinformasjon.\nsystemId - Denne IDen representerer systemet og brukes blant annet når en konto i et annet system skal gi tilgang til dette systemet og dersom systemet skal konfigureres gjennom API integrasjonId - Denne IDen brukes for maskin til maskin pålogging og kreves for tilgang til API. Denne skal inn i konfigurasjonen av Fiks IO-klienten. (Klientene er tilgjengelig i Java, og .net core) integrasjonPassord - Dette passordet brukes sammen med integrasjonId og skal også inn i konfigurasjonen til Fiks IO-klienten. Det er ikke mulig å hente dette passordet igjen, men det går an å generere nytt passord senere systemNavn - Navnet på systemet Trykk \u0026ldquo;Gå til system\u0026rdquo; for å gå til systemet Steg 7: Systemoversikt Du har nå opprettet et Protokollsystem. På landingssiden vises nøkkelinformasjon om systemet.\nMerk: Systemet vil kun være tilgjenglig for andre systemer i egen organisasjon. Dette kan endres under \u0026ldquo;Konfigurasjon\u0026rdquo; Steg 8: Konfigurering av system Nå som systemet er opprettet, vil du kunne konfigurere det dersom det er behov. Dette gjøres ved å trykke på “Konfigurasjon” i tabulatoren. Her kan du endre leverandørkontaktpunkt, organisasjonsnummer på virksomhetssertifikatet, passord for integrasjonen og aktivere/deaktivere konfigurasjon via API. Du har også muligheten til å slette systemet her.\nDersom API ikke ble aktivert under opprettelsen av systemet, kan dette gjøres her. Dette gir deg muligheten til å konfigurere systemet gjennom API i stedet for via webgrensesnittet. Forsøk på konfigurasjon via API uten at dette er aktivert, vil resultere i en NotAuthorizedException med meldingenhar ikke privilegiet FIKS.KONFIGURER på ressurs. "
},
{
	"uri": "/tjenester/fiksprotokoll/veiledning_4_opprette_konto/",
	"title": "Veiledning 4 - Opprette konto",
	"tags": [],
	"description": "",
	"content": "Steg 1: Velg system Velg systemet du skal opprette konto på Steg 2: Velg kontoer Velg fanen kontoer Steg 3: Opprett ny konto Trykk på \u0026ldquo;Opprett ny konto\u0026rdquo; Steg 4: Navn og beskrivelse Fyll ut navn og beskrivelse. Dette vil identifisere kontoen for andre Steg 5: Velg protokoll Velg protokoll fra nedtrekksmenyen. Dette bestemmer hvilken meldingsprotokoll kontoen hører til, og den vil kun kommunisere med kontoer i samme protokoll.\nSteg 6: Velg Protokollpart Velg protokollpart fra nedtrekksmenyen. Dette bestemmer hvilken del av protokollen kontoen representerer. F.eks. vil fagsystemet i dette tilfellet være en klient som skal arkivere. Dette bestemmer hvilke meldinger kontoen kan sende og hvilke meldinger den kan motta. Det bestemmer også hvilke kontoer innenfor protokoll den kan kommunisere med. F.eks. vil en klient kun kunne kommunisere med andre arkiv, ikke andre klienter.\nEtter at part er valgt, vises det hvilke meldinger som kan sendes og mottas, og hvilke parter kontoen kan kommunisere med.\nSteg 7: Last opp offentlig nøkkel Meldinger som sendes over Fiks IO skal krypteres. Dette gjøres med et privat/offentlig-nøkkelpar. Den offentlige nøkkelen må være i form av et X509 sertifikat lagret i .pem filformat. Her laster du opp den offentlige nøkkelen, den private legges inn i Fiks IO-klienten.\nNB! Du kan ikke opprette konto uten offentlig nøkkel. Dette er ikke det samme som virksomhetssertifikatet som ble brukt ved opprettelse av system. Du vil typisk generere et unikt par per konto (i test kan det hende samme par blir gjenbrukt på flere kontoer).\nSteg 8: Opprett konto Etter at nøkkelen er lastet opp, trykker du på \u0026ldquo;Opprett konto\u0026rdquo; for å opprette kontoen.\nSteg 9: Konto opprettet Da er kontoen opprettet. Konto-id er IDen som Fiks IO trenger for å sende og motta meldinger med kontoen.\nFor å begynne å sende meldinger må systemet fått tilgang til en konto i et annet system. Når man har opprettet kontoen så vil man se en advarsel som sier at det finnes x antall kontoer som ikke har kobling. Dette betyr at den kontoen du akkurat har laget ikke enda har noe system \u0026ldquo;bak\u0026rdquo; som lytter til meldinger, som er helt naturlig da man nettopp har laget kontoen. Når systemet \u0026ldquo;bak\u0026rdquo; har fått detaljene for kontoen (integrasjonsid, passord og kontoid) og systemet har fått koblet seg opp, så vil denne advarselen forsvinne.\nAdvarselen vil dukke opp igjen hvis systemet \u0026ldquo;bak\u0026rdquo; mister koblingen av en eller annen grunn.\n"
},
{
	"uri": "/tjenester/fiksprotokoll/veiledning_5_gi_tilgang_til_system/",
	"title": "Veiledning 5 - Gi tilgang til system",
	"tags": [],
	"description": "",
	"content": "Steg 1: Velg system Velg systemet som skal gi tilgang. I vårt tilfelle er det Mitt fagsystem som skal ha tilgang til Mitt arkiv. Vi går derfor inn på Mitt arkiv der for å gi tilgang der. Klikk på \u0026ldquo;Mitt arkiv\u0026rdquo; Steg 2: Velg kontoer Tilganger gis til systemer på kontoer. Vi må derfor velge \u0026ldquo;kontoer\u0026rdquo;-fanen for å finne kontoen som skal gi tilgang til et system. Steg 3: Velg Konto Velg kontoen i arkivet som fagsystemet skal få tilgang til. Steg 4: Velg Søk etter system For å finne systemet som skal få tilgang til kontoen, må vi finne det. Trykk på \u0026ldquo;Søk etter systemer\u0026rdquo;-fanen. Steg 5: Finn system Her kan du søke etter system med fritekst og filtrere på eier organisasjon. Det er også mulig å kun vise systemer som har minst en konto som kan motta meldinger fra kontoen det skal gis tilgang til.\nSøk og finn systemet som skal få tilgang. Trykk så på \u0026ldquo;Gi tilgang\u0026rdquo;. Systemet har nå fått tilgang til å sende meldinger til denne kontoen. Det eksterne systemet kan selv velge hvilken konto de selv skal bruke til å sende melding fra, så lenge den er en støttet part av denne kontoen. Steg 6: Tilgang gitt Vi ser da at tilgangen er gitt. Og kan fjerne tilgangen om vi ønsker. Ekstra 1: Tilganger For å se alle systemer som har fått tilgang til kontoen, kan du gå til \u0026ldquo;tilganger\u0026rdquo;-fanen. Her kan du også fjerne tilganger. Ekstra 2: Se tilgangen hos systemet Dersom du nå går til systemer som ble gitt tilgang og velger \u0026ldquo;tilganger\u0026rdquo;-fanen, vil du nå se kontoen som ga tilgang i listen over tilganger. Ekstra 3: Detaljer om konto Dersom du klikker inn på kontoen, får du detaljert informasjon. Det viktigste er Konto-id. Denne IDen skal brukes for å sende meldinger i Fiks IO, og vil være IDen på meldinger sendt fra kontoen. I tillegg ser du informasjon om eieren av kontoen og protokollparten til kontoen. "
},
{
	"uri": "/tjenester/fiksprotokoll/veiledning_6_nytt_passord/",
	"title": "Veiledning 6 - Generer nytt passord",
	"tags": [],
	"description": "",
	"content": "Det er ikke mulig å hente passordet til integrasjonen som hører til et system etter at systemet er opprettet. Dersom du har mistet passordet må et nytt passord genereres. Under vises steg for steg hvordan dette gjøres.\nSteg 1: Velg system Velg systemet som du ønsker å generere nytt passord til. Steg 2: Velg konfigurasjon Velg \u0026ldquo;konfigurasjon\u0026rdquo;-fanen. Steg 3: Trykk på generer passord Trykk på knappen \u0026ldquo;Generer nytt passord\u0026rdquo;. Det kan hende du må skrolle ned på siden for å finne knappen. Steg 4: Bekreft at du ønsker nytt passord Det vil da dukke opp en dialog som spør om du er sikker på om du vil generere nytt passord. Dette er fordi det gamle passordet vil bli ugyldig, noe som vil gjøre at eksisterende pålogging vil slutte å fungere. Trykk på \u0026ldquo;Lag nytt passord\u0026rdquo; for å generere nytt passord. Steg 5: Nytt passord generert Det nye passordet til integrasjonen er nå tilgjengelig under \u0026ldquo;Integrasjonspålogging\u0026rdquo;. Dette skal brukes sammen med Integrtasjon-ID for å logge på Fiks. Dette skal inn i integrasjonskonfigursajonen i Fiks IO-klienten. "
},
{
	"uri": "/tjenester/fiksprotokoll/veiledning_7_laste_opp_ny_offentlig_nokkel/",
	"title": "Veiledning 7 - Ny offentlig nøkkel",
	"tags": [],
	"description": "",
	"content": "Fiks IO sender krypterte meldinger. Det krever at kontoen har et offentlig/privat-nøkkelpar. Den offentlige nøkkelen blir tilgjengeliggjort for de som skal sende meldinger til kontoen, slik at de kan kryptere meldingen. Den private brukes for å dekryptere meldingene som kommer inn.\nHer er en steg for steg gjennomgang for hvordan du endrer offentlig nøkkel gjennom grensesnittet i Fiks Konfigurasjon\nSteg 1: Velg system Velg systemet som har kontoen du vil laste opp ny offentlig nøkkel til Steg 2: Velg kontoer Velg kontoer for å komme til oversikten over kontoer Steg 3: Velg konto Velg kontoen du ønsker å laste opp ny offentlig nøkkel til Steg 4: Velg konfigurasjon Velg konfigurasjon Steg 5: Velg endre Gå til seksjonen for offentlig nøkkel og trykk på \u0026ldquo;endre\u0026rdquo; Steg 6: Last opp offentlig nøkkel Trykk på \u0026ldquo;Velg en fil\u0026rdquo; under \u0026ldquo;Last opp offentlig nøkkel\u0026rdquo;. Finn den offentlige nøkkelen du vil laste opp i dialogen som åpner seg (eller dra filen inn i \u0026ldquo;Last opp offentlig nøkkel\u0026rdquo;-vinduet) Steg 7: Offentlig nøkkel lastet opp Du ser nå at ny offentlig nøkkel er lastet opp. Pass på at du legger til den korresponderende nøkkelen inn i Fiks IO-klienten, slik at du kan dekryptere innkommende meldinger. "
},
{
	"uri": "/tjenester/fiksmelding/",
	"title": "Fiks melding",
	"tags": [],
	"description": "",
	"content": "Fiks melding er en tjenestegruppe som inneholder flere tjenester.\n"
},
{
	"uri": "/tjenester/fiksprotokoll/",
	"title": "Fiks protokoll",
	"tags": [],
	"description": "",
	"content": "Kort beskrivelse Fiks Protokoll er en tjenestegruppe som gjør det mulig å sende asynkrone, ende-til-ende krypterte meldinger fra maskin til maskin. Fiks IO er tjenesten som sørger for den asynkrone maskin-til-maskin meldingsutvekslingen.\nFiks Protokoll støtter meldinger definert under et sett med protokoller. Protokollene er versjonert og nye protokoller er under utvikling.\nFiks Protokoll validerer at det kun er gyldige meldingstyper som sendes for de ulike protokollene. Den kan også validere at det kun kan sendes meldinger mellom avsender- og mottakersystem som er forhåndsgodkjent av systemadministratorene.\nMeldingsutveksling Fiks Protokoll er designet slik den er nå kun ment for meldingsutveksling som dekker \u0026ldquo;daglig overføring\u0026rdquo;.\nFiks Protokoll er ikke designet eller dimensjonert for migrering av store mengder data mellom systemer. Vi anbefaler å bruke andre måter å overføre store mengder data mellom systemer. Man må gjerne bruke en protokoll som format, men ikke Fiks Protokoll med Fiks IO som transportkanal.\nStatus og plan for protokoller Protokoll Status Estimert ferdig Fiks arkiv Under implementering hos leverandører. Protokoll ferdigstilt. Ferdig Fiks politisk behandling Protokoll har vært under utvikling og er satt på pause. Pause Fiks plan Under implementering hos leverandører. Pilotversjon av protokollen lansert. 4 kvartal 2024 (*) Fiks matrikkelføring I pilot-testing og i produksjon. Protokoll ferdigstilt. Ferdig Barnevern - fagsysteminnrapportering til Barnevernsregisteret Brukes i produksjon Ferdig Fiks Link - erstatning for GI Link Test-versjon releaset. Protokoll klar for testing. 4 kvartal 2024 Fiks Saksfaser Test-versjon releaset. Protokoll klar for testing. Ikke avklart (**) (*) Fiks Plan er lansert med ulik pilot status fordelt på tjenestene pga eksterne avhengigheter. Les mer i wiki for Fiks Plan.\n(**) Fiks Saksfaser er lansert med en test-versjon, men det er ikke klart når den er estimert ferdig\nProtokoller i pilot kan oppleve å få endringer som må utbedres fortløpende. Dette vil være små endringer som kommer etter erfaringer en har gjort i produksjonskjøring. Disse er stabile nok til å ta i bruk i vanlig drift.\nDet er også variasjon i adopsjonsgrad av protokollene, spesielt for Fiks arkiv. Det vil si at noen fagsystemer kommer kanskje bare til å arkivere og dermed bruke en liten del av hele protokollen. Det pågår arbeid med kartlegging av adopsjonsgrad og implementeringsprogresjon for protokollene. Estimering kan påvirkes av resultatet av dette da deler av en protokoll kan vise seg å ikke være implementert av noen enda eller tilstrekkelig testet.\nTilgjengelige grensesnitt Grensesnitt Støtte Web portal Nei Maskin til maskin API Hvordan komme i gang med Fiks protokoll Det er noen steg som må gjøres før det er mulig å bruke Fiks Protokoll. Tjenesten må tas i bruk, det må opprettes minst et system, og systemet må ha minst en konto og den kontoen må få tilgang til et system som har en konto den kan sende meldinger til.\nNoe av dette må gjøres gjennom grensesnittet i Fiks Konfigurasjon (forvaltning.fiks.ks.no i produksjon og forvaltning.fiks.test.ks.no i testmiljøet), mens noe kan gjøres via API. I denne brukerveiledningen viser vi steg for steg hvordan dette gjøres gjennom webgrensesnittet.\nVi har også laget en huskeliste for hva man må ha klart og hvilke personer med gitt rettighet i Fiks forvaltning som må være med på å sette dette opp.\nHuskeliste før man starter på oppsett Ta i bruk Fiks Protokoll Opprette system Opprette konto Gi tilgang til system I tillegg er det to veiledninger for hvordan du kan generere nytt passord til systemet, og hvordan du laster opp ny offentlig nøkkel til en konto.\nGenerer nytt passord Ny offentlig nøkkel API Man kan opprette, vedlikeholde og få informasjon om kontoer via API etter et system er opprettet. Når man har opprettet et system får man en integrasjon som gir tilgang til API\u0026rsquo;ene. Les mer om hvordan man setter opp en integrasjon via API her under Felles -\u0026gt; Integrasjoner. Det er spesielt 2 API man kan bruke til dette, ett for Fiks Protokoll og ett for Fiks IO Katalog.\nVia Fiks Protokoll API (OpenAPI Specification) kan man blant annet:\nOpprette konto på system Vedlikeholde tilganger om å sende meldinger mellom systemer Hente informasjon om protokoll og parter for konto Oppdatere konto med nøkler, parter osv. Fiks IO Katalog API er en oppslagstjeneste som brukes for å hente offentlig nøkkel og hente informasjon om en konto.\nVia Fiks IO Katalog API (OpenAPI Specification) kan man blant annet:\nHente offentlig nøkkel for konto Søke etter konto via lookup Hente konto informasjon, som f.eks. status med antall konsumenter på køen Protokoller under Fiks protokoll Fiks Arkiv Fiks Plan Fiks Matrikkelføring Barnevern - fagsysteminnrapportering til Barnevernsregisteret (SSB) [Fiks Link]((/tjenester/fiksprotokoll/protokoll-link/) Fiks Saksfaser Tjenester under Fiks protokoll Fiks IO Termer Protokollsystem - Representerer et system som skal sende og motta meldinger over Fiks Protokoll. Dette vil være et arkiv, et fagsystem som skal arkivere, en matrikkelklient etc. Merk: Et system kan bruke flere protokoller, f.eks. både Fiks Arkiv og Fiks Plan. Protokollkonto - Et protokollsystem kan ha flere protokollkontoer. En protokollkonto er en Fiks IO-konto som er en part i en protokoll. F.eks: En konto i et arkiv, som støtter arkivering og søk En konto i et fagsystem som skal søke i et arkiv En konto i eByggesak som skal matrikkelføre Protokoll - Definisjon av en spesifikk protokoll, med meldingstyper og parter. F.eks. no.ks.fiks.arkiv.v1 og no.ks.fiks.plan.v1 Meldingstype - Meldinger som sendes må ha en meldingstype. Gyldige meldingstyper defineres av protokollen, og vil typisk måtte følge meldingsskjema definert i enten xsd eller json skjema. Protokollpart - Meldinger i Fiks Protokoll sendes mellom parter av protokollen. F.eks. fagsystem og arkiv, eller eByggesak og matrikkelklient. Noen protokollen vil definere mer spesifike parter, som no.ks.fiks.arkiv.v1.arkiv.arkivering og no.ks.fiks.arkiv.v1.fagsystem.arkivering som henholdsvis kan ta imot og sende arkiveringsmeldinger, men ikke tillater søk. Integrasjon - På Fiks Plattformen brukes integrasjoner for maskinpålogging sammen med maskinporten. Hvert system får opprettet en integrasjon som brukes for alle kontoer under systemet. Integrasjonen vil kunne sende og motta meldinger, og dersom valgt, vil også kunne konfigurere systemet og opprette nye kontoer. Les mer her Fiks IO - Dette er kanalen som brukes for å sende meldinger i Fiks Protokoll. Les mer her Fiks IO-konto - Meldinger sendes og mottas over Fiks IO med en Fiks IO-konto. Fiks IO-kontoen har samme ID som protokollkontoen. Protokollkontoen er wrapper rundt Fiks IO-kontoen for å muliggjøre tilgangsstyring i Fiks Protokoll, og validering av meldinger. En Fiks IO konto er også en kø som holder på meldingene den mottar. Hvordan tar man i bruk Fiks Protokoll? Først må Fiks Protokoll-tjenesten tas i bruk for kommunen og avtale må underskrives. Dette må gjøres av administrator i Fiks Organisasjonen (typisk kommunen).\nDeretter må det opprettes et system i Fiks Protokoll. Dette må gjøres i grensesnittet i Fiks Forvaltning av en administrator på Fiks Protokoll (dvs. en administrator i Fiks Organisasjonen, eller personer som er blitt gitt administratortilgang på Fiks Protokoll).\nMerk at det sammen med systemet opprettes en tilhørende integrasjon som skal brukes til å sende og motta meldinger over Fiks IO\nEt system kan settes opp til å konfigureres av integrasjon. Da vil den tilhørende integrasjonen få tilgang til å administrere systemet og vil kunne gjøre det samme som en administrator kan gjøre på Fiks Forvaltning (med visse unntak som sletting av system og resetting av passord)\nAPIet for konfigurering med integrasjon er definert her: Fiks Protokoll API\nFiks Protokoll Konto Konto opprettes i forvaltning eller via API. Når konto opprettes må en ha tilgjengelig offentlig nøkkel i PEM format. Denne benyttes for kryptering av meldinger som skal mottas. Forvalting: API: POST /fiks-protokoll/api/v1/konfigurasjon/{fiksOrgId}/systemer/{systemId}/kontoer\nOpenAPI Specification (Fiks Protokoll API)\nTilganger Gi tilgang til system Tilganger tildeles Protokoll system fra konto. Konto kan gi annet system tilgang til å sende meldinger til konto en oppretter tilgang fra.\nNår system opprettes vil systemet kun være synlig for kontoer under egen organisasjon. Dersom systemet skal være synlig for kontoer utenfor egen organisasjon, må Tilgjengelig for andre organisasjoner slås på. (Per nå kun mulig via API)\nForvaltning: Velg konto under system. Velg Søk etter systemer. Når ønsket system er funnet, velg Gi tilgang.\nAPI: POST /fiks-protokoll/api/v1/konfigurasjon/{fiksOrgId}/systemer/{systemId}/kontoer/{kontoId}/tilganger/{eksternSystemId}\nfiksOrgId: Fiks organisasjon Id systemId: System ID som er eier av konto kontoId kontoId: Konto som system eksternSystemId skal få tilgang til eksternSystemId: System Id som skal gis tilgang til konto med id kontoId Tilsvarende for å fjerne tilgang DELETE /fiks-protokoll/api/v1/konfigurasjon/{fiksOrgId}/systemer/{systemId}/kontoer/{kontoId}/tilganger/{eksternSystemId}\nOpenAPI Specification (Fiks Protokoll API)\nBe om tilgang til system En kan legge inn forespørsel om tilgang til konto, for system. Ved hjelp av API. Dette er ikke ferdig implementert i forvaltning.\nPOST {fiksOrgId}/systemer/{systemId}/forespurteTilganger/{eksternKonto}\nfiksOrgId: Fiks organisasjon Id systemId: System ID som forespør tilgang eksternKonto: Konto en ønsker tilgang til Tilsvarende for å fjerne forespørsel\nDELETE {fiksOrgId}/systemer/{systemId}/forespurteTilganger/{eksternKonto}\nOpenAPI Specification (Fiks Protokoll API)\nMerk: Søk etter systemer er ikke implementert ennå, så det kan være vanskelig å finne systemer å be om tilgang til\nKontoer et system kan sende meldinger til API\u0026rsquo;et støtter å hente hvilke kontoer et system kan sende meldinger til. Kun kontoer som er parter fra samme protokoll (samme navn og versjon) og som er støttet part (er i listen av stottedeParter hos motaker) som kan sende meldinger til hverandre. Dersom et system ikke ha en konto som er støttet part, så må en slik konto opprettes før meldinger kan sendes.\nAPI: GET /fiks-protokoll/api/v1/konfigurasjon/{fiksOrgId}/systemer/{systemId}\nI responsen vil tilgangTilKontoer ha en liste over kontoer (EksternProtokollKontoResponseEksternProtokollKontoResponse) systemet kan sende meldinger til.\nOpenAPI Specification (FIks Protokoll API)\nSende og motta meldinger fra protokoll konto Fiks protokoll bruker som tidligere nevnt Fiks IO til meldingsutveksling. Les mer om detaljene rundt meldingsutveksling på dokumentasjonssidene til Fiks IO\nOvervåking Det anbefales at man overvåker at man har en fungerende mottakende komponent som henter meldinger fra køen. Siden meldinger har en time-to-live kan man risikere at disse til slutt går ut på tid og man ikke får hentet dem. Det er selvfølgelig også i ens egen interesse å svare på meldinger så fort som mulig.\nHvordan man overvåker at man kan sende og motta meldinger er opp til en selv men vi anbefaler at man i det minste overvåker koblingsstatus til Fiks-IO for henting av meldinger. Klienten for .NET har både en IsOpen() metode som viser om klienten selv ser at den har en aktiv kobling, og mulighet for å spørre Fiks IO API om status for en gitt konto via Status() eller Lookup() metodene. Status vil da gi informasjon som f.eks. antall konsumenter for kontoen.\nGet status for konto: API: GET /fiks-io/katalog/api/v1/kontoer/{kontoId}/status\nOpenAPI Specification (Fiks IO katalog API)\nStatus i fiks forvaltning Inne på forvaltningssidene til Fiks Protokoll kan man se noen statuser på sine systemer og protokoll kontoer. En protokoll konto er som tidligere nevnt en wrapper rundt Fiks-IO, som igjen har en kø for meldinger til den kontoen. Enkel status for denne køen vises på forvaltningssidene.\nPå system-siden vil man få en advarsel hvis man har protokollkonto(er) som ikke har kobling. Dette betyr at man har 1 eller flere protokollkonter som ikke lytter og henter meldinger fra køen.\nHvis man går inn på listen over kontoer vil man også se status for hver kont: koblingsstatus som viser om det mangler noe som henter meldinger fra køen og antall meldinger som ligger på køen. Dette vil man også se hvis man går inn på kontoen.\nArkitektur Her er en forenklet oversikt over Fiks Protokoll arkitekturen\n"
},
{
	"uri": "/tjenester/minkommune/",
	"title": "Min kommune",
	"tags": [],
	"description": "",
	"content": "Kort beskrivelse min.kommune.no er en portal for de innbyggerrettede tjenestene på Fiks-plattformen.\nInnbyggere som navigerer til nettsiden blir autentisert via ID-porten og presentert for en oversikt som inkluderer et søkefelt og en rekke tjenester.\nUnder kan man lese mer om hvordan tjenesten fungerer:\nMin kommune - faktura\nMin kommune - innsyn\nMin kommune - kommunale tjenester\nMin kommune - matrikkel\nTilgjengelige grensesnitt Grensesnitt Støtte Web portal Ja Maskin til maskin API for Matrikkel API for innsyn Beskrivelse Søkefeltet gir mulighet til å gjøre et fritekstsøk på informasjonen som min.kommune.no tilbyr innbyggeren: eiendommer, post, byggesaker osv. Denne informasjonen er også tilgjengelig via den enkelte tjeneste.\nMin profil Oversikt over informasjonen min.kommune.no har om innbyggeren. Hentes fra kontakt-og-reservasjonsregisteret med utgangspunkt i brukerens ID-Porten-autentisering.\nPost fra kommunen Lar innbyggeren søke i post som er sendt til innbyggeren via KS SvarUt. Søket er også tilgjenglig på forsiden. For at disse skal bli tilgjenglig må tjenesten aktiveres via Fiks-konfigurasjon.\nMine eiendommer Viser eiendommer innbyggeren eier, basert på data fra matrikkelen. Disse eiendommene er også søkbare fra forsiden.\n\u0026ldquo;Mine eiendommer\u0026rdquo; er basert på data som automatisk synkroniseres fra Kartverket for alle kommuner. Det er altså ikke nødvendig å aktivere denne tjenesten.\nSom standard kan innbyggeren følge en lenke til seeiendom.kartverket.no for å se detaljer om eiendommen, men her har kommunen mulighet til angi lenker til eget eiendomssystem, se Fiks Konfigurasjon: Matrikkel. Minside vil da vise disse lenkene for innbyggere som har eiendommer i din kommune.\nMine byggesaker Viser byggesaker innbyggeren/organisasjonen har tilgang til. Disse kan være eksponert for nåværende eier av eiendom, fødselsnummer eller organisasjonsnummer.\nMine byggesaker er avhengig av at byggesaksarkivet speiler metadata til Fiks Innsyn.\nSkjema Viser skjema du har påbegynt eller sendt inn til kommunen.\nFaktura Viser fakturaer som er sendt til deg eller du har tilgang til.\nNasjonale tjenester Oversikt over viktige nasjonale tjenester. Ta kontakt med fiks@ks.no hvis du har forslag til ytterligere tjenester som bør finnes her.\nSkatt og avgift Lenker til viktige tjenester innen skatt og avgift. Ta kontakt med fiks@ks.no hvis du har forslag til ytterligere tjenester som bør finnes her.\n"
},
{
	"uri": "/tjenester/minkommune/faktura/",
	"title": "Min kommune - faktura",
	"tags": [],
	"description": "",
	"content": "Faktura består av flere tjenester som sammen lager faktura visningen.\nFunksjonalitet levert kun av Innsyn Dette er metadata om fakturaen som blir indeksert i innsyn. For detaljer se Innsyn\nFaktura og fakturastatus Funksjonaliteten skal gjøre det mulig å vise fakturadetaljer og status på alle fakturaer i Min kommune slik at man kan redusere henvendelser om betalingsstatus på en faktura.\nFakturadata Funksjonaliteten skal gjøre det mulig å dra ut fakturadetaljer og presentere dem enklere, i tillegg til pdf-versjonen for å tilby bedre informasjon til innbyggere som ikke har PC\nDistribusjonskanal Funksjonaliteten skal vise hvilken distribusjonskanal faktura sendes på i Min kommune, slik at man kan ha færre henvendelser om å endre distribusjonsmetode og henvendelser fra innbyggere som melder at «har ikke fått faktura»\nTilgjengeliggjøring av inkassokrav i Min kommune Funksjonaliteten tilgjengeliggjør faktura som har blitt sendt til ekstern inkasso byrå, og vil lenke til faktura hos det eksterne byrå-et.\nSende kommentar på faktura - under vurdering Funksjonaliteten skal gi en mulighet for å sende en kommentar direkte på en faktura til riktig fagetat for innbyggere som har spørsmål til innholdet i fakturaen.\nDette er under utvikling, enten kan kommentar sendes via eDialog/SvarUT eller via en Fiks IO melding. Valget er ikke tatt enda.\nBetalingsutsettelse - under vurdering Funksjonaliteten skal gi mulighet til å velge betalingsutsettelse på en faktura for innbyggere som ikke kan betale regningen i tide.\nDet vil bli laget en protokoll for Fiks IO som vil kunne sende en forespørsel om betalingsutsettelse til fakturasystem, fakturasystem må svare tilbake om det er innvilget eller ikke, innen 10 sekund. Dette skjer mens brukeren venter på min kommune.\nDele opp betaling i flere avdrag - under vurdering Funksjonaliteten skal gi fakturamottaker mulighet til å dele opp betalingen i flere avdrag for innbyggere som ikke klarer å betale hele fakturabeløp i en omfang, og slik redusere henvendelser til kommunene om å dele opp betaling og færre purringer.\nDet vil da bli laget en Fiks IO protokoll slik som for betalingutsettelse med forespørsel om å dele opp faktura. Svar om innvilgelse må gis innen 10 sekund. Nye fakturaer må sendes rett etterpå og oppdateres i innsyn.\n"
},
{
	"uri": "/tjenester/minkommune/innsyn/",
	"title": "Min kommune - innsyn",
	"tags": [],
	"description": "",
	"content": "Norske kommuner har mengder av informasjon om sine innbyggere. Denne informasjonen er spredd rundt i arkiver, fagsystemer, dokumentlagre og eksterne skyløsninger. Fiks Innsyn lagrer metadata som beskriver denne informasjonen, og gjør den tilgjengelig for innbyggeren via en kraftig søkemotor.\nHvordan tar man i bruk Fiks Innsyn? En kommune kan bruke Fiks Innsyn for å gjøre kommunal informasjon (forsendelser, byggesaker, eiendommer, fakturaer osv) tilgjengelig for innbyggere, endten på min.kommune.no eller i kommunens eksisterende løsninger. Uansett er første steg å sørge for metadata som beskriver informasjonen finnes i søkemotoren. Dette gjøres ved å legge til datakilder i konfigurasjonen av innsyntjenesten på forvaltning.fiks.ks.no. i form av integrasjoner. Dette kan være \u0026ldquo;nøkkelklare\u0026rdquo; integrasjoner levert av KS eller tredjepartsleverandører, for eksempel forsendelser fra SvarUt eller byggesaker fra GeoMatikk, eller integrasjoner kommunen lager selv. I skjermbildet over har en kommune lagt til SvarUt integrasjonen som kilde for innsyn, som gjør at alle forsendelser fra SvarUt-avsendere spesifisert i integrasjonens konfigurasjon blir tilgjengelig i \u0026ldquo;Post fra kommunen\u0026rdquo; på min.kommune.no.\nHvis kommunen benytter min.kommune.no er nå alt klart: innloggede innbyggere vil se sine meldinger i \u0026ldquo;Post fra kommunen\u0026rdquo; og andre innsyn-drevede tjenester.\nHvis kommunen benytter en egen minside-løsning må også søket mot Fiks Innsyn gjøres via en integrasjon, som legges til på samme måte som datakilde-integrasjonene over. I noen tilfeller vil det finnes nøkkelklare leverandør-integrasjoner for dette, i andre må kommunen lage en egen integrasjon som leverandøren kan benytte. Kontakt leverandør for å avklare dette.\nHvordan virker Fiks Innsyn? Tjenesten består av tre hovedkomponenter:\nInnsyn-webapplikasjoner, et sett med SPA (Single Page Applications) på min.kommune.no som innbyggere benytter for å søke i innsynsdatabasen. Eksempler er \u0026ldquo;Post fra kommunen\u0026rdquo;, \u0026ldquo;Saker\u0026rdquo;, osv. Innsyn-søk, søkemotoren som utgjør back-end for webappliasjonene. Støtter fritekstsøk og score-rangerte resultater. Innsyn-indexer, en indekseringstjeneste som integrasjoner kan benytte for å laste opp metadata om informasjonen kommunen sitter på: hendelser, fakturaer, saker, journalposter, forsendelser, osv. Søk i innsyn gjøres via applikasjonene på min.kommune.no, eller direkte via et REST grensesnitt. Uansett baserer autentisering seg på innlogging via ID-Porten. En innbygger autoriseres for å lese en melding på en av fire måter:\nMeldingen er eksponert for innbyggerens fødselsnummer Innbyggeren har rollene \u0026ldquo;post/arkiv\u0026rdquo; eller \u0026ldquo;kommunale tjenester\u0026rdquo; i Altinn for organisasjonsnummeret meldingen er eksponert for Innbyggeren er markert som eier av matrikkelenheten meldingen er eksponert for, endten direkte eller via organisasjon. Meldingen er eksponert med type \u0026ldquo;offentlig\u0026rdquo;, og er dermed tilgjengelig for alle autentiserte innbyggere. Søket er i hovedsak basert på fri-tekst, og vil også da kompenserer for stavefeil, bøyeform eller orddeling. Noe filtrering er mulig (for eksempel på dato, avsender-organisasjon osv). Alle søk er også filtrert på innloggingsnivå. Et søk gjort med innlogging på nivå tre vil ikke returnere grupper som er satt til nivå fire, uavhengig av om disse gruppene traff på søket. Hvilket innloggingsnivå som kreves for å se hver enkelt melding er bestemt av interasjonen som indekserte meldingen i Innsyn.\nSøkeresultatet scores og sorteres basert på relevans: nye meldinger scores høyere enn gamle, uleste dokumenter høyere enn de du har lest, ubetalte faktura høyere enn de du har betalt, og så videre. Det er også mulig å få resultatet sortert på dato.\nSøkemotoren inneholder utelukkende metadata, ikke selve dokumentet. Om meldingen skal peke til et dokument, bilde eller annen fil gjøres dette i form av en lenke: denne kan for eksempel peke til en fil i Fiks Dokumentlager, en sak i et kommunalt filarkiv, eller en annen tjeneste. Så lenge disse støtter innlogging gjennom ID-Porten vil nedlastingen oppleves sømløst av innbygger.\nUvikling av integrasjoner som leverer data til Innsyn: Noen grunnleggende prinsipper for forvalting av meldinger i innsyn:\nAlle dokumenter eies av en Fiks Organisasjon. I de fleste tilfeller vil dette være en kommune eller en fylkeskommune. Det er denne organisasjonen som autoriserer indeksering av data, og har rett til å oppdatere eller slette disse, enten direkte eller via tredjepart. Integrasjoner må autoriseres for å indeksere data på vegne av en av organisasjon. Dette gjøres gjennom å tildele \u0026ldquo;Innsyn Index\u0026rdquo; privilegiet til integrasjonen i Fiks Konfigurasjon. Nøkkelklare integrasjoner vil automatisk bli tildelt de nødvendige privilegiene når de blir lagt til i Innsyn konfigurasjonen. Hver integrasjon styrer dokumentene de har lastet opp på vegne av organisasjonen. Dvs. at integrasjon A ikke kan slette eller oppdatere dokumenter lastet opp av integrasjon B. Merk at tjenesteadministrator når som helst kan slette meldinger gjennom Fiks Konfigurasjon, uavhengig av hvilke integrasjon som har indeksert meldingene. API Meldinger til Innsyn indekseres gjennom Innsyn Index API Versjon 2\nMerk at JSON-metadata må Base64 encodes før det sendes til APIet, dette hovedsaklig for å unngå JSON escape problematikk. Gyldige verdier for \u0026ldquo;versjon\u0026rdquo;-feltet er definert i tabellen under.\nMeldingstype Versjon Faktura V1 FAKTURA_V1 Spec Innsendt Skjema V1 INNSENDT_SKJEMA_V1 Spec Skjemakladd V1 SKJEMAKLADD_V1 Spec Mappe V1 MAPPE_V1 Spec Journalpost V1 JOURNALPOST_V1 Spec Alle JSON-schema definisjoner finnes i følgende GitHub repository: ks-no / fiks-innsyn-json-schema. Disse kan også brukes til å generere modeller for deres valgte språk. Det finnes allerede en Maven-modul for Java-brukere som er deployet til Maven Central. Mer informasjon rundt dette finnes i prosjektets README på GitHub.\nGamle APIer Versjon 1 av innsyn index støttes fortsatt for eksisterende integrasjoner, men bør ikke benyttes for nyutvikling.\nHovedforskjellen fra versjon 2 er at metadata for meldingstypene er definert i API-speccen, i stedet for eksterne JSON-schemas.\nIndeksering Indekseringstjenesten lar integrasjoner opprette meldinger, eller fjerne / endre meldinger som alt er opprettet. Hver melding har en meldingId som settes av integrasjonen. Hvis man indekserer to meldinger på samme melding-id vil den første meldingen bli overskrevet av den andre.\nNår man lager en integrasjon mot indekseringstjenesten er det viktig å være bevisst på at Innsyn bør betraktes som en cache: man bør ikke forvente at meldingene man laster opp vil ligge der til evig tid: en forvalter med admin-privilegier på innsyn-tjenesten kan for eksempel når som helst slette meldinger. Hvis man ønsker en robust løsning er det derfor viktig at man støtter replay: muligheten til å re-indexere alle meldinger til Innsyn.\nDe vanlige autentiseringsreglene for Fiks-plattformen gjelder for denne tjenesten, men i tilegg må integrasjonen har rett til å indeksere på vegne av fiks organisasjonen som er satt som eier den aktuelle meldingen.\nEndepunktet støtter batch av opptil 5000 elementer, og integrasjonsutviklere anbefales å benytte denne funksjonaliteten, da det skaper vesentlig mindre trykk på systemet. Merk at indeksering ikke er en atomisk transaksjon: deler av elementene i en batch kan bli indeksert selv om andre feiler.\nEn indekseringsoperasjon kan ha følgende utfall:\n200. Meldingene ble indexert. Merk at det kan ta noe tid før disse blir synlige for et søk. 4XX. Et problem på klientsiden førte til at meldingene ikke kan behandles. Ved 4XX feil vil ingen av meldingene i batchen bli skrevet til Innsyn. Hvis deserialisering av json mislykkes får man en ren 400 BAD REQUEST. Dette indikerer som oftest at json modellen i forespørselen ikke stemmer med api-spec. Hvis deserialisering var vellykket men en eller flere meldinger ikke validerte får man en meldinger som feilet, og en beskrivelse av hvorfor. Dette indikerer som oftest at et påkrevet feil mangeler, eller at det har en ugyldig verdi. Dette bør utbedres, eller meldingene med ugyldige verdier bør fjernes før man prøver igjen. 5XX. Indeksering av batchen feilet. Dette betyr som oftest at noe gikk galt på server-siden. Noen av meldingene i batchen kan likevel være indeksert. Man bør derfor forsøke å indeksere alle meldingene på nytt. Gjennomføring av batch-operasjoner skjer synkront fra ståstedet til en bruker av tjenesten: responsen blir ikke sendt før batchen er gjennomført. Dermed vil man kunne vite at en gruppe opprettet i batch 1 eksisterer når batch 2 gjennomføres, så lenge disse utføres sekvensielt.\nEksempel på index request med en journalpost og en mappe: { \u0026#34;meldinger\u0026#34;: [ { \u0026#34;meldingId\u0026#34;: \u0026#34;e59cec27-0192-432a-a285-7efb69e5a993\u0026#34;, \u0026#34;sikkerhetsniva\u0026#34;: 3, \u0026#34;eksponertFor\u0026#34;: { \u0026#34;identifikatorType\u0026#34;: \u0026#34;FODSELSNUMMER\u0026#34;, \u0026#34;verdi\u0026#34;: \u0026#34;46832685061\u0026#34; }, \u0026#34;fiksOrganisasjonId\u0026#34;: \u0026#34;620a05f6-2d78-4b88-b07e-85368bc8a03c\u0026#34;, \u0026#34;eksternRef\u0026#34;: \u0026#34;8cc734ad-9e74-4a1a-9666-599d6121a061\u0026#34;, \u0026#34;versjon\u0026#34;: \u0026#34;JOURNALPOST_V1\u0026#34;, \u0026#34;tilgjengeligTil\u0026#34;: \u0026#34;2023-07-02T12:03:44.347302401+02:00\u0026#34;, \u0026#34;meldingMetadata\u0026#34;: \u0026#34;eyJqb3VybmFscG9zdHR5cGUiOiJVIiwidGl0dGVsIjoiMzhkZTQ5MDMtOWU4Mi00NDc3LTlkNGQtOWQ5ZGIwNzBkZmRkIn0=\u0026#34; }, { \u0026#34;meldingId\u0026#34;: \u0026#34;5b557f4a-11e8-41aa-b04e-e0f03af577cc\u0026#34;, \u0026#34;sikkerhetsniva\u0026#34;: 3, \u0026#34;eksponertFor\u0026#34;: { \u0026#34;identifikatorType\u0026#34;: \u0026#34;MATRIKKELNUMMER\u0026#34;, \u0026#34;verdi\u0026#34;: \u0026#34;2634-155/298/803/176\u0026#34; }, \u0026#34;fiksOrganisasjonId\u0026#34;: \u0026#34;98f33c17-35c9-449b-be58-06e1ce2fef8b\u0026#34;, \u0026#34;versjon\u0026#34;: \u0026#34;MAPPE_V1\u0026#34;, \u0026#34;meldingMetadata\u0026#34;: \u0026#34;eyJ0eXBlIjoiQllHR0VTQUsiLCJ0aXR0ZWwiOiJkNGYzYjQ2ZC0zZDNlLTQ2NjQtOWQ3OC1kMTQ0ZDQ0Mzg2MmEifQ==\u0026#34; } ] } meldingMetadata-feltene inneholder følgende JSON som har blitt Base64 encodet:\nJournalpost:\n{ \u0026#34;journalposttype\u0026#34;: \u0026#34;U\u0026#34;, \u0026#34;tittel\u0026#34;: \u0026#34;38de4903-9e82-4477-9d4d-9d9db070dfdd\u0026#34; } Mappe:\n{ \u0026#34;type\u0026#34;: \u0026#34;BYGGESAK\u0026#34;, \u0026#34;tittel\u0026#34;: \u0026#34;d4f3b46d-3d3e-4664-9d78-d144d443862a\u0026#34; } Eksponering av meldinger Eksponert for i en indekseringsforespørsel angir hvem som skal kunne se meldingen. Dette kan ha en av følgende verdier:\nfødselsnummer: Meldingen blir tilgjengelig for innbyggeren som er autentisert med det spesifiserte fødselsnummeret. organisasjonsnummer: Meldingen blir tilgjengelig for innbyggere som innehar rollene \u0026ldquo;post/arkiv\u0026rdquo; eller \u0026ldquo;kommunale tjenester\u0026rdquo; i Altinn på det spesifiserte organisasjonsnummeret. matrikkelnummer: Meldingen blir tilgjengelig for personer som er ført som eiere av matrikkelenheten med det spesifiserte nummeret, eller som innehar rollene \u0026ldquo;post/arkiv\u0026rdquo; eller \u0026ldquo;kommunale tjenester\u0026rdquo; for en organisasjon som er ført som eier av den aktuelle matrikkelenheten. Endringer i eierskap vil automatisk bli tatt hensyn til, uten at reindeksering av meldingen er nødvendig. offentlig: Meldingen er åpent tilgjengelig for alle autentiserte personer, denne eksponert-for typen bør benyttes med varsomhet. Det er viktig at man har et bevisst forhold til hvem meldinger eksponeres for, spesielt når man eksponerer for en matrikkelenhet, da endringer i eierskap vil medføre at nye personer får tilgang til meldingen. Man bør derfor aldri eksponere sensitive data via denne metoden.\nVersjonering Over tid vil json-modellen for en melding endrer seg. Innsyn løser dette ved at alle metadatamodellene er versjonert, for eksempel som Forsendelse V1, Forsendelse V2 osv. Alle tidligere versjoner er støttet, så om din integrasjon indekserer V1 av forsendelser i dag vil dette fortsette å virke selv om V2 blir gjort tilgjengelig.\nHvis man ønsker å oppgradere eksisterende meldinger til ny versjon, for eksempel for å benytte felt som er lagt til i oppdateringen, gjøres dette gjennom replay; alle meldinger re-indekseres på eksisterende meldingId med ny versjon av metadata.\nSletting Indekserte meldinger kan fjernes ved å benytte slette-API. Her gjelder de samme reglene som over: en integrasjon må være autorisert for å handle på vegne av en ansvarlig organisasjon for at sletting kan gjennomføres, og en integrasjon kan bare slette meldinger den selv har indeksert.\nMerk at sletting på samme måte som indeksering ikke gjennomføres i en atomisk transaksjon: deler av meldingene i batchen kan bli slettet selv om andre feiler.\nHåndtering av filer Mange meldingstyper vil referere til filer i eksterne systemer, som for eksempel dokumenter i \u0026ldquo;Forsendelse\u0026rdquo; typen. Innsyn har i seg selv ikke noe forhold til binære filer, og betrakter dem utelukkende som en lenke. Hvis filene allerede er tilgjengelig i et ID-Porten kompatibelt filarkiv trenger man ikke å laste disse opp på nytt, hvis man ikke har en slik tjeneste fra før kan man benytte Fiks Dokumentlager til dette.\nUvikling av integrasjoner for å søke i innsyn Gjennomføring av søk Hvis kommunen benytter min.kommune.no er det ikke behov for å utvikle noen egne integrasjoner for søk, men det kan ofte være aktuelt å søke i Innsyn fra annen løsning, for eksempel for å få \u0026ldquo;Post fra kommunen\u0026rdquo; fram på kommunens eksisterende minside-løsning.\nInnsyn tilbyr følgende søke-api\u0026rsquo;er for eksterne integrasjoner:\nEiendom-søk Søk i matrikkelenheter fra kartverket. Faktura-søk Søk i innbyggerens fakturaer. Post-søk Søk i post sendt fra kommunen til inbyggeren via KS-SvarUt. Skjema-søk Søk i skjema og skjemakladder sendt fra innbyggeren til kommunen. Multi-søk Samtidig søk i alle meldingstyper. Legacy-søk Innsyns gamle søke-api. Dette støttes fortsatt for eksisterende integrasjoner, ved nyutvikling bør man velge et av endepunktene over. I tillegg til søke-apier er det mulig å benytte Innsyn Oppslag api for å hente meldinger. Gjennom dette api\u0026rsquo;et kan man hente en enkeltmelding (basert på melding-id), alle meldinger som har samme korrelasjon-id, eller alle meldinger som er barn av en spesifisert forelder-melding.\nIntegrasjonen som skal utføre søk eller oppslag må benytte integrasjon-person autentisering, dvs at de må fremvise den innloggede innbyggers ID-Porten token i kombinasjon med integrasjonId og Integrasjonpassord. I tillegg må integrasjonen ha \u0026ldquo;innsyn søk\u0026rdquo; privilegiet på den aktuelle Fiks-organisasjonen (tildelse via Innsyn konfigurasjon på forvaltning.fiks.ks.no). Søkeresultatet vil være begrenset til meldinger autorisert for den innloggede personen og eid av den aktuelle Fiks-organisasjonen.\nVersjonering av melding-metadata Meldinger i Innsyn er versjonert, for eksempel som \u0026ldquo;ForsendelseV1\u0026rdquo; eller \u0026ldquo;ForsendelseV2\u0026rdquo;, og nye versjoner av en melding blir lagt til uten forvarsel.\nDet er derfor viktig at man spesifisere \u0026ldquo;aksepterte-versjoner\u0026rdquo; (se api-spek\u0026rsquo;ene over) når man gjør et søk - en nyere versjon av en melding vil da bli nedgradert til den spesifiserte versjonen. Hvis man ikke gjør dette vil man få det som til enhver tid er nyeste versjon, hvor endringer kan brekke parsing av JSON metadata.\nÅ søke på vegne av andre Innsyn tilbyr støtte for å søke på vegne av en organisasjon hvor man innhar rollen \u0026ldquo;Post/Arkiv\u0026rdquo; i Altinn. Denne settes som en query-param på søket (se api-spekk\u0026rsquo;er over). Det vil da bli sjekket om personen faktisk innehar denne fullmakten, og hvis dette er tilfellet vil søkeresultatet inneholde meldinger som er eksponert for organisasjonen eller matrikkelenheter organisasjonen eier heller enn personen som er autentisert gjennom ID-Porten tokenent.\n\u0026ldquo;Legacy søk\u0026rdquo; api\u0026rsquo;et støtter den samme funksjonaliteten gjennom en ON_BEHALF_OF http-header, men et anbefales å ikke benytte denne metoden ved nyutvikling.\n"
},
{
	"uri": "/tjenester/minkommune/kommunaletjenester/",
	"title": "Min kommune - kommunale tjenester",
	"tags": [],
	"description": "",
	"content": "Mange kommuner som tar i bruk KS Min kommune har eksisterende innbyggerrettede tjenester, enten egenutviklet eller innkjøpt fra leverandør. \u0026ldquo;Kommunale tjenester\u0026rdquo; lar kommunen eksponere disse tjenestene for sine innbyggere på min.kommune.no, som illustrert i skjermbildet under:\nNår en innbygger logger seg på min.kommune.no vil Fiks-plattformen avgjøre hvilken kommune denne innbyggeren har et forhold til. I første omgang avgjøres dette av hvilke organisasjoner som har sendt innbyggeren post via SvarUt, senere vil Folkeregisteret også benyttes. På forsiden vil innbyggeren se tjenester fra sin primærkommune, men tjenester registrert av andre kommuner vil være tilgjengelig gjennom søk, både ved hovedsøket på min.kommune.no og via \u0026ldquo;se alle tjenester\u0026rdquo; lenken.\nKommunen kan legge inn disse tjenestene via Fiks-konfigurasjon. Hver tjeneste har:\nTittel: Kort beskrivelse av tjenesten Lenke: Lenke til tjenesten. Hvis systemet som betjener denne støtter innlogging via ID-porten vil overgangen oppleves som sømløs av innbygger Rettet mot: Her kan man spesifisere at en tjeneste er rettet mot privatpersoner, organisasjoner, eller begge. Organisajonstjenester vil bare vises hvis innbyggeren opererer i kontekst av en organisasjon. Favoritt: Tjenester som er tagget med \u0026ldquo;favoritt\u0026rdquo; vil prioriteres for visning på landingsiden min.kommune.no. Det er ingen begrensing på antall tjenester en kommune kan registrere.\n"
},
{
	"uri": "/tjenester/minkommune/matrikkel/",
	"title": "Min kommune - matrikkel",
	"tags": [],
	"description": "",
	"content": "Min kommune Fiks-plattformen får med denne tjenesten støtte for matrikkelinformasjon. En innbyggers eiendommmer blir eksponert på min.kommune.no, gjennom \u0026ldquo;Mine Eiendommer\u0026rdquo; og hovedsøket, og ved at Fiks Innsyn får støtte for å eksponere meldinger for eiere av en eiendom. Tilgang til denne meldingen vil da følge nye eiere av samme eiendom.\nTa i bruk tjenesten Matrikkelinformasjon lastes på nasjonalt nivå, det er dermed ikke nødvendig for den enkelte kommune å ta denne tjenesten i bruk, men det er mulig å tilpasse den til kommunens behov. I utgangspunktet benyttes seeiendom.kartverket.no for detaljinformasjon om eiendommer på min.kommune.no, men kommuner som har eksisterende eiendomstjenester kan registrere disse via Matrikkel-tjenesten i Fiks Konfigurasjon - lenker til disse tjenestene vil da være tilgjengelig på eiendommer innenfor kommunen.\nAPI Gjennom matrikkel-eier APIet kan det gjøres oppslag i matrikkelen. Enten for å finne hvilke eiendommer en person eller organisasjon eier, eller oppslag for å finne hvem som eier en spesifikk eiendom. En integrasjon må bli gitt MATRIKKEL.QUERY privilegiet på tjenesten Minside: Mine Eiendommer for å kunne bruke APIet. API for Matrikkel-eier\n"
},
{
	"uri": "/tjenester/kslering/singlesignon/",
	"title": "Single Sign On",
	"tags": [],
	"description": "",
	"content": "Single sign On (SSO) Bestilling Kommune / IKT samarbeidet sender bestilling med meta-datalenke til fiks@ks.no Grunnoppsett Sertifikater Manuelt importere rot-sertifikatet til KS som ligger nederst under \u0026ldquo;Legal Person – G3\u0026rdquo; på https://www.commfides.com/en/cps/. Rot-sertifikatet skal installeres i mappen Trusted Root Certificates Authorities, Microsoft AD FS kan komme til å foreslå Intermediate Certification Authorities. Relaying party trust Sette opp relying party trust basert på provider meta-data link tilsendt i e-post. Eks: https://www.kslaring.no/auth/saml2/sp/metadata.php?idp= Merk at det kan hende kommunesamarbeidet sitt navn skal stå istedet for kommunenavn, etter idp= Oppsett i KS Læring (utføres av KS) Testing a. Teste en pålogging via test-lenke Logg inn via SSO, klikk på linken under. Bytt ut med kommunenavn/kommunesamarbeid. https://www.kslaring.no/auth/saml2/login.php?idp= Hvis det er feil i sertifikat, så får dere en \u0026ldquo;SAML2 exception: responder\u0026rdquo;-feil fra KS Læring. Dere må sjekke at nedlastet root-sertifikat er riktig installert og på riktig server hos dere. Hvis det er feil i claims, så får dere «You have logged in succesfully but we could not find your \u0026rsquo;eksempel\u0026rsquo; attribute to associate you to an account in Moodle.» i KS Læring, men får en feilmelding om feil mapping/attributt. Forsett til steg 3b, sjekk av attributter, via tilsendt lenke for dette. b. – Når du er innlogget, klikk på linken under for å sjekke liste over attributter: (hos kommunen) https://www.kslaring.no/auth/saml2/test.php c. Send den faktiske responsen fra test.php til KS Må sendes som tekst - IKKE skjermbilde! OBS! Faktisk fødselsnummer må fjernes fra teksten! Test på nytt Test pålogging i nettlesere fra flere produsenter - Google Chrome, Apple Safari, Microsoft Internet Explorer, Mozilla Firefox, Opera etc. Dere sjekker at profilen stemmer overens med det som er forventet. Hvis dere får feil i profilen, tar dere kontakt med KS, via opprettet helpdesk-sak i innledense prosess. Meld i fra når ok Gi skriftlig beskjed til KS når alt er OK, slik at saken kan avsluttes. Azure AD Konfigurere SSO med SAML for KS læring Se brukerveildeningen i pdf-format her: https://portal.fiks.ks.no/wp-content/uploads/2023/05/sso_med_fnr.pdf\nIdentifier (Entity ID): https://www.kslaring.no/auth/saml2/sp/metadata.php Reply URL (Assertion Consumer Service URL): https://www.kslaring.no/auth/saml2/sp/saml2-acs.php/www.kslaring.no Logout Url: https://www.kslaring.no/auth/saml2/sp/saml2-logout.php/www.kslaring.no Innlogging uten fødselsnummer (valgfri identifikator) Identifikator blir fortrinnsvis bygget opp slik: \u0026ldquo;id\u0026rdquo;@\u0026ldquo;fiksorgiden\u0026rdquo;. Se brukerveildeningen i pdf-format her: https://portal.fiks.ks.no/wp-content/uploads/2023/05/sso_uten_fnr.pdf Når en ikke bruker fødselsnummer som id på brukeren, vil innlogginger med idporten resultere i en annen bruker. Hvis du logger inn med idporten vil du få en bruker som er identifisert med fødselsnummer, hvis du bruker SSO vil du få en bruker som har id @. Disse 2 brukerene vil være helt forskjellige brukere og ikke dele hvilken kurs som er tatt.\n"
},
{
	"uri": "/tjenester/fiksprotokoll/protokoll-plan/",
	"title": "Protokoll - Fiks plan",
	"tags": [],
	"description": "",
	"content": " Tjenesten er under utvikling/testing/pilotering\nFiks Plan er en asynkron protokoll over Fiks IO eller andre transportmekanismer med meldinger på json-format. For implementasjonseksempler, brukerhistorier og teknisk dokumentasjon les mer i wiki på github repoet gi-plan.\nMeldinger Hver melding består av en zip fil ASIC-E som inneholder payload.json og eventuelle tilhørende vedlegg. Hver melding kan ikke overskride 5GB.\n.NET bibliotek og prosjekter Prosjekter og evt nuget pakker:\nType Nuget Github Json skjema og spesifikasjonen - https://github.com/ks-no/fiks-plan-specification Modeller basert på spesifikasjonen https://www.nuget.org/packages/KS.Fiks.Plan.Client https://github.com/ks-no/fiks-plan-client-dotnet Wiki, modeller og eskempelklient - https://github.com/ks-no/gi-plan Fiks protokoll validator - https://github.com/ks-no/fiks-protokoll-validator Json skjema\nFinnes i repoet: https://github.com/ks-no/fiks-plan-specification Det kommer ny nuget pakke som bygges på denne spesifikasjonen.\nWiki og eksempelklient\nHer finnes Wiki, issues og eksempelklient for denne protokollen. For dokumentasjon se i dette repoet.\nModeller basert på spesifikasjonen\nProduserer en nuget pakke som kan brukes for modeller og som leverer json skjema. Denne skal fases ut og erstattes av en ny som henter og bygger modellene basert på spesifikasjons prosjektet.\nFiks protokoll validator\nDette er en applikasjon som kjører i KS sitt testmiljø. Med denne kan man teste protokollene mot sitt eget arkiv-testmiljø ved å sende ferdige meldinger med statisk json innhold til den aktuelle FIKS-IO kontoen.\n"
},
{
	"uri": "/tjenester/svarut/restv2/",
	"title": "API: Integrasjon med REST",
	"tags": [],
	"description": "",
	"content": "Nytt i denne versjonen Endepunkter delt opp i flere separate enheter som kan versjoneres hver for seg OpenAPI specs som definerer endepunktene Bruker samme autentiserings- og autoriseringsmekanismer som resten av Fiks-plattformen Tilgang Autentisering og autorisering skjer ved bruk av OAuth 2.0 med Fiks-integrasjoner og Maskinporten, som beskrevet her. Tilganger må tildeles integrasjoner på alle kontoene de skal ha lov til å utføre operasjoner for. Tilgang til en forsendelse autoriseres via avsenderkontoen.\nFeilmeldinger Generell informasjon om feilmeldinger på Fiks-plattformen finnes her.\nForsendelse Send Sending av forsendelser: OpenAPI spec\nVed innsending av forsendelser anbefales det en timeout på 16 minutter. Dette for å håndtere innsending av større filer.\nInnsending utføres ved bruk av en multipart HTTP request. Dette er ikke beskrevet i speccen. Første part må inneholde forsendelsens metadata, og ha navn \u0026ldquo;forsendelse\u0026rdquo;. Påfølgende parts skal inneholde dokumentene som skal sendes med forsendelsen. Disse må være i samme rekkefølge og ha samme navn som dokumentene definert i metadata.\nEksempel på en hvordan en slik request med to filer kan se ut:\nPOST /api/v2/kontoer/\u0026lt;konto-id\u0026gt;/forsendelser/ HTTP/1.1 Host: svarut.ks.no Authorization: Bearer \u0026lt;Maskinporten-token\u0026gt; IntegrasjonId: \u0026lt;integrasjon-id\u0026gt; IntegrasjonPassord: \u0026lt;integrasjon-passord\u0026gt; Content-Type: multipart/form-data; boundary=JettyHttpClientBoundarytt8xws4wfh61785q2obyg --JettyHttpClientBoundarytt8xws4wfh61785q2obyg Content-Disposition: form-data; name=\u0026#34;forsendelse\u0026#34; Content-Type: application/json;charset=UTF-8 { \u0026#34;mottaker\u0026#34;: { \u0026#34;digitalId\u0026#34;: \u0026#34;38850903357\u0026#34;, \u0026#34;navn\u0026#34;: \u0026#34;fce655ae-8a8f-43ec-be63-78f7321f47fc\u0026#34;, \u0026#34;adresselinje1\u0026#34;: \u0026#34;60b079d3-08a9-43fe-9ed8-b2ea6b5ddffb\u0026#34;, \u0026#34;poststed\u0026#34;: \u0026#34;d6d164ad-c302-4464-bf6f-0e4d39c56181\u0026#34;, \u0026#34;postnummer\u0026#34;: \u0026#34;0612\u0026#34;, }, \u0026#34;eksponertFor\u0026#34;: [], \u0026#34;avgivendeSystem\u0026#34;: \u0026#34;3e0842fb-170f-49f2-9a39-345fee600e52\u0026#34;, \u0026#34;tittel\u0026#34;: \u0026#34;5d624f2b-5eea-49ba-8d2d-dc6fa36e0d97\u0026#34;, \u0026#34;konteringskode\u0026#34;: \u0026#34;0caae250-6c3d-4e37-a\u0026#34;, \u0026#34;utskriftskonfigurasjon\u0026#34;: { \u0026#34;utskriftMedFarger\u0026#34;: false, \u0026#34;tosidig\u0026#34;: true }, \u0026#34;dokumenter\u0026#34;: [ { \u0026#34;filnavn\u0026#34;: \u0026#34;small.pdf\u0026#34;, \u0026#34;mimeType\u0026#34;: \u0026#34;application/pdf\u0026#34;, }, { \u0026#34;filnavn\u0026#34;: \u0026#34;another.pdf\u0026#34;, \u0026#34;mimeType\u0026#34;: \u0026#34;application/pdf\u0026#34; } ] } --JettyHttpClientBoundarytt8xws4wfh61785q2obyg Content-Disposition: form-data; name=\u0026#34;name1\u0026#34;; filename=\u0026#34;small.pdf\u0026#34; Content-Type: application/octet-stream ... file data ... --JettyHttpClientBoundarytt8xws4wfh61785q2obyg Content-Disposition: form-data; name=\u0026#34;name2\u0026#34;; filename=\u0026#34;another.pdf\u0026#34; Content-Type: application/octet-stream ... file data ... Offentlige nøkler for kryptering:\nTEST\nPROD\nLest Markering av forsendelser som lest eksternt: OpenAPI spec\nSlett Sletting av forsendelser: OpenAPI spec\nStatus Henting av status for forsendelser: OpenAPI spec\nHendelser Henting av hendelser tilknyttet en forsendelse: OpenAPI spec\nMetadata Henting av metadata tilknyttet en forsendelse: OpenAPI spec\nEkstern ref Henting av forsendelser tilknyttet en ekstern referanse: OpenAPI spec\nTyper Henting av forsendelsestyper: OpenAPI spec\nMottakersystem Henting av mottakersystem: OpenAPI spec\nJVM-klient Vi har laget en klient som vi benytter internt, som også kan benyttes av andre i JVM-miljøer. Denne bruker genererte modeller fra OpenAPI spesifikasjonene. Koden kan finnes på GitHub. Ferdig bygget klient kan hentes fra Maven Central med ditt foretrukne byggeverktøy.\nDersom man ønsker å bygge sin egen klient kan det være utfordringer med å benytte en som er generert direkte fra spesifikasjonen for endepunktene som benytter seg av multipart HTTP-requests. Dette gjelder per nå kun for sende-APIet.\n"
},
{
	"uri": "/tjenester/register/folkeregister/",
	"title": "Folkeregister",
	"tags": [],
	"description": "",
	"content": "Kort beskrivelse Fiks folkeregister er en tjeneste for å gjøre oppslag, uttrekk og hente ut hendelseslister fra Skatteetate sitt Folkeregister (FREG). Fiks folkeregister speiler konsument tjenestene til Skatteetaten på Fiks plattformen. Mer informasjon om Fiks folkeregister finner man her.\nTilgjengelige grensesnitt Grensesnitt Støtte Web portal Ja Maskin til maskin Api spec Beskrivelse av tjenesten For å ta i bruk Fiks folkeregister må man inngå bruksavtaler både med skatteetaten og KS. Klikk her for mer informasjon.\nNår avtalene er inngått kan en administrator i kommunen/fylkeskommunen sette opp løsningen. Dette må gjøres før fagsystemene og saksbehandlere kan ta i bruk tjenesten. Hva må være på plass før man kan integrere Kommune/Fylkeskommune Dere må:\nHa inngått avtaler med Skatteetaten og KS, samt delegert tilgang til KS, klikk her for mer informasjon. Ha virksomhetssertifikat for de miljøene dere skal være koblet opp i Ha avtale med Digdir om bruk av maskinporten Kontakt (fiks-utvikling@ks.no) oss og be om å få tilgang til scopet ks:fiks. Husk å oppgi organisasjonsnummeret det gjelder. (Samme nummer som virksomhetssertifikatet er utstedt til.) Opprett maskinportenklient som konfigureres opp med ks:fiks-scopet Leverandører Dere må:\nHa virksomhetssertifikat for de miljøene dere skal være koblet opp i Ha avtale med Digdir om bruk av maskinporten Kontakt (fiks-utvikling@ks.no) oss og be om å få tilgang til scopet ks:fiks, samt tilgang til Fiks-plattformen (testmiljø). Husk å oppgi organisasjonsnummeret det gjelder. (Samme nummer som virksomhetssertifikatet er utstedt til.) Opprett maskinportenklient som konfigureres opp med ks:fiks-scopet Felles Når dere har fått tilgang til Fiks-plattformen må dere:\nSette opp Fiks-folkeregister-tjenesten Lage en eller flere roller Opprette en eller flere integrasjon gi integrasjonen tilgang til rollen(e). Integrasjon Du er klar til å integrere mot Fiks folkeregister når du har følgende tilgjengelig:\nvirksomhetssertifikat maskinportenklientid rolleid integrasjon (brukernavn og passord) Roller og dataminimering Fiks folkeregister har introdusert roller for å styring av tilgang til FREG. En rolle blir brukt for å begrense opplysninger som kan hentes ut fra Folkeregisteret. Alle forespørsler må gjøres i kontekst av en rolle. En rolle inneholder begrensninger for hvilke hjemler som er tillatt, hvilke bruksområder den skal brukes til og hvilke informasjonselementer som er tillatt å hente ut fra folkeregisteret.\nSkatteetaten har laget en egen side for dataminimering. Rollene får tildelt \u0026ldquo;parts\u0026rdquo;/egenskaper (informasjonselementer) fra ut fra dataminimeringsoversikten. En rolle kan bare hente informasjonselementer som er definert i rollen og forsøk på å hente informasjonselementer ut over det som er definert resulterer i en feilmelding.\nI dokumentasjonen til API-et til FREG står det Dersom part ikke oppgis vil retur innholde samme informasjon som finnes i \u0026quot;person-basis\u0026quot;. En forespørsel med en rolle som ikke har tilgang til hele \u0026ldquo;person-basis\u0026rdquo; blir avvist dersom man ikke oppgir \u0026ldquo;parts\u0026rdquo;/egenskaper.\nMiljøer OpenAPI/Swagger og oppbygging av endepunkter** Miljø URL Test (Integrasjon) http​s://api.fiks.test.ks.no Produksjon http​s://api.fiks.ks.no Vi tilbyr et API som speiler FREG og et API som er tilpasset 0-16-uttrekk.\nFREG-API Våre API er en speiling av FREG og vi tilbyr derfor ikke egne OpenAPI/Swagger-dokumentasjon. Klikk her for FREG sin Swagger-dokumentasjon.\nLes mer om hvordan tjenestene virker hos Skatteetaten:\nHendelsesliste Oppslag Uttrekk Vi har en annen oppbygging av URL-stien enn Skatteetaten. Vi har erstattet rettighetspakke (offentlig med hjemmel og offentlig uten hjemmel) med en rolleid.\nURL-sti for Fiks sitt proxy-api er på formen: \u0026lt;MILJØ_URL\u0026gt;/folkeregister/api/v1/{ROLLE_ID}/{FREG_RESSURS}\nROLLE_ID - Id for rollen som brukes FREG_RESSURS - URL-sti for oppslag/uttrekk/hendelser fra skatteetatens api, på formen med eksempel v1/personer/{personidentifikator} Merk at dette er URL-stien som skal brukes uavhengig av om fagsystemet bruker api for offentlig med hjemmel eller offentlig uten hjemmel, da det er rollen som definerer hvilken som blir brukt.\nEksempel på bruk av API-et Eksempelet er utført med httpie: http --pretty format GET https://api.fiks.test.ks.no/folkeregister/api/v1/\u0026lt;ROLLE_ID\u0026gt;/v1/personer/06076301709?part=bostedsadresse Accept: application/json IntegrasjonId:\u0026lt;INTEGRASJONSID\u0026gt; Authorization:Bearer \u0026lt;JWT_TOKEN_FRA_MASKINPORTEN\u0026gt; IntegrasjonPassord:\u0026lt;INTEGRASJONSPASSORD\u0026gt;\n{ \u0026#34;bostedsadresse\u0026#34;: [{ \u0026#34;aarsak\u0026#34;: \u0026#34;Årsakskode fra DSF: \u0026#34;, \u0026#34;adresseIdentifikatorFraMatrikkelen\u0026#34;: \u0026#34;510430318\u0026#34;, \u0026#34;adressegradering\u0026#34;: \u0026#34;ugradert\u0026#34;, \u0026#34;ajourholdstidspunkt\u0026#34;: \u0026#34;2020-03-24T00:00:00+01:00\u0026#34;, \u0026#34;erGjeldende\u0026#34;: true, \u0026#34;grunnkrets\u0026#34;: 5102, \u0026#34;gyldighetstidspunkt\u0026#34;: \u0026#34;2020-03-24T00:00:00+01:00\u0026#34;, \u0026#34;kilde\u0026#34;: \u0026#34;KILDE_DSF\u0026#34;, \u0026#34;kirkekrets\u0026#34;: 2, \u0026#34;skolekrets\u0026#34;: 160, \u0026#34;stemmekrets\u0026#34;: 1701, \u0026#34;vegadresse\u0026#34;: { \u0026#34;adressekode\u0026#34;: \u0026#34;00001\u0026#34;, \u0026#34;adressenavn\u0026#34;: \u0026#34;Ospeskogveien\u0026#34;, \u0026#34;bruksenhetsnummer\u0026#34;: \u0026#34;H0101\u0026#34;, \u0026#34;bruksenhetstype\u0026#34;: \u0026#34;fritidsbolig\u0026#34;, \u0026#34;coAdressenavn\u0026#34;: \u0026#34;\u0026#34;, \u0026#34;kommunenummer\u0026#34;: \u0026#34;0301\u0026#34;, \u0026#34;poststed\u0026#34;: { \u0026#34;postnummer\u0026#34;: \u0026#34;0758\u0026#34;, \u0026#34;poststedsnavn\u0026#34;: \u0026#34;OSLO\u0026#34; } } }], \u0026#34;identifikasjonsnummer\u0026#34;: [{ \u0026#34;ajourholdstidspunkt\u0026#34;: \u0026#34;2020-03-25T20:14:54.736+01:00\u0026#34;, \u0026#34;erGjeldende\u0026#34;: true, \u0026#34;foedselsEllerDNummer\u0026#34;: \u0026#34;06076301709\u0026#34;, \u0026#34;identifikatortype\u0026#34;: \u0026#34;foedselsnummer\u0026#34;, \u0026#34;kilde\u0026#34;: \u0026#34;KILDE_DSF\u0026#34;, \u0026#34;status\u0026#34;: \u0026#34;iBruk\u0026#34; }] } Oppvekst-API OpenAPI/Swagger-dokumentasjon for oppvekst-API finner man her.\nDette API har spesifikke krav for rollen som brukes. Bruksområde skal være «Søk etter person» og følgende informasjonselementer for «Personbasis» og «Relasjon utvidet» må være valgt:\nPersonbasis:\nFødselsnummer eller d-nummer Personstatus Fødsel Statsborgerskap Kjønn Navn Bostedsadresse Oppholdsadresse Delt bosted Postadresse Adressebeskyttelse Identitetsgrunnlag utvidet:\nUtenlandsk personidentifikasjon Relasjon utvidet:\nFamilierelasjon Foreldreansvar Historiske data\nKontakt Tekniske spørsmål og henvendelser kan rettes til fiks-utvikling@ks.no, øvrige henvendelser kan rettes til fiks@ks.no\n"
},
{
	"uri": "/tjenester/fiksprotokoll/fiksio/",
	"title": "Fiks IO",
	"tags": [],
	"description": "",
	"content": "Kort beskrivelse Fiks IO er en kanal for sikker maskin-til-maskin integrasjon. Denne kanalen kan benyttes for å bygge prosesser på tvers av systemer og organisasjoner, for eksempel når et fagsystem skal arkivere et dokument i et arkivsystem eller spørre om informasjon som er lagret i et annet system.\nFiks IO bruker RabbitMQ som kø-system og forenkler meldingsutvekslingen via køene i RabbitMQ. Les gjerne mer om RabbitMQ og kø-systemer.\nMeldingstyper defineres i Fiks Protokoll\nTilgjengelige grensesnitt Grensesnitt Støtte Web portal Nei Maskin til maskin Ja Beskrivelse Fiks IO tilbyr:\nRask leveranse: ved hjelp av kø-basert arkitektur (AMQP) kan Fiks IO levere meldinger raskt, stort sett på under ett sekund plus eventuelt overføring av data. Dette oppnås ved at meldinger nå sendes til det mottakende fagystemet i det øyeblikket de ankommer (push), i stede for at fagsystemet må hente meldingen (pull). Svar på melding: Fiks IO lar en mottaker svare på en spesifikk melding, f.eks. for å svare på en spørring eller å bekrefte at en forespurt handling er utført. Sikker kommunikasjon med ende-til-ende kryptering: Fiks IO tilbyr ende-til-ende kryptering av meldinger. Merk at dette ikke gjelder alle bruks-scenarioer, se \u0026ldquo;Sikkerhet\u0026rdquo; for detaljer. Sikker identifisering av avsender: Bruk av standard for kryptografisk signatur (ASiC-E) for meldinger gjør at man kan være sikker på identiteten til avsender. Levetid på meldinger: En melding har en default levetid på 7 dager med mindre avsender setter det selv. Minste TTL (se mer om dette lenger nede) man kan sette er 1 sekund. Sending av store filer: Fiks IO integrerer mot Fiks Dokumentlager for å støtte sending av store filer, helt opp til dokumentlagers grense på fem gigabyte. Merk at Fiks IO har ikke leveringsgaranti. Det betyr ikke at meldingene kan bli borte i Fiks IO køene, men vi kan ikke garantere 100% at meldingen går vellykket fra avsender til mottaker da noe f.eks. kan gå galt i håndtering av meldingene. For eksempel kan en melding bli markert som lest (ack) av en mottaker før den har blitt håndtert helt ferdig og dermed kan ikke meldingen hentes på nytt. Derfor må mottaker- og avsendersystem lages slik at de håndterer at en melding kan forsvinne underveis.\nHvordan tar man i bruk Fiks IO? Når man oppretter en Fiks Protokoll konto vil det blir opprettet en Fiks IO konto, samt at man kan administrere meldingstyper som skal benyttes. Vi anbefaler å bruke Fiks Protokoll oppsettet for å få opprettet Fiks IO konto da en Fiks Protokoll konto vil ikke kunne kommunisere med en Fiks IO konto som ikke er opprettet via Fiks Protokoll. Fiks Protokoll konto er en utvidelse av Fiks IO konto, og dermed får man det man trenger for å f.eks. sette opp en Fiks IO klient.\nFiks IO baserer seg på at organisasjoner benytter Fiks Konfigurasjon for å opprette en eller flere kontoer. Andre organisasjoner kan så sende meldinger til disse kontoene, som mottaker kan lese ved å koble seg til io.fiks.ks.no.\nFor å gjøre det lettere å finne en konto, og vite hvilke meldingstyper systemet som benytter kontoen kan håndtere kan man konfigurere adresser. Adresser består av en eller flere organisasjonsnummer, meldingsprotokoller og sikkerhetsnivåer. Avsendere kan så slå opp i Fiks IOs katalogtjeneste for å finne f.eks. hvilken konto som skal motta digisos meldinger med sikkerhetsnivå fire for Bergen kommune.\nFunksjonalitet for å sende og lese meldinger vil typisk bli tilbudt av fagsystemleverandører eller offentlig virksomheter, som når Fiks Digisos formidler sosialsøknader fra Nav til kommunens sosialsystem, men kommuner og andre organisasjoner må fortsatt ha et forhold til hvilke kontoer de har, hvilke meldingstyper disse håndterer, og ikke minst hvem som har tilgang til å lese inkommende meldinger.\nI eksempelet over ser man en konto opprettet for å formidle Digisos meldinger til en kommunes fagsystem for behandlig av sosialsøknader. Det er opprettet en adresse på kontoen, \u0026ldquo;Digisos\u0026rdquo;, man har konfigurert støtte for meldingsprotokollen \u0026ldquo;no.nav.digisos.fagsystem.v1\u0026rdquo;, og sagt at dette systemet kan håndtere meldinger for både sikkerhetsnivå tre og fire.\nHva trenger du for å komme i gang? Virksomhetssertifikat Man må ha et virksomhetssertifikat fra Commfides eller Buypass for å identifisere seg med maskinporten, et for test og et for produksjon. Se avsnitt om sikkerhet lenger nede. Det er viktig at virksomhetssertifikatet er registrert med samme organisasjonsnummer som man registrerer hos maskinporten og hos KS gjennom Fiks protokoller/Fiks IO oppsettet.\nMaskinporten Fiks IO bruker maskinporten til autentisering. Da må man ha laget en klient hos maskinporten. Se her for hvordan det gjøres. Det er viktig at det gjøres med samme organisasjonsnummer som man har i virksomhetssertifikatet og i Fiks protokoller/Fiks IO oppsettet hos KS.\nFiks protokoll eller Fiks IO oppsett Stort sett vil man bruke Fiks Protokoll da man skal kommunisere over Fiks IO med en av protokollene. Se guiden for oppsett av Fiks Protokoll for hvordan dette gjøres.\nFiks IO Vi anbefaler å bruke enten java eller .NET klienten som KS tilbyr hvis man er på java eller .NET. Se github prosjektet for java eller .NET for hvordan man bruker klienten.\nForhold til SvarUt og SvarInn Fiks IO er en selvstendig kanal, og er ikke bygget for å være en erstatning for SvarUt/SvarInn, som begge vil bli videreført i sin nåværende form. Bruksområdene til tjenestene kan overlappe, og dette gjør at det noen ganger kan være tvil om SvarUt/SvarInn eller Fiks IO er riktig verktøy for et problem.\nHovedsakelig bør man benytte svarut/svarinn for \u0026ldquo;post\u0026rdquo;: meldinger hvor payload er menneske-lesbar (f.eks. en pdf), hvor automatisk håndtering begrenses til f.eks. opprettelse av sak i et arkivsystem, og hvor sending til Altinn eller som brevpost er gode alternativer hvis den automatiske håndteringen feiler. Andre faktorer kan være:\nEr dette en maskin-til-maskin integrasjon? Benytt Fiks IO, denne leverer utelukkende til spesifisert mottakerkonto og benytter ingen alternative kanaler, som for eksempel printet post.\nSkal meldingen sikres gjennom ende-til-ende kryptering? Benytt Fiks IO, SvarUt/SvarInn meldinger kan bare krypteres med Fiks-plattformens nøkkel, ikke mottakers. Se \u0026ldquo;Sikkerhet\u0026rdquo; for deltajer om hvordan man oppnår trygg ende-til-ende kryptering gjennom Fiks IO\nTrenger man rask levering? Benytt Fiks IO for å få leveranse på sekunder, ved bruk av SvarUt/SvarInn kan levering ta lang tid, siden SvarUt prøver flere kanaler etter tur og defaulter til print ved leveranseproblemer.\nVil man at fiks-plattformen skal garantere at meldingen blir levert? Benytt SvarUt, ved Fiks IO forsendelser risikerer man at meldingen ikke blir håndtert eller avvist av mottaker. Man vil få melding om dette, men man må håndtere evt. retry eller sending via alternative kanaler selv.\nØkonomiske aspekter kan også spille inn her, Fiks IO meldinger koster vesentlig mindre pr. stykk enn SvarUt forsendelser.\nTeknisk beskrivelse av løsningen Hvordan virker Fiks IO En Fiks organisasjon oppretter en Fiks IO konto. Andre kontoer kan nå sende til denne kontoen gjennom Fiks IOs REST api ved å spesifisere kontoens KontoId som mottaker. Organisasjonen får meldingene ved å etablere en AMQP kobling til io.fiks.ks.no.\nFiks IO tar i utgangspunktet ikke stilling til hva payloaden i meldingen består i. Metadataformat, filformat, kryptering og lignende er opp til brukeren, men Fiks plattformen tilbyr tjenester og verktøy for å etablere format for integrasjoner:\nFiks IO Kontokatalog: Gir mulighet for å registrere adresser bestående av organisasjonsnummer, sikkerhetsnivå, og hvilke meldingsprotokoller en gitt konto støtter. Andre kan så gjøre oppslag mot denne katalogen for å finne riktig konto å sende en melding til. Fiks IO Protokollkatalog: Tilbyr en katalog over registrerte meldingsprotokoller. En protokoll er en oversikt over hvilke meldingstyper som inngår i en kommunikasjon, gjerne også med skjema som spesifiserer syntax for de enkelte typene. Fiks IO java klient: Java klient som tilbyr funksjonalitet for å bygge, signere, kryptere, og sende meldinger som ASiC-E pakker, samt mottak og dekryptering på andre siden. Fiks IO .net klient: .net core implementasjon av samme funksjonalitet som klienten over. Sikkerhet Autentisering av klienter mot REST service for sending av meldinger og AMQP service for leveranse av meldinger skjer gjennom virksomhetssertifikat-basert maskinporten autentisering.\nI utgangspunktet legger ikke Fiks IO føringer på hvordan (eller om) en melding sendt over plattformen sikres, men alle klienter som utvikles av KS, og alle protokoller som Fiks spesifiserer, vil benytte signerte og krypterte meldinger gjennom ASIC-E containere. Denne standarden benyttes også av DIFI i forbindelse med integrasjonspunktet. I klientene er signering påkrevd, og kan settes opp med sertifikatet som blir benyttet for autentisering mot maskinporten eller et annet sertifikat/nøkkelpar. Kryptering er også påkrevi og skjer med den private delen av sertifikatet som mottaker har publisert i Fiks IO Kontokatalog.\nMerk at man for å oppnå reell ende-til-ende kryptering, i betydningen at KS ikke har noen mulighet til å lese den overførte meldingen, bør innhente mottakers sertifikater gjennom egne kanaler og selv verifisere disse. Fiks IO tilbyr automatisk oppslag i katalogen som en tjeneste for å lette dette arbeidet, men man bør være klar over at det å benytte denne gir noe svekket sikkerhet.\nKontokatalogen For å sende en melding i Fiks IO må man kjenne konto-id\u0026rsquo;en til mottakeren, men for å støtte mer dynamisk bruk tilbys Fiks IO Kontokatalog. Dette er et register over Fiks IO kontoer og tilknyttede adresser. En adresse består av:\nIdentifikator: Autoriserende identifikator for adressen. Dette vil i første omgang være begrenset til organisasjonsnummer, men kan senere utvides. For organisasjonsnummer benyttes Altinn for autorisering: personen som legger til adressen må ha rollen \u0026ldquo;post/arkiv\u0026rdquo; på den aktuelle organisasjonen. Protokoll: Spesifiserer hvilken protokoll adressen gjelder for. En protokoll vil som regel omfatte flere meldingstyper. Sikkerhetsnivå: Spesifiserer hvilket sikkerhetsnivå meldingen skal ha. Typisk benyttes nivå 3 for ikke sensitive og nivå 4 for sensitive meldinger. Adresser opprettes og forvaltes gjennom Fiks Konfigrasjon. Katalogen gir også mulighet for å laste opp en offentlig nøkkel i form av et X509 sertifikat. Dette sertifikatet blir benyttet for å kryptere meldinger sendt til kontoen, slik at de kan dekrypteres med den private delen av nøkkelen ved mottak.\nFiks Organisasjoner kan gjøre oppslag i registrerte adresser gjennom katalog-api\u0026rsquo;et.\nMerk at bruk av dette api\u0026rsquo;et i stede for manuell innhenting av sertifikater kan gi noe redusert sikkerhet. Se \u0026ldquo;Sikkerhet\u0026rdquo; for detaljer.\nProtokollkatalogen Som nevnt over har Fiks IO i utgangspunktet ingen formening om hva innholdet i en melding er, men det er i mange integrasjon-scenarioer nyttig å ha et felles repository med kontrakter for hvordan meldinger skal bygges opp. Protokollkatalogen tilbyr en slik oversikt, og man kan her referere til spesifikasjoner for meldingstypene som inngår i protokollen, og hvordan disse skal benyttes.\nDigisos bruker som nevnt over meldingsprotokollen \u0026ldquo;no.nav.digisos.fagsystem.v1\u0026rdquo;, som er beskrevet i mer detalj under Fiks Digisos.\nTa kontakt med fiks@ks.no om du ønsker å etablere eller gjøre endringer i en protokoll.\nLevetid på melding og TTL (Time To Live) Når man sender en melding via Fiks IO klienten kan man velge å sette en levetid (TTL) selv på meldingen, men med minimum 1 sekund. Hvis man ikke setter levetid selv blir TTL satt til 7 dager i Fiks IO tjenesten.\nTTL fungerer slik at den blir trigget når meldingen kommer fremst i køen til mottaker. Dette fører til en svakhet hvis man har meldinger på samme kø med forskjellig TTL.\nLa oss ta følgende eksempel:\nHvis det er flere meldinger på køen, nr 1 i køen har en TTL på 7 dager, nr 2 har en TTL på 10 sekunder. Mottaker systemet er nede i 1 time. Da vil ikke det bli trigget en TTL og sendt en “tidsavbrudd” melding tilbake til avsender (se avsnitt om standardmeldingstyper) før den første meldingen blir konsumert (eller går ut på tid). Altså får man ikke “tidsavbrudd” meldingen tilbake innen forventet tid. Dette betyr at første melding i køen avgjør når man får tidsavbrudd melding tilbake.\nFeilmeldinger fra Fiks IO Dette er meldingstyper som sendes fra Fiks IO som vil bli sendt ved diverse hendelser for meldingen.\nMerk at hvis mottaker avviser en melding (nack) så regnes dette ikke som en feil og Fiks IO sender ikke en feilmelding tilbake til avsender.\nTidsavbrudd Meldingstype: no.ks.fiks.kvittering.tidsavbrudd\nÅrsak Denne meldingen forteller at din meldings TTL har utløpt. Denne meldingen blir sendt til avsender når originalmeldingen kommer fremst i køen til mottaker og TTL er utgått. Som beskrevet tidligere betyr dette at man ikke kan si med sikkerhet at man vil få en tidsavbrudd melding når avsendt meldings TTL går ut, da meldingen foran i køen kan ha lenger TTL.\nDisse tidsavbrudd-meldingene inneholder ingen body, men kun headere.\nServerfeil Meldingstype: no.ks.fiks.kvittering.serverfeil.v1\nÅrsaker Hvis man får denne Fiks IO serverfeil meldingen tilbake så betyr det at noe har gått galt i levering til mottaker. Akkurat nå sendes denne meldingen kun når det har vært forsøkt levert 3 ganger. F.eks. mottaker har hentet ned meldingen uten å “acke” meldingen 3 ganger, eller at mottaker har nacket med requeue (nackWithReque) 3 ganger.\nMerk at de fleste protokollene har også en serverfeil meldingstype som kan sendes fra mottaker av din melding. Hvis man får protokollens serverfeil melding tilbake, f.eks. for Fiks-Arkiv med meldingstypen no.ks.fiks.arkiv.v1.feilmelding.serverfeil, så vil det bety at mottaker feilet og sendte denne meldingen kontrollert tilbake med en mulighet for å beskrive hva som gikk galt (forhåpentligvis acket meldingen og sendte denne serverfeil meldingen tilbake).\nHåndtering av store filer Fiks IO støtter sending av store filer ved at alle meldinger større enn 5 megabyte mellomlagres i Fiks Dokumentlager, i en dedikert konto som opprettes sammen med Fiks IO kontoen. En referanse til denne lagrede filen blir så sendt over AMQP. Filer sendt på slik måte får en time-to-live i dokumentlager lik time-to-live for meldingen + 24 timer. Etter dette vil de automatisk slettes.\nFor øyeblikket støttes filer opp til 5 gigabyte.\nHvis man benytter java eller .net klienten utviklet av KS vil denne mellomlagringen oppleves sømløst - klienten streamer automatisk filer fra dokumentlageret om dette er benyttet.\nKlienter For å gjøre integrasjon lettere vil KS utvikle klienter som benyttes for både sending og mottak av meldinger fra Fiks IO. Det er to klienter, en Fiks IO klient som håndterer muligheten for både å motta og sende meldinger og en Fiks IO send-klient som man kan bruke hvis man bare skal sende meldinger. Fiks IO send-klienten vil da ikke behøve amqp-kobling da den kun sender meldinger via Fiks IO API.\nKlient Pakkenavn Beskrivelse Github Fiks IO klient Java fiks-io-klient-java Klient for å motta og sende meldinger https://github.com/ks-no/fiks-io-klient-java Fiks IO klient .net KS.Fiks.IO.Client Klient for å motta og sende meldinger https://github.com/ks-no/fiks-io-client-dotnet Fiks IO send klient Java fiks-io-send-klient Klient kun for å sende meldinger https://github.com/ks-no/fiks-io-send-klient Fiks IO send klient .net KS.Fiks.IO.Send.Client Klient kun for å sende meldinger https://github.com/ks-no/fiks-io-send-client-dotnet Andre språk vil vurderes, og vi vil gjerne høre fra deg om du skriver klienter for andre språk.\nHeadere og properties i meldingsutvekslingen For at meldingene skal kunne sendes til korrekt mottaker og svares på er det en del faste headers eller properties man må sette. Headerene er slik de ser ut i amqp mens properties er hvordan klienter og API har navngitt tilsvarende attributter. Klienter og API oversetter altså til egne property navn fra og til slik de ser ut som amqp headere. Merk at man har også en map med navnet \u0026ldquo;headere\u0026rdquo; som man kan sende eller man mottar med en melding. Dette er ekstra headere man kan sende ved meldingene. Hvis man bruker Fiks IO klientene for java eller .net som KS har laget vil man stort sett ikke trenge å forholde seg til headerene (altså amqp-navnene) da man bruker ferdig funksjonalitet og kodet modeller med properties for å sende og svare på meldinger. Noen navn vil avvike litt mellom header og modell, som f.eks. headeren svar-til tilsvarer SvarPaMelding i koden for modellen for en melding for både java og .net. Se tabellen under for mapping mellom header og tilsvarende property navn man finner i klientkoden.\nHeader i amqp Property navn Beskrivelse avsender-id AvsenderKontoId Avsenders Fiks IO-konto eller Protokoll konto melding-id MeldingId Meldingens ID. Denne skal ikke settes selv, men vil bli gitt av Fiks IO når man sender en melding type MeldingType Meldingstype dokumentlager-id - ID til eventuell fil lagret i Dokumentlager. Relevant ved mottatt melding. svar-til SvarPaMelding Hvis meldingen er svar på en tidligere Fiks IO-melding, vil svar-til referere til den meldingens melding-id svar-til-type - På no.ks.fiks.kvittering.tidsavbrudd meldinger legges typen til den opprinnelige meldingen i svar-til-type egendefinert-header.klientMeldingId KlientMeldingId En id som avsender setter selv og gjenbrukes ved resending av en melding egendefinert-header.klientKorrelasjonsId KlientKorrelasjonsId En id som første avsender i en meldingsdialog kan sette og som skal da kopieres tilbake i svar-meldinger (korrelasjonsid) - Resendt Denne settes hvis melding har blitt resendt pga mottaker har gjort \u0026lsquo;NackWithRequeue\u0026rsquo; Headere (map) Man kan sende ved egne properties Headere (map)\nHer kan man sende inn i en map egendefinerte navn-verdi properties i en map som man ønsker å sende med meldingen. Hvis man bruker Fiks IO klientene vil det legges på en \u0026ldquo;egendefinert-header.\u0026rdquo; prefix for hver egendefinert header.\nResendt\nResendt betyr at en melding er resendt pga mottaker har gjort en \u0026lsquo;NackWithRequeue\u0026rsquo;. Dette er ikke en header men en status vi får fra rabbitmq.\ndokumentlager-id\nDenne får man kun hvis meldingens payload har overskredet grensen for filstørrelse og dermed blitt lagret i dokumentlageret. Hvis man bruker Fiks IO klienten i .net eller java vil man ikke trenge å forholde seg til dette da klienten forenkler dette og henter eventuelt filen fra dokumentlageret for deg.\nKlientMeldingID\nDette er en header som ikke er en Fiks IO property, men som er definert som en egendefinert-header med egendefinert-header prefix.\nDenne id er ikke påkrevd men kan benyttes for å identifisere en melding som sendes på nytt fra avsender. Den skal være ny og unik for hver melding men brukes på nytt når man resender en melding. Dette er i motsetning til melding-id som blir unik og ny for hver eneste melding, også hvis man sender en melding på nytt. Hvis man bruker Fiks IO klienten i java eller .net vil man sette denne som en vanlig property som så setter den som en egendefinert header.\nKlientKorrelasjonsID\nDette er en header som ikke er en Fiks IO property, men som er definert som en egendefinert-header med egendefinert-header prefix.\nDenne id er ikke påkrevd men kan benyttes for å sette en ID som kan settes av første sendte melding i en meldings-dialog. Påfølgende svar-meldinger skal da kopiere denne headeren tilbake i svar-melding. Dette gjør at man enklere kan se og følge alle meldinger som hører sammen i en dialog. Hvis man bruker Fiks IO klienten i java eller .net vil klienten sørge for å kopiere KlientKorrelasjonsID ved bruk av .Svar funksjonaliteten.\nHvis man sender svar-meldinger ved .Send funksjonaliteten så må man holde på KlientKorrelasjonsID fra innkommende melding og kopiere denne inn meldingen man sender selv.\nSending av melding Når man sender en melding til Fiks IO API vil den se slik ut:\n{ \u0026#34;MeldingId\u0026#34;:\u0026#34;00000000-0000-0000-0000-000000000000\u0026#34;, \u0026#34;KlientMeldingId\u0026#34;:\u0026#34;xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx\u0026#34;, \u0026#34;MeldingType\u0026#34;:\u0026#34;no.ks.fiks.arkiv.v1.arkivering.arkivmelding\u0026#34;, \u0026#34;AvsenderKontoId\u0026#34;:\u0026#34;xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx\u0026#34;, \u0026#34;MottakerKontoId\u0026#34;:\u0026#34;xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx\u0026#34;, \u0026#34;Ttl\u0026#34;:\u0026#34;2.00:00:00\u0026#34;, \u0026#34;Headere\u0026#34;:{}, \u0026#34;SvarPaMelding\u0026#34;:null, \u0026#34;Resendt\u0026#34;:false } MeldingId vil være en tom guid da man ikke setter den men får den som en ny og unik generert guid tilbake fra API. Headere skal her kun inneholde eventuelt egendefinerte properties man ønsker å sende i meldingen. MottakerKontoId blir ikke til en amqp header men identifiserer hvilken kø meldingen skal til.\nSvaret man får tilbake fra API ved send vil da se helt lik ut til det man sendte samt en ny generert MeldingId:\n{ \u0026#34;MeldingId\u0026#34;: \u0026#34;ca544416-267a-40d4-8e4c-86d14cd0a51f\u0026#34;, \u0026#34;KlientMeldingId\u0026#34;:\u0026#34;xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx\u0026#34;, \u0026#34;MeldingType\u0026#34;: \u0026#34;no.ks.fiks.arkiv.v1.arkivering.arkivmelding\u0026#34;, \u0026#34;AvsenderKontoId\u0026#34;: \u0026#34;xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx\u0026#34;, \u0026#34;MottakerKontoId\u0026#34;: \u0026#34;xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx\u0026#34;, \u0026#34;Ttl\u0026#34;: \u0026#34;2.00:00:00\u0026#34;, \u0026#34;Headere\u0026#34;: {}, \u0026#34;SvarPaMelding\u0026#34;: null, \u0026#34;Resendt\u0026#34;: false } Mottak av melding Når man mottar en melding i Fiks IO klienten så vil man få ferdig mappet fra amqp headere til properties i modellen MottattMeldingMetadata i java og .net. Property SvarPaMelding (amqp headeren svar-til) vil da eventuelt inneholde den MeldingId den er et svar på, altså den id du fikk tildelt da du sendte opprinnelig melding. Er det en melding man ønsker å svare på selv kan man bruke den innebyggede Svar( \u0026hellip; ) funksjonaliteten i Fiks IO klienten som vil da sørge for at SvarPaMelding blir korrekt. Alternativt hvis man ikke kan bruke Svar-funksjonaliteten ut av boksen, må man sørge for å sette korrekt MeldingId i SvarPaMelding property når man sender meldingen tilbake.\nHvis man ikke bruker Fiks IO klienten fra KS vil man måtte gjøre tolkning av amqp headerene selv.\nMeldingsutveksling og Fiks IO Her ser man hvordan Fiks IO klienten, Fiks IO API og køene henger sammen i en meldingsutveksling mellom to system.\nI dette eksempelet sender System A en melding fra Fiks IO klienten til Fiks IO API. Fiks IO API putter det på køen til System B. System B bruker Fiks IO klienten for å lytte på køen i Fiks IO og mottar meldingen. System B gjør som System A og sender svar på meldingen til Fiks IO API via Fiks IO klienten. Fiks IO API putter svarmeldingen på køen til System A. System A lytter og mottar svar på meldingen på sin egen kø via Fiks IO klienten.\nMerk at det er egentlig bare ett Fiks IO API som begge systemene bruker, men det er tegnet inn som 2 forskjellige bokser for å tydeligere vise flyten.\nHåndtering av mottatt melding Bekreft (Ack) Når man har mottatt en melding og vellykket håndtert den så skal man sørge for å bekrefte meldingen som mottatt (Ack). Dette tar bort meldingen fra køen.\nAvvis (Nack) Meldinger støtter dette men vi anbefaler det ikke da det betyr at man totalt avviser meldingen. Meldinger som avvises vil ikke føre til feilmelding tilbake til avsender fra Fiks IO. Hvis man bruker dette må man være sikker på at avsender håndterer manglende respons på avsendt melding.\nAvvis og send tilbake på køen (NackWithReque) Meldinger støtter dette men vi anbefaler stort sett ikke å bruke dette da det betyr at meldingen bare kommer på nytt fra Fiks IO og dette teller som forsøk på å hente meldingen. Dette betyr at man fort \u0026ldquo;bruker opp\u0026rdquo; antall forsøk på å lese meldingen og den havner i DLQ (dead-letter-queue) og deretter blir til en feilmelding tilbake til avsender. Det vil være tilfeller hvor man allikevel ønsker å gjøre dette, f.eks. hvis man får en uventet feil og ikke har noen annen måte å gi tilbakemelding til avsender at mottak feilet.\n"
},
{
	"uri": "/tjenester/fiksprotokoll/protokoll-matrikkelfoering/",
	"title": "Protokoll - Fiks matrikkelføring",
	"tags": [],
	"description": "",
	"content": "Kort beskrivelse Fiks Matrikkelføring er en asynkron protokoll over Fiks IO for å overføre grunnlag til matrikkelføring fra eByggesak til Matrikkelklienter. Den er tilsvarende løsningen som er etablert på Fiks SvarUt/SvarInn http://geointegrasjon.no/nytt-grensesnitt-ebyggesak-og-matrikkel/. Denne løsningen benytter altså Fiks IO for maskin til maskin integrasjon.\nTilgjengelige grensesnitt Grensesnitt Støtte Web portal Nei Maskin til maskin Ja Beskrivelse Teknisk oversikt skisse Hvordan ta i bruk Fiks Matrikkelføring For at eByggesak eller annet fagsystem skal få tilgang til å sende grunnlag for matrikkelføring til matrikkelklienter, så må kommunen aktivere tjenesten Fiks IO i Fiks Konfigurasjon.\nAktuell matrikkelklient må aktiveres for å kunne svare med meldinger på meldingsprotokoll no.ks.fiks.matrikkelfoering.v2\nMeldinger med Fiks IO for Fiks Matrikkelføring Meldingsprotokoll som matrikkelklient må støtte er no.ks.fiks.matrikkelfoering.v2\nHver melding i Fiks IO består av en zip fil ASIC-E som inneholder protokollmeldingen (f.eks. byggesak.xml eller status.xml) i xml format og eventuelt tilhørende vedlegg. For protokollmeldingen no.ks.fiks.matrikkelfoering.v2.grunnlag skal det følge med en index.json fil som beskriver hva hver enkelt fil er i Fiks IO meldingen. Se avsnittet om \u0026ldquo;Overføring av filer\u0026rdquo; med tilhørende tabell lenger nede for forklaring på sammenhengen mellom filer og index.json.\nHver melding kan ikke overskride 5GB totalt, med protokollmelding og vedlegg.\nFiks-IO har støtte for headere på meldinger. For å markere en melding som unik skal man sette headeren klientMeldingId med en unik id. Denne id\u0026rsquo;en skal brukes igjen for alle meldinger som forsøkes på nytt. Dette er for at mottaker skal kunne se at dette er en melding som har vært forsøkt tidligere og kan håndtere meldingen korrekt. Se kode eksempel lenger nede for hvordan man setter klientMeldingId.\nMeldinger Fra eByggesak/fagsystem:\nType Navn Skjema Filer Grunnlag til matrikkelføring no.ks.fiks.matrikkelfoering.v2.grunnlag no.ks.fiks.matrikkelfoering.v2.grunnlag.xsd byggesak.xml, index.json + evt vedlegg Forespørsel om status no.ks.fiks.matrikkelfoering.v2.status no.ks.fiks.matrikkelfoering.v2.status.xsd status.xml Fra matrikkelklienter:\nType Navn Skjema Filer Mottak vellykket no.ks.fiks.matrikkelfoering.v2.mottatt Ingen payload Ingen fil Mottak feilet - Ugyldig forespørsel no.ks.fiks.matrikkelfoering.v2.feilmelding.ugyldigforespoersel no.ks.fiks.matrikkelfoering.v2.feilmelding.ugyldigforespoersel.xsd feilmelding.xml Mottak feilet - Serverfeil no.ks.fiks.matrikkelfoering.v2.feilmelding.serverfeil no.ks.fiks.matrikkelfoering.v2.feilmelding.serverfeil.xsd feilmelding.xml Kvittering på føring i matrikkelen no.ks.fiks.matrikkelfoering.v2.kvittering no.ks.fiks.matrikkelfoering.v2.kvittering.xsd kvittering.xml Svar på forespørsel om status no.ks.fiks.matrikkelfoering.v2.statussvar no.ks.fiks.matrikkelfoering.v2.statussvar.xsd statussvar.xml Datamodell for meldinger no.ks.fiks.matrikkelfoering.v2.grunnlag.xsd\nno.ks.fiks.matrikkelfoering.v2.kvittering.xsd\nKodelister Kodelistene er tilgjengelig hos Geonorge. Man kan da laste de f.eks. ned som json-filer. Liste med kodelister og lenker til kilden hos Geonorge finner man i README for fiks-matrikkelfoering-specification prosjektet på Github.\nFlyt eByggesak mottar en søknad med strukturerte data og vedlegg fra eByggesøknad system via Fellestjenester Bygg ved hjelp av Fiks/SvarInn. Samme datastrukturer og vedleggsstruktur kan bygges opp manuelt i eByggesak ved mottak av søknad i andre kanaler enn Fellestjenester Bygg. Saksbehandler behandler saken og kontrollerer at søknaden har tilstrekkelig informasjon til at det kan fattes et vedtak. Saksbehandler kompletterer og korrigerer søknadsdataene ved behov. Før vedtaket fattes, kontrollerer eByggesak at saken har tilstrekkelig data og tegninger til matrikkelføringen. Når vedtak er fattet i eByggesak, kontrollerer eByggesak om tiltaket skal matrikkelføres. Hvis tiltaket (tiltakene) skal matrikkelføres, bygger eByggesak opp en datastruktur for matrikkelføringen som består av data fra saksbehandlingen, matrikkelinformasjon og tegninger som ligger til grunn for vedtaket. eByggesak sender deretter denne datastrukturen og tegningene til Matrikkelklienten ved hjelp av Fiks IO. Matrikkelklienten mottar datastruktur og tegninger ved hjelp av Fiks IO. Matrikkelfører fører tiltaket i Matrikkel / FKB. Her skisseres det også muligheter for at Matrikkelklienten basert på et regelsett kan matrikkelføre enkelte tiltak automatisk. Når tiltaket er matrikkelført / ført i FKB, sender Matrikkelklienten en kvitteringsmelding tilbake til eByggesak via Fiks IO. eByggesak mottar kvitteringsmeldingen via Fiks IO og oppretter milepæl for matrikkelføring i saken Flyt for status meldinger Fagsystem kan sende status forespørsel for en innsendt matrikkelføring med meldingstypen no.ks.fiks.matrikkelfoering.v2.status. Matrikkelsystem svarer da med status med meldingstypen no.ks.fiks.matrikkelfoering.v2.statussvar. For at dette skal fungere krever protokollen at det blir sendt unik klientMeldingId header (se eksempel lenger nede) på alle no.ks.fiks.matrikkelfoering.v2.grunnlag meldinger.\nEksempel på status:\n\u0026lt;StatusMatrikkel xmlns=http://rep.geointegrasjon.no/Matrikkel/foeringstatus/v2\u0026gt; \u0026lt;klientMeldingId\u0026gt;02c5187a-5bd7-43a0-a99c-aa5e8bcc0cd3\u0026lt;/klientMeldingId\u0026gt; \u0026lt;svarMedKvittering\u0026gt;true\u0026lt;/svarMedKvittering\u0026gt; \u0026lt;/StatusMatrikkel\u0026gt; Her sender klient id på meldingen den forespør om status på, samt at det er et flagg svarMedKvittering (default=false) som kan brukes til å be matrikkelsystemet sende kvitteringsdokumentet på nytt, så sant meldingen allerede er kvittert.\nEksempel på svar hvor meldingen er ukjent for matrikkelsystemet:\n\u0026lt;StatusMatrikkelSvar xmlns=http://rep.geointegrasjon.no/Matrikkel/foeringstatussvar/v2\u0026gt; \u0026lt;klientMeldingId\u0026gt;02c5187a-5bd7-43a0-a99c-aa5e8bcc0cd3\u0026lt;/klientMeldingId\u0026gt; \u0026lt;statusBehandling\u0026gt;IkkeMottatt\u0026lt;/statusBehandling\u0026gt; \u0026lt;/StatusMatrikkelSvar\u0026gt; klientMeldingId er her ikke kjent og da svarer vi med status IkkeMottatt. Da kan man anta at meldingen ikke er sendt eller den er tapt, da må man sende grunnlag-melding for å starte prosessen. Mulige verdier for statusBehandling er Mottatt, IkkeMottatt, Feil og Kvittert. Feil vil bety at meldingen som ble sendt fra sakssystem ikke var gyldig, kvittert betyr at meldingen er ferdig behandlet ved at den er ført i matrikkel (eller ikke). Mottatt er mellomstadie som forteller at meldingen er under behandling, slik at man slipper å sende på nytt.\nEksempel på statussvar der meldingen er mottatt, men ennå ikke kvittert (en status den kan ligge i veldig lang tid uten at det nødvendigvis betyr at noe er feil):\n\u0026lt;StatusMatrikkelSvar xmlns=http://rep.geointegrasjon.no/Matrikkel/foeringstatussvar/v2\u0026gt; \u0026lt;klientMeldingId\u0026gt;02c5187a-5bd7-43a0-a99c-aa5e8bcc0cd3\u0026lt;/klientMeldingId\u0026gt; \u0026lt;statusBehandling\u0026gt;Mottatt\u0026lt;/statusBehandling\u0026gt; \u0026lt;meldingId\u0026gt;02c5187a-5bd7-43a0-a99c-aa5e8bcc0cd4\u0026lt;/meldingId\u0026gt; \u0026lt;/StatusMatrikkelSvar\u0026gt; Her får man også tilbake den faktiske meldingId-en som meldingen hadde fra fiksio.\nSiste eksempel, der meldingen er kvittert:\n\u0026lt;StatusMatrikkelSvar xmlns=http://rep.geointegrasjon.no/Matrikkel/foeringstatussvar/v2\u0026gt; \u0026lt;klientMeldingId\u0026gt;02c5187a-5bd7-43a0-a99c-aa5e8bcc0cd3\u0026lt;/klientMeldingId\u0026gt; \u0026lt;statusBehandling\u0026gt;Mottatt\u0026lt;/statusBehandling\u0026gt; \u0026lt;meldingId\u0026gt;02c5187a-5bd7-43a0-a99c-aa5e8bcc0cd4\u0026lt;/meldingId\u0026gt; \u0026lt;statusKvittering\u0026gt;IkkeForespurt\u0026lt;/statusKvittering\u0026gt; \u0026lt;/StatusMatrikkelSvar\u0026gt; Her følger det med en statusKvittering. Den vil gjenspeile svarMedKvittering-elementet i forespørselen, og kan være IkkeForespurt, Vedlagt eller Utloept. De to første korresponderer til false/true på svarMedKvittering. Utloept brukes der kvittering er sendt, og svarMedKvittering er true, men samtidig at dokumentet ikke lenger er lagret på matrikkelsystem-siden pga. f.eks. at det blir slettet etter en stund.\nOverføring av filer Meldingen no.ks.fiks.matrikkelfoering.v2.grunnlag vil inneholde en byggesak.xml fil som er matrikkelføringen, eventuelle vedlegg og en index.json fil som beskriver innholdet i hele meldingen. Filen index.json har følgende struktur:\n[ { \u0026#34;dokumenttype\u0026#34;: \u0026#34;Byggesak\u0026#34;, // Vedleggstype - Se eksempel tabell nedenfor \u0026#34;tittel\u0026#34;: \u0026#34;Underlag for matrikkelføring\u0026#34;, \u0026#34;dokumentnummer\u0026#34;: 1, // Dette tilsvarer index for denne filen i payloads for Fiks IO meldingen \u0026#34;filnavn\u0026#34;: \u0026#34;byggesak.xml\u0026#34; // Filnavn i Fiks IO meldingen }, { \u0026#34;dokumenttype\u0026#34;: \u0026#34;Situasjonsplan\u0026#34;, // Vedleggstype - Se eksempel tabell nedenfor \u0026#34;tittel\u0026#34;: \u0026#34;Situasjonsplan\u0026#34;, \u0026#34;dokumentnummer\u0026#34;: 2, // Dette tilsvarer index for denne filen i payloads for Fiks IO meldingen \u0026#34;filnavn\u0026#34;: \u0026#34;DokSitplan.pdf\u0026#34; // Filnavn i Fiks IO meldingen }, ] Vedleggstyper er definert her på Geonorge.\nHer er noen eksempler hentet derfra:\nTittel Vedleggstype Situasjonsplan Situasjonsplan Tegning eksisterende plan TegningEksisterendePlan Tegning ny plan TegningNyPlan Tegning eksisterende snitt TegningEksisterendeSnitt Tegning nytt snitt TegningNyttSnitt Tegning eksisterende fasade TegningEksisterendeFasade Tegning eksisterende snitt TegningEksisterendeSnitt Tegning ny fasade TegningNyFasade ByggesaksBIM ByggesaksBIM Tegning eksisterende snitt TegningEksisterendeSnitt Tegning eksisterende snitt TegningEksisterendeSnitt Matrikkelføring XML Byggesak Nivå på grunnlaget til matrikkelføring Det er definert 4 trappetrinn/nivå i løsningskonseptet som illustrerer hvor godt et tiltak er tilrettelagt for effektiv matrikkelføring.\nNivå 0:\nOverføringen inneholder kun saksnummer/url på vedtaket. Dette er tilsvarende løsning som «papirmappe på pulten» bortsett fra at all informasjon og alle tegninger foreligger elektronisk. Matrikkelfører må navigere til saken og sette seg inn i saksbehandlingen og tegningene for å kunne matrikkelføre. Nivå 1:\nOverføringen inneholder i tillegg tegningene som ligger til grunn for vedtaket, men lite data for øvrig. Matrikkelfører slipper å lete etter riktig grunnlag, men må sette seg inn i saken. Nivå 2:\nOverføringen inneholder i tillegg komplett saksinformasjon og matrikkelopplysninger. Matrikkelfører har tilgjengelig all nødvendig informasjon for å kunne matrikkelføre og slipper å gå inn i eByggesaken for å finne informasjon. Matrikkelklienten kan pre-utfylle matrikkelinformasjonen slik at Matrikkelfører slipper å fylle inn dataene på nytt. Matrikkelklienten kan, basert på et regelsett, føre enkelte tiltak automatisk. Nivå 3:\nOverføringen inneholder i tillegg en ByggesaksBIM. Matrikkelfører bedre arealinformasjon. Muliggjør automatisk uttrekk av tiltakets omriss for effektivisering av føringen i FKB. Nivå 4:\nOverføringen inneholder i tillegg digital situasjonsplan. Gir Matrikkelfører informasjon om delelinjer / grensejusteringer ved Delesaker. Videresending av grunnlag som skal føres i en annen matrikkelklient Hvis matrikkelfører finner ut at en melding skal registreres ved bruk av en annen matrikkelklient så kan denne meldingen videresendes. Det skal da brukes egne headere for å angi hvilken opprinnelig konto og hvilken opprinnelig meldingsid som skal besvares med mottatt melding, evt feilmelding og kvitteringsmelding.\nHeader Beskrivelse videresendt-fra-konto Opprinnelig konto som melding kom fra opprinnelig-melding-id Opprinnelig meldingsid som svar-til skal sendes tilbake til Eksempel 1 - viser eksempel på en nivå 1 melding Kodeeksempel på sending av melding med grunnlag for matrikkelføring. Fiks-IO klienten støtter å sette egne headere og som tidligere nevnt skal klientMeldingId settes som parameter slik at den komme med i headeren.\nvar messageRequest = new MeldingRequest( mottakerKontoId: receiverId, avsenderKontoId: senderId, klientMeldingId: klientMeldingId, meldingType: \u0026#34;no.ks.fiks.matrikkelfoering.v2.grunnlag\u0026#34;); List\u0026lt;IPayload\u0026gt; payloads = new List\u0026lt;IPayload\u0026gt;(); payloads.Add(new StringPayload(jsonPayload, \u0026#34;index.json\u0026#34;)); payloads.Add(new StringPayload(payload, \u0026#34;byggesak.xml\u0026#34;)); payloads.Add(new FilePayload(\u0026#34;DokSitplan.pdf\u0026#34;)); payloads.Add(new FilePayload(\u0026#34;DokTegning.pdf\u0026#34;)); var msgSent = client.Send(messageRequest, payloads).Result; index.json innhold\n[ { \u0026#34;dokumenttype\u0026#34;: \u0026#34;Byggesak\u0026#34;, \u0026#34;tittel\u0026#34;: \u0026#34;Underlag for matrikkelføring\u0026#34;, \u0026#34;dokumentnummer\u0026#34;: 1, \u0026#34;filnavn\u0026#34;: \u0026#34;byggesak.xml\u0026#34; }, { \u0026#34;dokumenttype\u0026#34;: \u0026#34;Situasjonsplan\u0026#34;, \u0026#34;tittel\u0026#34;: \u0026#34;Situasjonsplan\u0026#34;, \u0026#34;dokumentnummer\u0026#34;: 2, \u0026#34;filnavn\u0026#34;: \u0026#34;DokSitplan.pdf\u0026#34; }, { \u0026#34;dokumenttype\u0026#34;: \u0026#34;TegningNyFasade\u0026#34;, \u0026#34;tittel\u0026#34;: \u0026#34;Tegning ny fasade\u0026#34;, \u0026#34;dokumentnummer\u0026#34;: 3, \u0026#34;filnavn\u0026#34;: \u0026#34;DokTegning.pdf\u0026#34; } ] byggesak.xml innhold\n\u0026lt;?xml version=\u0026#34;1.0\u0026#34; encoding=\u0026#34;utf-8\u0026#34;?\u0026gt; \u0026lt;Byggesak xmlns:xsi=\u0026#34;http://www.w3.org/2001/XMLSchema-instance\u0026#34; xmlns:xsd=\u0026#34;http://www.w3.org/2001/XMLSchema\u0026#34; xmlns=\u0026#34;http://rep.geointegrasjon.no/Matrikkel/foering/v2\u0026#34;\u0026gt; \u0026lt;tittel\u0026gt;Rammesøknad for enebolig i Byggestedgate 1\u0026lt;/tittel\u0026gt; \u0026lt;saksnummer\u0026gt; \u0026lt;saksaar\u0026gt;2018\u0026lt;/saksaar\u0026gt; \u0026lt;sakssekvensnummer\u0026gt;123456\u0026lt;/sakssekvensnummer\u0026gt; \u0026lt;/saksnummer\u0026gt; \u0026lt;kategori\u0026gt; \u0026lt;kode\u0026gt;RS\u0026lt;/kode\u0026gt; \u0026lt;beskrivelse\u0026gt;Søknad om rammetillatelse\u0026lt;/beskrivelse\u0026gt; \u0026lt;/kategori\u0026gt; \u0026lt;tiltakstype\u0026gt; \u0026lt;tiltaktype\u0026gt; \u0026lt;kode\u0026gt;nyttbyggboligformal\u0026lt;/kode\u0026gt; \u0026lt;beskrivelse\u0026gt;Nytt bygg - boligformål\u0026lt;/beskrivelse\u0026gt; \u0026lt;/tiltaktype\u0026gt; \u0026lt;/tiltakstype\u0026gt; \u0026lt;vedtak\u0026gt; \u0026lt;beskrivelse\u0026gt;Vedtak om rammetillatelse\u0026lt;/beskrivelse\u0026gt; \u0026lt;vedtaksdato\u0026gt;2020-04-02T16:09:14.7947093+02:00\u0026lt;/vedtaksdato\u0026gt; \u0026lt;status\u0026gt; \u0026lt;kode\u0026gt;1\u0026lt;/kode\u0026gt; \u0026lt;beskrivelse\u0026gt;Godkjent\u0026lt;/beskrivelse\u0026gt; \u0026lt;/status\u0026gt; \u0026lt;/vedtak\u0026gt; \u0026lt;adresse\u0026gt;Byggestedgate 1\u0026lt;/adresse\u0026gt; \u0026lt;saksbehandler\u0026gt;Michael\u0026lt;/saksbehandler\u0026gt; \u0026lt;/Byggesak\u0026gt; Eksempel på XML på nivå 2 \u0026lt;?xml version=\u0026#34;1.0\u0026#34; encoding=\u0026#34;utf-8\u0026#34;?\u0026gt; \u0026lt;Byggesak xmlns:xsi=\u0026#34;http://www.w3.org/2001/XMLSchema-instance\u0026#34; xmlns:xsd=\u0026#34;http://www.w3.org/2001/XMLSchema\u0026#34; xmlns=\u0026#34;http://rep.geointegrasjon.no/Matrikkel/foering/v2\u0026#34;\u0026gt; \u0026lt;systemId xsi:nil=\u0026#34;true\u0026#34; /\u0026gt; \u0026lt;tittel\u0026gt;Rammesøknad for oppføring av 5 tomannsboliger\u0026lt;/tittel\u0026gt; \u0026lt;saksnummer\u0026gt; \u0026lt;saksaar\u0026gt;2018\u0026lt;/saksaar\u0026gt; \u0026lt;sakssekvensnummer\u0026gt;123456\u0026lt;/sakssekvensnummer\u0026gt; \u0026lt;/saksnummer\u0026gt; \u0026lt;kategori\u0026gt; \u0026lt;kode\u0026gt;RS\u0026lt;/kode\u0026gt; \u0026lt;beskrivelse\u0026gt;Søknad om rammetillatelse\u0026lt;/beskrivelse\u0026gt; \u0026lt;/kategori\u0026gt; \u0026lt;tiltakstype\u0026gt; \u0026lt;tiltaktype\u0026gt; \u0026lt;kode\u0026gt;nyttbyggboligformal\u0026lt;/kode\u0026gt; \u0026lt;beskrivelse\u0026gt;Nytt bygg - boligformål\u0026lt;/beskrivelse\u0026gt; \u0026lt;/tiltaktype\u0026gt; \u0026lt;/tiltakstype\u0026gt; \u0026lt;vedtak\u0026gt; \u0026lt;beskrivelse\u0026gt;Vedtak om rammetillatelse\u0026lt;/beskrivelse\u0026gt; \u0026lt;vedtaksdato\u0026gt;2020-04-02T16:16:45.1760034+02:00\u0026lt;/vedtaksdato\u0026gt; \u0026lt;status\u0026gt; \u0026lt;kode\u0026gt;1\u0026lt;/kode\u0026gt; \u0026lt;beskrivelse\u0026gt;Godkjent\u0026lt;/beskrivelse\u0026gt; \u0026lt;/status\u0026gt; \u0026lt;dispensasjoner xsi:nil=\u0026#34;true\u0026#34; /\u0026gt; \u0026lt;/vedtak\u0026gt; \u0026lt;ansvarligSoeker\u0026gt; \u0026lt;foedselsnummer xsi:nil=\u0026#34;true\u0026#34; /\u0026gt; \u0026lt;organisasjonsnummer\u0026gt;123456789\u0026lt;/organisasjonsnummer\u0026gt; \u0026lt;navn\u0026gt;Arkitekt Flink\u0026lt;/navn\u0026gt; \u0026lt;adresse xsi:nil=\u0026#34;true\u0026#34; /\u0026gt; \u0026lt;telefonnummer xsi:nil=\u0026#34;true\u0026#34; /\u0026gt; \u0026lt;mobilnummer xsi:nil=\u0026#34;true\u0026#34; /\u0026gt; \u0026lt;epost xsi:nil=\u0026#34;true\u0026#34; /\u0026gt; \u0026lt;/ansvarligSoeker\u0026gt; \u0026lt;tiltakshaver\u0026gt; \u0026lt;foedselsnummer\u0026gt;12345678901\u0026lt;/foedselsnummer\u0026gt; \u0026lt;organisasjonsnummer xsi:nil=\u0026#34;true\u0026#34; /\u0026gt; \u0026lt;navn\u0026gt;Hans Utbygger\u0026lt;/navn\u0026gt; \u0026lt;adresse xsi:nil=\u0026#34;true\u0026#34; /\u0026gt; \u0026lt;telefonnummer xsi:nil=\u0026#34;true\u0026#34; /\u0026gt; \u0026lt;mobilnummer xsi:nil=\u0026#34;true\u0026#34; /\u0026gt; \u0026lt;epost xsi:nil=\u0026#34;true\u0026#34; /\u0026gt; \u0026lt;/tiltakshaver\u0026gt; \u0026lt;matrikkelopplysninger\u0026gt; \u0026lt;eiendomsidentifikasjon\u0026gt; \u0026lt;matrikkelnummer\u0026gt; \u0026lt;kommunenummer\u0026gt;9999\u0026lt;/kommunenummer\u0026gt; \u0026lt;gaardsnummer\u0026gt;260\u0026lt;/gaardsnummer\u0026gt; \u0026lt;bruksnummer\u0026gt;109\u0026lt;/bruksnummer\u0026gt; \u0026lt;festenummer xsi:nil=\u0026#34;true\u0026#34; /\u0026gt; \u0026lt;seksjonsnummer xsi:nil=\u0026#34;true\u0026#34; /\u0026gt; \u0026lt;/matrikkelnummer\u0026gt; \u0026lt;/eiendomsidentifikasjon\u0026gt; \u0026lt;adresse\u0026gt; \u0026lt;adresse\u0026gt; \u0026lt;adressekode\u0026gt;1001\u0026lt;/adressekode\u0026gt; \u0026lt;adressenavn\u0026gt;Byggestedgate\u0026lt;/adressenavn\u0026gt; \u0026lt;adressenummer\u0026gt;3\u0026lt;/adressenummer\u0026gt; \u0026lt;adressebokstav\u0026gt;A\u0026lt;/adressebokstav\u0026gt; \u0026lt;seksjonsnummer xsi:nil=\u0026#34;true\u0026#34; /\u0026gt; \u0026lt;/adresse\u0026gt; \u0026lt;adresse\u0026gt; \u0026lt;adressekode\u0026gt;1001\u0026lt;/adressekode\u0026gt; \u0026lt;adressenavn\u0026gt;Byggestedgate\u0026lt;/adressenavn\u0026gt; \u0026lt;adressenummer\u0026gt;3\u0026lt;/adressenummer\u0026gt; \u0026lt;adressebokstav\u0026gt;B\u0026lt;/adressebokstav\u0026gt; \u0026lt;seksjonsnummer xsi:nil=\u0026#34;true\u0026#34; /\u0026gt; \u0026lt;/adresse\u0026gt; \u0026lt;adresse\u0026gt; \u0026lt;adressekode\u0026gt;1001\u0026lt;/adressekode\u0026gt; \u0026lt;adressenavn\u0026gt;Byggestedgate\u0026lt;/adressenavn\u0026gt; \u0026lt;adressenummer\u0026gt;5\u0026lt;/adressenummer\u0026gt; \u0026lt;adressebokstav\u0026gt;A\u0026lt;/adressebokstav\u0026gt; \u0026lt;seksjonsnummer xsi:nil=\u0026#34;true\u0026#34; /\u0026gt; \u0026lt;/adresse\u0026gt; \u0026lt;adresse\u0026gt; \u0026lt;adressekode\u0026gt;1001\u0026lt;/adressekode\u0026gt; \u0026lt;adressenavn\u0026gt;Byggestedgate\u0026lt;/adressenavn\u0026gt; \u0026lt;adressenummer\u0026gt;5\u0026lt;/adressenummer\u0026gt; \u0026lt;adressebokstav\u0026gt;B\u0026lt;/adressebokstav\u0026gt; \u0026lt;seksjonsnummer xsi:nil=\u0026#34;true\u0026#34; /\u0026gt; \u0026lt;/adresse\u0026gt; \u0026lt;adresse\u0026gt; \u0026lt;adressekode\u0026gt;1001\u0026lt;/adressekode\u0026gt; \u0026lt;adressenavn\u0026gt;Byggestedgate\u0026lt;/adressenavn\u0026gt; \u0026lt;adressenummer\u0026gt;7\u0026lt;/adressenummer\u0026gt; \u0026lt;adressebokstav\u0026gt;A\u0026lt;/adressebokstav\u0026gt; \u0026lt;seksjonsnummer xsi:nil=\u0026#34;true\u0026#34; /\u0026gt; \u0026lt;/adresse\u0026gt; \u0026lt;adresse\u0026gt; \u0026lt;adressekode\u0026gt;1001\u0026lt;/adressekode\u0026gt; \u0026lt;adressenavn\u0026gt;Byggestedgate\u0026lt;/adressenavn\u0026gt; \u0026lt;adressenummer\u0026gt;7\u0026lt;/adressenummer\u0026gt; \u0026lt;adressebokstav\u0026gt;B\u0026lt;/adressebokstav\u0026gt; \u0026lt;seksjonsnummer xsi:nil=\u0026#34;true\u0026#34; /\u0026gt; \u0026lt;/adresse\u0026gt; \u0026lt;adresse\u0026gt; \u0026lt;adressekode\u0026gt;1001\u0026lt;/adressekode\u0026gt; \u0026lt;adressenavn\u0026gt;Byggestedgate\u0026lt;/adressenavn\u0026gt; \u0026lt;adressenummer\u0026gt;9\u0026lt;/adressenummer\u0026gt; \u0026lt;adressebokstav\u0026gt;A\u0026lt;/adressebokstav\u0026gt; \u0026lt;seksjonsnummer xsi:nil=\u0026#34;true\u0026#34; /\u0026gt; \u0026lt;/adresse\u0026gt; \u0026lt;adresse\u0026gt; \u0026lt;adressekode\u0026gt;1001\u0026lt;/adressekode\u0026gt; \u0026lt;adressenavn\u0026gt;Byggestedgate\u0026lt;/adressenavn\u0026gt; \u0026lt;adressenummer\u0026gt;9\u0026lt;/adressenummer\u0026gt; \u0026lt;adressebokstav\u0026gt;B\u0026lt;/adressebokstav\u0026gt; \u0026lt;seksjonsnummer xsi:nil=\u0026#34;true\u0026#34; /\u0026gt; \u0026lt;/adresse\u0026gt; \u0026lt;adresse\u0026gt; \u0026lt;adressekode\u0026gt;1001\u0026lt;/adressekode\u0026gt; \u0026lt;adressenavn\u0026gt;Byggestedgate\u0026lt;/adressenavn\u0026gt; \u0026lt;adressenummer\u0026gt;11\u0026lt;/adressenummer\u0026gt; \u0026lt;adressebokstav\u0026gt;A\u0026lt;/adressebokstav\u0026gt; \u0026lt;seksjonsnummer xsi:nil=\u0026#34;true\u0026#34; /\u0026gt; \u0026lt;/adresse\u0026gt; \u0026lt;adresse\u0026gt; \u0026lt;adressekode\u0026gt;1001\u0026lt;/adressekode\u0026gt; \u0026lt;adressenavn\u0026gt;Byggestedgate\u0026lt;/adressenavn\u0026gt; \u0026lt;adressenummer\u0026gt;11\u0026lt;/adressenummer\u0026gt; \u0026lt;adressebokstav\u0026gt;B\u0026lt;/adressebokstav\u0026gt; \u0026lt;seksjonsnummer xsi:nil=\u0026#34;true\u0026#34; /\u0026gt; \u0026lt;/adresse\u0026gt; \u0026lt;/adresse\u0026gt; \u0026lt;bygning\u0026gt; \u0026lt;bygning\u0026gt; \u0026lt;bygningsnummer xsi:nil=\u0026#34;true\u0026#34; /\u0026gt; \u0026lt;naeringsgruppe\u0026gt; \u0026lt;kode\u0026gt;X\u0026lt;/kode\u0026gt; \u0026lt;beskrivelse\u0026gt;Bolig\u0026lt;/beskrivelse\u0026gt; \u0026lt;/naeringsgruppe\u0026gt; \u0026lt;bygningstype\u0026gt; \u0026lt;kode\u0026gt;121\u0026lt;/kode\u0026gt; \u0026lt;beskrivelse\u0026gt;Tomannsbolig, vertikaldelt\u0026lt;/beskrivelse\u0026gt; \u0026lt;/bygningstype\u0026gt; \u0026lt;bebygdAreal\u0026gt;100\u0026lt;/bebygdAreal\u0026gt; \u0026lt;bruksenheter\u0026gt; \u0026lt;bruksenhet\u0026gt; \u0026lt;bruksenhetsnummer\u0026gt; \u0026lt;etasjeplan\u0026gt; \u0026lt;kode\u0026gt;H\u0026lt;/kode\u0026gt; \u0026lt;beskrivelse\u0026gt;H\u0026lt;/beskrivelse\u0026gt; \u0026lt;/etasjeplan\u0026gt; \u0026lt;etasjenummer\u0026gt;01\u0026lt;/etasjenummer\u0026gt; \u0026lt;loepenummer\u0026gt;01\u0026lt;/loepenummer\u0026gt; \u0026lt;/bruksenhetsnummer\u0026gt; \u0026lt;bruksenhetstype\u0026gt; \u0026lt;kode\u0026gt;B\u0026lt;/kode\u0026gt; \u0026lt;beskrivelse\u0026gt;Bolig\u0026lt;/beskrivelse\u0026gt; \u0026lt;/bruksenhetstype\u0026gt; \u0026lt;bruksareal\u0026gt;100\u0026lt;/bruksareal\u0026gt; \u0026lt;kjoekkentilgang\u0026gt; \u0026lt;kode\u0026gt;0\u0026lt;/kode\u0026gt; \u0026lt;beskrivelse\u0026gt;Ikke oppgitt\u0026lt;/beskrivelse\u0026gt; \u0026lt;/kjoekkentilgang\u0026gt; \u0026lt;antallRom\u0026gt;3\u0026lt;/antallRom\u0026gt; \u0026lt;antallBad\u0026gt;1\u0026lt;/antallBad\u0026gt; \u0026lt;antallWC\u0026gt;1\u0026lt;/antallWC\u0026gt; \u0026lt;adresse\u0026gt; \u0026lt;adressekode\u0026gt;1001\u0026lt;/adressekode\u0026gt; \u0026lt;adressenavn\u0026gt;Byggestedgate\u0026lt;/adressenavn\u0026gt; \u0026lt;adressenummer\u0026gt;3\u0026lt;/adressenummer\u0026gt; \u0026lt;adressebokstav\u0026gt;A\u0026lt;/adressebokstav\u0026gt; \u0026lt;seksjonsnummer xsi:nil=\u0026#34;true\u0026#34; /\u0026gt; \u0026lt;/adresse\u0026gt; \u0026lt;matrikkelnummer xsi:nil=\u0026#34;true\u0026#34; /\u0026gt; \u0026lt;endring\u0026gt;Ny\u0026lt;/endring\u0026gt; \u0026lt;/bruksenhet\u0026gt; \u0026lt;bruksenhet\u0026gt; \u0026lt;bruksenhetsnummer\u0026gt; \u0026lt;etasjeplan\u0026gt; \u0026lt;kode\u0026gt;H\u0026lt;/kode\u0026gt; \u0026lt;beskrivelse\u0026gt;H\u0026lt;/beskrivelse\u0026gt; \u0026lt;/etasjeplan\u0026gt; \u0026lt;etasjenummer\u0026gt;01\u0026lt;/etasjenummer\u0026gt; \u0026lt;loepenummer\u0026gt;01\u0026lt;/loepenummer\u0026gt; \u0026lt;/bruksenhetsnummer\u0026gt; \u0026lt;bruksenhetstype\u0026gt; \u0026lt;kode\u0026gt;B\u0026lt;/kode\u0026gt; \u0026lt;beskrivelse\u0026gt;Bolig\u0026lt;/beskrivelse\u0026gt; \u0026lt;/bruksenhetstype\u0026gt; \u0026lt;bruksareal\u0026gt;100\u0026lt;/bruksareal\u0026gt; \u0026lt;kjoekkentilgang\u0026gt; \u0026lt;kode\u0026gt;0\u0026lt;/kode\u0026gt; \u0026lt;beskrivelse\u0026gt;Ikke oppgitt\u0026lt;/beskrivelse\u0026gt; \u0026lt;/kjoekkentilgang\u0026gt; \u0026lt;antallRom\u0026gt;3\u0026lt;/antallRom\u0026gt; \u0026lt;antallBad\u0026gt;1\u0026lt;/antallBad\u0026gt; \u0026lt;antallWC\u0026gt;1\u0026lt;/antallWC\u0026gt; \u0026lt;adresse\u0026gt; \u0026lt;adressekode\u0026gt;1001\u0026lt;/adressekode\u0026gt; \u0026lt;adressenavn\u0026gt;Byggestedgate\u0026lt;/adressenavn\u0026gt; \u0026lt;adressenummer\u0026gt;3\u0026lt;/adressenummer\u0026gt; \u0026lt;adressebokstav\u0026gt;B\u0026lt;/adressebokstav\u0026gt; \u0026lt;seksjonsnummer xsi:nil=\u0026#34;true\u0026#34; /\u0026gt; \u0026lt;/adresse\u0026gt; \u0026lt;matrikkelnummer xsi:nil=\u0026#34;true\u0026#34; /\u0026gt; \u0026lt;endring\u0026gt;Ny\u0026lt;/endring\u0026gt; \u0026lt;/bruksenhet\u0026gt; \u0026lt;/bruksenheter\u0026gt; \u0026lt;etasjer\u0026gt; \u0026lt;etasje\u0026gt; \u0026lt;etasjenummer\u0026gt;01\u0026lt;/etasjenummer\u0026gt; \u0026lt;etasjeplan\u0026gt; \u0026lt;kode\u0026gt;H\u0026lt;/kode\u0026gt; \u0026lt;beskrivelse\u0026gt;H\u0026lt;/beskrivelse\u0026gt; \u0026lt;/etasjeplan\u0026gt; \u0026lt;antallBoenheter\u0026gt;1\u0026lt;/antallBoenheter\u0026gt; \u0026lt;bruksarealTilAnnet\u0026gt;0\u0026lt;/bruksarealTilAnnet\u0026gt; \u0026lt;bruksarealTilBolig\u0026gt;200\u0026lt;/bruksarealTilBolig\u0026gt; \u0026lt;bruksarealTotalt\u0026gt;200\u0026lt;/bruksarealTotalt\u0026gt; \u0026lt;endring\u0026gt;Ny\u0026lt;/endring\u0026gt; \u0026lt;/etasje\u0026gt; \u0026lt;/etasjer\u0026gt; \u0026lt;avlop\u0026gt; \u0026lt;kode\u0026gt;OffentligKloakk\u0026lt;/kode\u0026gt; \u0026lt;beskrivelse\u0026gt;Offentlig avløpsanlegg\u0026lt;/beskrivelse\u0026gt; \u0026lt;/avlop\u0026gt; \u0026lt;energiforsyning xsi:nil=\u0026#34;true\u0026#34; /\u0026gt; \u0026lt;vannforsyning\u0026gt; \u0026lt;kode\u0026gt;TilknyttetOffVannverk\u0026lt;/kode\u0026gt; \u0026lt;beskrivelse\u0026gt;Offentlig vannverk\u0026lt;/beskrivelse\u0026gt; \u0026lt;/vannforsyning\u0026gt; \u0026lt;harHeis\u0026gt;false\u0026lt;/harHeis\u0026gt; \u0026lt;endring\u0026gt;Ny\u0026lt;/endring\u0026gt; \u0026lt;/bygning\u0026gt; \u0026lt;bygning\u0026gt; \u0026lt;bygningsnummer xsi:nil=\u0026#34;true\u0026#34; /\u0026gt; \u0026lt;naeringsgruppe\u0026gt; \u0026lt;kode\u0026gt;X\u0026lt;/kode\u0026gt; \u0026lt;beskrivelse\u0026gt;Bolig\u0026lt;/beskrivelse\u0026gt; \u0026lt;/naeringsgruppe\u0026gt; \u0026lt;bygningstype\u0026gt; \u0026lt;kode\u0026gt;121\u0026lt;/kode\u0026gt; \u0026lt;beskrivelse\u0026gt;Tomannsbolig, vertikaldelt\u0026lt;/beskrivelse\u0026gt; \u0026lt;/bygningstype\u0026gt; \u0026lt;bebygdAreal\u0026gt;100\u0026lt;/bebygdAreal\u0026gt; \u0026lt;bruksenheter\u0026gt; \u0026lt;bruksenhet\u0026gt; \u0026lt;bruksenhetsnummer\u0026gt; \u0026lt;etasjeplan\u0026gt; \u0026lt;kode\u0026gt;H\u0026lt;/kode\u0026gt; \u0026lt;beskrivelse\u0026gt;H\u0026lt;/beskrivelse\u0026gt; \u0026lt;/etasjeplan\u0026gt; \u0026lt;etasjenummer\u0026gt;01\u0026lt;/etasjenummer\u0026gt; \u0026lt;loepenummer\u0026gt;01\u0026lt;/loepenummer\u0026gt; \u0026lt;/bruksenhetsnummer\u0026gt; \u0026lt;bruksenhetstype\u0026gt; \u0026lt;kode\u0026gt;B\u0026lt;/kode\u0026gt; \u0026lt;beskrivelse\u0026gt;Bolig\u0026lt;/beskrivelse\u0026gt; \u0026lt;/bruksenhetstype\u0026gt; \u0026lt;bruksareal\u0026gt;100\u0026lt;/bruksareal\u0026gt; \u0026lt;kjoekkentilgang\u0026gt; \u0026lt;kode\u0026gt;0\u0026lt;/kode\u0026gt; \u0026lt;beskrivelse\u0026gt;Ikke oppgitt\u0026lt;/beskrivelse\u0026gt; \u0026lt;/kjoekkentilgang\u0026gt; \u0026lt;antallRom\u0026gt;3\u0026lt;/antallRom\u0026gt; \u0026lt;antallBad\u0026gt;1\u0026lt;/antallBad\u0026gt; \u0026lt;antallWC\u0026gt;1\u0026lt;/antallWC\u0026gt; \u0026lt;adresse\u0026gt; \u0026lt;adressekode\u0026gt;1001\u0026lt;/adressekode\u0026gt; \u0026lt;adressenavn\u0026gt;Byggestedgate\u0026lt;/adressenavn\u0026gt; \u0026lt;adressenummer\u0026gt;5\u0026lt;/adressenummer\u0026gt; \u0026lt;adressebokstav\u0026gt;A\u0026lt;/adressebokstav\u0026gt; \u0026lt;seksjonsnummer xsi:nil=\u0026#34;true\u0026#34; /\u0026gt; \u0026lt;/adresse\u0026gt; \u0026lt;matrikkelnummer xsi:nil=\u0026#34;true\u0026#34; /\u0026gt; \u0026lt;endring\u0026gt;Ny\u0026lt;/endring\u0026gt; \u0026lt;/bruksenhet\u0026gt; \u0026lt;bruksenhet\u0026gt; \u0026lt;bruksenhetsnummer\u0026gt; \u0026lt;etasjeplan\u0026gt; \u0026lt;kode\u0026gt;H\u0026lt;/kode\u0026gt; \u0026lt;beskrivelse\u0026gt;H\u0026lt;/beskrivelse\u0026gt; \u0026lt;/etasjeplan\u0026gt; \u0026lt;etasjenummer\u0026gt;01\u0026lt;/etasjenummer\u0026gt; \u0026lt;loepenummer\u0026gt;01\u0026lt;/loepenummer\u0026gt; \u0026lt;/bruksenhetsnummer\u0026gt; \u0026lt;bruksenhetstype\u0026gt; \u0026lt;kode\u0026gt;B\u0026lt;/kode\u0026gt; \u0026lt;beskrivelse\u0026gt;Bolig\u0026lt;/beskrivelse\u0026gt; \u0026lt;/bruksenhetstype\u0026gt; \u0026lt;bruksareal\u0026gt;100\u0026lt;/bruksareal\u0026gt; \u0026lt;kjoekkentilgang\u0026gt; \u0026lt;kode\u0026gt;0\u0026lt;/kode\u0026gt; \u0026lt;beskrivelse\u0026gt;Ikke oppgitt\u0026lt;/beskrivelse\u0026gt; \u0026lt;/kjoekkentilgang\u0026gt; \u0026lt;antallRom\u0026gt;3\u0026lt;/antallRom\u0026gt; \u0026lt;antallBad\u0026gt;1\u0026lt;/antallBad\u0026gt; \u0026lt;antallWC\u0026gt;1\u0026lt;/antallWC\u0026gt; \u0026lt;adresse\u0026gt; \u0026lt;adressekode\u0026gt;1001\u0026lt;/adressekode\u0026gt; \u0026lt;adressenavn\u0026gt;Byggestedgate\u0026lt;/adressenavn\u0026gt; \u0026lt;adressenummer\u0026gt;5\u0026lt;/adressenummer\u0026gt; \u0026lt;adressebokstav\u0026gt;B\u0026lt;/adressebokstav\u0026gt; \u0026lt;seksjonsnummer xsi:nil=\u0026#34;true\u0026#34; /\u0026gt; \u0026lt;/adresse\u0026gt; \u0026lt;matrikkelnummer xsi:nil=\u0026#34;true\u0026#34; /\u0026gt; \u0026lt;endring\u0026gt;Ny\u0026lt;/endring\u0026gt; \u0026lt;/bruksenhet\u0026gt; \u0026lt;/bruksenheter\u0026gt; \u0026lt;etasjer\u0026gt; \u0026lt;etasje\u0026gt; \u0026lt;etasjenummer\u0026gt;01\u0026lt;/etasjenummer\u0026gt; \u0026lt;etasjeplan\u0026gt; \u0026lt;kode\u0026gt;H\u0026lt;/kode\u0026gt; \u0026lt;beskrivelse\u0026gt;H\u0026lt;/beskrivelse\u0026gt; \u0026lt;/etasjeplan\u0026gt; \u0026lt;antallBoenheter\u0026gt;1\u0026lt;/antallBoenheter\u0026gt; \u0026lt;bruksarealTilAnnet\u0026gt;0\u0026lt;/bruksarealTilAnnet\u0026gt; \u0026lt;bruksarealTilBolig\u0026gt;200\u0026lt;/bruksarealTilBolig\u0026gt; \u0026lt;bruksarealTotalt\u0026gt;200\u0026lt;/bruksarealTotalt\u0026gt; \u0026lt;endring\u0026gt;Ny\u0026lt;/endring\u0026gt; \u0026lt;/etasje\u0026gt; \u0026lt;/etasjer\u0026gt; \u0026lt;avlop\u0026gt; \u0026lt;kode\u0026gt;OffentligKloakk\u0026lt;/kode\u0026gt; \u0026lt;beskrivelse\u0026gt;Offentlig avløpsanlegg\u0026lt;/beskrivelse\u0026gt; \u0026lt;/avlop\u0026gt; \u0026lt;energiforsyning xsi:nil=\u0026#34;true\u0026#34; /\u0026gt; \u0026lt;vannforsyning\u0026gt; \u0026lt;kode\u0026gt;TilknyttetOffVannverk\u0026lt;/kode\u0026gt; \u0026lt;beskrivelse\u0026gt;Offentlig vannverk\u0026lt;/beskrivelse\u0026gt; \u0026lt;/vannforsyning\u0026gt; \u0026lt;harHeis\u0026gt;false\u0026lt;/harHeis\u0026gt; \u0026lt;endring\u0026gt;Ny\u0026lt;/endring\u0026gt; \u0026lt;/bygning\u0026gt; \u0026lt;bygning\u0026gt; \u0026lt;bygningsnummer xsi:nil=\u0026#34;true\u0026#34; /\u0026gt; \u0026lt;naeringsgruppe\u0026gt; \u0026lt;kode\u0026gt;X\u0026lt;/kode\u0026gt; \u0026lt;beskrivelse\u0026gt;Bolig\u0026lt;/beskrivelse\u0026gt; \u0026lt;/naeringsgruppe\u0026gt; \u0026lt;bygningstype\u0026gt; \u0026lt;kode\u0026gt;121\u0026lt;/kode\u0026gt; \u0026lt;beskrivelse\u0026gt;Tomannsbolig, vertikaldelt\u0026lt;/beskrivelse\u0026gt; \u0026lt;/bygningstype\u0026gt; \u0026lt;bebygdAreal\u0026gt;100\u0026lt;/bebygdAreal\u0026gt; \u0026lt;bruksenheter\u0026gt; \u0026lt;bruksenhet\u0026gt; \u0026lt;bruksenhetsnummer\u0026gt; \u0026lt;etasjeplan\u0026gt; \u0026lt;kode\u0026gt;H\u0026lt;/kode\u0026gt; \u0026lt;beskrivelse\u0026gt;H\u0026lt;/beskrivelse\u0026gt; \u0026lt;/etasjeplan\u0026gt; \u0026lt;etasjenummer\u0026gt;01\u0026lt;/etasjenummer\u0026gt; \u0026lt;loepenummer\u0026gt;01\u0026lt;/loepenummer\u0026gt; \u0026lt;/bruksenhetsnummer\u0026gt; \u0026lt;bruksenhetstype\u0026gt; \u0026lt;kode\u0026gt;B\u0026lt;/kode\u0026gt; \u0026lt;beskrivelse\u0026gt;Bolig\u0026lt;/beskrivelse\u0026gt; \u0026lt;/bruksenhetstype\u0026gt; \u0026lt;bruksareal\u0026gt;100\u0026lt;/bruksareal\u0026gt; \u0026lt;kjoekkentilgang\u0026gt; \u0026lt;kode\u0026gt;0\u0026lt;/kode\u0026gt; \u0026lt;beskrivelse\u0026gt;Ikke oppgitt\u0026lt;/beskrivelse\u0026gt; \u0026lt;/kjoekkentilgang\u0026gt; \u0026lt;antallRom\u0026gt;3\u0026lt;/antallRom\u0026gt; \u0026lt;antallBad\u0026gt;1\u0026lt;/antallBad\u0026gt; \u0026lt;antallWC\u0026gt;1\u0026lt;/antallWC\u0026gt; \u0026lt;adresse\u0026gt; \u0026lt;adressekode\u0026gt;1001\u0026lt;/adressekode\u0026gt; \u0026lt;adressenavn\u0026gt;Byggestedgate\u0026lt;/adressenavn\u0026gt; \u0026lt;adressenummer\u0026gt;7\u0026lt;/adressenummer\u0026gt; \u0026lt;adressebokstav\u0026gt;A\u0026lt;/adressebokstav\u0026gt; \u0026lt;seksjonsnummer xsi:nil=\u0026#34;true\u0026#34; /\u0026gt; \u0026lt;/adresse\u0026gt; \u0026lt;matrikkelnummer xsi:nil=\u0026#34;true\u0026#34; /\u0026gt; \u0026lt;endring\u0026gt;Ny\u0026lt;/endring\u0026gt; \u0026lt;/bruksenhet\u0026gt; \u0026lt;bruksenhet\u0026gt; \u0026lt;bruksenhetsnummer\u0026gt; \u0026lt;etasjeplan\u0026gt; \u0026lt;kode\u0026gt;H\u0026lt;/kode\u0026gt; \u0026lt;beskrivelse\u0026gt;H\u0026lt;/beskrivelse\u0026gt; \u0026lt;/etasjeplan\u0026gt; \u0026lt;etasjenummer\u0026gt;01\u0026lt;/etasjenummer\u0026gt; \u0026lt;loepenummer\u0026gt;01\u0026lt;/loepenummer\u0026gt; \u0026lt;/bruksenhetsnummer\u0026gt; \u0026lt;bruksenhetstype\u0026gt; \u0026lt;kode\u0026gt;B\u0026lt;/kode\u0026gt; \u0026lt;beskrivelse\u0026gt;Bolig\u0026lt;/beskrivelse\u0026gt; \u0026lt;/bruksenhetstype\u0026gt; \u0026lt;bruksareal\u0026gt;100\u0026lt;/bruksareal\u0026gt; \u0026lt;kjoekkentilgang\u0026gt; \u0026lt;kode\u0026gt;0\u0026lt;/kode\u0026gt; \u0026lt;beskrivelse\u0026gt;Ikke oppgitt\u0026lt;/beskrivelse\u0026gt; \u0026lt;/kjoekkentilgang\u0026gt; \u0026lt;antallRom\u0026gt;3\u0026lt;/antallRom\u0026gt; \u0026lt;antallBad\u0026gt;1\u0026lt;/antallBad\u0026gt; \u0026lt;antallWC\u0026gt;1\u0026lt;/antallWC\u0026gt; \u0026lt;adresse\u0026gt; \u0026lt;adressekode\u0026gt;1001\u0026lt;/adressekode\u0026gt; \u0026lt;adressenavn\u0026gt;Byggestedgate\u0026lt;/adressenavn\u0026gt; \u0026lt;adressenummer\u0026gt;7\u0026lt;/adressenummer\u0026gt; \u0026lt;adressebokstav\u0026gt;B\u0026lt;/adressebokstav\u0026gt; \u0026lt;seksjonsnummer xsi:nil=\u0026#34;true\u0026#34; /\u0026gt; \u0026lt;/adresse\u0026gt; \u0026lt;matrikkelnummer xsi:nil=\u0026#34;true\u0026#34; /\u0026gt; \u0026lt;endring\u0026gt;Ny\u0026lt;/endring\u0026gt; \u0026lt;/bruksenhet\u0026gt; \u0026lt;/bruksenheter\u0026gt; \u0026lt;etasjer\u0026gt; \u0026lt;etasje\u0026gt; \u0026lt;etasjenummer\u0026gt;01\u0026lt;/etasjenummer\u0026gt; \u0026lt;etasjeplan\u0026gt; \u0026lt;kode\u0026gt;H\u0026lt;/kode\u0026gt; \u0026lt;beskrivelse\u0026gt;H\u0026lt;/beskrivelse\u0026gt; \u0026lt;/etasjeplan\u0026gt; \u0026lt;antallBoenheter\u0026gt;1\u0026lt;/antallBoenheter\u0026gt; \u0026lt;bruksarealTilAnnet\u0026gt;0\u0026lt;/bruksarealTilAnnet\u0026gt; \u0026lt;bruksarealTilBolig\u0026gt;200\u0026lt;/bruksarealTilBolig\u0026gt; \u0026lt;bruksarealTotalt\u0026gt;200\u0026lt;/bruksarealTotalt\u0026gt; \u0026lt;endring\u0026gt;Ny\u0026lt;/endring\u0026gt; \u0026lt;/etasje\u0026gt; \u0026lt;/etasjer\u0026gt; \u0026lt;avlop\u0026gt; \u0026lt;kode\u0026gt;OffentligKloakk\u0026lt;/kode\u0026gt; \u0026lt;beskrivelse\u0026gt;Offentlig avløpsanlegg\u0026lt;/beskrivelse\u0026gt; \u0026lt;/avlop\u0026gt; \u0026lt;energiforsyning xsi:nil=\u0026#34;true\u0026#34; /\u0026gt; \u0026lt;vannforsyning\u0026gt; \u0026lt;kode\u0026gt;TilknyttetOffVannverk\u0026lt;/kode\u0026gt; \u0026lt;beskrivelse\u0026gt;Offentlig vannverk\u0026lt;/beskrivelse\u0026gt; \u0026lt;/vannforsyning\u0026gt; \u0026lt;harHeis\u0026gt;false\u0026lt;/harHeis\u0026gt; \u0026lt;endring\u0026gt;Ny\u0026lt;/endring\u0026gt; \u0026lt;/bygning\u0026gt; \u0026lt;bygning\u0026gt; \u0026lt;bygningsnummer xsi:nil=\u0026#34;true\u0026#34; /\u0026gt; \u0026lt;naeringsgruppe\u0026gt; \u0026lt;kode\u0026gt;X\u0026lt;/kode\u0026gt; \u0026lt;beskrivelse\u0026gt;Bolig\u0026lt;/beskrivelse\u0026gt; \u0026lt;/naeringsgruppe\u0026gt; \u0026lt;bygningstype\u0026gt; \u0026lt;kode\u0026gt;121\u0026lt;/kode\u0026gt; \u0026lt;beskrivelse\u0026gt;Tomannsbolig, vertikaldelt\u0026lt;/beskrivelse\u0026gt; \u0026lt;/bygningstype\u0026gt; \u0026lt;bebygdAreal\u0026gt;100\u0026lt;/bebygdAreal\u0026gt; \u0026lt;bruksenheter\u0026gt; \u0026lt;bruksenhet\u0026gt; \u0026lt;bruksenhetsnummer\u0026gt; \u0026lt;etasjeplan\u0026gt; \u0026lt;kode\u0026gt;H\u0026lt;/kode\u0026gt; \u0026lt;beskrivelse\u0026gt;H\u0026lt;/beskrivelse\u0026gt; \u0026lt;/etasjeplan\u0026gt; \u0026lt;etasjenummer\u0026gt;01\u0026lt;/etasjenummer\u0026gt; \u0026lt;loepenummer\u0026gt;01\u0026lt;/loepenummer\u0026gt; \u0026lt;/bruksenhetsnummer\u0026gt; \u0026lt;bruksenhetstype\u0026gt; \u0026lt;kode\u0026gt;B\u0026lt;/kode\u0026gt; \u0026lt;beskrivelse\u0026gt;Bolig\u0026lt;/beskrivelse\u0026gt; \u0026lt;/bruksenhetstype\u0026gt; \u0026lt;bruksareal\u0026gt;100\u0026lt;/bruksareal\u0026gt; \u0026lt;kjoekkentilgang\u0026gt; \u0026lt;kode\u0026gt;0\u0026lt;/kode\u0026gt; \u0026lt;beskrivelse\u0026gt;Ikke oppgitt\u0026lt;/beskrivelse\u0026gt; \u0026lt;/kjoekkentilgang\u0026gt; \u0026lt;antallRom\u0026gt;3\u0026lt;/antallRom\u0026gt; \u0026lt;antallBad\u0026gt;1\u0026lt;/antallBad\u0026gt; \u0026lt;antallWC\u0026gt;1\u0026lt;/antallWC\u0026gt; \u0026lt;adresse\u0026gt; \u0026lt;adressekode\u0026gt;1001\u0026lt;/adressekode\u0026gt; \u0026lt;adressenavn\u0026gt;Byggestedgate\u0026lt;/adressenavn\u0026gt; \u0026lt;adressenummer\u0026gt;9\u0026lt;/adressenummer\u0026gt; \u0026lt;adressebokstav\u0026gt;A\u0026lt;/adressebokstav\u0026gt; \u0026lt;seksjonsnummer xsi:nil=\u0026#34;true\u0026#34; /\u0026gt; \u0026lt;/adresse\u0026gt; \u0026lt;matrikkelnummer xsi:nil=\u0026#34;true\u0026#34; /\u0026gt; \u0026lt;endring\u0026gt;Ny\u0026lt;/endring\u0026gt; \u0026lt;/bruksenhet\u0026gt; \u0026lt;bruksenhet\u0026gt; \u0026lt;bruksenhetsnummer\u0026gt; \u0026lt;etasjeplan\u0026gt; \u0026lt;kode\u0026gt;H\u0026lt;/kode\u0026gt; \u0026lt;beskrivelse\u0026gt;H\u0026lt;/beskrivelse\u0026gt; \u0026lt;/etasjeplan\u0026gt; \u0026lt;etasjenummer\u0026gt;01\u0026lt;/etasjenummer\u0026gt; \u0026lt;loepenummer\u0026gt;01\u0026lt;/loepenummer\u0026gt; \u0026lt;/bruksenhetsnummer\u0026gt; \u0026lt;bruksenhetstype\u0026gt; \u0026lt;kode\u0026gt;B\u0026lt;/kode\u0026gt; \u0026lt;beskrivelse\u0026gt;Bolig\u0026lt;/beskrivelse\u0026gt; \u0026lt;/bruksenhetstype\u0026gt; \u0026lt;bruksareal\u0026gt;100\u0026lt;/bruksareal\u0026gt; \u0026lt;kjoekkentilgang\u0026gt; \u0026lt;kode\u0026gt;0\u0026lt;/kode\u0026gt; \u0026lt;beskrivelse\u0026gt;Ikke oppgitt\u0026lt;/beskrivelse\u0026gt; \u0026lt;/kjoekkentilgang\u0026gt; \u0026lt;antallRom\u0026gt;3\u0026lt;/antallRom\u0026gt; \u0026lt;antallBad\u0026gt;1\u0026lt;/antallBad\u0026gt; \u0026lt;antallWC\u0026gt;1\u0026lt;/antallWC\u0026gt; \u0026lt;adresse\u0026gt; \u0026lt;adressekode\u0026gt;1001\u0026lt;/adressekode\u0026gt; \u0026lt;adressenavn\u0026gt;Byggestedgate\u0026lt;/adressenavn\u0026gt; \u0026lt;adressenummer\u0026gt;9\u0026lt;/adressenummer\u0026gt; \u0026lt;adressebokstav\u0026gt;B\u0026lt;/adressebokstav\u0026gt; \u0026lt;seksjonsnummer xsi:nil=\u0026#34;true\u0026#34; /\u0026gt; \u0026lt;/adresse\u0026gt; \u0026lt;matrikkelnummer xsi:nil=\u0026#34;true\u0026#34; /\u0026gt; \u0026lt;endring\u0026gt;Ny\u0026lt;/endring\u0026gt; \u0026lt;/bruksenhet\u0026gt; \u0026lt;/bruksenheter\u0026gt; \u0026lt;etasjer\u0026gt; \u0026lt;etasje\u0026gt; \u0026lt;etasjenummer\u0026gt;01\u0026lt;/etasjenummer\u0026gt; \u0026lt;etasjeplan\u0026gt; \u0026lt;kode\u0026gt;H\u0026lt;/kode\u0026gt; \u0026lt;beskrivelse\u0026gt;H\u0026lt;/beskrivelse\u0026gt; \u0026lt;/etasjeplan\u0026gt; \u0026lt;antallBoenheter\u0026gt;1\u0026lt;/antallBoenheter\u0026gt; \u0026lt;bruksarealTilAnnet\u0026gt;0\u0026lt;/bruksarealTilAnnet\u0026gt; \u0026lt;bruksarealTilBolig\u0026gt;200\u0026lt;/bruksarealTilBolig\u0026gt; \u0026lt;bruksarealTotalt\u0026gt;200\u0026lt;/bruksarealTotalt\u0026gt; \u0026lt;endring\u0026gt;Ny\u0026lt;/endring\u0026gt; \u0026lt;/etasje\u0026gt; \u0026lt;/etasjer\u0026gt; \u0026lt;avlop\u0026gt; \u0026lt;kode\u0026gt;OffentligKloakk\u0026lt;/kode\u0026gt; \u0026lt;beskrivelse\u0026gt;Offentlig avløpsanlegg\u0026lt;/beskrivelse\u0026gt; \u0026lt;/avlop\u0026gt; \u0026lt;energiforsyning xsi:nil=\u0026#34;true\u0026#34; /\u0026gt; \u0026lt;vannforsyning\u0026gt; \u0026lt;kode\u0026gt;TilknyttetOffVannverk\u0026lt;/kode\u0026gt; \u0026lt;beskrivelse\u0026gt;Offentlig vannverk\u0026lt;/beskrivelse\u0026gt; \u0026lt;/vannforsyning\u0026gt; \u0026lt;harHeis\u0026gt;false\u0026lt;/harHeis\u0026gt; \u0026lt;endring\u0026gt;Ny\u0026lt;/endring\u0026gt; \u0026lt;/bygning\u0026gt; \u0026lt;bygning\u0026gt; \u0026lt;bygningsnummer xsi:nil=\u0026#34;true\u0026#34; /\u0026gt; \u0026lt;naeringsgruppe\u0026gt; \u0026lt;kode\u0026gt;X\u0026lt;/kode\u0026gt; \u0026lt;beskrivelse\u0026gt;Bolig\u0026lt;/beskrivelse\u0026gt; \u0026lt;/naeringsgruppe\u0026gt; \u0026lt;bygningstype\u0026gt; \u0026lt;kode\u0026gt;121\u0026lt;/kode\u0026gt; \u0026lt;beskrivelse\u0026gt;Tomannsbolig, vertikaldelt\u0026lt;/beskrivelse\u0026gt; \u0026lt;/bygningstype\u0026gt; \u0026lt;bebygdAreal\u0026gt;100\u0026lt;/bebygdAreal\u0026gt; \u0026lt;bruksenheter\u0026gt; \u0026lt;bruksenhet\u0026gt; \u0026lt;bruksenhetsnummer\u0026gt; \u0026lt;etasjeplan\u0026gt; \u0026lt;kode\u0026gt;H\u0026lt;/kode\u0026gt; \u0026lt;beskrivelse\u0026gt;H\u0026lt;/beskrivelse\u0026gt; \u0026lt;/etasjeplan\u0026gt; \u0026lt;etasjenummer\u0026gt;01\u0026lt;/etasjenummer\u0026gt; \u0026lt;loepenummer\u0026gt;01\u0026lt;/loepenummer\u0026gt; \u0026lt;/bruksenhetsnummer\u0026gt; \u0026lt;bruksenhetstype\u0026gt; \u0026lt;kode\u0026gt;B\u0026lt;/kode\u0026gt; \u0026lt;beskrivelse\u0026gt;Bolig\u0026lt;/beskrivelse\u0026gt; \u0026lt;/bruksenhetstype\u0026gt; \u0026lt;bruksareal\u0026gt;100\u0026lt;/bruksareal\u0026gt; \u0026lt;kjoekkentilgang\u0026gt; \u0026lt;kode\u0026gt;0\u0026lt;/kode\u0026gt; \u0026lt;beskrivelse\u0026gt;Ikke oppgitt\u0026lt;/beskrivelse\u0026gt; \u0026lt;/kjoekkentilgang\u0026gt; \u0026lt;antallRom\u0026gt;3\u0026lt;/antallRom\u0026gt; \u0026lt;antallBad\u0026gt;1\u0026lt;/antallBad\u0026gt; \u0026lt;antallWC\u0026gt;1\u0026lt;/antallWC\u0026gt; \u0026lt;adresse\u0026gt; \u0026lt;adressekode\u0026gt;1001\u0026lt;/adressekode\u0026gt; \u0026lt;adressenavn\u0026gt;Byggestedgate\u0026lt;/adressenavn\u0026gt; \u0026lt;adressenummer\u0026gt;11\u0026lt;/adressenummer\u0026gt; \u0026lt;adressebokstav\u0026gt;A\u0026lt;/adressebokstav\u0026gt; \u0026lt;seksjonsnummer xsi:nil=\u0026#34;true\u0026#34; /\u0026gt; \u0026lt;/adresse\u0026gt; \u0026lt;matrikkelnummer xsi:nil=\u0026#34;true\u0026#34; /\u0026gt; \u0026lt;endring\u0026gt;Ny\u0026lt;/endring\u0026gt; \u0026lt;/bruksenhet\u0026gt; \u0026lt;bruksenhet\u0026gt; \u0026lt;bruksenhetsnummer\u0026gt; \u0026lt;etasjeplan\u0026gt; \u0026lt;kode\u0026gt;H\u0026lt;/kode\u0026gt; \u0026lt;beskrivelse\u0026gt;H\u0026lt;/beskrivelse\u0026gt; \u0026lt;/etasjeplan\u0026gt; \u0026lt;etasjenummer\u0026gt;01\u0026lt;/etasjenummer\u0026gt; \u0026lt;loepenummer\u0026gt;01\u0026lt;/loepenummer\u0026gt; \u0026lt;/bruksenhetsnummer\u0026gt; \u0026lt;bruksenhetstype\u0026gt; \u0026lt;kode\u0026gt;B\u0026lt;/kode\u0026gt; \u0026lt;beskrivelse\u0026gt;Bolig\u0026lt;/beskrivelse\u0026gt; \u0026lt;/bruksenhetstype\u0026gt; \u0026lt;bruksareal\u0026gt;100\u0026lt;/bruksareal\u0026gt; \u0026lt;kjoekkentilgang\u0026gt; \u0026lt;kode\u0026gt;0\u0026lt;/kode\u0026gt; \u0026lt;beskrivelse\u0026gt;Ikke oppgitt\u0026lt;/beskrivelse\u0026gt; \u0026lt;/kjoekkentilgang\u0026gt; \u0026lt;antallRom\u0026gt;3\u0026lt;/antallRom\u0026gt; \u0026lt;antallBad\u0026gt;1\u0026lt;/antallBad\u0026gt; \u0026lt;antallWC\u0026gt;1\u0026lt;/antallWC\u0026gt; \u0026lt;adresse\u0026gt; \u0026lt;adressekode\u0026gt;1001\u0026lt;/adressekode\u0026gt; \u0026lt;adressenavn\u0026gt;Byggestedgate\u0026lt;/adressenavn\u0026gt; \u0026lt;adressenummer\u0026gt;11\u0026lt;/adressenummer\u0026gt; \u0026lt;adressebokstav\u0026gt;B\u0026lt;/adressebokstav\u0026gt; \u0026lt;seksjonsnummer xsi:nil=\u0026#34;true\u0026#34; /\u0026gt; \u0026lt;/adresse\u0026gt; \u0026lt;matrikkelnummer xsi:nil=\u0026#34;true\u0026#34; /\u0026gt; \u0026lt;endring\u0026gt;Ny\u0026lt;/endring\u0026gt; \u0026lt;/bruksenhet\u0026gt; \u0026lt;/bruksenheter\u0026gt; \u0026lt;etasjer\u0026gt; \u0026lt;etasje\u0026gt; \u0026lt;etasjenummer\u0026gt;01\u0026lt;/etasjenummer\u0026gt; \u0026lt;etasjeplan\u0026gt; \u0026lt;kode\u0026gt;H\u0026lt;/kode\u0026gt; \u0026lt;beskrivelse\u0026gt;H\u0026lt;/beskrivelse\u0026gt; \u0026lt;/etasjeplan\u0026gt; \u0026lt;antallBoenheter\u0026gt;1\u0026lt;/antallBoenheter\u0026gt; \u0026lt;bruksarealTilAnnet\u0026gt;0\u0026lt;/bruksarealTilAnnet\u0026gt; \u0026lt;bruksarealTilBolig\u0026gt;200\u0026lt;/bruksarealTilBolig\u0026gt; \u0026lt;bruksarealTotalt\u0026gt;200\u0026lt;/bruksarealTotalt\u0026gt; \u0026lt;endring\u0026gt;Ny\u0026lt;/endring\u0026gt; \u0026lt;/etasje\u0026gt; \u0026lt;/etasjer\u0026gt; \u0026lt;avlop\u0026gt; \u0026lt;kode\u0026gt;OffentligKloakk\u0026lt;/kode\u0026gt; \u0026lt;beskrivelse\u0026gt;Offentlig avløpsanlegg\u0026lt;/beskrivelse\u0026gt; \u0026lt;/avlop\u0026gt; \u0026lt;energiforsyning xsi:nil=\u0026#34;true\u0026#34; /\u0026gt; \u0026lt;vannforsyning\u0026gt; \u0026lt;kode\u0026gt;TilknyttetOffVannverk\u0026lt;/kode\u0026gt; \u0026lt;beskrivelse\u0026gt;Offentlig vannverk\u0026lt;/beskrivelse\u0026gt; \u0026lt;/vannforsyning\u0026gt; \u0026lt;harHeis\u0026gt;false\u0026lt;/harHeis\u0026gt; \u0026lt;endring\u0026gt;Ny\u0026lt;/endring\u0026gt; \u0026lt;/bygning\u0026gt; \u0026lt;/bygning\u0026gt; \u0026lt;/matrikkelopplysninger\u0026gt; \u0026lt;adresse\u0026gt;Byggestedgate 3 - 11\u0026lt;/adresse\u0026gt; \u0026lt;referanseAndreSaker xsi:nil=\u0026#34;true\u0026#34; /\u0026gt; \u0026lt;referanseKlagesaker xsi:nil=\u0026#34;true\u0026#34; /\u0026gt; \u0026lt;registrertDato\u0026gt;0001-01-01T00:00:00\u0026lt;/registrertDato\u0026gt; \u0026lt;saksbehandler\u0026gt;Michael\u0026lt;/saksbehandler\u0026gt; \u0026lt;posisjon xsi:nil=\u0026#34;true\u0026#34; /\u0026gt; \u0026lt;/Byggesak\u0026gt; "
},
{
	"uri": "/tjenester/fiksprotokoll/protokoll-arkiv/",
	"title": "Protokoll - Fiks arkiv",
	"tags": [],
	"description": "",
	"content": " Tjenesten er under utvikling/testing/pilotering\nKort beskrivelse Fiks Arkiv tjenesten er en asynkron protokoll over Fiks IO eller andre transportmekanismer for å søke, arkivere og hente data fra et arkiv. Fiks Protokoll benyttes for meldingstype definisjon på konto. For brukerhistorier fra arbeidet som ble gjort ved kartleggingen av protokollen, les mer i wiki og dokumentasjon i github repoet fiks-arkiv-specification\nTilgjengelige grensesnitt Grensesnitt Støtte Web portal Nei Maskin til maskin Ja Begrensninger og regler for protokollen Arkivdel skal være spesifisert i arkivet og håndteres av arkivet, men protokollen støtter ikke henting av arkivdel fra arkiv. Meldingene har mulighet for å sette arkivdel men protokollen har altså ikke egen meldingstype for å hente arkivdeler. Protokollen støtter ikke henting av koder som meldingstype. Vi tilbyr standard kodelister for koder i meldingene som kommer med i nuget/maven pakkene (oversikt over kodelistene vi tilbyr kommer her snart). Fiks Protokoll med Fiks IO som meldingsutvekslings kanal er ikke designet for å kunne brukes ved migrering av store mengder data mellom systemer. Men man må gjerne bruke Fiks Arkiv som dataformat på en annen kanal. Meldinger Hver melding består av en zip fil ASIC-E som inneholder f.eks. arkivmelding.xml eller sok.xml og tilhørende vedlegg som er definert i xml filen. Hver melding kan ikke overskride 5GB. Meldingene skal også ha et sett med headere som blandt annet viser hvem som er avsender, mottaker, om det er et svar på en annen melding osv. Headerene er definert under Fiks-IO og man kan lese mer om de her\nMeldingsformat og skjema For mer informasjon rundt meldingsformatet arkivmelding kan man lese om definisjonen her hos Digdir. XSD skjema for meldingsformatene er tilgjengelig for nedlasting på github prosjektet fiks-arkiv-specification eller i bibliotek for .NET og Java. Dette spesifikasjonsprosjektet brukes som felles kilde for bygging av bibliotek/moduler for .NET og Java.\nDetaljer om meldingstype I spesifikasjonen følger er det også en json fil som beskriver detaljer rundt hver melding i protokollen. Json-filen beskriver om meldingen har payload, filnavn på payload (arkivmelding.xml, arkivmelding-kvittering.xml, sok.xml osv.), hvilke meldingstyper som evt kan være et svar på denne meldingen osv. Den ligger her for Fiks-Arkiv protokollen og kommer med i nuget/maven pakken for Fiks-Arkiv protokollen som leveres av KS.\nFelles prosjekter og evt nuget pakker:\nType Nuget Github Valideringstester - https://github.com/ks-no/fiks-arkiv-integration-tests-dotnet .NET bibliotek og prosjekter Prosjekter og evt nuget pakker:\nType Nuget Github XSD skjema, protokoll spesifikasjon - https://github.com/ks-no/fiks-arkiv-specification Modeller basert på XSD skjema KS.Fiks.Arkiv.Models.V1 https://github.com/ks-no/fiks-arkiv-models-dotnet Forenklet arkivering KS.Fiks.Arkiv.Forenklet.Arkivering.V1 https://github.com/ks-no/fiks-arkiv-forenklet-arkivering-dotnet Fiks-IO klient KS.Fiks.IO.Client https://github.com/ks-no/fiks-io-client-dotnet Fiks-IO send klient KS.Fiks.IO.Send.Client https://github.com/ks-no/fiks-io-send-client-dotnet Modeller og XSD skjema\nKS har gjort tilgjengelig nuget pakken KS.Fiks.Arkiv.Models.V1 som inneholder modeller for at man skal enklere kunne bygge meldingene i henhold til spesifikasjon. Modellene er generert av XSD skjema fra github prosjektet fiks-arkiv-specification. XSD skjemane følger også med i pakken. Koden er tilgjengelig på github her og er tilgjengelig for nedlasting og bruk i prosjekter på nuget.org.\nForenklet arkivering\nDenne pakken er uferdig og vil bli utbedret når V1 av protokollen er ferdig lansert\nDette er en nuget-pakke for \u0026ldquo;forenklet arkivering\u0026rdquo;, KS.Fiks.Arkiv.Forenklet.Arkivering.V1, som inneholder forenklete metoder for å bygge arkivmelding for diverse brukstilfeller. Denne bruker modellene fra KS.Fiks.Arkiv.Models.V1 til byggingen av arkivmelding. Koden er tilgjengelig på github her og er også tilgjengelig for bruk i prosjekter på nuget.org\nFiks-IO klient\nDette er en klient som forenkler autentisering, lytting til nye meldinger, sending av meldinger og svar på innkommende meldinger. Fiks-IO klienten forenkler meldingsutvekslingen blant annet også ved å sette korrekte headere i Fiks-IO meldingen, som f.eks. svar-til headeren når man svarer på en melding. Les mer om Fiks-IO og headerene her\nFiks-IO send klient\nDenne kan brukes hvis man bare skal sende meldinger til Fiks-IO og ikke motta meldinger. Fiks-IO klienten bruker denne komponenten for sending.\nJava bibliotek og prosjekter Maven\nType Navn Github XSD skjema, protokoll spesifikasjon - https://github.com/ks-no/fiks-arkiv-specification Modeller og XSD skjema fiks-arkiv https://github.com/ks-no/fiks-arkiv-client-java Forenklet arkivering fiks-arkiv-forenklet-arkivering https://github.com/ks-no/fiks-arkiv-client-java Fiks-IO klient fiks-io-klient https://github.com/ks-no/fiks-io-klient-java Fiks-IO send klient fiks-io-send-klient https://github.com/ks-no/fiks-io-send-klient Tilsvarende som for .NET finnes det tilgjengelige moduler på Maven Central. Prosjektet er tilgjengelig på github her.\nModeller og XSD skjema\nModulen fiks-arkiv-api inneholder autogenerert typer, definert i skjema prosjektet fiks-arkiv-specification. XSD skjema fra fiks-arkiv-specification er inkludert i jar under schemas.v1\nForenklet arkivering\nModulen fiks-arkiv-forenklet-arkivering tilsvarer pakken i .NET for \u0026ldquo;forenklet arkivering\u0026rdquo; og inneholder buildere for forenklet oppbygging av gyldig arkivmelding. XSD skjema fra fiks-arkiv-specification er inkludert i jar under schemas.v1\nFiks-IO klient\nDette er en klient som forenkler autentisering, lytting til nye meldinger, sending av meldinger og svar på innkommende meldinger. Fiks-IO klienten forenkler meldingsutvekslingen blant annet også ved å sette korrekte headere i Fiks-IO meldingen, som f.eks. svar-til headeren når man svarer på en melding. Les mer om Fiks-IO og headerene her\nFiks-IO send klient\nDenne kan brukes hvis man bare skal sende meldinger til Fiks-IO og ikke motta meldinger. Fiks-IO klienten bruker denne komponenten for sending.\nFelles for .NET og Java Type Github Url Fiks protokoll validator https://github.com/ks-no/fiks-protokoll-validator Valideringstester https://github.com/ks-no/fiks-arkiv-integration-tests-dotnet Fiks protokoll validator\nDette er en applikasjon, kodet i .net og Vue, og som kjører i KS sitt testmiljø. Ved å bruke applikasjonen som kjører i testmiljøet kan man teste protokollene mot sitt eget arkiv-testmiljø ved å sende ferdige meldinger med statisk XML innhold til den aktuelle FIKS-IO arkiv-kontoen.\nValideringstester\nDette prosjekter inneholder valideringstester (integrasjonstester) som tester at et arkiv som har implementert Fiks Arkiv protokollen fungerer som forventet i meldings-utvekslinger. F.eks. at arkivet kan ta i mot og lagre en ny journalpost, oppdatere journalposten, og levere den oppdaterte journalposten på en hent-melding. Disse testene kan gjennomføre flere meldingsutvekslinger og steg enn Fiks protokoll validator som kun tester å sende en melding og så sjekker svaret.\nTestene er skrevet i .net og kjøres ved at man laster ned prosjektet og kjører de lokalt. Det oppfordres til å bidra med enda flere tester.\nAsynkrone meldinger og retry Siden denne protokollen er asynkron betyr det at man må ta forbehold om at man kanskje ikke får svar på en melding som ble sendt. Det kan være mange ulike årsaker til dette som f.eks. at mottaker midlertidig feilet ved persistering eller andre tekniske feil. Men det kan også være at mottaker faktisk har lagret arkivmelding som den skal, men det er mottat og kvitteringsmelding tilbake til avsender som aldri kom fram.\nAvsender må da velge om man skal gjøre nytt forsøk på å sende melding. Når man sender en melding til Fiks IO så vil meldingen få en unik id hver gang. Dermed kan det i noen tilfeller kanskje være vanskelig for mottaker å vite at dette er en melding som sendes på nytt.\nDette løses ved at meldinger til Fiks IO kan gis en header id med navnet klientMeldingId (les mer om headere her) for å markere at det er en unik melding fra avsender, som man kan gjenbrukes ved nytt forsøk. Mottaker kan da sende mottatt og kvittering på nytt.\nDet kan være lurt at man tar med seg noen kjøreregler for sending og retry av meldinger:\nHa et maks antall forsøk på å sende meldinger på nytt Ikke forsøk å sende en melding på nytt med en gang. Gi det litt tid for å ikke \u0026ldquo;plage\u0026rdquo; mottaker. Bruk klientMeldingId på alle meldinger. Både ved første forsøk og retry. Dette kan gjøre det lettere å gjenkjenne duplikate meldinger hos mottaker. Ack Når en melding er mottatt skal mottaker persistere meldingen og sende ack tilbake til Fiks-IO. Sending av ack tilbake til Fiks-IO sørger for at meldingen blir tatt bort fra køen.\nEn ack melding må ikke forveksles med mottattmeldingene som sendes tilbake i noen tilfeller. En mottattmelding er en melding tilbake til avsender, en ackmelding er kun en beskjed tilbake til køen om å fjerne meldingen.\nHvis ack for en melding uteblir vil meldingen bli værende på køen inntil den er blitt hentet 3 ganger uten å få en ack tilbake. Da vil Fiks-IO sende en no.ks.fiks.kvittering.serverfeil.v1 melding tilbake til avsender. Med andre ord er det viktig at man sender ack når man har hentet en melding. Les mer om dette i Fiks-IO dokumentasjonen her.\nOBS: Dette erstatter tidligere TTL-håndtering på Fiks-IO køene. Det vil ikke lenger sendes noen tidsavbrudd meldinger basert på TTL.\nMeldingsutveksling og headere For at meldingsutvekslingen skal bli korrekt settes det headere på meldingen. Bruker man en av Fiks-IO klientene fra KS vil man stort sett ikke trenge å gjøre noe med dette da klienten gjør det meste for deg. Dette er f.eks. avsender-id for å identifisere avsender, avsender-navn og type som er meldingstypen. Når man sender en melding vil man få tilbake fra Fiks-IO en generert melding-id. Denne id følger med i header på meldingen som mottaker så setter inn i sitt eventuelle svar på meldingen i headeren svar-til slik at avsender av første melding ser at dette er et svar på sin opprinnelige melding. Dette vil Fiks-IO klienten fra KS gjøre for deg hvis man bruker .Svar() funksjonaliteten. Men i noen tilfeller vil det kanskje være aktuelt å gå utenfor denne funksjonaliteten og man må da sørge for at disse headerene blir korrekt selv. Les mer om headerene her.\nArkivering Meldingstyper:\nType Navn Arkiver arkivmelding melding no.ks.fiks.arkiv.v1.arkivering.arkivmelding.opprett Mottatt arkivmelding melding no.ks.fiks.arkiv.v1.arkivering.arkivmelding.opprett.mottatt Kvittering på arkivmelding no.ks.fiks.arkiv.v1.arkivering.arkivmelding.opprett.kvittering Arkiver dokumentobjekt melding no.ks.fiks.arkiv.v1.arkivering.dokumentobjekt.opprett Mottat arkiver dokumentobjekt melding no.ks.fiks.arkiv.v1.arkivering.dokumentobjekt.opprett.mottatt Kvittering på dokumentobjekt no.ks.fiks.arkiv.v1.arkivering.dokumentobjekt.opprett.kvittering For å arkivere data må en bruke meldingsformatet arkivmelding.xml. Se xsd schema no.ks.fiks.arkiv.v1.arkivering.arkivmelding.opprett.xsd for definsjon av meldingsformatet.\nDet er en egen meldingstype for å arkivere nytt dokumentobjekt, no.ks.fiks.arkiv.v1.arkivering.dokumentobjekt.opprett, som også bruker filnavnet arkivmelding.xml. Se xsd schema no.ks.fiks.arkiv.v1.arkivering.dokumentobjekt.opprett.xsd for definsjon av meldingsformatet.\nBegrensninger og regler for arkivering Det skal sendes en melding pr mappe eller journalpost som skal arkiveres. Det vil si at arkivmelding ikke støtter å sende inn arkivmelding med f.eks. en ny saksmappe med tilhørende 1000 journalposter i en og samme melding. Arkivmelding støtter ikke å registrere flere mapper i et hierarki, altså mapper i mapper, i en enkelt arkivmelding. Registrering av ny undermappe må da registreres hver for seg. Mapper kan altså bare referere til eksisterende mappe, som må da ha vært opprettet tidligere. En foreldermappe kan ikke inneholde registreringer. Altså en mappe som inneholder andre mapper skal bare inneholde mapper. Mottatt og kvittering Arkiver arkivmelding Hvis meldingen er gyldig som arkivmelding skal man så sende melding tilbake av typen no.ks.fiks.arkiv.v1.arkivering.arkivmelding.opprett.mottatt. Når arkivmelding er arkivert til arkivet skal det komme en melding tilbake i meldingsformatet arkivmelding-kvittering.xml av typen no.ks.fiks.arkiv.v1.arkivering.arkivmelding.opprett.kvittering. Se no.ks.fiks.arkiv.v1.arkivering.arkivmelding.opprett.kvittering.xsd for definisjon av meldingsformatet på kvitteringsmelding.\nArkiver dokumentobjekt Hvis meldingen er gyldig som dokumentobjekt skal man så sende melding tilbake av typen no.ks.fiks.arkiv.v1.arkivering.dokumentobjekt.opprett.mottatt. Når dokumentobjekt er arkivert til arkivet skal det komme en melding tilbake i meldingsformatet arkivmelding-kvittering.xml av typen no.ks.fiks.arkiv.v1.arkivering.dokumentobjekt.opprett.kvittering. Se no.ks.fiks.arkiv.v1.arkivering.dokumentobjekt.opprett.kvittering.xsd for definisjon av meldingsformatet på kvitteringsmelding.\nFeilmeldinger for arkivmelding Hvis arkivmeldingen ikke er gyldig, f.eks at den ikke validerer i henhold til schema, så sender man en no.ks.fiks.arkiv.v1.feilmelding.ugyldigforespoersel melding tilbake. Ved interne feil som gjør at man ikke får håndtert meldingen sendes no.ks.fiks.arkiv.v1.feilmelding.serverfeil tilbake. Les mer om disse feilmeldingene lenger nede under feilmeldingstyper\nSøk etter data Meldingstyper:\nType Navn Søk melding no.ks.fiks.arkiv.v1.innsyn.sok Søkeresultat utvidet no.ks.fiks.arkiv.v1.innsyn.sok.resultat.utvidet Søkeresultat minimum no.ks.fiks.arkiv.v1.innsyn.sok.resultat.minimum Søkeresultat nøkler no.ks.fiks.arkiv.v1.innsyn.sok.resultat.noekler Meldingsformatet for søk er definert i xsd schema sok.xsd. I meldingsformatet sok.xml definerer man hva man søker etter, hvilke returobjekter (journalposter eller mapper f.eks.) man ønsker, sortering og responstype.\nSøk på endret dato Mappe: Søk på mappeEndretDato. Endret dato for mappe betyr at en mappe er endret eller jounalposter er lagt til.\nRegistrering: Søk på registreringEndretDato. Endret dato for registrering betyr at en registrering er endret eller dokumenter er lagt til eller endret.\nBbox For søk på saksmappe kan man søke på saker med koordinater innenfor et område ved hjelp av søkefeltet av typen bbox. Når man bruker bbox til søk så setter man to koordinater, nedreVenstre og oevreHoeyre, som da definerer en boks hvor man ønsker å finne saker som treffer innenfor dette området. Dermed gir det kun mening å bruke equals som parameter når man bruker bbox. Er noe bare delvis innenfor området skal det være treff. Feltet koordinatsystem i bbox definerer hvilket koordinatsystem man ønsker å gjøre et bbox søk med. Feltet koordinatsystem er en string med formatet \u0026ldquo;EPSG:\u0026rdquo; + 4-6 siffer som sier hvilket system som ønskes at skal brukes. Se her for liste med EPSG-koder. Støttes ikke koordinatsystemet skal man få en ugyldigforespørsel melding tilbake.\nResponsttype Feltet responstype sier noe om hvor mye data man ønsker å få tilbake på søketreffet, som da er utvidet, minimum eller noekler.\nSøkeresultat utvidet Hvis søk forespørsel har satt responstype = \u0026ldquo;utvidet\u0026rdquo; kan søket returnere et utvidet resultat med maksimalt mengde felter tilgjengelig gjennom søk. Se no.ks.fiks.arkiv.v1.innsyn.sok.resultat.utvidet.xsd for definisjon av returmelding.\nSøkeresultat minimum Hvis søk forespørsel har satt responstype = \u0026ldquo;minimum\u0026rdquo; kan søket returnere et mer begrenset resultat tilgjengelig gjennom søk. Se no.ks.fiks.arkiv.v1.innsyn.sok.resultat.minimum.xsd\nSøkeresultat nøkler Hvis søk forespørsel har satt responstype = \u0026ldquo;noekler\u0026rdquo; kan søket returnere bare tilgjengelige nøkler. Se no.ks.fiks.arkiv.v1.innsyn.sok.resultat.noekler.xsd\nFeilmeldinger for søk Hvis søket ikke er gyldig, f.eks at den ikke validerer i henhold til schema, så sender man en no.ks.fiks.arkiv.v1.feilmelding.ugyldigforespoersel melding tilbake. Ved interne feil som gjør at man ikke får håndtert meldingen sendes no.ks.fiks.arkiv.v1.feilmelding.serverfeil tilbake. Les mer om disse feilmeldingene lenger nede under feilmeldingstyper\nHente data Meldingstyper: Type Navn Hent mappe no.ks.fiks.arkiv.v1.innsyn.mappe.hent Hent registrering no.ks.fiks.arkiv.v1.innsyn.registrering.hent Hent dokumentfil no.ks.fiks.arkiv.v1.innsyn.dokumentfil.hent Hent mappe resultat no.ks.fiks.arkiv.v1.innsyn.mappe.hent.resultat Hent registrering resultat no.ks.fiks.arkiv.v1.innsyn.registrering.hent.resultat Hent dokumentfil resultat no.ks.fiks.arkiv.v1.innsyn.dokumentfil.hent.resultat Hent mappe: Meldingsformatet for hent mappe er definert i xsd schema no.ks.fiks.arkiv.v1.innsyn.mappe.hent.xsd og sendes som meldingstypen no.ks.fiks.arkiv.v1.innsyn.mappe.hent. Resultatet skal sendes tilbake som meldingstypen no.ks.fiks.arkiv.v1.mappe.hent.resultat og formatet er definert i xsd schema no.ks.fiks.arkiv.v1.innsyn.mappe.hent.resultat.xsd.\nHent registrering: Meldingsformatet for henting av registrering (f.eks. journalpost) er definert i xsd schema no.ks.fiks.arkiv.v1.innsyn.registrering.hent.xsd og sendes som meldingstypen no.ks.fiks.arkiv.v1.innsyn.registrering.hent. Resultatet skal sendes tilbake som meldingstypen no.ks.fiks.arkiv.v1.innsyn.registrering.hent.resultat og formatet er definert i xsd schema no.ks.fiks.arkiv.v1.innsyn.registrering.hent.resultat.xsd.\nHent dokumentfil: Meldingsformatet for hent dokumentfil er definert i xsd schema no.ks.fiks.arkiv.v1.innsyn.dokumentfil.hent.xsd og sendes som meldingstypen no.ks.fiks.arkiv.v1.innsyn.dokumentfil.hent. Resultatet skal sendes tilbake som typen no.ks.fiks.arkiv.v1.dokumentfil.hent.resultat. Merk at det er ikke noe xsd schema for resultat da det ikke er noe behov for meta-data for dokumenfilen. Ønsker man meta-data for et dokument må hent registrering brukes. Dokumentfilen kommer som payload i Fiks-IO meldingen med meldingsypen no.ks.fiks.arkiv.v1.dokumentfil.hent.resultat.\nFeilmeldinger for hent meldinger Hvis hent meldingen ikke er gyldig, f.eks at den ikke validerer i henhold til schema, så sender man en no.ks.fiks.arkiv.v1.feilmelding.ugyldigforespoersel melding tilbake. Ved interne feil som gjør at man ikke får håndtert meldingen sendes no.ks.fiks.arkiv.v1.feilmelding.serverfeil tilbake og hvis det blir forsøkt å hente noe som ikke eksisterer i arkivet leveres det tilbake en no.ks.fiks.arkiv.v1.feilmelding.ikkefunnet melding. Les mer om disse feilmeldingene lenger nede under feilmeldingstyper\nOppdatering Meldingstyper: Type Navn Arkivmelding oppdatering no.ks.fiks.arkiv.v1.arkivering.arkivmelding.oppdater Mottatt melding no.ks.fiks.arkiv.v1.arkivering.arkivmelding.oppdater.mottatt Arkivmelding oppdatering kvittering no.ks.fiks.arkiv.v1.arkivering.arkivmelding.oppdater.kvittering Arkivmelding oppdatering: Meldingsformatet for arkivmelding oppdatering er definert i xsd schema no.ks.fiks.arkiv.v1.arkivering.arkivmelding.oppdater.xsd og sendes som meldingstypen no.ks.fiks.arkiv.v1.arkivering.arkivmelding.oppdater. Når arkiv mottar en arkivmelding oppdatering så skal den først svare med mottatt melding no.ks.fiks.arkiv.v1.arkivering.arkivmelding.oppdater.mottatt. Når oppdatering er vellykket skal det sendes en tom kvitterings melding no.ks.fiks.arkiv.v1.arkivering.arkivmelding.oppdater.kvittering tilbake. Den har altså ikke noen payload men det skal allikevel sendes en kvitteringsmelding tilbake for å gi beskjed om at oppdatering var vellykket.\nFeilmeldinger for oppdater meldinger Hvis oppdater meldingen ikke er gyldig, f.eks at den ikke validerer i henhold til schema, så sender man en no.ks.fiks.arkiv.v1.feilmelding.ugyldigforespoersel melding tilbake. Ved interne feil som gjør at man ikke får håndtert meldingen sendes no.ks.fiks.arkiv.v1.feilmelding.serverfeil tilbake og hvis det blir forsøkt å oppdatere noe som ikke eksisterer i arkivet leveres det tilbake en no.ks.fiks.arkiv.v1.feilmelding.ikkefunnet melding. Les mer om disse feilmeldingene lenger nede under feilmeldingstyper\nFeilmeldingstyper Som svar kan man få feilmeldinger som tilhører denne protokollen. Feilmeldingstypene kan være like i innhold som feilmeldinger i andre protokoller men de vil ha navn som tilsier at de tilhører en spesifikk protokoll. Altså vil de ha en no.ks.fiks.arkiv.v1.feilmelding prefix for denne protokollen.\nFeilmeldingstyper Type Navn Ugyldigforespørsel no.ks.fiks.arkiv.v1.feilmelding.ugyldigforespørsel Serverfeil no.ks.fiks.arkiv.v1.feilmelding.serverfeil Ikkefunnet no.ks.fiks.arkiv.v1.feilmelding.ikkefunnet Ugyldig forespørsel Hvis noe er galt med forespørselen, altså den er ugyldig, så skal mottaker sende en no.ks.fiks.arkiv.v1.feilmelding.ugyldigforespoersel tilbake til sender. Xsd schema følger med i Fiks-Arkiv models nuget pakken.\nServerfeil Ved serverfeil hos mottaker skal det sendes en no.ks.fiks.arkiv.v1.feilmelding.serverfeil tilbake til sender. Xsd schema følger med i Fiks-Arkiv models nuget pakken.\nIkkefunnet For meldinger som skal hente eller oppdatere noe i arkivet vil det returneres en ikkefunnet melding tilbake.\nFiks-io feilmelding når meldinger ikke er hentet Når en melding er mottatt skal mottaker persistere meldingen og sende ack tilbake til Fiks-IO. Sending av ack tilbake til Fiks-IO sørger for at meldingen blir tatt bort fra køen.\nHvis ack for en melding uteblir vil meldingen bli værende på køen inntil den er blitt hentet 3 ganger uten å få en ack tilbake. Da vil Fiks-IO sende en no.ks.fiks.io.feilmelding.serverfeil melding tilbake til avsender. Med andre ord er det viktig at man sender ack når man vellykket har hentet en melding.\nDette erstatter tidligere TTL-håndtering på Fiks-IO køene. Det vil ikke lenger sendes noen tidsavbrudd meldinger basert på TTL.\nTesting av meldingsutveksling Det er opprettet en test-applikasjon, fiks-protokoll-validator, som kjører i KS sitt testmiljø. Med denne kan man teste protokollene mot sitt eget arkiv-testmiljø ved å sende ferdige meldinger med statisk XML innhold til den arkivets FIKS-IO konto. Fiks-protokoll-validator vil validere svaret den får tilbake via Fiks-IO og gi en pekepinn på om implementasjon fungerer som det skal. Applikasjonen er kun tilgjengelig i KS test-miljø: fiks-validator\nKoden for validatoren er tilgjengelig på github.\nIntegrasjonstester Som tidligere nevnt er det også laget et .NET prosjekt som inneholder integrasjonstester som tester at et arkiv som har implementert Fiks Arkiv protokollen fungerer som forventet i meldings-utvekslinger. Github prosjektet finner man her.\n"
},
{
	"uri": "/felles/sentralisert-brukerstyring/azure/",
	"title": "Sette opp Azure AD",
	"tags": [],
	"description": "",
	"content": "Fiks forvaltning - Oppsett i Azure AD https://portal.fiks.ks.no/wp-content/uploads/2023/11/SBS_forvaltning.pdf\nKS Læring - Oppsett i Azure AD https://portal.fiks.ks.no/wp-content/uploads/2023/11/SBS_KSL.pdf\n"
},
{
	"uri": "/tjenester/kslering/",
	"title": "KS læring",
	"tags": [],
	"description": "",
	"content": "Kort beskrivelse KS læring er en plattform som tillater kommunene å lage, dele, arrangere og gjennomføre kurs. Plattformen er basert på Moodle.\nTilgjengelige grensesnitt Grensesnitt Støtte Web portal Ja Maskin til maskin HR API (Gammel integrasjonsløsning) Beskrivelse KS læring\nIntegrasjon mot HR API\nSingle sign on\n"
},
{
	"uri": "/tjenester/vaksine/",
	"title": "Fiks vaksine",
	"tags": [],
	"description": "",
	"content": "Kort beskrivelse KS har sammen med Folkehelseinstituttet (FHI) utviklet et API som gjør det mulig å hente vaksineinformasjon elektronisk fra FHIs SYSVAK register til kommunen. API-et er tilgjengelig for kommuner som har behov for å hente større mengder med informasjon fra SYSVAK.\nTilgjengelige grensesnitt Grensesnitt Støtte Web portal Nei Maskin til maskin Api-spec Beskrivelse av tjenesten Tjenesten vil tilby et api hvor kommunen kan spørre etter vaksineinformasjon på et fødselsnummer/dnummer.\nBrukeradministrasjon og tilgangsstyring Autentisering skjer ved hjelp av en IntegrasjonPerson-mekanismen beskrevet her Merk at token som sendes med må være et personlig HelseID-token.\nVedkommende det gjøres oppslag for må også ha blitt gitt søke-privilegiet på tjenestesiden for Fiks Vaksine på Fiks forvaltning.\nSikkerhet Kommunikasjonen vil være kryptert med TLS. Autentisering med HelseID og Fiks integrasjon.\nEndepunkt (api-spec) For alle endepunktene hentes autentisert bruker fra access token i \u0026ldquo;Authorization\u0026rdquo;-headeren på requesten. Dette tokenet må være utstedt av HelseID med aud-verdi ks:fiks, scope-verdier ks:fiks/sysvak, fhi:personoppslag/api, fhi:sysvaknett/fiks/api, fhi:sysvaknett/api, helseid://scopes/hpr/hpr_number, helseid://scopes/identity/pid og helseid://scopes/identity/security_level og nivå 4.\n"
},
{
	"uri": "/tjenester/svarut/integrasjon/kodeeksempeldotnet/",
	"title": "Kodeeksempel .Net",
	"tags": [],
	"description": "",
	"content": "Eksempel på Soap integrasjon: kodeeksempel\nKlient api til rest servicen, laget av dibk: https://bitbucket.org/dibk/ftpb-svarut-client/src/master/\n"
},
{
	"uri": "/tjenester/svarut/integrasjon/kodeeksempeljava/",
	"title": "Kodeeksempel Java",
	"tags": [],
	"description": "",
	"content": "Kodeeksempel soap på github kodeeksempel\nRest klient for java https://github.com/ks-no/svarut-rest-klient\n"
},
{
	"uri": "/tjenester/provesvar/",
	"title": "Fiks prøvesvar",
	"tags": [],
	"description": "",
	"content": "Kort beskrivelse Tjenesten er laget for å tilgjengeliggjøre Covid19 prøvesvar for smittesporere i kommunene.\nTilgjengelige grensesnitt Grensesnitt Støtte Web portal Nei Maskin til maskin Api-spec Beskrivelse av tjenesten Tjenesten er et api hvor smittesporer kan spørre etter prøvesvar basert på:\net fødselsnummer/dnummer en kombinasjon av fornavn/etternavn/kjønn/fødselsdato/prøvetidspunkt hente ut prøvesvar for egen kommune Brukeradministrasjon og tilgangsstyring Autentisering skjer ved hjelp av en IntegrasjonPerson-mekanismen beskrevet her Merk at token som sendes med må være et personlig HelseID-token.\nKommunen må også gi tilgang til applikasjonen sin integrasjon samt alle sluttbrukere som skal kunne hente prøvesvar på Fiks forvaltning.\nSikkerhet Kommunikasjonen vil være kryptert med TLS. Autentisering med HelseID og Fiks integrasjon.\nEndepunkt (api-spec) For alle endepunktene hentes autentisert bruker fra access token i \u0026ldquo;Authorization\u0026rdquo;-headeren på requesten. Dette tokenet må være utstedt av HelseID med aud-verdier ks:fiks og fhi:labdatabase scope-verdier fhi:labdatabase/fiks fhi:personoppslag/api ks:fiks/labdatabase helseid://scopes/hpr/hpr_number helseid://scopes/identity/pid ks:fiks/labdatabase og nivå 4.\n"
},
{
	"uri": "/tjenester/digisos/",
	"title": "Fiks digisos",
	"tags": [],
	"description": "",
	"content": "Kort beskrivelse Fiks Digisos er en tjeneste for å tilrettelegge for kommunal behandling av sosialsøknader via et brukergrensesnitt på nav.no.\nFiks Digisos tilbyr:\nEnkelt oppsett for den enkelte kommune gjennom Fiks Konfigurasjon. Innbygger får fortløpende oppdatering på saksgang, tilgjengelig på nav.no. Innbygger får tilgang til alle dokumenter og mulighet til å sende inn nye søknader basert på data fra tidligere søknader. Ansatte/brukerstøtte i NAV kan se utvalgte deler av saken via NAV sine systemer. Tilgjengelige grensesnitt Grensesnitt Støtte Web portal Ja Maskin til maskin Api-spec Beskrivelse av tjenesten For at fagsystemet skal få tilgang til å motta sosialsøknader og sende saksoppdateringer til NAV via Digisos-API-et for en kommune, må kommunen først konfigurere og aktivere tjenesten Digisos gjennom Fiks Konfigurasjon, som viser en veiviser for å sette opp tjenesten. Her konfigurerer man opp hvordan kommunens fagsystem skal motta søknader, enten via Fiks IO (anbefalt kanal) og/eller SvarUt. Det må også oppgis kontaktpersoner med minst èn epost for både en fagansvarlig og en teknisk ansvarlig, som kan bli kontaktet ved behov.\nEtter at veiviseren er fullført må man inne på Digisos-tjenesten gi fagsystemet sin integrasjon tilgang til å bruke Digisos. For mer informasjon om utvikling og opprettelse av integrasjoner for kommunen sitt fagsystemet, se avsnittet Integrasjonsutvikling Fagsystem.\nTeknisk oversiktsskisse Digisos består av flere komponenter fra Fiks-plattformen, der Fiks Digisos er hovedkomponenten som bruker andre komponenter:\nFiks Digisos API: API for innsending av søknader fra nav.no og innsending av saksoppdateriger fra kommunenes fagsystemer. Fiks Dokumentlager: Brukes for lagring av krypterte søknader og saksoppdateringer, der innbyggeren får tilgang til sine dokumenter sendt over Digisos API-et. Fiks IO: Brukes som leveringskanal for søknader fra NAV til kommunene, som er en sikker kanal for maskin-til-maskin integrasjon, hvor søknadene blir meldingskryptert med mottakers offentlige nøkkel. SvarUt/SvarInn: Brukes som en alternativ leveringskanal for søknader fra NAV til kommunene, med leveranse med print dersom kommunens fagsystem ikke klarer å motta digitale forsendelser via SvarInn. Teknisk beskrivelse av tjenesten Flyt Innbygger fyller ut søknad om sosialstønad på nav.no, som sender denne til Fiks Digisos gjennom et synkront http api. Fiks Digisos mottar søknaden. Søknadsfilen legges i Fiks Dokumentlager, og innbyggeren autoriseres for tilgang. Fiks Digisos henter valgt leveransekanal for søknaden fra kommunens konfigurasjon, enten anbefalt kanal 2a) Fiks IO med SvarUt som alternativ eller 2b) Bare SvarUt. a. Fiks IO - Kommunens konfigurasjon inneholder en konto-id som blir brukt som mottaker. Digisos-meldingene vil bli validert før de sendes til denne kontoen via Fiks IO. Den vil være tilgjengelig for henting fra Fiks IO-køen i en fastsatt periode. Dersom den oppgitte kontoen ikke støtter digisos-meldinger eller om kommunen ikke bekrefter mottak før denne perioden går ut vil meldingen bli trukket og alternativ kanal SvarUt benyttes for levering av søknaden (se punkt 5). b. SvarUt/SvarInn - Søknaden sendes til SvarUt til kommunenes SvarInn mottakersystem, enten fordi den er valgt som eneste leveransekanal, eller fordi kommunen ikke kan motta digisos-meldinger gjennom Fiks IO (se punkt 5). Fiks returnerer 202 ACCEPTED på http-kallet fra NAV. Dette markerer ansvarsoverføring fra NAV til Fiks, som fra nå garanterer at saken leveres til kommune for behandling. Søknanden opprettes i kommunalt fagsystem etter vellykket mottak via Fiks IO eller SvarInn. Det kommunale fagsystemet bekrefter mottak av søknaden og oppdaterer status i Fiks Digisos. Evt. nye filer legges til saken, autorisert for innbygger. Saken er tilgjengelig for innbygger på nav.no. Om fagsystemet avviser eller unnlater å bekrefte mottak av saken via Fiks IO vil SvarUt benyttes som alternativ kanal, der det inkluderes en fil som inneholder både NAV og Fiks Digisos sin id for saken. I praksis betyr dette at meldingen blir sendt til kommunens SvarInn mottakersystem, evt. sendt til print og postlagt ved problemer med mottak til kommunens fagsystem. Søknader mottatt via SvarUt kan også manuelt lastes ned av kommunen via SvarUt-brukergrensesnittet. Sikkerhet Systemet er lagt opp slik at NAV ikke trenger å lagre data, disse fjernes fra NAVs systemer når søknaden sendes til Fiks. All tilstand lagres dermed på Fiks-plattformen og hos kommunen. Innsending av søknad kan utelukkende gjøres med brukerens ID-Porten autentisering.\nKommunikasjonen mellom aktørene (NAV, Fiks, fagsystem) foregår med SSL-kryptering, i tillegg er alle dokumenter kryptert med mottakers nøkkel. NAV krypterer med Fiks sin nøkkel, Fiks krypterer med fagsystemets, og fagsystemet vil igjen bruke Fiks-nøkkelen.\nInnbygger har tilgang til alle sine opplastede dokumenter, der et begrenset utvalg av metadata også er tilgjengelig for NAV-ansatte. Uthenting av disse metadataene krever autentisering med NAVs virksomhetssertifikat og integrasjonsinnlogging, og alle slike spørringer logges i Fiks Audit. Ansvaret for den videre autorisering av den enkelte NAV-ansatte ligger hos NAV.\nIntegrasjonsutvikling Fagsystem Det anbefales å lese gjennom dokumentasjonen for generell integrasjonsutvikling mot Fiks, der siste avsnitt, \u0026ldquo;Hvordan komme i gang med utvikling\u0026rdquo;, er svært nyttig. På denne siden beskrives blant annet oppsett av IDPorten og autentisering mot Fiks, der fagsystemet bruker Integrasjon som autentiseringsmetode. Fiks tilbyr både en Java-klient og en .net-klient som kan brukes for å generere access token fra Maskinporten (IDPorten). Avsnittet Konfigurasjon beskriver hvordan en integrasjon opprettes og tilknyttes en tjeneste (Digisos). Integrasjons-id-en og passordet generert her må dermed brukes sammen med access token fra Maskinporten for å få tilgang til Digisos-API-et.\nMottak av søknader Fagsystemet kan motta søknader enten via Fiks IO eller SvarInn/SvarUt. I tillegg til søknadsfilene sendt fra NAV, vil det inkluderes en ekstra json-fil med metadata. Denne metadataen vil være forskjellig basert på om det er en søknad eller ettersendelse som er sendt fra NAV. I begge tilfellene vil den inneholde en Fiks DigisosId for å kunne sende saksoppdateringer til Fiks Digisos API og en unik referanse fra NAV, eksternRef. For ettersendelser vil den i tillegg inneholde informasjon om hvilken søknad ettersendelsen tilhører, og om selve søknaden ble sendt over Fiks IO eller SvarUt.\nSøknad: Eksempel på innholdet i metadata-file for søknader er definert i søknad-metadata-eksempel.\nEttersendelse: Eksempel på innholdet i metadata-file for ettersendelser er definert i ettersendelse-metadata-eksempel.\nSelve data-feltene i metadata-filen vil være definert likt for både Fiks IO og SvarUt. Følgende er spesifikt for de ulike leveringskanalene:\nFiks IO Ved bruk av Fiks IO som leveringskanal må fagsystemet støtte meldingsprotokollen no.nav.digisos.fagsystem.v1, som er definert for bruk av Digisos-meldinger, som inneholder kontrakter i form av json-schema som gjelder både for mottak og svar på Fiks IO meldinger. Fagsystemet må derfor støtte meldingstypene for denne protokollen, for mottak og sending av meldinger for både søknader og ettersendelser:\nTil fagsystem - mottak av søknad og ettersendelse Dette er de samme metadataene som blir beskrevet ovenfor.\nFor ny søknad, no.nav.digisos.soknad.v1, som definert i json-skjema for søknad.\nFor ettersendelse, no.nav.digisos.ettersendelse.v1, som definert i json-skjema for ettersendelse.\nFra fagsystem - kvittering på mottatt søknad og ettersendelse For ny søknad, no.nav.digisos.soknad.mottatt.v1, med tom body.\nFor ettersendelse, no.nav.digisos.ettersendelse.mottatt.v1, med tom body.\nFor mer informasjon om Fiks IO, se dokumentasjon for Fiks IO.\nSvarInn/SvarUt Ved bruk av SvarUt som leveringskanal må fagsystemet støtte mottak av metadata-filen som definert ovenfor, Mottak av søknader. Denne metadata filen vil være lagt med selve SvarUt forsendelsen, kalt forsendelseMetadata.json.\nSøknad: Eksempel på innholdet i forsendelseMetadata.json for søknader er definert i søknad-metadata-eksempel.\nEttersendelse: Eksempel på innholdet i forsendelseMetadata.json for ettersendelser er definert i ettersendelse-metadata-eksempel.\nEksempel på mottak av søknad med tilhørende ettersendelse Mottak av søknad med tilhørende fil forsendelseMetadata.json:\n{ \u0026#34;eksternRef\u0026#34;: \u0026#34;110004PCC\u0026#34;, \u0026#34;digisosId\u0026#34;: \u0026#34;3fa85f64-5717-4562-b3fc-2c963f66afa6\u0026#34; } eksternRef: NAV sin referanse på innsendt søknad.\ndigisosId: DigisosId som brukes for å sende saksoppdateringer (innsyn) til Fiks Digisos API. (må ikke forveksles med ForsendelsesId, som er id-en til selve SvarUt-forsendelsen)\nMottak av ettersendelse tilknyttet samme søknad, med tilhørende fil forsendelseMetadata.json:\n{ \u0026#34;eksternRef\u0026#34;: \u0026#34;110003EFF\u0026#34;, \u0026#34;digisosId\u0026#34;: \u0026#34;3fa85f64-5717-4562-b3fc-2c963f66afa6\u0026#34;, \u0026#34;soknadLeveranseId\u0026#34;: { \u0026#34;sendtKanal\u0026#34;: \u0026#34;SVARUT\u0026#34;, \u0026#34;id\u0026#34;: \u0026#34;4c7ca4bf-d2c2-4eaa-9a53-4544c9261c18\u0026#34; } } eksternRef: NAV sin referanse på innsendt søknad.\ndigisosId: DigisosId, samme Id som den orginale søknaden.\nsoknadLeveranseId: Blokk som inneholder informasjon om hvor den orginale søknaden ble sendt, med tilknyttet meldingsId. Denne kan inneholde noen forskjellige verdier:\nDersom søknaden ble sendt til SvarUt/SvarInn vil feltet sendtKanal ha verdi SVARUT. Feltet id vil da tilsvare Forsendelses-id-en til den orginal søknadens sin SvarUt/SvarInn forsendelsen. Dersom fagsystemet bruker Fiks IO i kombinasjon med SvarUt/SvarInn kan det oppstå situasjoner hvor søknad blir sendt til Fiks IO, men ettersendelsen blir sendt til SvarUt/SvarInn. Da vil feltet sendtKanal ha verdi FIKS_IO. Feltet id vil være meldingsId-en til Fiks IO forsendelsen. For mer informasjon om SvarUt/SvarInn, se dokumentasjon for SvarUt.\nSak oppdatering fra Fagsystem Fiks Digisos tilbyr en api-spec for alle operasjoner utenom filopplasting, som er beskrevet under avsnittet \u0026ldquo;Opplasting av filer\u0026rdquo;.\nSak oppdaterings api-spec er API-et der hvert endepunkt opererer på en angitt søknad, DigisosId, der førlgene operasjoner er tilgjengelige:\nOpprette en ny sak for en søker, der man får tildelt en unik DigisosId for opprettet sak. Oppdatere en sak med nye hendelser, der gammel sakoppdatering vil bli erstattet med den nye. Slette sakoppdatering, (refererte filer fra saken slettes ikke). Hente liste av dokumenter som tilgjengelige på søknaden, som tidligere er lastet opp via Fiks Digisos (se avsnitt \u0026ldquo;Opplasting av filer\u0026rdquo;). Slette dokument fra søknaden, som tidligere er lastet opp via Fiks Digisos (se avsnitt \u0026ldquo;Opplasting av filer\u0026rdquo;). Filformatet brukt for sakoppdateringer for json-data, digisos-soker.json, er definert her: soknadsosialhjelp-filformat .\nDigisos API-et har vi eksponert i en uavhengig tredjeparts-applikasjon, \u0026ldquo;Swagger Editor\u0026rdquo;, som også tilbyr funksjonalitet for å generere en klient i valgt programmeringsspråk basert på api-specen vi har definert. Denne klienten kan brukes som et utgangspunkt for integrasjon mot Fiks Digisos, men der man må tilpasse klienten til eget fagsystem, med å blant annet legge til nødvendig autentisering og access token.\nReferering til filer\nFiler må lastes opp på forhånd, da digisos-soker.json inneholder referanse-id til dokumentene som kan linkes til søkeren, som gjelder både for filer som lastes opp til Fiks Dokumentlager via Digios-api (som beskrevet under) eller som er sendt via SvarUt.\nDet anbefales å laste opp alle filene via Digisos-api (som beskrevet under, \u0026ldquo;Opplasitng av filer\u0026rdquo;), da vil følgende gjelde:\nNår en sakoppdatering skjer, vil Fiks Digisos validere at refererte filer faktisk er tilgjenglige på saken (DigisosId). Når man sletter en fil via Fiks Digisos vil man bare kunne slette filer som ikke er referert til på saken (DigisosId). Man kan hente en liste av alle tilgjengelige filer for en gitt sak (DigisosId). Ved å referere til et SvarUt dokument, består denne filreferansen av SvarUt sin forsendelsesId og nummeret for dokumentet i denne forsendelsen, der indekseringen begynner fra 1. Ved referanse til SvarUt filer har ikke Fiks Digisos-api noe relasjon eller tilgang til disse filene, slik at fagsystemet selv er ansvarlig for at alle referte filer til en hver tid er tilgjengelige for søkeren når filreferansene linkes til på nav.no.\nGenerelle vilkår for sakoppdatering:\nNår en sakoppdatering skjer, må derfor alle filer være tilgjenglige på saken. Filer som ikke lenger skal ligge på sak, kan fjernes etter at sakoppdatering uten filene er lastet opp. Fagsystemet må ha kontroll på listen med filer og sjekke at denne er korrekt. Når en sakoppdatering skjer, må saken eksistere i Fiks Digisos, enten fordi skjema fra NAV er sendt via Digisos eller at fagsystem har opprettet en sak. Hver sakoppdatering inneholder en komplett historikk av alle tidligere hendelser, og vil alltid overskrive tidligere sakoppdatering lagret i Fiks Digisos. Opplasting av filer\nFiks tilbyr en referanseimplementasjon i Java som kan brukes for filopplasting til Fiks Digisos: https://github.com/ks-no/fiks-digisos-klient.\nFør en sakoppdatering, må alle refererte filer være lastet opp på forhånd.\nFiler lastes opp til Fiks Digisos ved bruk av en multipart streaming request, der man spesifiserer HTTP-headeren \u0026ldquo;Transfer-Encoding\u0026rdquo; til å sende data i chunks, Transfer-Encoding: chunked.\nAlle filene må krypteres før opplasting, med public-key fra Fiks som kan hentes fra endepunktet /digisos/api/v1/dokumentlager-public-key.\nURL-stien til filopplasting er /digisos/api/v1/{fiksOrgId}/{digisosId}/filer, der {fiksOrgId} og {digososId} er FiksOrgId-en og FiksDigisosId-en som filene skal legges til.\nEndepunktet tar inn en liste, der man for hver fil som skal lastes opp legger til en metadata-blokk som inneholder informasjon om filen og en blokk som inneholder selve filen (InputStream). Multipart-requesten til Digisos API-et må da for hver fil inneholde to data-fields, der den første inneholder metadataen og den andre inneholder filen. Metadata består av filnavn på filen (filnavn), type (mimetype) og størrelse på filen i bytes (storrelse), der metadata-blokken er av typen \u0026ldquo;application/json\u0026rdquo;. Alle felter må oppgis.\nEksempel på metadata-blokk:\n{ \u0026#34;filnavn\u0026#34;: \u0026#34;test.pdf\u0026#34;, \u0026#34;mimetype\u0026#34;: \u0026#34;application/pdf\u0026#34;, \u0026#34;storrelse\u0026#34; : 1024 } fiks-digisos-klient beskriver hvordan en slik request skal defineres, som krypterer alle filene og sender til Fiks Digisos.\nReturtype Ved en vellykket opplasting får man tilbake en liste av dokumentmetadata som inneholder filnavn, unik referanse (UUID) til Fiks-Dokumentlager, og størrelse på filen.\nEksempel:\n200 OK { [ { \u0026#34;filnavn\u0026#34;: \u0026#34;test.pdf\u0026#34;, \u0026#34;dokumentlagerDokumentId\u0026#34;: \u0026#34;ab35e9088-bcfa-4096-ba68-f07777ed167c\u0026#34;, \u0026#34;storrelse\u0026#34; : 1024 } ] } Ved feil ved opplasting får man 400 Bad Request når multipart-requesten ikke er definert med riktige data.\nIntegrasjonsutvikling (for NAV) For generell integrasjonsutvikling mot Fiks, se Integrasjonsutvikling\nInnsending av søknad Soknad api (api-spec)\nFor innsending av søknad/ettersendelse brukes person-integrasjon autentisering med OIDC, se Integrasjonsutvikling for mer detaljer.\nInnsending av ny søknad\nInnsending av ny søknad til Fiks Digisos bruker multipart streaming request, på lik linje som opplasting av filer for fagsystemene, der man spesifiserer HTTP-headeren \u0026ldquo;Transfer-Encoding\u0026rdquo; til å sende data i chunks, Transfer-Encoding: chunked.\nURL-stien til ny søknad er /digisos/api/v1/soknader/{kommunenummer}/{navEkseternRefId}, der {kommunenummer} er kommunenummer søknaden skal sendes til og {navEkseternRefId} er en unik id fra NAV for søknaden.\nEndepunktet tar inn påkrevde felter for innsending av en ny søknad, som består av metadataene soknad.json (json-encodet String) og vedlegg.json (json-encodet String), samt filen soknad.pdf (metadata + fildata) pluss eventuelle vedlegg (metadata + fildata). Disse dataene må da være definert i denne rekkefølgen i multipart requesten.\nFor hver fil som skal lastes opp (soknad.pdf og hvert vedlegg) legger man til en metadata-blokk som inneholder informasjon om filen og en blokk som inneholder selve filen. Filene må også være kryptert med public key til Fiks Dokumentlager, som blir eksponert via endepunktet /digisos/api/v1/dokumentlager-public-key, på lik linje med kryptering av filer for for fagsystemene, som definert i Fiks Digisos klienten. Metadata består av filnavn på filen (filnavn), type (mimetype) og størrelse på filen i bytes (storrelse), der metadata-blokken er av typen \u0026ldquo;application/json\u0026rdquo;. Alle felter må oppgis.\nEksempel på metadata-blokk, som må defineres for hver fil:\n{ \u0026#34;filnavn\u0026#34;: \u0026#34;soknad.pdf\u0026#34;, \u0026#34;mimetype\u0026#34;: \u0026#34;application/pdf\u0026#34;, \u0026#34;storrelse\u0026#34; : 1024 } Innholdet i en request vil da kunne bestå av:\nsoknadJson, vedleggJson, metadata + soknad.pdf, metadata + vedlegg1.pdf, metadata + vedlegg2.pdf Returtype Ved en vellykket innsending får man tilbake 202 ACCEPTED og en unik Fiks DigisosId (UUID) som er ID-en til opprettet søknad i Fiks Digisos.\nVed feil ved opplasting får man 400 Bad Request når multipart-requesten ikke er definert med riktige data.\nInnsending av ny ettersendelse\nInnsending av ny ettersendelse til Fiks Digisos bruker også multipart streaming request.\nURL-stien til ny ettersendelse er /digisos/api/v1/soknader/{kommunenummer}/{soknadId}/{navEkseternRefId}, der {kommunenummer} er kommunenummer søknaden tilhører, {soknadId} er Fiks DigisosId-en for søknaden det skal ettersendes til og {navEkseternRefId} er en unik id fra NAV for denne ettersendelsen.\nEndepunktet tar inn påkrevde felter for innsending av en ny ettersendelse, som består av metadataen vedlegg.json (String), samt en liste med vedlegg (metadata + fildata). Filene må krypteres på lik linje som for ny søknad.\nFor hvert vedlegg som skal lastes opp legger man til en metadata-blokk som inneholder informasjon om filen (samme som innsending av ny søknad) og en blokk som inneholder selve filen.\nReturtype Det er ingen returtype på dette endepunktet.\nVed feil ved opplasting får man 400 Bad Request når multipart-requesten ikke er definert med riktige data.\nInnsending av søknad med mellomlagring For å sende inn søknad og ettersendelse med mellomlagring av vedlegg er det laget et nytt api: (api-spec)\nHer bruker man en multipart request på samme måte som ved innsending av søknad, men det skal kun legges ved en enkelt fil. Om det er flere vedlegg må de lastes opp en om gangen. Hver request må da bruke den samme {navEkseternRefId}. Vedleggene kan deretter lastes ned eller slettes fra mellomlageret ved bruk av dette api\u0026rsquo;et.\nNår det er klart for å sende inn søknad eller ettersendelse brukes et nytt api endepunkt på søknad spi\u0026rsquo;et med følgende URL: /digisos/api/v2/soknader/{kommunenummer}/{navEkseternRefId}\nDette fungerer på samme måte som det gamle api\u0026rsquo;et for søknad, men uten vedlegg. Vedleggene vil nå hentes fra mellomlager, knyttet til {navEkseternRefId} som oppgis her, og som ble benyttet til mellomlagring. Når innsending er ferdig, vil alle filene knyttet til denne {navEkseternRefId} slettes fra mellomlagring.\nAutomatisk sletting av mellomlagrede filer for søknader som ikke er sendt inn vil komme i en senere releas.\nHenting av filer Soknad api (api-spec)\nVed henting av søknad vil det for hver fil returneres en UUID til Fiks Dokumentlager eller en forsendelsesid og filnummer for SvarUt, der filen kan lastes ned. Filene soknad.json, vedlegg.json og digisos-soker.json vil være tilgjengelige for NAV gjennom endepunktet /digisos/api/v1/nav/soknader/{digisosId}/dokumenter/{dokumentlagerId} fra Digisos API-et, der dokumentet blir returnert som en inputstream fra HttpServletResponse. Alle andre filreferanser vil bli eksponert for søkeren, som søkeren selv må laste ned fra Fiks Dokumentlager, https://minside.kommune.no/dokumentlager/nedlasting/niva4/{id}, eller fra SvarUt, https://svarut.ks.no/forsendelse/{forsendelseId}/{filnummer}.\n"
},
{
	"uri": "/tjenester/kslering/integrasjon/",
	"title": "KS læring integrasjon",
	"tags": [],
	"description": "",
	"content": "SIDEN ER UNDER UTVIKLING\nProsedyre for KS Læring HR API Kommunens representant sender inn en en henvendelse til fiks@ks.no og informerer om at kommunen ønsker å begynne å bruke HR API Med bakgrunn i dette skjemaet, opprettes en sak hos KS. All skriftlig kommunikasjon går via den saken.\nTeknisk dokumentasjon til kommune og utvikler\nks-hrdataapi_v3-20200128.pdf Dette dokumentet inneholder teknisk beskrivelse av KS HR API. Beskrivelsen er utarbeidet av Catalyst.\nPresentasjon API.pptx\nSaksbehandler i KS-læring kan kalle inn til et teamsmøte mellom de som skal utføre det tekniske arbeidet på begge sider, hvis ønskelig. En slik henvendelse tas via saken som ble opprettet under punkt 1\nEksempelkode for KS Læring HR-adapter mot Visma: https://github.com/ks-no/kslaring-hradapter-visma\nUtvikler hos kommunen leverer endepunktene som de har utviklet, til KS-læring (via saken som ble opprettet under punkt 1) Her må KS Læring få URLene til de obligatoriske endepunktene. Bekreft at IP 18.185.188.40 (jumpserver for lab-miljøet) og 18.197.107.188 (jumpserver for prod-miljøet) er whitelisted. Loginmetode: Basic Auth med brukernavn og passord.\nKS læring tester alle endepunktene via curl i serveren\nKS Læring tester endepunktene Authority og Organisation først i LAB\nNår data er på plass må KS bekrefte med bestiller at org strukturen ser riktig ut før KS begynner med Person og Employee_position\nKS Læring tester endepunktene Person og Employee_position Når kunden/kommunen har bekreftet at organisasjonsstrukturen i LAB er riktig kan vi gå over til å teste Person og Employee_position. Når data har kommet inn kan kunde logge inn og bekrefte at dataene ser riktig ut og personer ligger i riktig enhet. Hvis alt er på plass, kan databasen rulles tilbake og KS kan sette det opp i produksjon\nNår testingen er ferdig og alt ser bra ut i LAB kan KS sette opp APIet i prod. "
},
{
	"uri": "/felles/difiidportenklient/",
	"title": "Maskinporten",
	"tags": [],
	"description": "",
	"content": "Ta i bruk maskinporten For å ta i bruk maskinporten må man gjøre følgende:\nAvtale med Digdir om bruk av maskinporten Virksomhetssertifikater for test- og produksjonsmiljøet Sendt e-post til fiks-utvikling@ks.no hvor dere informerer om at det er inngått en avtale med Digdir om bruk av maskinporten og hvilket organisasjonsnummer det gjelder Opprett maskinporten-klient hos Digdir Les videre for beskrivelser om hvordan man kan få dette på plass.\nGodkjenne bruksvilkår for bruk av maskinporten En må først ha godkjent bruksvilkår hos Digdir. Det har de fleste kommuner: https://samarbeid.digdir.no/digital-postkasse/bruksvilkar-offentlige-kunder/70\nVirksomhetssertifikat Man må ha virksomhetsertifikat fra Commfides eller Buypass. Test sertifikat for test og vanlig for produksjon. Husk å registrere virksomhetssertifikat med samme organisasjonsnummer som man vil bruke hos maskinporten og eventuelt tjenster hos KS som f.eks. Fiks-Protokoll og Fiks-IO.\nOpprette maskinporten-klient Husk å sende e-post til fiks-utvikling@ks.no med organisasjonsnummeret, slik at vi blant annet får gitt tilgang til \u0026ldquo;ks:fiks\u0026rdquo;-scopet. Det er mulig å fullføre opprettelsen av maskinport-klient uten at dette er på plass, men det må etterregistreres for å få klienten til å virke på Fiks-plattformen.\nGå til https://sjolvbetjening.samarbeid.digdir.no/\nLogg inn\nVelg \u0026ldquo;Gå til integrasjoner\u0026rdquo;, for ver2 for test. Produksjon for prod. velg \u0026ldquo;Ny integrasjon\u0026rdquo; Sett Integrasjon for: for egen virksomhet -\u0026gt; integrasjonstype = maskinporten, -\u0026gt; velg scopes, Der skal du se ks:fiks i lista.\nclient_name: til et navn som passer\nDigdir-tjeneste: Maskinporten (for personinnlogging må du kontakte idporten@difi.no)\nlegg til scopes: ks:fiks ( Vises ikke dette har vi ikke fått korrekt org.nr fra dere, send det til fiks-utvikling@ks.no)\ngrant_types: urn:ietf:params:oauth:grant-type:jwt-bearer må være valgt\ntoken_endpoint_auth_method: private_key_jwt lagre -\u0026gt; Da får du client_id. Hvis du skal ha personinnlogging med ks:fiks scope må du sende en henvendelse til servicedesk@digdir.no\n"
},
{
	"uri": "/tjenester/dhis2/",
	"title": "Fiks smittesporing",
	"tags": [],
	"description": "",
	"content": "Kort beskrivelse Fiks smittesporing er et vektøy ment brukt for å holde oversikt over Covid-19 smitten i samfunnet gjennom registrering av smitte og nærtkontakter.\nTilgjengelige grensesnitt Grensesnitt Støtte Web portal Ja Maskin til maskin Nei Beskrivelse KS skal levere en digital tjeneste for smittesporing til bruk i landets kommuner. I dag foregår manuell smittesporing i de fleste kommuner, ved hjelp av telefon og papir. Noen kommunner har opprettet enkle excel-baserte databaser. Smittesporing utføres av ansatte (lege, kommunelege, andre ansatte) i kommunene som intervjuer den som er smittet og etterpå personer den smittede har vært i kontakt med, og det settes i gang tiltak for å følge opp disse personene. Denne informasjonen ønskes nå innsamlet gjennom DHIS2, slik at kommunen skal kunne få hjelp til å identifisere og systematisere tilfeller og deres kontakter, og danne seg en oversikt over hvor smitte foregår i samfunnet for rapportering til FHI og for iverksetting av målrettede smitteverntiltak.\nLøsningen er basert på systemet DHIS2 som har en egen modul for behandling av covid-19. Når det i dokumentet står DHIS2 menes covid-19 modulen. Data bygges opp manuelt i systemet eller ved excel-import. ID-porten blir benyttet for autentisering. Det er ingen grensesnitt til andre systemer.\nSystemet har en felles installasjon for alle kommunene og leveres som en skytjeneste. Dette gir en felles forståelse av informasjonen i systemet og effektiviserer rapporteringen i kommunene og til FHI. Rapportering om smittesporing fra kommunene er et viktig verktøy for å vurdere nasjonale smittereduserende tiltak og effekten av disse. En felles skytjeneste forenkler det å ta i bruk løsningen og nye versjoner.\nFiguren under beskriver de overordnede prosessene som inngår i tjenesten Smittsporing.\nFunksjonaliteten i DHIS2 er kort fortalt registrering av informasjon om smittet og hvem den smittede har vært i nærkontakt med, innsamlet gjennom intervju. Nærkontakter er definert av FHI som personer som har hatt tett kontakt med en person som er bekreftet syk med covid-19 fra 48 timer før symptomdebut og til personen er avisolert. Disse er etter covid-19 forskriften pålagt å være i karantene. De som har nærmest kontakt, har størst risiko for å være smittet. Ved sannsynlig, men ikke bekreftet covid-19, anbefales det at husstandsmedlemmer eller tilsvarende nære kontakter oppholder seg i karantene. Gjeldende definsjon og retningslinjer for smittetifeller og nærkontakter finnes på FHI sine nettsider. https://www.fhi.no/nettpub/coronavirus/helsepersonell/definisjoner-av-mistenkte-og-bekreftede-tilfeller-med-koronavirus-coronavir/\nSmittet og nærkontakter samles i et felles personregister slik at en unngår dobbeltregistrering. Ved innsamling av informasjon kan ansatte bruke andre kilder som folkeregisteret, karttjenester, arrangementinformasjon, etc.\nI tillegg til smittet og nærkontakter kan det registreres hendelser som er en samling av mange personer, hvor smittet og nærkontakter har deltatt. Eksempler på hendelser kan være konserter, samlinger, sykehjem, barnehage, etc.\nSmittet og nærkontakter følges opp med tiltak og oppfølging parallelt med rapportering til kommunene og FHI.\nKonfigurasjonen av DHIS2 covid-19 for kommunene består av skjema og indikatorer utarbeides i samarbeid mellom kommunene og FHI. Produkteier i KS koordinerer dette arbeidet.\nOrganisasjon DHIS2 er et fellessystem hvor øverste organisasjonsenhet er Norge. Landet er videre delt opp i fylkeskommuner og kommuner. På denne måten kan det lages rapporter pr. kommune som aggregeres opp til en nasjonal oversikt. Dette er en viktig egenskap ved tjenesten da oppfølging og ansvar for covid-19 smitte og -tiltak ligges hos FHI.\nRegister over Kommuner og fylkeskommuner er registert med kommunenummer i henhold til Kartverkets kommuneregister. Dette kan ikke endres, men det kan legges til organisatoriske enheter innenfor hver kommune. Dette kan være bydel som de største kommunene benytter.\nBrukeradministrasjon og tilgangsstyring DHIS2 er en skytjeneste hvor tilgang (auturisasjon) gis på kommunenivå.\nAutentisering av brukere skjer ved bruk av ID-porten.\nNår en kommune ønsker å ta i bruk DHIS2 må de ha en signert avtale om bruk av Fiks-plattformen med et tjenestevedlegg om bruk av DHIS2. Administrator i kommunen får da tilgang til løsningen og kan registrere flere brukere i sin kommune. Standard roller er definert som:\nRolle Beskrivelse Tilgang Administrator Administrerer brukere og tilganger til systemet Administrasjon av brukere og gi tilgang til systemet I egen kommune Kommunebruker Se og registrere opplysninger Alt innenfor egen kommune utover å gi nye brukere tilgang Registrering av roller skjer i Fiks-konfigurasjon. Administrator på Fiks-plattformen opprettes når det inngås avtale mellom kommune og KS om bruk av Fiks-plattformen.\nSkjema og indikatorer DHIS2 er en generisk løsning hvor hvilken informasjon og regler løsningen skal inneholde settes opp i en konfigurasjon. Registrering av disse opplysningene (metadata) og skjema for registrering av løsningen gjøres sentralt av Fiks forvaltning.\nTilpasninger til den enkelte kommune er ikke mulig. Behov meldes inn til produktansvarlig i KS og vurderes tatt med i DHIS2 ved senere versjoner.\nRapportering til FHI Det er en forutsetning at nødvendig data for den nasjonale oversikten av smittespredning i sammfunnet samles inn og rapporteres på en enkel og betimellig måte. For å kunne vurdere effekten av de iverksatte smitteverntiltakene og evaluere hvordan endringer av tiltakene påvirker smittespredningen i samfunnet er det ønskelig at kommunen innhenter og rapporterer ukentlige aggregerte data til FHI om:\ni. antall tilfeller og nærkontakter ii.\tantall og andel påviste covid-19 tilfeller med kjent eksponering til nærkontakt fordelt etter eksponeringssted: husstand, barnehage, skole (1.-12. trinn), universitet eller høyskole, arbeidsplass, helseinstitusjon (sykehjem, aldershjem, rehabilitering, sykehus etc.), arrangement, organisert fritidsaktivitet, reise, ukjent iii.\tantall og andel covid-19 tilfeller etter kjent eksponering til en felles smittekilde (utbrudd) fordelt på smittested\nImport fra registrerte opplysninger i excel Det er utviklet et excel regneark som kan benyttes ved import av registrerte smittede og nærkontakter før DHIS2 tas i bruk. Data fra kommunen må da registreres i regnearket og sendes til Fiks for opplasting i databasen. I første omgang gjøres dette i testdatabasen med anonymiserte data for å verifisere at opplastning gir forventet resultat.\nTidligere smittesporing kan også registreres tilbake i tid direkte i DHIS2. Det vil være en fordel for oversikten av utviklingen av epiemien i Norge over tid å få samlet tidligere smittesporingsdata fra kommunene i DHIS2.\nSikkerhet Ivaretakelse av digital sikkerhet i nasjonale felleskomponenter og andre samfunnskritiske systemer som leveres av virksomheter i offentlig sektor, må ha et særskilt fokus. Med økt fokus på innebygget personvern og informasjonssikkerhet blir Fiks-plattformen stadig bedre sikret, og er i seg selv å anse som et godt sikringstiltak for kommunal sektor.\nKS Fiks har utarbeidet en påbegynt mal for risikovurdering av hele verdikjeden, dvs. fra kommunens forretningskritiske prosesser til innbyggeren. Målet med risikovurderingen er å sette den digitale fellestjenestene inn i rett kommunal kontekst.\nPå samme måte har KS også påbegynt en vurdering av personvernkonsekvenser (DPIA) ved bruk av tjenesten, som kommunene kan velge å benytte.\nDen enkelte digitale fellestjeneste avtalefestes ved et eget tjenestevedlegg til den grunnleggende avtalen om tilknytning og bruk av Fiks-plattformen.\nBruken av DHIS2 Det er viktig å påpeke at hver enkelt kommune selv må ta eierskap til de overnevnte dokumentene KS, som databehandler, utarbeider. Kommunen må se sikringen i egne prosesser og gjøre evt. endringer som er aktuelle for sin kommune før de går god for gjenværende risiko og tar denne tjenesten i bruk.\nKommunene er selv ansvarlig for brukerforvaltning, som å legge til nye brukere, endre roller og sletting av brukere. Dette inngår som en naturlig del av de organisatoriske tiltakene kommunen selv må ta ansvar for og følge opp.\nKlassifisering av informasjon DHIS2 inneholder mye personopplysninger, og en del særlige kategorier av personopplysninger. Dette betyr at det stilles høye krav til sikring av informasjon med hensyn til å ivareta de registrertes rettigheter og friheter. Jf. det tidligere nevnte DPIA-dokumentet.\nTeknologiske sikringstiltak Digdirs fellestjenester ID-porten og maskinporten benyttes til autentisering, og benyttes som identitetsbærer i hele Fiks-plattformen. ID- og maskinporten-tokens benyttes også som grunnlag for plattformens gjennom-gående autorisasjonslag, som benyttes på tvers av alle tjenester. Gjennom faste prinsipper og komponenter oppnår plattformen er veletablert og godt testet funksjonalitet for autentisering og autorisasjon.\nData i bevegelse skal i Fiks-plattformen beskyttes med kryptering (TLS/SSL) og skal også være kryptert . Alle vesentlige operasjoner i Fiks-plattformen skal være sporbare og logges til en tilgangs-beskyttet sikkerhetslogg (audit log).\nUtvikling av Fiks-plattformen følger prinsippene for innebygget personvern med grunnleggende opplæring i personvern og informasjonssikkerhet, avdekking av krav til personvern og informasjonssikkerhet ved systematisk arbeid med DPIA og ROS, sikker design vha. trusselmodellering og STRIDE, sikker koding med bruk av statisk kodeanalyse, automatisk oppdatering av sårbare avhengigheter, sikkerhetstesting på flere nivåer med enhetstesting, integrasjonstesting og akseptansetesting samt automatisert bygging og produksjonssetting som kun gjennomføres etter at tester og kvalitetskriterier er oppfylt.\nDrift av Fiks-plattformen Alle tjenester i Fiks-plattformen går gjennom både ingressfiltrering, WAF (web application firewall) og overvåkes av operative sikkerhetssentre i flere lag. Datasentrene Fiks-plattformen kjører på er begge ISO27001-sertifisert og det blir gjennomført årlige revisjoner av informasjonssikkerhet og personvern. Revisjonene blir gjennomført av tredjeparts revisorer etter revisjonsstandardene ISAE-3402 og ISAE-3000. Driftsmiljøet overvåkes av driftsleverandørens eget sikkerhetsoperasjonssenter og NorCERT.\nTestmiljø All utvikling av Fiks-plattformen foregår i et eget test- og utviklingsnett (heretter testmiljøet). Testmiljøet skal ikke inneholde reelle personopplysninger. Data skal ikke overføres mellom test- og produksjonsmiljø. I testmiljøet skal det kun benyttes anonymiserte, avidentifiserte eller samtykkebaserte data. Alle endringer kjøres først ut i test- og utviklingsmiljøet, før det settes i produksjon. I testmiljøet kjøres blant annet akseptansetest før en vesentlig endring går i produksjon. Testmiljøet er også benyttet i forbindeles med tilgjengeliggjøring av og integrasjon mellom Fiks-plattformen og DHIS2 covid-19.\nAvhengigheter Fiks-plattformen Forutsetning for ta i bruk DHIS2 er at det finnes en SSA-L avtalen mellom KS og kommunen om bruk av Fiks-plattformen i kommunen. Det er en egen avtale for bruk av DHIS2 med covid-19 modul som er et tjenestevedlegg til SSA-L. Tjenestevedlegget inneholder databehandleravtale mm. Når avtaler er på plass setter kommunen selv opp tilgang til løsningen ved at administrator registrere brukere med roller.\nBruk av standarder Begreper Term Beskrivelse Testing Prosessen med å diagnostisere covid-19 med påvisning av viruset eller antistoff mot SARS-CoV-2 i en kroppsvæske. Består av tre hovedledd: Prøvetaking, analyse og besvarelse Prøvetaking Taking av prøve fra biologisk materiale hos en person Analyse Forsøk på å påvise arvestoff fra SARS-CoV-2 eller antistoffer mot SARS-CoV-2 i en prøve fra en person Smitteoppsporing (kontaktsporing, smittesporing) Prosessen med å finne, informere og eventuelt følge opp eller teste smittekontakter Indekspasient En person som får positiv test og som dermed utløser en smitteoppsporing Smittekontakter (nærkontakter) Personer som har opplevd en smittefarlig hendelse med indekspasienten, altså den type interaksjon som var nær, varte lenge og skjedde i indekspasientens smittsomme periode slik at smitte kan ha skjedd Smittekilde Den smittekontakten som smittet indekspasienten Sekundærkontakter De smittekontakter som er blitt smittet av indekspasienten Smittefarlig hendelse En type interaksjon som var nær, varte lenge og skjedde i indekspasientens smittsomme periode slik at smitte kan ha skjedd Avgrensning Felles kommunal løsning Tjenesten er en felles kommunal løsning som settes opp likt for alle kommuner. Dette gjør at løsning hurtig blir tilgjengelig for kommunene og nye versjoner kan raskt gjøres tilgjengelig.\nNasjonale felleskomponenter Id-porten benyttes for autentisering av personer som bruker løsningen.\nKompetanse FHI ønsker å veilede og bidra til å forbedre kompentase til helsetjenesten om smittesporingsarbeid og vurderinger rundt karanteneperioder. I den sammenheng er FHI i ferd med å utvikle et opplæringseminar for smittesporingspersonale i kommunene, som er tilpasset de praktiske og faktiske forholdene rundt covid-19, koronavirus.\nKunnskap om koronavirus og smittesporing Det er viktig at de som arbeider med smittesporing, hurtig kan sette seg inn i intervjurollen og har basiskunnskap om covid-19 da personer som kontaktes gjerne har spørsmål. I den sammenheng har FHI utviket en koronaveilder som er tilgjengelig på FHI sine nettsider: https://www.fhi.no/nettpub/coronavirus/\nKunnskap om systemet DHIS2-covid-19 KS arbeider med en veileder for brukere av systemet.\nAlle kurs vil gjøres tilgjengelig på KS-læring.\nReferanser Bestilling av tilgang til Fiks smittesporing: smittesporing@ks.no Informasjon om DHIS2 Covid-19: https://www.dhis2.org/covid-19 Coronaveileder https://www.fhi.no/nettpub/coronavirus/ Kontaktsporing og oppfølging av kontakter til personer med nytt koronavirus (coronavirus) https://www.fhi.no/nettpub/coronavirus/helsepersonell/definisjoner-av-mistenkte-og-bekreftede-tilfeller-med-koronavirus-coronavir/?term=\u0026amp;h=1 Hjemmekarantene og hjemmeisolering - råd til helsepersonell https://www.fhi.no/nettpub/coronavirus/helsepersonell/hjemmekarantene-og-hjemmeisolering-i-forbindelse-med-covid-19/?term=\u0026amp;h=1 "
},
{
	"uri": "/felles/sikkerhet/",
	"title": "Sikkerhet og personvern i Fiks-plattformen",
	"tags": [],
	"description": "",
	"content": "Denne siden gir en generell innføring i hvordan personvern og informasjonssikkerhet (sikkerhet) er ivaretatt i Fiks-plattformen. Under beskrives hvordan vi har sikret tjenestene på en ovordnet nivå.\nGenerelt om sikkerhet Ivaretakelse av digital sikkerhet i nasjonale felleskomponenter og andre samfunnskritiske systemer som leveres av virksomheter i offentlig sektor, må ha et særskilt fokus. Med økt fokus på innebygget personvern og informasjonssikkerhet blir Fiks-plattformen stadig bedre sikret, og er i seg selv å anse som et godt sikringstiltak for kommunal sektor.\nKS-Digitale fellestjenester har for noen av tjenestene utarbeidet en utfylt mal for risikovurdering av hele verdikjeden, dvs. fra kommunens forretningskritiske prosesser til innbyggeren. Målet med denne risikovurderingen er å hjelpe kommunen med å få gjennomført en slik risikovurdering.\nPå samme måte har KS-Digitale fellestjenester også påbegynt en vurdering av personvernkonsekvenser (DPIA) ved bruk av tjenesten, som kommunene kan velge å benytte.\nDen enkelte digitale fellestjeneste avtalefestes ved et eget tjenestevedlegg til den grunnleggende avtalen om tilknytning og bruk av Fiks-plattformen.\nStyringsystem for personvern og informasjonssikkerhet KS-Digitale fellestjenester har etablert og jobber etter et eget styringssystem for personvern og informasjonssikkerhet. Styringssystemet bygger på anerkjente standarder som ISO27001, ISO27701 og NSMs grunnprinsipper for IKT-sikkerhet. For spesifikke spørsmål om sikkerhet og personvern på plattformen, ta kontakt med brukerstøtte eller sikkerhetsavdelingen vår.\nOverordnet om teknologiske sikringstiltak Digdirs fellestjenester ID-porten og maskinporten benyttes til autentisering, og benyttes som identitetsbærer i hele Fiks-plattformen. ID- og maskinporten-tokens benyttes også som grunnlag for plattformens gjennom-gående autorisasjonslag, som benyttes på tvers av alle tjenester. Gjennom faste prinsipper og komponenter oppnår plattformen er veletablert og godt testet funksjonalitet for autentisering og autorisasjon.\nUtvikling av Fiks-plattformen følger prinsippene for innebygget personvern med grunnleggende opplæring i personvern og informasjonssikkerhet, avdekking av krav til personvern og informasjonssikkerhet ved systematisk arbeid med DPIA og ROS, sikker design vha. trusselmodellering og STRIDE, sikker koding med bruk av statisk kodeanalyse, automatisk oppdatering av sårbare avhengigheter, sikkerhetstesting på flere nivåer med enhetstesting, integrasjonstesting og akseptansetesting samt automatisert bygging og produksjonssetting som kun gjennomføres etter at tester og kvalitetskriterier er oppfylt.\nOpplæring Alle i KS-Digitale fellestjenester får grunnleggende opplæring i personvern og informasjonssikkerhet. Alle utviklere vil jevnlig få opplæring og trening i sikker utvikling.\nAutentisering og autorisering Fiks-plattformens tjenester benytter som hovedregel ID-porten og Maskinporten fra Digitaliseringsdirektoratet (digdir) for autentisering av brukere. Spesifikke mekanismer for autentisering og autorisering avhenger av kontekst:\nPrivatpersoner Dette kan for eksempel være en innbygger som finner barnehagesøknaden sin i Fiks Innsyn.\nPersoner autentiseres ved hjelp av Open-Id Connect løsningen til ID-Porten. Dette vil si at de (om de ikke allerede er innlogget) dirigeres til ID-Porten for innlogging ved hjelp av for eksempel MinId eller BankId. ID-Porten og Fiks utveksler så informasjon for å bekrefte brukerens identitet og hvilket innloggingsnivå som er benyttet. Utgåtte innlogginger vil automatisk bli fornyet.\nDenne typen innlogging krever som regel ikke videre autorisering - en person har tilgang til informasjon og tjenester som er eksponert på det aktuelle fødselsnummeret.\nPersoner som opererer på vegne av en organisasjon Når en person autentiserer seg på Fiks-plattformen (som beskrevet over) vil plattformen hente denne personens roller i næringslivet fra Altinn, og gi personen mulighet til å opptre på vegne av organisasjoner hvor han eventuelt måtte ha en rolle. Han vil så få tilgang til informasjon og tjenester som er eksponert på det aktuelle orgnummeret.\nOm det etterhvert kommer flere kilder for slike fullmakter (som for eksempel gir mulighet for å opptre på vegne av andre organisasjoner) vil Fiks-plattformen kunne støtte dette gjennom samme løsning.\nTjenesteforvaltere Dette er personer som forvalter en tjeneste på Fiks-plattformen på vegne av en Fiks-organisasjon, for eksempel en kommuneansatt som konfigurerer Fiks Innsyn eller sender forsendelser gjennom SvarUt. Disse autentiseres gjennom ID-Porten OpenID-Connect på samme måte som andre personer, og autorisereres for hver enkelt tjeneste og funksjon basert på privilegier organisasjonen har tildelt personen gjennom Fiks-konfigurasjon.\nNår organisasjonen opprettes settes et personnummer som administrator. Dette er en \u0026ldquo;superbruker\u0026rdquo;, administrator-privilegiet gir alle tilganger på en kommune. En administrator kan lage andre administratorer, både på organisasjonsnivå og for de enkelte tjenestene. Han kan også tildele mer spesifikke privilegier, for eksempel ved å gi en person rett til å sende SvarUt forsendelser på vegne av en avdeling i kommunen. KS-Digitale fellestjenester anbefaler at denne funksjonaliteten benyttes slik at ansatte ikke har tilganger utover det som er nødvendig for å utføre arbeidsoppgavene, og at tildelte privilegier følges opp, slik at endringer (person som bytter rolle, person som slutter i sin stilling) reflekteres i tildelte privilegier.\nTildeling av privilegier er underlagt audit-logging, se under for detaljer.\nIntegrasjoner De fleste tjenestene på Fiks-plattformen har mulighet for maskin-til-maskin integrasjon, for eksempel når et saksystem laster opp meldinger til Fiks Innsyn. Dette gjøres gjennom å opprette integrasjoner, som autentiseres ved hjelp av et virksomhetsertifikat-basert access token utstedt av ID-Porten i kombinasjon med integrasjonsid og passord generert av Fiks-konfigurasjon. Se [integrasjoner]/felles/integrasjoner/ for mer informasjon om oppsett av dette.\nIntegrasjoner autentiseres gjennom to mekanismer: for det første trenger man en kombinasjon av integrasjonId og passord som genereres via Fiks Konfigurasjon. For det andre benyttes et virksomhetssertifikat og ID-Porten for å bekrefter identiteten til virksomheten som drifter integrasjonen. Denne identiteten må sammsvare med orgnummer som er registrert som integrasjonseier i Fiks-konfigurasjon. Se \u0026ldquo;Integrasjoner\u0026rdquo; for en mer detaljert beskrivelse.\nAutorisering av integrasjoner gjøres på bakgrunn av privilegier tildelt i Fiks-konfigurasjon. Hver Fiks-organisasjon må eksplisitt si at en integrasjon skal ha tilgang til sine systemer, for eksempel ved å gi svarut integrasjonen tilgang til en kommunes Fiks Innsyn tjeneste.\nEn slik autorisasjon kan når som helst trekkes tilbake.\nSterk autentisering (to-faktor) Sterk autentisering benyttes som standard.\nArkitektur- og trusselmodellering Alle komponenter i Fiks-plattformen blir analysert og risikovurdert underveis som en del av utviklingsprosessen. Resultatet er at alle komponenter i Fiks-plattformen er analysert for å analysere angrepsflaten, finne mulige problemer og gjøre tiltak for å demme opp for avdekkede svakheter. Metodisk gjøres det først en arkitekturmodellering og deretter en STRIDE-analyse.\nTredjepartsbiblioteker (open source) For å sikre oss som best vi kan at ikke vi drar med oss kjente feil inn i egne tjenester benytter vi en av dagens beste løsninger for dette, github sine sikkerhetstjenester \u0026ldquo;Github Security Advisories\u0026rdquo;, \u0026ldquo;Security Alerts\u0026rdquo; og \u0026ldquo;Automated pull requests for security updates\u0026rdquo;.\nBeskyttelse av data (kryptering) All kommunikasjon mellom Fiks-plattformen og integrasjoner/personer er kryptert med TLS. All data som lagres på disk er enten individuelt kryptert (for eksempel gjennom sikker lagring i Fiks Dokumentlager), eller lagres på krypterte filsystemer.\nSporbarhet (sikkerhetslogg/audit logging) Selv om grunnprinsippet er at det bare er innbyggeren selv som har tilgang til sine data vil noen tjenester gjør data om en person tilgjengelig for andre, for eksempel når en kommuneansatt gjør ett oppslag mot et nasjonalt register. I slike tilfeller vil dette bli dokumentert i tjenstebeskrivelsen, autorisert eksplisitt i Fiks-konfigurasjon, og underlagt audit-logging, slik at det blir mulig å se hvem som har hatt tilgang til hvilke data når, og under hvilken lovhjemmel tilgangen ble oppnådd.\nDenne loggen vil, der det er nødvendig, gjøres tilgjengelig for administrator i Fiks-organisasjonen.\nDrift av Fiks-plattformen Alle tjenester i Fiks-plattformen går gjennom både ingressfiltrering, WAF (web application firewall) og overvåkes av operative sikkerhetssentre i flere lag. Datasentrene Fiks-plattformen kjører på er begge ISO27001-sertifisert og det blir gjennomført årlige revisjoner av informasjonssikkerhet og personvern. Revisjonene blir gjennomført av tredjeparts revisorer etter revisjonsstandardene ISAE-3402 og ISAE-3000. Driftsmiljøet overvåkes av driftsleverandørens eget sikkerhetsoperasjonssenter og NorCERT.\nTest- og utviklingsmiljø All utvikling av Fiks-plattformen foregår i et eget test- og utviklingsnett (heretter testmiljøet). I testmiljøet benyttes kun testdata, dvs. at dette mijøet ikke inneholder kundedata. I testmiljøet skal det kun benyttes anonymiserte, avidentifiserte eller samtykkebaserte data. Alle endringer kjøres først ut i test- og utviklingsmiljøet, før det settes i produksjon. I testmiljøet kjøres blant annet akseptansetest før en vesentlig endring går i produksjon. Testmiljøet er også benyttet i forbindeles med tilgjengeliggjøring av og integrasjon mellom Fiks-plattformen og DHIS2 covid-19.\nLeverandøroppfølging Alle leverandørene til KS-Digitale fellestjenester følges opp med hensyn til ivaretakelse av informasjonssikkerhet og personvern og revideres i henhold til NSMs grunnprinsipper.\n"
},
{
	"uri": "/",
	"title": "KS Fiks dokumentasjon",
	"tags": [],
	"description": "",
	"content": "KS Fiks dokumentasjon På disse sidene finner du dokumentasjon av Fiks-plattformen og SvarUt-tjenesten. SvarUt-tjenesten er fortsatt ikke flyttet over på Fiks-plattformen og kjører derfor som en selvstendig applikasjon med sin egen konfigurasjon og sikkerhetsløsning. Over tid vil også SvarUt migreres over på Fiks-plattformen.\nDokumentasjonen du finner her er rettet mot deg som skal administrere plattformen på vegne av en kommune eller annen organisasjon, eller utvikle integrasjoner mot api-ene Fiks tilbyr.\nDet er utarbeidet et dokument som går igjennom fiks-plattformen. Dette kan lastes ned\nBrukerdokumentasjon Brukerdokumentasjon finner en her\nFeil Hvis du finner feil eller noe som ikke er beskrevet godt nok, setter vi pris på om du sender en e-post til fiks-utvikling@ks.no .\nAbonner på dokumentasjonsendringer For å abonnere på endringer i dokumentasjonen kan du benytte vår RSS-feed.\nSlack Vi anbefaler også alle integrasjonsutviklere å benytte vår Slack-kanal for spørsmål og kommentarer vedrørende Fiks-plattformen, send en e-post til fiks-utvikling@ks.no for invitasjon.\n"
},
{
	"uri": "/tjenester/kjoretoyregister/",
	"title": "Fiks kjøretøyregister",
	"tags": [],
	"description": "",
	"content": "Kort beskrivelse Fiks kjøretøyregister er en tjeneste for å gjøre oppslag i Statens Vegvesen sitt Kjøretøy register (Autosys). Fiks Kjøretøyregister speiler Kjøretøyoppslag og Kjøretøysøk tjenestene til Statens Vegvesen på Fiks-plattformen. Den gjør det mulig å slå opp et eller flere kjøretøy basert på kjennemerke, kuid (svv-identifikator), eller understellsnummer. Oppslaget vil gi informasjon om kjøretøyet og eierforhold på nåværende tidspunkt, eller på et spesifisert tidspunkt som angis i søket.\nTilgjengelige grensesnitt Grensesnitt Støtte Web portal Nei Maskin til maskin Api spec Hvordan tar jeg i bruk Fiks Kjøretøyregister Fiks Kjøretøyregister er en tjeneste for maskin-til-maskin integrasjon. For å ta i bruk Fiks Kjøretøyregister trenger du derfor at en leverandør av fagsystem utvikler en integrasjon til tjenesten.\nPå sikt vil det bli vurdert å utvikle et administrativt grensesnitt mot Fiks Kjøretøyregister for kommuneansatte.\nIntegrasjon API-kall gjøres i henhold til Swagger-spesifikasjonen til Statens Vegvesen, med følgende endringer:\nAutorisering skjer på fiks plattformen med et access token fra Maskinporten basert på organisasjonesn virksomhetssertifikat som beskrevet her. Token må ha scope \u0026ldquo;ks:fiks\u0026rdquo;, og headere for IntegrasjonId og IntegrasjonPassord må settes på requesten. Fiks-org som spørringen gjøres på vegne av blir en del av url\u0026rsquo;en for alle forespørsler. URL som skal benyttes er https://api.fiks.ks.no/kjoretoyregister/api/{fiksOrgId} hvor {fiksOrgId} er ID til organisasjonen spørringen gjøres på vegne av. Resten av url\u0026rsquo;en er som spesifisert for de enkelte endepunktene i Swagger-filen:\n/rest/distribusjon/kjoretoy/v2.0/bulk/kjennemerke /rest/distribusjon/kjoretoy/v2.0/bulk/kuid /rest/distribusjon/kjoretoy/v2.0/bulk/understellsnummer/{understellsnummer} Oppslag på understellsummer utføres med en GET request. Oppslag på kjennemerke og kuid utføres med en POST request hvor body inneholder en liste av id\u0026rsquo;er det skal søkes på. Eksempel forespørsel for kjennemerke på angitt dato:\n[ { \u0026#34;kjennemerke\u0026#34;: \u0026#34;br12345\u0026#34;, \u0026#34;dtg\u0026#34;: \u0026#34;2018-11-15T23:00:00.000+01:00\u0026#34; } ] For kjøretøysøk gjøres det en GET request med query parameter. F.eks for å søke på eier-navn:\n/rest/distribusjon/kjoretoy/v2.0/sok/eiernavn?navn=[navn] I testmiljøet (https://api.fiks.test.ks.no/kjoretoyregister/api/{fiksOrgId}) går alle api kall mot et syntetisk datasett hos SVV (https://autosys-kjoretoy-api.atlas.vegvesen.no/api-ui/index-kjoretoyoppslag.html#testmiljo).\nHvis du opplever feil som blir returnert med json fra SVV med f.eks en svvguid kan en kontakte api-kjoretoy@vegvesen.no.\n"
},
{
	"uri": "/tjenester/bekymringsmelding/",
	"title": "Fiks bekymringsmelding",
	"tags": [],
	"description": "",
	"content": "Kort beskrivelse Fiks bekymringsmelding er en portal laget for Norges innbyggere for å varsle bekymring ovenfor et barn til barnevernet. Løsningen består av to ulike skjema, ett for privat melder og ett for offentlige ansatte.\nBrukerne logger seg inn på portalen, fyller ut og sender inn bekymringsmeldingen. Løsningen vil deretter levere bekymringsmeldingen på en eller flere av følgende måter:\nDirekte i fagsystem (Strukturert informasjon) Manuell nedlastning, ustrukturert informasjon i digital form – PDF Tilsendt som brevpost Tilgjengelige grensesnitt Grensesnitt Støtte Web portal Ja Maskin til maskin Ja Beskrivelse av tjenesten Når bekymringsmeldingen er sendt vil systemet forsøke å levere den som strukturert data via Fiks-plattformen til kommunens fagsystem. Dersom kommunens fagsystem ikke støtter integrasjon mot Fiks IO finnes det en løsning for å laste ned bekymeringsmeldingen manuelt. Bekymringsmeldinger som ikke markeres som mottatt sendes ut som brevpost.\nTeknisk oversikt skisse Bekymringsmeldingen blir omgjort til strukturert data (JSON) for integrasjon mot fagsystem og ustrukturert data (PDF) til manuell nedlastning og for brevpost. All kommunikasjon mellom bruker og løsningen er kanalkryptert. I tillegg lagres både strukturert og ustrukturert data kryptert med mottakersystemets offentlige nøkkel (fagsystem, utskriftsleverandør, manuell nedlastning).\nPortalen tilbyr også et API hvor det er mulig å sende en bekymringsmelding fra fagsystemet til en annen kommunes barneverntjeneste.\nTeknisk beskrivelse av løsning og integrasjon Hvordan tar man i bruk Fiks Bekymringsmelding? Portalen inneholder to skjema, en for innbyggere og en for offentlig ansatte, som kan brukes for å melde inn bekymringsmeldinger.\nNoen ganger kan det være hensiktsmessig å ha skjema for offentlig melder som en integrert del av et eget fagsystem (eks: skole, politi, ol) og da kan man benytte API for bekymringsmelding for å implementere dette. API-et støtter maskin-til-maskin integrasjon både som produsent (avsender) av bekymringsmelding og konsument (mottaker) av bekymringsmelding. Ta kontakt med din leverandør av fagsystem og hør om de støtter integrasjon mot bekymringsmelding.\nDersom fagsystemet støtter integrasjon kan dere konfigurere bekymringsmeldingstjeneste til å konsumere og/eller produsere bekymringsmeldinger. Dersom fagsystem ikke støtter maskin-til-maskin integrasjon for å konsumere bekymringsmeldinger er det mulig å laste bekymringsmeldingene ned manuelt.\nDersom en bekymringsmelding ikke er lastet ned innen 2 virkedager vil den bli sendt ut som brevpost.\nFør løsningen kan tas i bruk må kommunen inngå en avtale om bruk.\nIntegrasjonsutvikling Fagsystemet kan produsere og sende inn bekymringsmeldinger til et API eller man kan benytte seg av å sende inn via skjema. Benyttes skjema så vil skjemaet produsere PDF og JSON-fil, men hvis fagsystemet skal sende inn til API, må fagsystemet sende med dette.\nInformasjon om generell integrasjonsutvikling mot Fiks, som blant annet autentisering, finner man her.\nVersjonering For å sikre at endringer i bekymringsmeldinger ikke påvirker kompatibiliteten for produsenter og mottakere, er det implementert versjonering. Fra og med versjon 2 av bekymringsmeldinger inkluderes et ekstra felt i kommune-apiet, stottetVersjon, som indikerer hvilken versjon mottakeren støtter. Mer om kommune-apiet finnes her.\nSystemet er designet med bakoverkompatibilitet i tankene, slik at støtten for en høyere versjon også innebærer støtte for tidligere versjoner. Dette betyr at hvis en mottaker støtter versjon 2, forventes det at de også støtter versjon 1.\n"
},
{
	"uri": "/tjenester/bekymringsmelding/bekymringsmelding_v1/",
	"title": "Fiks bekymringsmelding V1",
	"tags": [],
	"description": "",
	"content": "Fagsystem som konsument Ved bruk av Fiks IO som leveringskanal må fagsystemet støtte meldingsprotokollen no.ks.fiks.bekymringsmelding.v1, som er definert til bruk av bekymringsmeldinger. Meldingsprotokollen vil inneholde kontrakter i form av JSON-skjema som gjelder både for mottak og svar på Fiks IO-meldinger.\nTil fagsystem - mottak av bekymringsmeldinger Fagsystemet vil motta enten en privat bekymringsmelding, no.ks.fiks.bekymringsmelding.privat.v1, med en ASiC-E-fil i body eller en offentlig bekymringsmelding, no.ks.fiks.bekymringsmelding.offentlig.v1, med en ASiC-E-fil i body. I tillegg vil det være en header «bydel-ressurs-id», som vil være ID til bydelsressursen, og en header «bekymringsmelding-id» som vil være bekymringsmeldingens unike ID. I de fleste tilfeller kan man se bort fra disse.\nAsiC-E-filen er på navneformatet «FiksIO_encrypted_[FIKS_ORG_ID]_[BYDELSNUMMER].zip», hvor FIKS_ORG_ID er en unik ID for kommunen, mens bydelsnummeret vil være et tosifret tall. Er det en kommune uten bydeler, vil bydelsnummeret være «00».\nASiC-E-filen vil inneholde to filer, «bekymringsmelding.json» og «bekymringsmelding.pdf». «bekymringsmelding.json» er en JSON-fil definert i JSON-skjema for privat bekymringsmelding eller offentlig bekymringsmelding - avhengig om meldingstypen er en privat eller offentlig bekymringsmelding. «bekymringsmelding.pdf» vil være bekymringsmeldingen på PDF-format.\nFra fagsystem - kvittering på mottatt bekymringsmelding Når fagsystemet har importert og lagret bekymringsmeldingen må det sendes tilbake en kvittering som bekrefter mottatt bekymringsmelding, no.ks.fiks.bekymringsmelding.mottatt.v1, med tom body.\nDersom fagsystemet ikke klarer å lagre bekymringsmeldingen kan man sende tilbake en kvittering som signaliserer feil ved mottak, no.ks.fiks.bekymringsmelding.feilet.v1, med body bestående av en JSON-fil «feilmelding.json» med hva som gikk galt. JSON-skjema finnes her. Ved feil vil bekymringsmeldingen bli sendt som brevpost.\nFullstendig skjemadefinisjon med eksempler finner man her. Det anbefales at man setter ttl (time-to-live) for en Fiks IO-melding til 24 timer. Får man meldingstype no.ks.fiks.kvittering.tidsavbrudd, så trenger dere ikke sende noe tilbake, da vi alltid har en fallback til brevpost. Men det anbefales at man logger det, og sier fra så vi kan feilsøke. For mer informasjon om Fiks IO, se dokumentasjon for Fiks IO. Trondheim kommune har også laget en Fiks IO-klient i Go som er spesifikt rettet mot bekymringsmelding. Den finner man her.\nFagsystem som produsent Swagger-spesifikasjon for å sende inn bekymringsmeldinger via API finnes her: Bekymringsmelding mottak fagsystem og Bekymringsmelding kommune service. Merk at filene som skal sendes med, sendes som multipart request. Ikke alle Swagger-genererte klienter genererer dette riktig i henhold til OpenAPI 3.0-spesifikasjonen. Du kan se et eksempel på multipartforsendelse i Java her.\nFeltet \u0026ldquo;Leveringskanal\u0026rdquo;, jmf JSON-skjemaene, skal settes til navn på organisasjonen (Politiet, navnet på skolen, etc.) som sender bekymringsmeldingen. Feltet \u0026ldquo;Sendingstidspunkt\u0026rdquo; forventer ISO-8601 norsk tid uten tidssone, eksempelvis \u0026ldquo;2021-11-08T09:24:45\u0026rdquo;.\nFiler Det må sendes med to krypterte filer, en AsiC-E-fil og en PDF-fil. De offentlige nøklene som brukes ved kryptering hentes fra API-et Bekymringsmelding mottak fagsystem.\nAsiC-E-fil AsiC-E-filen må inneholde to filer, «bekymringsmelding.json» og «bekymringsmelding.pdf». «bekymringsmelding.json» er en JSON-fil definert i JSON-skjema for privat bekymringsmelding eller offentlig bekymringsmelding - avhengig om meldingstypen er en privat eller offentlig bekymringsmelding. Skjemadefinisjon med eksempler finner man her. AsiC-E-filen må være kryptert med mottakersystemets offentlige nøkkel.\nPDF-fil «bekymringsmelding.pdf» vil være selve bekymringsmeldingen på PDF-format og må være kryptert med printleverandørens offentlige nøkkel. Fagsystemet har ansvar for å lage PDF. Eksempler på PDF for privat melder og offentlig melder.\nSekvensdiagram 1 - 2. Før fagsystemet skal sende bekymringsmelding må det gjøres et oppslag på kommunenummer for å finne ut hvilke barnevernskontorer (bydeler) som støttes av løsningen. Returnerer liste med bydeler i kommunen. Dersom det returneres en tom liste har ikke kommunen aktivert løsningen. Dersom listen ikke er tom vil det alltid være et element (en bydel) som er satt opp som kan brukes dersom bydel/barnevernskontor er ukjent.\n3 - 4. Når kommune og bydel er valgt må fagsystemet hente krypteringsnøkler. Det returneres en liste med to elementer som inneholder krypteringsnøkler. Den ene nøkkelen brukes for å kryptere PDF-versjonen av bekymringsmeldingen slik at det er mulig å sende den som brevpost. Den andre nøkkelen brukes for å kryptere ASIC-E filen som inneholder både JSON-dokumentet og PDF-dokumentet for nedlastning via fagsystem, alternativt via manuell nedlastning.\n5 - 5. Fagsystemet må lage PDF basert på innholdet i bekymringsmeldingen. PDF må krypteres med printleverandør sin nøkkel.\n6 - 6. Fagsystemet må lage PDF og JSON-dokument basert på innholdet i bekymringsmeldingen. Både PDF og JSON-dokument må pakkes inn i ASiC-E-kontainer, som deretter krypteres med nøkkel for maskinintegrasjon.\n7 - 10. De krypterte filene (bekymringsmelding.pdf og asice.zip) sendes over til bekymringsmeldingsapiet som multipart-filer. Endepunkt bestemmes av om det er en privat melder eller offentlig melder som har skrevet bekymringsmeldingen. API-et returnerer en UUID som referanse på forsendelsen. Størrelsen på forsendelsen kan ikke overstige 5MB.\nEksempel på innsending (Java med Jersey client)\nStreamDataBodyPart bekymringsmeldingPdf = new StreamDataBodyPart(\u0026#34;bekymringsmelding\u0026#34;, {bekymringsmeldingPdfInputStream}, \u0026#34;bekymringsmelding.pdf\u0026#34;); StreamDataBodyPart asiceZip = new StreamDataBodyPart(\u0026#34;asice\u0026#34;, {bekymringsmeldingAsiceInputStream}, \u0026#34;asice.zip\u0026#34;); Client client = ClientBuilder.newBuilder().register(MultiPartFeature.class).build(); MultiPart multipart = new FormDataMultiPart().bodyPart(bekymringsmeldingPdf).bodyPart(asiceZip); client.target({url}) .request() .header(\u0026#34;IntegrasjonId\u0026#34;, {integrasjonId}) .header(\u0026#34;IntegrasjonPassord\u0026#34;, {integrasjonPassord}) .header(\u0026#34;Authorization\u0026#34;, \u0026#34;Bearer {token}\u0026#34;) .post(Entity.entity(multipart, multipart.getMediaType())); hvor:\nbekymringsmeldingPdfInputStream: InputStream av bekymringsmelding.pdf\nbekymringsmeldingAsiceInputStream: InputStream av asice.zip\nurl\nPrivat bekymringsmelding test: https://api.fiks.test.ks.no/bekymringsmelding/api/v1/mottak/fagsystem/{fraFiksOrgId}/{kommunenummer}/{bydelsnummer}/privat\nOffentlig bekymringsmelding test: https://api.fiks.test.ks.no/bekymringsmelding/api/v1/mottak/fagsystem/{fraFiksOrgId}/{kommunenummer}/{bydelsnummer}/offentlig\nPrivat bekymringsmelding prod: https://api.fiks.ks.no/bekymringsmelding/api/v1/mottak/fagsystem/{fraFiksOrgId}/{kommunenummer}/{bydelsnummer}/privat\nOffentlig bekymringsmelding prod: https://api.fiks.ks.no/bekymringsmelding/api/v1/mottak/fagsystem/{fraFiksOrgId}/{kommunenummer}/{bydelsnummer}/offentlig\nUrl-param fraFiksOrgId: Fiks Organisasjon ID til organisasjonen som fagsystemet sender meldinger på vegne av\nUrl-param kommunenummer: Kommunenummer man sender til\nUrl-param bydelsnummer: Bydelsnummer man sender til\nintegrasjonsId: Integrasjonsid i form av en UUID\nintegrasjonPassord: Integrasjonspassord\ntoken: Gyldig aksesstoken fra maskinporten\nHente status for sendt bekymringsmelding Et fagsystem kan hente status med tilhørende historikk for sendte bekymringsmeldinger via API-et Bekymringsmelding mottak fagsystem.\nEndepunktet /bekymringsmelding/api/v1/mottak/fagsystem/{fraFiksOrgId}/bekymringsmelding/{bekymringsmeldingId}/status returnerer en liste av alle hendelsene for den angitte bekymringsmelding-id-en. Hver hendelse inneholder en tilstand for bekymringsmeldingen, som kan inneholde følgende verdier:\nAKSEPTERT (alltid 1. tilstand) - Fiks Bekymringsmelding har mottatt og lagret bekymringsmeldingen. SENDT_FAGSYSTEM (alltid 2. tilstand) - Bekymringsmeldingen er sendt til fagsystemet til mottakeren. AVVIST_FAGSYSTEM - Fagsystemet har avvist mottak av bekymringsmeldingen. Fiks Bekymringsmelding vil automatisk sende denne til brevpost. SENDT_PRINT - Bekymringsmeldingen er sendt til printleverandør for å sende den med brevpost. AVVIST_PRINT - Printleverandøren kan ikke printe ut bekymringsmeldingen for brevpost. Fiks følger opp bekymringsmeldingen manuelt. LEVERT (alltid siste tilstand) - Bekymringsmeldingen er levert fagsystem eller sendt som brevpost til barnevernskontoret. LEVERT vil alltid være den siste endelige tilstanden til en bekymringsmelding. Da vil den enten ha blitt bekreftet mottatt til fagsystemet, eller i tilfelle man tidligere har mottatt SENDT_PRINT, så vil den ha blitt levert posten for levering som brevpost.\n"
},
{
	"uri": "/felles/integrasjoner/",
	"title": "Integrasjoner",
	"tags": [],
	"description": "",
	"content": "En integrasjon på Fiks-plattformen er en maskin-til-maskin klient som benytter tjenestelaget for å utføre oppgaver på vegne av en fiks-organisasjon. Dette kan for eksempel være et arkivsystem som sender saker gjennom Fiks SvarInn, eller et fagsystem som oppdaterer meldinger i Fiks Innsyn.\nHver Fiks-organisasjon oppretter sine egne integrasjoner - dette gjøres gjennom Fiks forvaltning konfigurasjon. Når man oppretter integrasjonen, definerer man hvilken organisasjon som skal ha rett til å sende forespørseler til Fiks-plattformen på vegne av denne. Organisasjonen kan være Fiks-organisasjonen selv, eller en tredjepart som har driftsansvar. Se under for detaljer om opprettelse av integrasjoner.\nEtter organisasjonen er opprettet må den autoriseres for å kunne handle på vegne av en Fiks-organisasjon. Om man for eksempel ønsker å autorisere en integrasjon for å indeksere meldinger Fiks Innsyn må det relevante privilegiet tildeles på konfigurasjonssiden for denne tjenesten.\nHvordan komme i gang med utviklingen Bestill virksomhetssertifikat fra comfides eller buypass for test. NB! På grunn av krav fra Digdir/Maskinporten kan du ikke bruke selvsignert sertifikat hverken i test eller produksjonsmiljø Vi må ha org.nr på kontoen hos ID-porten (samme som i virksomhetssertifikatet), slik at vi får gitt dere tilgang til \u0026ldquo;ks:fiks\u0026rdquo;-scopet. Sendes til fiks-utvikling@ks.no Følg oppskrift her for å lage klient hos idporten Send en e-post til fiks-utvikling@ks.no med e-postadresser som vil ha tilgang til vår Slack support-kanal. Vi liker best å ta support på Slack-chat. Har dere personinnlogginger i ID-porten test, send disse i en e-post til oss slik at vi kan sette opp test kommune/organisasjon i test. fiks-utvikling@ks.no Hvis ikke får dere testpersoner av oss. Ta kontakt på Slack-kanalen hvis dere står fast eller ønsker å få tilbakemelding på om dere bruker api-ene korrekt. Hvordan få tilgang i produksjon Bestill virksomhetsertifikat fra comfides (https://www.commfides.com/commfides-virksomhetssertifikat/) eller buypass ( https://www.buypass.no/produkter/virksomhetssertifikat-esegl ), hvis dere ikke har et. Send orgnr til oss (hovedorgnr til organisasjonen) det som ligger i virksomhetsertifikatet. fiks-utvikling@ks.no og si dere trenger tilgang til fiks. Bestill tilgang til Maskinporten/Idporten hos Digdir. For personinnlogga websider må du ha idporten, for applikasjoner der du ikke er logget inn via idporten må en ha maskinporten. For å opprette tilgang må en bruke selvbetjening: https://samarbeid.digdir.no/maskinporten/ta-i-bruk-maskinporten/97 Gå inn på https://minside-samarbeid.digdir.no/my-organisation/integrations/admin Følg oppskrift her for å lage klient hos idporten Gå til https://forvaltning.fiks.ks.no og lag en integrasjon. Og gi tilgang til de tjenestene applikasjonen trenger. Grensesnitt Integrasjoner mot Fiks-plattformen vil hovedsakelig benytte grensesnitt basert på REST/json.\nVi publiserer OpenAPI-Specification for alle api\u0026rsquo;er. I dag benyttes versjon 3.0, noen tjenester kan være fortsatt være på 2.0. Disse spesifikasjonene er nyttige både som dokumentasjon for rest-grensesnittet og som grunnlag for automatisk generering av klienter og modell-objekter. Dette kan for eksempel gjøres ved bruk av Swagger Codegen.\nKonfigurasjon En Fiks-organisasjon kan opprette egen integrasjoner gjennom Fiks konfigurasjon.\nSett autorisert organisasjon. Dette vil som regel være organisasjonen som drifter systemet som skal integreres, enten fiks-organisasjonen selv eller en tredjepart. Genererer servicepassord. Dette må opplyses for å autentisere integrasjonen, se under for detaljer. Tildel navn. Et visningsnavn for integrasjonen. Sett beskrivelse. En beskrivelse av hva integrasjonen er og hvilke oppgaver den løsner. Sett tjenester. Hvilke tjenester er denne integrasjonen aktuell for? Autentisering Integrasjoner autentiseres på to ulike måter: som \u0026ldquo;integrasjon\u0026rdquo; med OAuth 2.0, eller \u0026ldquo;integrasjon-person\u0026rdquo; m. Open Id Connect (OIDC). Fiks har laget klienter for å generere access token fra Maskinporten basert på et virksomhetssertifikat, en issuer (konto hos Difi) og ett eller flere scopes. Java-klient: https://github.com/ks-no/fiks-maskinporten, .net-klient: https://github.com/ks-no/fiks-maskinporten-client-dotnet.\nIntegrasjon Denne metoden benyttes for ren server til server integrasjon, for eksempel når et fagsystem skal laste opp meldinger til Fiks Innsyn. Organisasjonen henter et OAuth 2.0 access token med scope \u0026ldquo;ks:fiks\u0026rdquo; fra Maskinporten, basert på organisasjonens virksomhetssertifikat. Dokumentasjon for dette finnes her. Vi støtter i første omgang kun JWT access_tokens, dette må konfigureres hos ID-Porten. I tillegg til dette tokenet må man ha en header for integrasjonId og for integrasjonPassord.\nKallet mot Fiks-plattformtjenesten trenger dermed følgende HTTP headere:\nAuthorization: OAuth-2.0 Jwt Access token som bekrefter organisasjonens identitet, signert av ID-Porten. Scope skal være \u0026ldquo;ks:fiks\u0026rdquo;. IntegrasjonId: Id for integrasjonen, generert i Fiks-konfigurasjon. Org.nr i Jwt\u0026rsquo;en i Authorization header må være konfigurert som autorisert organisasjon for integrasjonen. IntegrasjonPassord: Passord for integrasjonen (fra Fiks-konfigurasjon) Integrasjon-person Denne metoden benyttes hvis en innbygger er logget inn på en server i en kommune, og man ønsker å gjøre en forespørsel på vegne av denne innbyggeren. Man trenger fortsatt integrasjon-ID og integrasjonpassord, men i stedet for virksomhetens access token sender man brukerens, innhentet med \u0026ldquo;ks:fiks\u0026rdquo; scope via OIDC fra ID-Porten.\nKallet mot Fiks-plattformtjenesten trenger dermed følgende HTTP headere:\nAuthorization: OAuth-2.0 Jwt Access token som bekrefter inbyggerens identitet (fnr), signert av ID-Porten. Scope skal være \u0026ldquo;ks:fiks\u0026rdquo;. IntegrasjonId: Id for integrasjonen, generert i Fiks-konfigurasjon. Orgnr i Jwt\u0026rsquo;en i Authorization header må være konfigurert som autorisert organisasjon for integrasjonen. IntegrasjonPassord: Passord for integrasjonen (fra fiks-konfigurasjon) http POST https://api.fiks.test.ks.no/innsyn-sok/api/v1/sok \\ \u0026#34;IntegrasjonId: \u0026lt;din integrasjon id\u0026gt;\u0026#34; \\ \u0026#34;IntegrasjonPassord: \u0026lt;ditt integrasjon passord\u0026#34; \\ \u0026#34;Authorization: Bearer \u0026lt;gyldig innbygger access token jwt fra id-porten\u0026gt;\u0026#34; Autorisering I tillegg må integrasjonen autoriseres for tilgang til en spesifikk tjeneste. Hvis for eksempel et fagsystem skal kunne laste opp meldinger til Fiks Innsyn må en administrator i kommunen benytte Fiks-Konfigurasjon for å legge til denne tilgangen hos den relvante kommunen.\nDette gjelder også for integrasjoner som leveres som en del av Fiks-plattformen. Skal SvarUt kunne indeksere forsendelse i Fiks Innsyn må også her kommunen eksplisitt autorisere dette.\nFeilmeldinger De fleste REST API-ene returnerer feilmeldinger på følgende format:\n{ \u0026#34;timestamp\u0026#34;: 1637218198035, \u0026#34;status\u0026#34;: 400, \u0026#34;error\u0026#34;: \u0026#34;Bad Request\u0026#34;, \u0026#34;errorId\u0026#34;: \u0026#34;3389ad1b-afa4-42e1-b6f8-76f63e560ad5\u0026#34;, \u0026#34;path\u0026#34;: \u0026#34;/tjeneste/api/v1/ressurs/123456\u0026#34;, \u0026#34;originalPath\u0026#34;: \u0026#34;/tjeneste/api/v1/ressurs\u0026#34;, \u0026#34;message\u0026#34;: \u0026#34;Beskrivelse av feilen\u0026#34;, \u0026#34;errorCode\u0026#34;: \u0026#34;FEILKODE\u0026#34;, \u0026#34;errorJson\u0026#34;: {\u0026#34;antall\u0026#34;:13} } timestamp - Tidspunktet feilen oppstod i millisekunder siden epoch. status - HTTP-statuskode, f.eks. 400 eller 500. error - Beskrivelse av HTTP-statuskoden, f.eks. Bad Request eller Internal Server Error. errorId - Intern id som brukes til å finne informasjon relatert til feilen under feilsøking. path - Path requesten ble gjort mot. originalPath - Vil i sjeldne feilsituasjoner være noe annet enn det som er satt i path, og ellers ikke være satt. message - Menneskelig lesbar beskrivelse av feilen som oppstod. errorCode - Tjenestespesifikk feilkode for maskinell tolkning. Vil i de fleste situasjoner ikke være satt. errorJson - Detaljer knyttet til errorCode i JSON-format. "
},
{
	"uri": "/tjenester/svarut/soapv11/",
	"title": "API: Integrasjon med SOAP",
	"tags": [],
	"description": "",
	"content": "SOAP APIene er deprecated, og det vil ikke komme noen ny versjon av eller ny funksjonalitet til disse. Vi anbefaler bruk av nyeste versjon av REST-APIet for nye integrasjoner.\nTilgang For å benytte web-tjenesten må en bruke HTTP Basic autentication med brukernavn(avsendernavn) og service-passord. Avsender opprettes av KS-SvarUt administrator/organisasjons administrator. Service-passordet genereres av avsender-ansvarlig via konfigurasjon-siden.\nNytt i denne versjonen EksponertFor: Gir tilgang til andre enn mottaker å laste ned filene. Feltet kunDigitalLevering er fjernet og erstattet med feltet leveringsmetode som er av type Leveringsmetode. Feltet er påkrevd og Leveringsmetode har tre verdier: STANDARD_SVARUT_LEVERANSE, KUN_DIGITAL_UTEN_LEVERANSEGARANTI og KUN_DIGITAL_UTEN_LEVERANSEGARANTI_MASSEUTSENDELSE SigneringsLogg returnerer nå dato og Signeringsstatus. Tjenester Forsendelsesservicet tilbyr følgende funksjonalitet:\nOperasjon Inndata Utdata Kort beskrivelse sendForsendelse Forsendelse ForsendelsesId Hovedtjeneste som sender inn forsendelse til ekspedering av KS-SvarUt. sendForsendelseMedId Forsendelse, ForsendelsesId ForsendelsesId Se sendForsendelse. startNyForsendelse ForsendelsesId Genererer forsendelsesid som brukes sammen med sendForsendelseMedId. retrieveForsendelsesStatus ForsendelsesId ForsendelsesStatus Henter status for en forsendelse. retrieveForsendelsesStatuser List\u0026lt;ForsendelsesId\u0026gt; List\u0026lt;ForsendelsesStatus\u0026gt; Henter status for flere forsendelser. retrieveForsendelsesHistorikk ForsendelsesId ForsendelsesHistorikk Henter historikk for en forsendelse, tilsvarer ekspederingsloggen i forsendelsesoversikten. retrieveSigneringsHistorikk ForsendelsesId SigneringsHistorikk Henter signeringshistorikk (logg) på en forsendelse som er markert for signering. retrieveSigneringsHistorikkForFlereForsendelser List\u0026lt;ForsendelsesId\u0026gt; List\u0026lt;SigneringsHistorikk\u0026gt; Henter signeringshistorikk for opp til 10 forsendelser. setForsendelseLestAvEksterntSystem LestAv Benyttes for å sette status til lest når dokumentet har blitt lest utenfor vårt system. retreiveForsendelsesTyper Set\u0026lt;String\u0026gt; Henter alle forsendelsestyper som kan brukes i SvarInn. retrieveMottakerSystemForOrgnr OrganisasjonsNummer List\u0026lt;MottakerForsendelsesTyper\u0026gt; Henter alle konfigurerte mottakersystem for orgnr. retrieveForsendelsesIderByEksternRef String List\u0026lt;ForsendelsesId\u0026gt; Henter liste med forsendelseider som har denne eksternRef. retrieveDokumentMetadata ForsendelsesId List\u0026lt;DokumentMetadata\u0026gt; Henter liste med informasjon om dokumentene til en forsendelse. Definisjonsfil (WSDL) for tjenesten finnes her https://svarut.ks.no/tjenester/forsendelseservice/ForsendelsesServiceV11?wsdl\nOperasjoner sendForsendelse Hovedtjeneste som sender inn forsendelse til ekspedering av KS-SvarUt.\nSendForsendelse for ekspedering i SvarUt. Hvis du får HTTP 200 ok er forsendelsen er mottat og akseptert av SvarUt. Dette betyr at vi da vil garantere levering til mottaker (kunDigital har ikke garantert levering). Hvis det skulle oppstå problemer vil avsender bli kontaktet. Dette betyr at jobben til avleverende system nå er ferdig.\nFeilmeldinger på tjeneste skal kunne presenteres for bruker. Det kan komme tekniske feilmeldinger, men da er disse greit å vise hvis de skal kontakte SvarUt for hjelp.\nsendForsendelseMedId Samme som sendForsendelse, men avsender setter forsendelsesid. Id må være av type UUID. Se sendForsendelse.\nstartNyForsendelse Genererer forsendelsesid (UUID) som brukes sammen med sendForsendelseMedId.\nretrieveForsendelsesStatus Henter status for en forsendelse. Denne bør brukers når det er behov for å vise status. Tenkt brukt f.eks om saksbehandler lurer på hva som er status på forsendelsen. Status kan endre seg på kort varsel, vi anbefaler derfor å ikke mellomlagre disse verdiene i eget system, men heller hente de når de skal vises.\nretrieveForsendelsesStatuser Henter status for flere forsendelseer. Samme som retrieveForsendelseStatus bare for flere forsendelser i samme kall.\nretrieveForsendelsesHistorikk Henter historikk for en forsendelse. Returnerer en liste med beskrivelse av hva som har skjedd og når det inntraff. Listen tilsvarer ekspederingsloggen i forsendelsesoversikten. Tenkt brukt hvis saksbehandler eller kundestøtte trenger å vite detaljene om en forsendelse.\nretrieveSigneringsHistorikk Henter signeringshistorikk for en gitt forsendelse.\nretrieveSigneringsHistorikkForFlereForsendelser Samme som retrieveSigneringshistorikk bare for flere forsendelser i samme kall, opp til 10 forsendelser.\nsetForsendelseLestAvEksterntSystem Setter status for en forsendelse til lest basert på forsendelsesId. Benyttes for å sette status til lest når dokumentet har blitt lest utenfor vårt system.\nretreiveForsendelsesTyper Henter alle forsendelsestyper som Svarinn-mottakersystem kan konfigureres til å bruke.\nretrieveMottakerSystemForOrgnr Henter mottakersystem som er konfigurert for orgnr. Kan brukes hvis en vil vite om mottaker har konfigurert SvarInn og til hvilket system det vil havne.\nretrieveForsendelsesIderByEksternRef Henter liste med forsendelseider som har denne eksternRef.\nretrieveDokumentMetadata Henter liste med informasjon om dokumentene til en forsendelse.\nModeller ForsendelsesId Felt Type Beskrivelse Validating id UUID Forsendelse Felt Type Beskrivelse Validering mottaker Adresse Addresse, full post adresse må være utfylt, for sending til Altinn må digitaladresse med orgnr/fødselsnr være utfylt. Støtte for utenlandske adresser. Ved signeringsoppdrag må PersonDigitalAdresse brukes. avgivendeSystem String Identifikator som identifiserer systemet som gjør web-service kallet, vil blant annet kunne benyttes for statistikk og feilsøking. Bruk følgende for sak/arkivsystemene: Doculive, Ephorte, ESA, 360 og Websak. For andre fagsystemer avtales dette med KS KommIT på svarut@ks.no. Obligatorisk felt. tittel String Tittel på forsendelsen. Tittel blir vist i tittelfeltet på melding til Altinn, og i listen over innkommende meldinger. Må være utfylt konteringsKode String Kode som beskriver faktureringskonto for forsendelsen. Kan benyttes for å gruppere meldingsstatistikk gjennom forvaltningsløsningen, og sendes videre til print-leverandør. ^[a-zA-Z0-9-.øæåØÆÅ]{0,20}$ leveringsmetode Leveringsmetode Dersom leveringsmetode er satt til en \u0026ldquo;kunDigital\u0026rdquo;-verdi blir leveransen kun forsøkt levert digitalt, ingen print og postlegging. Hvis dokumentet ikke kan leveres digital blir det ikke levert. Hvis KunDigitalLevering er valgt må fødselsnr eller orgnr være utfylt. kryptert boolean Settes til true dersom fil(ene) som sendes er kryptert. Dersom kryptering ikke er brukt må denne være satt til false. Se kodeeksempler for eksempel på kryptering. Det må være kryptert med CMS med svarut sin publickey. Den offentlige nøkkelen PROD, Den offentlige nøkkelen for TEST utskriftsKonfigurasjon UtskriftsKonfigurasjon Konfigurasjon for hvordan dokumentet skal printes, dobbeltsidig, fargeprint krevNiva4Innlogging boolean Forsendelsen krever nivå 4-innlogging for å kunne lastes ned eller signeres. Disse forsendelsene må være kryptert. metadataFraAvleverendeSystem NoarkMetadataFraAvleverendeSaksSystem Noark5 metadata fra avleverende system metadataForImport NoarkMetadataForImport Noark5 metadata som stemmer med mottakende system. Kan brukes til å legge dokumentet på rett sak. svarSendesTil Adresse Dersom feltet settes må full postadresse være utfylt. Dette er adressen det skal sendes til dersom en ønsker å svare på forsendelsen. En eventuell adresse som fylles inn her vil overstyre adressen fra avsenderens forsidekonfigurasjon. Den vil også fremkomme på forsiden av brevet dersom forsendelsen sendes i posten. svarPaForsendelse ForsendelsesId Forsendelsesid til forsendelse dette er et svar på. dokumenter List Rekkefølgen er rekkefølgen de kommer i brevet. Total filstørrelse inntil 350MB er støttet når det skal printes. Ellers er det ikke begrensning. lenker List Rekkefølgen er samme som de vil komme i brevet. Kan være tom. forsendelsesType String Fritekst felt for å kunne identifisere forsendelse type. eksternReferanse String Ekstern id for forsendelsen, ingen sjekk på innhold i SvarUt. Det vil komme mulighet for å hente ut forsendelser i søk og via api på eksternref. svarPaForsendelseLink boolean Dersom dette feltet settes til true vil forsendelsen avvises om svarSendesTil ikke inneholder en gyldig adresse med organisasjonsnummer. Hvis forsendelsen aksepteres og sendes digitalt, vil det genereres en lenke hvor mottaker kan sende et svar tilbake til adressen spesifisert i svarSendesTil. signeringUtloper Date Angi hvor lenge signeringsoppdraget er gyldig, minimum 1 dag. Må angis ved signeringsforsendelser signaturType SignaturType Velge mellom autentisert eller avansert signering. Må angis ved signeringsforsendelser eksponertFor List Orgnr og fødselsnr i liste får også log å laste ned forsendelse filene. LestAv Felt Type Beskrivelse Validering forsendelsesId ForsendelsesId lestAvFodselsNummer String navnPaEksterntSystem String datoLest Date OrganisasjonsNummer Felt Type Beskrivelse Validering id String ForsendelsesStatus Felt Type Beskrivelse Validering forsendelsesId ForsendelsesId sisteStatusEndring Date status Status Status Verdi Beskrivelse MOTTATT Et kall mottatt på forsendelses-service. En id blir tildelt forsendelsen. AKSEPTERT Meldingen er validert og forsendelsesfil dannet. KLAR_FOR_MOTTAK Venter på at forsendelse skal bli lastet ned av mottaker. VARSLET Et varsel om forsendelsen er sendt til varslingstjenesten. LEST En forsendelse er lest når hele forsendelsesfilen er lastet ned av mottaker. SENDT_PRINT Forsendelsen er blitt overført til printleverandør. SENDT_DIGITALT Forsendelsen er motatt og sendt slik den skal. Ikke blitt lest enda. Forsendelser med denne status vil kun leveres digitalt, og vil aldri gå til print. SENDT_SDP Forsendelsen er motatt og sendt til Sikker digital postkasse. LEVERT_SDP Forsendelsen er motatt og sendt til Sikker digital postkasse. Vi har motatt Leveringskvittering fra SDP. Forsendelsen skal da være tilgjengelig for mottaker. PRINTET Printkvittering mottatt fra printleverandør eller manuell print bekreftet(via webgrensesnitt). AVVIST Forsendelsen er ikke validert pga. manglende/korrupt metadata, eller fordi forsendelsesfil ikke kunne dannes. IKKE_LEVERT Kun digital leveranse hvor vi ikke har klart å levere forsendelsen. MANUELT_HANDTERT Forsendelsen er manuelt avsluttet, f.eks. pga en feilsituasjon. ForsendelsesHistorikk Felt Type Beskrivelse Validering hendelsesLogger List\u0026lt;HendelsesLogg\u0026gt; SigneringsHistorikk Felt Type Beskrivelse Validering forsendelsesId ForsendelsesId logg List\u0026lt;SigneringsLogg\u0026gt; MottakerForsendelsesTyper Felt Type Beskrivelse Validering organisasjonsNummer OrganisasjonsNummer forsendelsesType String mottakerSystem String mottakerId String niva Integer DokumentMetadata Felt Type Beskrivelse Validering mimeType String filnavn String kanSigneres Boolean Bare en fil kan signeres og skal være av type PDF Validerer at maks ett dokument pr forsendelse har flagget slått på sizeInBytes Long sha256hash String dokumentType String nedlasningsUrl String signeringsUrl String ekstraMetadata List\u0026lt;Entry\u0026gt; inneholderPersonsensitivInformasjon Boolean HendelsesLogg Felt Type Beskrivelse Validering tidspunkt String hendelse String SigneringsLogg Felt Type Beskrivelse Validering tidspunkt Date type Signeringsstatus hendelse String Adresse Felt Type Beskrivelse Validering postAdresse PostAdresse Adressen forsendelsen sendes til dersom den går via brevpost Kan ikke være null digitalAdresse DigitalAdresse Se OrganisasjonDigitalAdresse og PersonDigitalAdresse PostAdresse Felt Type Beskrivelse Validering navn String Navn på mottaker Må være utfylt. adresse1 String Adresselinje1 adresse2 String Adresselinje2 adresse3 String Adresselinje3 postSted String Poststed Må være utfylt dersom forsendelsen ikke er kun digital. postNummer String Postnummer Må være utfylt dersom forsendelsen ikke er kun digital. Fire siffer for norske adresser. land String Land Må være utfylt dersom forsendelsen ikke er kun digital. DigitalAdresse Se OrganisasjonDigitalAdresse og PersonDigitalAdresse\nOrganisasjonDigitalAdresse Felt Type Beskrivelse Validering organisasjonsNummer OrganisasjonsNummer Må være utfylt for å kunne levere til altinn. PersonDigitalAdresse Felt Type Beskrivelse Validering fodselsNummer String Må være utfylt for å kunne levere til altinn. Ved signeringsoppdrag må dette feltet være utfylt. UtskriftsKonfigurasjon Felt Type Beskrivelse Validering utskriftMedFarger boolean tosidig boolean NoarkMetadataFraAvleverendeSaksSystem Felt Type Beskrivelse Validering saksSekvensNummer Integer saksAar Integer journalAar Integer journalSekvensNummer Integer journalPostNummer Integer journalPostType String journalStatus String journalDato Date dokumentetsDato Date tittel String saksBehandler String ekstraMetadata List\u0026lt;Entry\u0026gt; NoarkMetadataForImport Felt Type Beskrivelse Validering saksSekvensNummer Integer saksAar Integer journalPostType String journalStatus String dokumentetsDato Date tittel String Dokument Felt Type Beskrivelse Validering filnavn String Filnavn er for intern bruk, må være unikt i en forsendelse. Max 226 tegn. Må ikke inneholde mappe, kun filnavn. (ingen / eller ) Disse tegnene er også ugyldige \u0026quot; \u0026lt; \u0026gt; ? * | : De har andre funksjoner i windows og kan ikke brukes i filnavn på windows. Skiller ikke mellom store og små bokstaver i filnavnet. mimeType String Mimetype på være application/pdf hvis den skal til print. Kun digital levering er valgt kan vi ta imot annet. Kun application/pdf hvis den skal til print skalSigneres Boolean Angir om dokumentet skal signeres Bare et dokument kan signeres og må være av type PDF dokumentType String Fritekstfelt som kan brukes til å fortelle noe om dokumentTypen til feltet. Kan brukes til noark4 dokumenttyper data DataHandler Fildata giroarkSider Set\u0026lt;\\Integer\u0026gt; Liste med sidetall som skal printes på gult giroark. Digital versjon vil få grått giroark. Første side er 1. ekskluderesFraUtskrift Boolean Dette dokumentet blir ikke med i utskrift av forsendelsen. Brukes til filer som kun er interessant for digital levering. F.eks xml, video eller lyd filer ekstraMetadata List\u0026lt;Entry\u0026gt; Brukes til andre data som avsender vil ha med i forsendelsen inneholderPersonsensitivInformasjon Boolean Brukes for å gjøre mottaker oppmerksom på at dokumentet kan inneholde sensitiv informasjon Lenke Felt Type Beskrivelse Validering urlLenke String Selve lenken til dokument/nettside Må være utfylt og være i gyldig lenke format, altså (http/https/ftp)://(nettside).(com/no/ etc) urlTekst String Må være utfylt ledeTekst String Teksten som kommer før lenken i brevet SignaturType Verdi Beskrivelse AUTENTISERT_SIGNATUR AVANSERT_SIGNATUR Entry Felt Type Beskrivelse Validering key String value String Leveringsmetode Verdi Beskrivelse STANDARD_SVARUT_LEVERANSE Standard leveringsmetode og vil oppføre seg på samme måte som om feltet kunDigitalLevering var satt til usann KUN_DIGITAL_UTEN_LEVERANSEGARANTI Vil avvise forsendelser til privatpersoner dersom KRR ikke finner vedkommende eller vedkommende har reservert seg KUN_DIGITAL_UTEN_LEVERANSEGARANTI_MASSEUTSENDELSE Vil oppføre seg på samme måte som om feltet kunDigitalLevering var satt til sann Signeringsstatus Verdi Beskrivelse AVVIST_AV_SVARUT VENTER_SIGNERING SIGNERT_AV_MOTTAKER AVVIST_AV_MOTTAKER UTLOPT "
},
{
	"uri": "/tjenester/svarut/integrasjon/restv1/",
	"title": "REST V1",
	"tags": [],
	"description": "",
	"content": "Tilgang For å benytte web-tjenesten må en bruke HTTP Basic autentication med brukernavn og service-passord. Avsender opprettes, og passord genereres, av administrator for SvarUt via Fiks konfigurasjon.\nNytt i denne versjonen Erstatter SOAP-tjenesten. Endepunkter Base URL: /tjenester/api/forsendelse/v1\nUrl Method Input Utdata Kort beskrivelse /sendForsendelse POST Forsendelse ForsendelsesId Hovedtjeneste som sender inn forsendelse til ekspedering av KS-SvarUt. /startNyForsendelse POST ForsendelsesId Genererer forsendelsesid som brukes sammen med sendForsendelseMedId. /{id}/sendForsendelse POST Forsendelse, ForsendelsesId ForsendelsesId Se sendForsendelse. /{id}/status GET ForsendelsesId ForsendelsesStatus Henter status for en forsendelse. /{id}/dokumentMetadata GET ForsendelsesId List\u0026lt;DokumentMetadata\u0026gt; Henter liste med informasjon om dokumentene til en forsendelse. /{id}/historikk GET ForsendelsesId ForsendelsesHistorikk Henter historikk for en forsendelse, tilsvarer ekspederingsloggen i forsendelsesoversikten. /{id}/signeringhistorikk GET ForsendelsesId SigneringsHistorikk Henter signeringshistorikk (logg) på en forsendelse som er markert for signering. /{id}/settLest POST LestAv Benyttes for å sette status til lest når dokumentet har blitt lest utenfor vårt system. /statuser POST List\u0026lt;ForsendelsesId\u0026gt; List\u0026lt;ForsendelsesStatus\u0026gt; Henter status for flere forsendelser. /forsendelseTyper GET List\u0026lt;String\u0026gt; Henter alle forsendelsestyper som kan brukes i SvarInn. /mottakersystem GET Optional query parameters: organisasjonsNummer, forsendelsesType, niva List\u0026lt;MottakerForsendelsesTyper\u0026gt; Henter alle mottakersystem. Kan filtreres på organisasjonsnummer, forsendelsestype og nivå. /mottakersystem/{orgnr} GET OrganisasjonsNummer List\u0026lt;MottakerForsendelsesTyper\u0026gt; Henter alle konfigurerte mottakersystem for orgnr. /eksternref/{eksternref} String List\u0026lt;ForsendelsesId\u0026gt; Henter liste med forsendelseider som har denne eksternRef. Klientbibliotek laget i Java finnes her: https://github.com/ks-no/svarut-rest-klient\nFeilmeldinger Beskrivelse av feilmeldinger\nVIKTIG! /sendForsendelse bør ha readtimeout på 16min. SvarUT har Timeout på 15min. SvarUt kan ta i mot ganske store filer, derfor er denne timeouten så høg.\nContent-Type må være \u0026lsquo;multipart/form-data\u0026rsquo; Første part må være name=\u0026ldquo;forsendelse\u0026rdquo; med JSON\nParts med dokumenter må være content-type application/octet-stream\nEksempel på forsendelse JSON Dette er ment som eksempel på JSON som sendes inn sammen med dokumenter. Utvidet beskrivelse av felter finnes lenger ned på siden.\n{ \u0026#34;mottaker\u0026#34;: { \u0026#34;postAdresse\u0026#34;: { \u0026#34;navn\u0026#34;: \u0026#34;Ole Olsen\u0026#34;, \u0026#34;adresse1\u0026#34;: \u0026#34;Gamleveien 1\u0026#34;, \u0026#34;postNummer\u0026#34;: \u0026#34;5258\u0026#34;, \u0026#34;postSted\u0026#34;: \u0026#34;Poststed\u0026#34; }, \u0026#34;digitalAdresse\u0026#34;: { \u0026#34;fodselsNummer\u0026#34;: \u0026#34;12345678912\u0026#34; } }, \u0026#34;eksponertFor\u0026#34;: [], \u0026#34;avgivendeSystem\u0026#34;: \u0026#34;S002-SAK\u0026#34;, \u0026#34;tittel\u0026#34;: \u0026#34;Tittel for sak\u0026#34;, \u0026#34;kunDigitalLevering\u0026#34;: false, \u0026#34;kryptert\u0026#34;: false, \u0026#34;utskriftsKonfigurasjon\u0026#34;: { \u0026#34;utskriftMedFarger\u0026#34;: false, \u0026#34;tosidig\u0026#34;: false }, \u0026#34;krevNiva4Innlogging\u0026#34;: false, \u0026#34;dokumenter\u0026#34;: [ { \u0026#34;filnavn\u0026#34;: \u0026#34;doc.pdf\u0026#34;, \u0026#34;mimeType\u0026#34;: \u0026#34;application/pdf\u0026#34;, \u0026#34;skalSigneres\u0026#34;: false, \u0026#34;ekskluderesFraUtskrift\u0026#34;: false } ], \u0026#34;lenker\u0026#34;: [], \u0026#34;svarPaForsendelseLink\u0026#34;: false } Request eksempel Dette er eksempel på oppbygging av en gyldig request med multipart\nPOST /tjenester/api/forsendelse/v1/sendForsendelse HTTP/1.1 Host: svarut.fiks.test.ks.no Authorization: Basic QXVkdW5UZXN0ZXJBdnNlbmRlcjpk..... Content-Type: multipart/form-data; boundary=----WebKitFormBoundary7MA4YWxkTrZu0gW ------WebKitFormBoundary7MA4YWxkTrZu0gW Content-Disposition: form-data; name=\u0026#34;forsendelse\u0026#34; { \u0026#34;mottaker\u0026#34;: { \u0026#34;postAdresse\u0026#34;: { \u0026#34;navn\u0026#34;: \u0026#34;Ole Olsen\u0026#34;, \u0026#34;adresse1\u0026#34;: \u0026#34;Gamleveien 1\u0026#34;, \u0026#34;postNummer\u0026#34;: \u0026#34;5258\u0026#34;, \u0026#34;postSted\u0026#34;: \u0026#34;Poststed\u0026#34; }, \u0026#34;digitalAdresse\u0026#34;: { \u0026#34;fodselsNummer\u0026#34;: \u0026#34;12345678912\u0026#34; } }, \u0026#34;eksponertFor\u0026#34;: [], \u0026#34;avgivendeSystem\u0026#34;: \u0026#34;S002-SAK\u0026#34;, \u0026#34;tittel\u0026#34;: \u0026#34;Tittel for sak\u0026#34;, \u0026#34;kunDigitalLevering\u0026#34;: false, \u0026#34;kryptert\u0026#34;: false, \u0026#34;utskriftsKonfigurasjon\u0026#34;: { \u0026#34;utskriftMedFarger\u0026#34;: false, \u0026#34;tosidig\u0026#34;: false }, \u0026#34;krevNiva4Innlogging\u0026#34;: false, \u0026#34;dokumenter\u0026#34;: [ { \u0026#34;filnavn\u0026#34;: \u0026#34;sample.pdf\u0026#34;, \u0026#34;mimeType\u0026#34;: \u0026#34;application/pdf\u0026#34;, \u0026#34;skalSigneres\u0026#34;: false, \u0026#34;ekskluderesFraUtskrift\u0026#34;: false } ], \u0026#34;lenker\u0026#34;: [], \u0026#34;svarPaForsendelseLink\u0026#34;: false } ------WebKitFormBoundary7MA4YWxkTrZu0gW Content-Disposition: form-data; name=\u0026#34;sample.pdf\u0026#34;; filename=\u0026#34;sample.pdf\u0026#34; Content-Type: application/pdf ------WebKitFormBoundary7MA4YWxkTrZu0gW-- Modeller Datamodellene for REST-servicen finnes i JSON spec på https://github.com/ks-no/svarut-rest-klient/tree/master/svarut-rest-klient/json.\nForsendelsesId Felt Type Beskrivelse Validering id UUID Forsendelse Felt Type Beskrivelse Validering mottaker Adresse Addresse, full post adresse må være utfylt, for sending til Altinn må digitaladresse med orgnr/fødselsnr være utfylt. Støtte for utenlandske adresser. Ved signeringsoppdrag må PersonDigitalAdresse brukes. avgivendeSystem String Identifikator som identifiserer systemet som gjør web-service kallet, vil blant annet kunne benyttes for statistikk og feilsøking. Bruk følgende for sak/arkivsystemene: Doculive, Ephorte, ESA, 360 og Websak. For andre fagsystemer avtales dette med KS KommIT på svarut@ks.no. Obligatorisk felt. tittel String Tittel på forsendelsen. Tittel blir vist i tittelfeltet på melding til Altinn, og i listen over innkommende meldinger. Må være utfylt konteringsKode String Kode som beskriver faktureringskonto for forsendelsen. Kan benyttes for å gruppere meldingsstatistikk gjennom forvaltningsløsningen, og sendes videre til print-leverandør. ^[a-zA-Z0-9-.øæåØÆÅ]{0,20}$ kunDigitalLevering boolean Dersom denne settes til true vil forsendelsen ikke under noen omstendigheter bli printet. INGEN GARANTI OM LEVERANSE. Vi prøver så godt vi kan, men funker ingen digitale kanaler får avsender ingen tilbakemelding. Brukes typisk til reklame. kryptert boolean Settes til true dersom fil(ene) som sendes er kryptert. Dersom kryptering ikke er brukt må denne være satt til false. Se kodeeksempler for eksempel på kryptering. Det må være kryptert med CMS med svarut sin publickey. Den offentlige nøkkelen PROD, Den offentlige nøkkelen for TEST utskriftsKonfigurasjon UtskriftsKonfigurasjon Konfigurasjon for hvordan dokumentet skal printes, dobbeltsidig, fargeprint krevNiva4Innlogging boolean Forsendelsen krever nivå 4-innlogging for å kunne lastes ned eller signeres. Disse forsendelsene må være kryptert. metadataFraAvleverendeSystem NoarkMetadataFraAvleverendeSaksSystem Noark5 metadata fra avleverende system metadataForImport NoarkMetadataForImport Noark5 metadata som stemmer med mottakende system. Kan brukes til å legge dokumentet på rett sak. svarSendesTil Adresse Dersom feltet settes må full postadresse være utfylt. Dette er adressen det skal sendes til dersom en ønsker å svare på forsendelsen. En eventuell adresse som fylles inn her vil overstyre adressen fra avsenderens forsidekonfigurasjon. Den vil også fremkomme på forsiden av brevet dersom forsendelsen sendes i posten. svarPaForsendelse ForsendelsesId Forsendelsesid til forsendelse dette er et svar på. dokumenter List Rekkefølgen er rekkefølgen de kommer i brevet. Total filstørrelse inntil 350MB er støttet når det skal printes. Ellers er det ikke begrensning. lenker List Rekkefølgen er samme som de vil komme i brevet. Kan være tom. forsendelsesType String Fritekst felt for å kunne identifisere forsendelse type. eksternReferanse String Ekstern id for forsendelsen, ingen sjekk på innhold i SvarUt. Det vil komme mulighet for å hente ut forsendelser i søk og via api på eksternref. svarPaForsendelseLink boolean Dersom dette feltet settes til true vil forsendelsen avvises om svarSendesTil ikke inneholder en gyldig adresse med organisasjonsnummer. Hvis forsendelsen aksepteres og sendes digitalt, vil det genereres en lenke hvor mottaker kan sende et svar tilbake til adressen spesifisert i svarSendesTil. signeringUtloper Date Angi hvor lenge signeringsoppdraget er gyldig, minimum 1 dag. Må angis ved signeringsforsendelser signaturType SignaturType Velge mellom autentisert eller avansert signering. Må angis ved signeringsforsendelser eksponertFor List Orgnr og fødselsnr i liste får også log å laste ned forsendelse filene. taushetsbelagtPost boolean Dersom denne settes til true vil forsendelsen, om den går til Altinn og mottaker er en organisasjon, sendes til tjenesten for taushetsbelagt post. Les mer om tilgangsstyring for taushetsbelagt post på https://minside.kommune.no/tbp. LestAv Felt Type Beskrivelse Validering forsendelsesId ForsendelsesId lestAvFodselsNummer String navnPaEksterntSystem String datoLest Date OrganisasjonsNummer Felt Type Beskrivelse Validering id String ForsendelsesStatus Felt Type Beskrivelse Validering forsendelsesId ForsendelsesId sisteStatusEndring Date status Status Status Verdi Beskrivelse MOTTATT Et kall mottatt på forsendelses-service. En id blir tildelt forsendelsen. AKSEPTERT Meldingen er validert og forsendelsesfil dannet. KLAR_FOR_MOTTAK Venter på at forsendelse skal bli lastet ned av mottaker. VARSLET Et varsel om forsendelsen er sendt til varslingstjenesten. LEST En forsendelse er lest når hele forsendelsesfilen er lastet ned av mottaker. SENDT_PRINT Forsendelsen er blitt overført til printleverandør. SENDT_DIGITALT Forsendelsen er motatt og sendt slik den skal. Ikke blitt lest enda. Forsendelser med denne status vil kun leveres digitalt, og vil aldri gå til print. SENDT_SDP Forsendelsen er motatt og sendt til Sikker digital postkasse. LEVERT_SDP Forsendelsen er motatt og sendt til Sikker digital postkasse. Vi har motatt Leveringskvittering fra SDP. Forsendelsen skal da være tilgjengelig for mottaker. PRINTET Printkvittering mottatt fra printleverandør eller manuell print bekreftet(via webgrensesnitt). AVVIST Forsendelsen er ikke validert pga. manglende/korrupt metadata, eller fordi forsendelsesfil ikke kunne dannes. IKKE_LEVERT Kun digital leveranse hvor vi ikke har klart å levere forsendelsen. MANUELT_HANDTERT Forsendelsen er manuelt avsluttet, f.eks. pga en feilsituasjon. ForsendelsesHistorikk Felt Type Beskrivelse Validering hendelsesLogger List\u0026lt;HendelsesLogg\u0026gt; SigneringsHistorikk Felt Type Beskrivelse Validering forsendelsesId ForsendelsesId logg List\u0026lt;SigneringsLogg\u0026gt; MottakerForsendelsesTyper Felt Type Beskrivelse Validering organisasjonsNummer OrganisasjonsNummer forsendelsesType String mottakerSystem String mottakerId String niva Integer DokumentMetadata Felt Type Beskrivelse Validering mimeType String filnavn String kanSigneres Boolean Bare en fil kan signeres og skal være av type PDF Validerer at maks ett dokument pr forsendelse har flagget slått på sizeInBytes Long sha256hash String dokumentType String nedlasningsUrl String signeringsUrl String ekstraMetadata List\u0026lt;Entry\u0026gt; inneholderPersonsensitivInformasjon Boolean HendelsesLogg Felt Type Beskrivelse Validering tidspunkt String hendelse String SigneringsLogg Felt Type Beskrivelse Validering tidspunkt Date type Signeringsstatus hendelse String Adresse Felt Type Beskrivelse Validering postAdresse PostAdresse Adressen forsendelsen sendes til dersom den går via brevpost Kan ikke være null digitalAdresse DigitalAdresse Se OrganisasjonDigitalAdresse og PersonDigitalAdresse PostAdresse Felt Type Beskrivelse Validering navn String Navn på mottaker Må være utfylt. adresse1 String Adresselinje1 adresse2 String Adresselinje2 adresse3 String Adresselinje3 postSted String Poststed Må være utfylt dersom forsendelsen ikke er kun digital. postNummer String Postnummer Må være utfylt dersom forsendelsen ikke er kun digital. Fire siffer for norske adresser. land String Land Må være utfylt dersom forsendelsen ikke er kun digital. DigitalAdresse Se OrganisasjonDigitalAdresse og PersonDigitalAdresse\nOrganisasjonDigitalAdresse Felt Type Beskrivelse Validering organisasjonsNummer OrganisasjonsNummer Må være utfylt for å kunne levere til altinn. PersonDigitalAdresse Felt Type Beskrivelse Validering fodselsNummer String Må være utfylt for å kunne levere til altinn. Ved signeringsoppdrag må dette feltet være utfylt. UtskriftsKonfigurasjon Felt Type Beskrivelse Validering utskriftMedFarger boolean tosidig boolean NoarkMetadataFraAvleverendeSaksSystem Felt Type Beskrivelse Validering saksSekvensNummer Integer saksAar Integer journalAar Integer journalSekvensNummer Integer journalPostNummer Integer journalPostType String journalStatus String journalDato Date dokumentetsDato Date tittel String saksBehandler String ekstraMetadata List\u0026lt;Entry\u0026gt; NoarkMetadataForImport Felt Type Beskrivelse Validering saksSekvensNummer Integer saksAar Integer journalPostType String journalStatus String dokumentetsDato Date tittel String Dokument Felt Type Beskrivelse Validering filnavn String Filnavn er for intern bruk, må være unikt i en forsendelse. Max 226 tegn. Må ikke inneholde mappe, kun filnavn. (ingen / eller ) Disse tegnene er også ugyldige \u0026quot; \u0026lt; \u0026gt; ? * | : De har andre funksjoner i windows og kan ikke brukes i filnavn på windows. Skiller ikke mellom store og små bokstaver i filnavnet. mimeType String Mimetype på være application/pdf hvis den skal til print. Kun digital levering er valgt kan vi ta imot annet. Kun application/pdf hvis den skal til print skalSigneres Boolean Angir om dokumentet skal signeres Bare et dokument kan signeres og må være av type PDF dokumentType String Fritekstfelt som kan brukes til å fortelle noe om dokumentTypen til feltet. Kan brukes til noark4 dokumenttyper giroarkSider Set\u0026lt;Integer\u0026gt; Liste med sidetall som skal printes på gult giroark. Digital versjon vil få grått giroark. Første side er 1. ekskluderesFraUtskrift Boolean Dette dokumentet blir ikke med i utskrift av forsendelsen. Brukes til filer som kun er interessant for digital levering. F.eks xml, video eller lyd filer ekstraMetadata List\u0026lt;Entry\u0026gt; Brukes til andre data som avsender vil ha med i forsendelsen inneholderPersonsensitivInformasjon Boolean Brukes for å gjøre mottaker oppmerksom på at dokumentet kan inneholde sensitiv informasjon Lenke Felt Type Beskrivelse Validering urlLenke String Selve lenken til dokument/nettside Må være utfylt og være i gyldig lenke format, altså (http/https/ftp)://(nettside).(com/no/ etc) urlTekst String Må være utfylt ledeTekst String Teksten som kommer før lenken i brevet SignaturType Verdi Beskrivelse AUTENTISERT_SIGNATUR AVANSERT_SIGNATUR Entry Felt Type Beskrivelse Validering key String value String Leveringsmetode Verdi Beskrivelse STANDARD_SVARUT_LEVERANSE Standard leveringsmetode og vil oppføre seg på samme måte som om feltet kunDigitalLevering var satt til usann KUN_DIGITAL_UTEN_LEVERANSEGARANTI Vil avvise forsendelser til privatpersoner dersom KRR ikke finner vedkommende eller vedkommende har reservert seg KUN_DIGITAL_UTEN_LEVERANSEGARANTI_MASSEUTSENDELSE Vil oppføre seg på samme måte som om feltet kunDigitalLevering var satt til sann Signeringsstatus Verdi Beskrivelse AVVIST_AV_SVARUT VENTER_SIGNERING SIGNERT_AV_MOTTAKER AVVIST_AV_MOTTAKER UTLOPT "
},
{
	"uri": "/tjenester/dokumentlager/",
	"title": "Fiks dokumentlager",
	"tags": [],
	"description": "",
	"content": "Kort beskrivelse Dokumentlager-tjenesten lar kommunen og andre Fiks-organisasjoner laste opp dokumenter. Ved opplasting autoriseres en eller flere personer og/eller organisasjoner for tilgang til dokumentet. Det er også mulig å laste opp dokumenter med en begrenset levetid, slik at det blir gjort utilgjengelig når denne tiden utløper.\nEn Fiks-organisasjon kan organisere sine dokumenter ved bruk av det som kalles kontoer. Alle dokumenter som lastes opp vil tilhøre en konto. Om man vil bruke en eller flere kontoer er helt opp til hver organisasjon. Kontoer administreres gjennom konfigurasjonsgrensesnittet, hvor man også finner statistikk for diskbruk, metadata for dokumenter, med mer.\nDokumentlageret vil bli benyttet av flere Fiks-tjenester: SvarUt, SvarInn, Digisos og Innsyn, men det kan også benyttes av en Fiks-organisasjons egne integrasjoner.\nTilgjengelige grensesnitt Grensesnitt Støtte Web portal Nei Maskin til maskin Ja Beskrivelse av tjenesten Dokumentlageret fungerer på følgende måte:\nEn laster opp metadata om dokumentet. Her spesifiseres blant annet hvem dokumentet skal eksponeres for, dokumentets levetid, osv. En laster opp dokumentdata Dokumentet blir tilgjengelig for alle som er autorisert til å se det Dokumentet kan bli utilgjengeliggjort og slettet av en av grunnene spesifisert under Det er tre forskjellige måter et dokument kan bli slettet på:\nManuelt gjennom webgrensesnitt eller API Ved at dokumentets levetid utløper Dersom kontoen dokumentet hører til blir slettet Når et dokument slettes vil metadata fortsette å eksistere, men selve dokumentet vil ikke lenger være tilgjengelig.\nKlienter For å gjøre det enklere å ta i bruk Dokumentlageret har KS utviklet en klient for opplasting og nedlasting. Denne støtter blant annet klient-side kryptering ved opplasting.\nPer i dag finnes denne klienten kun for Java, med en egen modul for konfigurering via Spring Boot. Kode og dokumentasjon finnes på GitHub: https://github.com/ks-no/fiks-dokumentlager-klient\nIntegrasjonsutvikling Alle operasjoner i dokumentlageret utføres på en konto, som er en ressurs som hører til dokumentlager-tjenesten til en Fiks-organisasjon. Hvordan disse organiseres er opp til hver organisasjon. Man kan ha én konto for alt, eller dele det opp over mange, slik at man for eksempel kan gi forskjellige tilganger for hver konto.\nDe vanlige autentiseringsreglene for Fiks-plattformen gjelder for denne tjenesten, men i tillegg må integrasjonen ha rett til å laste opp dokumenter på en dokumentlager konto. Disse tilgangene tildeles som vanlig gjennom konfigurasjonsgrensesnittet, men må gis på kontonivå. Dersom man har flere kontoer, men ønsker å gi en integrasjon tilgang til flere av disse må tilgang gis på hver enkelt konto.\nOpplasting Opplasting gjøres med en POST-request mot følgende URL:\nTest: https://api.fiks.test.ks.no/dokumentlager/api/v1/{fiksOrganisasjonId}/kontoer/{kontoId}/dokumenter/ Prod: https://api.fiks.ks.no/dokumentlager/api/v1/{fiksOrganisasjonId}/kontoer/{kontoId}/dokumenter/ Ved vellykket opplasting returneres et JSON objekt som inneholder ID for det opplastede dokumentet:\n{ \u0026#34;id\u0026#34;: \u0026#34;9dba7b9e-8fb8-4589-ae3e-740897852a6b\u0026#34; } URL for nedlasting ligger i Location-header på returnert 201 CREATED respons, eller her:\nTest https://minside.fiks.test.ks.no/dokumentlager/nedlasting/{id} https://minside.fiks.test.ks.no/dokumentlager/nedlasting/niva4/{id} (Krever nivå 4 innlogging) Prod https://minside.kommune.no/dokumentlager/nedlasting/{id} https://minside.kommune.no/dokumentlager/nedlasting/niva4/{id} (Krever nivå 4 innlogging) Metadata Metadata for dokumenter legges i multipart med navn metadata og defineres i JSON. Content-Type må på multiparten må settes til application/json. Et eksempel er vist under (ttl og tilgjengeligTil kan ikke settes samtidig):\n{ \u0026#34;dokumentnavn\u0026#34;: \u0026#34;dokument.pdf\u0026#34;, \u0026#34;mimetype\u0026#34;: \u0026#34;application/pdf\u0026#34;, \u0026#34;ttl\u0026#34;: 86400, \u0026#34;tilgjengeligTil\u0026#34;: \u0026#34;2023-05-04T08:05:17+02:00\u0026#34;, \u0026#34;sikkerhetsniva\u0026#34;: 3, \u0026#34;korrelasjonsid\u0026#34;: \u0026#34;fa315d73-7ed0-4192-99d1-4049f47e2200\u0026#34;, \u0026#34;eksponertFor\u0026#34;: [ { \u0026#34;type\u0026#34;: \u0026#34;PERSON\u0026#34;, \u0026#34;fnr\u0026#34;: \u0026#34;12345679810\u0026#34; }, { \u0026#34;type\u0026#34;: \u0026#34;INTEGRASJON\u0026#34;, \u0026#34;id\u0026#34;: \u0026#34;249e3fde-e3d8-435e-835f-16a432598c10\u0026#34; }, { \u0026#34;type\u0026#34;: \u0026#34;ORGANISASJON\u0026#34;, \u0026#34;orgnr\u0026#34;: \u0026#34;123456789\u0026#34; }, { \u0026#34;type\u0026#34;: \u0026#34;AUTORISASJON\u0026#34;, \u0026#34;privilegium\u0026#34;: \u0026#34;EN.TILGANG\u0026#34;, \u0026#34;ressurs\u0026#34;: \u0026#34;77e0d6b5-f2cd-4f54-80bb-723c598026da\u0026#34; } ] } Dokumentnavn - Dokumentets navn, ved nedlasting gjennom en browser vil dette bli satt som default navn på filen som lagres på disk MIME type - Dokumenttype på gyldig MIME-format. Se https://developer.mozilla.org/en-US/docs/Web/HTTP/Basics_of_HTTP/MIME_types TTL - Hvor mange sekunder etter opplasting dokumentet skal være tilgjengelig. Ved utløp blir dokumentet utilgjengeliggjort og slettes. En negativ verdi betyr at dokumentet aldri vil slettes. Kan ikke settes sammen med tilgjengeligTil, men en av disse må settes. Tilgjengelig til - Tidspunkt for når dokumentet utløper og skal slettes på ISO 8601-format. Opplastingen vil bli avvist dersom tidspunktet er i fortiden. Kan ikke settes sammen med ttl, men en av disse må settes. Sikkerhetsniva - Sikkerhetsnivå som skal kreves ved nedlasting av dokument. Ved nivå 4 kreves kryptering hos klient før opplasting. Se https://eid.difi.no/nb/sikkerhet-og-informasjonskapsler/ulike-sikkerhetsniva Korrelasjonsid - Id som kan brukes til å indikere at flere dokumenter hører sammen. Feltet er ikke påkrevd. Eksponert for - Liste over aktører som skal ha tilgang til å laste ned dokumentet. Kan være følgende typer: Person - Eksponeres for en persons fødselsnummer. En gyldig ID-porten innlogging for en person med dette fødselsnummeret vil ha lov til å laste ned dokumentet. Integrasjon - Eksponeres for en UUID som identifiserer en integrasjon. En klient innlogget med integrasjonsid, integrasjonspassord og virksomhetssertifikatet som er autentisert til å bruke integrasjonen vil ha lov til å laste ned dokumentet. Organisasjon - Eksponeres for et organisasjonsnummer. Personer med Post/arkiv- eller Kommunale tjenester-rollen i Altinn på dette organisasjonsnummeret vil ha lov til å laste ned dokumentet. Autorisasjon - Eksponeres for et \u0026ldquo;privilegium, ressurs\u0026rdquo;-par. Personer eller integrasjoner med gitt privilegium på gitt ressurs vil ha lov til å laste ned dokumentet. Dokument Dokumentdata legges i multipart med navn dokument.\nDersom ikke kryptert query parameter er satt til true vil dokumentet krypteres av tjenesten før det lagres. Dersom man ønsker å laste opp dokumenter på nivå 4, eller bare ønsker ende-til-ende-kryptering ved opplasting, må dette flagget settes til true, og dokumentet må krypteres med dokumentlagerets public-key før opplasting. Uavhengig av hva man velger vil alle dokumenter være kryptert etter opplasting, og vil kun dekrypteres når en aktør som er autorisert til å laste ned dokumentet laster det ned.\nPublic-keyen kan hentes med en GET-request mot følgende endepunkt:\nTest: https://api.fiks.test.ks.no/dokumentlager/api/v1/public-key Prod: https://api.fiks.ks.no/dokumentlager/api/v1/public-key Responskoder 201 Created - Dokumentet ble lastet opp. Body inneholder metadata:\n{ \u0026#34;id\u0026#34;: \u0026#34;5636b391-41e7-4504-ab3c-1f3df122b483\u0026#34;, \u0026#34;dokumentnavn\u0026#34;: \u0026#34;dokument.pdf\u0026#34;, \u0026#34;mimeType\u0026#34;: \u0026#34;application/pdf\u0026#34;, \u0026#34;ukryptertStorrelse\u0026#34;: 29765, \u0026#34;kryptertStorrelse\u0026#34;: 30680 } Url for personnedlasting returneres i Location-header: Location: https://minside.kommune.no/dokumentlager/nedlasting/5636b391-41e7-4504-ab3c-1f3df122b483\n400 Bad Request - Request er ikke i henhold til spesifikasjonen.\n403 Forbidden - Integrasjonen har ikke nødvendige tilganger til å laste opp dokumenter på spesifisert konto og organisasjon.\n404 Not Found - Fant ingen konto med spesifisert id for organisasjonen.\n410 Gone - Konto er slettet.\nEksempel (cURL) curl -X POST https://api.fiks.test.ks.no/dokumentlager/api/v1/{fiksOrganisasjonId}/kontoer/{kontoId}/dokumenter/ \\ -H \u0026#34;Authorization: Bearer \u0026lt;gyldig access token\u0026gt;\u0026#34; \\ -H \u0026#34;IntegrasjonId: \u0026lt;integrasjonsid\u0026gt;\u0026#34; \\ -H \u0026#34;IntegrasjonPassord: \u0026lt;integrasjonspassord\u0026gt;\u0026#34; \\ -F \u0026#34;metadata={\\\u0026#34;dokumentnavn\\\u0026#34;:\\\u0026#34;dokument.pdf\\\u0026#34;,\\\u0026#34;mimetype\\\u0026#34;:\\\u0026#34;application/pdf\\\u0026#34;,\\\u0026#34;ttl\\\u0026#34;:3600,\\\u0026#34;eksponertFor\\\u0026#34;:[{\\\u0026#34;type\\\u0026#34;:\\\u0026#34;PERSON\\\u0026#34;, \\\u0026#34;fnr\\\u0026#34;:\\\u0026#34;\u0026lt;fødselsnummer\u0026gt;\\\u0026#34;}],\\\u0026#34;sikkerhetsniva\\\u0026#34;:3};type=application/json\u0026#34; \\ -F \u0026#34;dokument=@dokument.pdf\u0026#34; Oppdatering av metadata Oppdatering av metadata gjøres med en PATCH-request mot følgende URL:\nTest: https://api.fiks.test.ks.no/dokumentlager/api/v1/{fiksOrganisasjonId}/kontoer/{kontoId}/dokumenter/{dokumentId} Prod: https://api.fiks.ks.no/dokumentlager/api/v1/{fiksOrganisasjonId}/kontoer/{kontoId}/dokumenter/{dokumentId} Kun tilgjengeligTil kan oppdateres, enten via ttl, som oppgis i sekunder relativt til tid for oppdateringen, eller via tilgjengeligTil, som er et eksakt tidspunkt i fremtiden. Eksempel på request body:\n{ \u0026#34;ttl\u0026#34;: 3600, \u0026#34;tilgjengeligTil\u0026#34;: \u0026#34;2023-05-04T10:42:40.943+02:00\u0026#34; } Responskoder 200 OK - Dokumentet med spesifisert id oppdatert. Body inneholder id og oppdatert data: { \u0026#34;id\u0026#34;: \u0026#34;bd393a3a-78f6-4902-af96-b604c24850a6\u0026#34;, \u0026#34;tilgjengeligTil\u0026#34;: \u0026#34;2023-05-04T10:41:13.485+02:00\u0026#34; } 400 Bad Request - Request er ikke i henhold til spesifikasjonen. 403 Forbidden - Integrasjonen har ikke nødvendige tilganger til å slette dokumenter på spesifisert konto og organisasjon. 404 Not Found - Fant ikke et dokument med oppgitt id, eller spesifisert konto og organisasjon. 410 Gone - Dokumentet er allerede slettet, eller konto er slettet. Sletting av dokument Integrasjoner som er autorisert til å laste opp dokumenter har også lov til å slette.\nDette gjøres med en DELETE-request mot følgende URL:\nTest: https://api.fiks.test.ks.no/dokumentlager/api/v1/{fiksOrganisasjonId}/kontoer/{kontoId}/dokumenter/{dokumentId} Prod: https://api.fiks.ks.no/dokumentlager/api/v1/{fiksOrganisasjonId}/kontoer/{kontoId}/dokumenter/{dokumentId} Responskoder 200 OK - Dokumentet med spesifisert id ble slettet. Tom body. 400 Bad Request - Request er ikke i henhold til spesifikasjonen. 403 Forbidden - Integrasjonen har ikke nødvendige tilganger til å slette dokumenter på spesifisert konto og organisasjon. 404 Not Found - Fant ikke et dokument med oppgitt id, eller spesifisert konto og/eller organisasjon. 410 Gone - Dokumentet er allerede slettet, eller konto er slettet. Sletting via korrelasjonsid Integrasjoner kan også slette alle dokumenter med en gitt korrelasjonsid som er lastet opp på en konto de har tilgang til.\nDette gjøres med en DELETE-request mot følgende URL:\nTest: https://api.fiks.test.ks.no/dokumentlager/api/v1/{fiksOrganisasjonId}/kontoer/{kontoId}/korrelasjonsid/{korrelasjonsid} Prod: https://api.fiks.ks.no/dokumentlager/api/v1/{fiksOrganisasjonId}/kontoer/{kontoId}/korrelasjonsid/{korrelasjonsid} Responskoder 204 No Content - Korrelasjonsid er markert som slettet. Dokumentene vil bli slettet asynkront. 400 Bad Request - Request er ikke i henhold til spesifikasjonen. 403 Forbidden - Integrasjonen har ikke nødvendige tilganger til å slette dokumenter på spesifisert konto og organisasjon. 404 Not Found - Fant ikke spesifisert konto og/eller organisasjon. 410 Gone - Kontoen er slettet. Feilmeldinger Beskrivelse av feilmeldinger\n"
},
{
	"uri": "/felles/testmiljo/",
	"title": "Testmiljø",
	"tags": [],
	"description": "",
	"content": "Fiks-plattformens testmiljø er tilgjengelig for kommuner,fylkeskommuner og leverandører som ønsker å teste konfigurasjon og integrasjoner. Miljøet er koblet til eksterne testmiljøer for integrerte komponenter: ID-Porten, Altinn og KS-SvarUt. Man kan dermed teste hele løpet, komplett med autentisering og autorisering.\nFiks test blir brukt til å verifisere endringer før de går i produksjon, og vil derfor ligge litt foran produksjon. Vi har ingen garantier på oppetid i test, men forsøker å holde eventuell nedetid så kort som mulig.\nMerk at testmiljøet ikke har de samme sikkerhetsgarantiene som produksjon - det er dermed viktig at man ikke benytter sensitive data under test.\nTilgang til testmiljøet Send e-post til fiks@ks.no for tilgang til testmiljøet. Send gjerne med eventuelle eksisterende testbrukere i ID-porten, slik at disse kan gjenbrukes for tilganger på Fiks-plattformen.\nHvor er testmiljøet? Konfigurasjon finnes på https://forvaltning.fiks.test.ks.no.\nMin kommune finnes på https://min.fiks.test.ks.no/\nBekymringsmelding finnes på https://bekymringsmelding.fiks.test.ks.no/\nSvarUt finnes på https://test.svarut.ks.no\nBenytt ID-porten testbruker for innlogging.\nSvarUt data for \u0026ldquo;Post fra kommunen\u0026rdquo; på Minside kommer fra SvarUts testmiljø. Aktiver avsendere i Fiks-konfigurasjonen for å indeksere meldinger.\nEkstrene lenker til andre testmiljø Altinn test: https://tt02.altinn.no\nDigipost test: https://www.difitest.digipost.no/\neBoks test: http://demo2-www.e-boks.no/default.aspx\nidporten brukerprofil (krr og valg av postkasse): https://brukerprofil-ver2.difi.no/minprofil/ og https://brukerprofil-ver1.difi.no/minprofil/ Må endres begge plasser da forskjellige tjenester bruker forskjellig testmiljø hos digdir.\nTenor testdata for f.eks folkeregisteret: https://www.skatteetaten.no/skjema/testdata/\nPersoninnlogging Alle testbrukere dere får fra oss har \u0026ldquo;Min Id\u0026rdquo;-innlogging i ID-Porten. Her anbefaler vi at dere setter telefonnummer og e-post slik at brukeren kan låses opp om noen skulle sperre den med feilede innloggingsforsøk.\nIntegrasjoninnlogging For å kunne teste integrasjoner mot Fiks-plattformen sitt testmiljø må organisasjonen ha tilgang til Maskinporten. For å få dette må en henvende seg til servicedesk@digdir.no og sende med orgnr i fra testvirksomhetssertifikat.\nFor at Maskinportklienten skal kunne kommunisere med Fiks sitt testmiljø må den opprettes i Maskinporten Ver2 og ha lagt til ks:fiks-scopet. Om dette scopet mangler fra listen kan dere oppgi deres orgnr til fiks@ks.no.\n"
},
{
	"uri": "/tjenester/svarut/integrasjon/soapv10/",
	"title": "SOAP V10",
	"tags": [],
	"description": "",
	"content": "Tilgang For å benytte web-tjenesten må en bruke HTTP Basic autentication med brukernavn(avsendernavn) og service-passord. Avsender opprettes av KS-SvarUt administrator/organisasjons administrator. Service-passordet genereres av avsender-ansvarlig via konfigurasjon-siden.\nNytt i denne versjonen Ny operasjon: retrieveDokumentMetadata. Denne er lagt inn for å kunne hente ut informasjon om bl.a. hvor dokumentet kan lastes ned og eventuelt lenke til signeringsoppdrag. Endret operasjon: setForsendelseLestAvEksterntSystem. Denne er oppdatert til å ta imot objekt av type LestAv. Endret operasjoner: retrieveForsendelsesStatus og retrieveForsendelsesStatuser, begge returnerer nå samme modell-objekt (ForsendelsesStatus). Sistnevnte operasjon har pakket resultatet i en liste. Forsendelsesid og organisasjonsnummer er kapslet inn i egne typer. Modell-objektet StatusResult heter nå ForsendelsesStatus. Gamle ForsendelseStatus heter nå Status og blir returnert som en del av ForsendelsesStatus. Modell-objektet Brevpost er ikke lenger i bruk og er fjernet. Modell-objektet PrintKonfigurasjon heter nå UtskriftsKonfigurasjon. Alle modell-objektene er oppdatert til å bruke camelCase på felt og attributter. Tjenester Forsendelsesservicet tilbyr følgende funksjonalitet:\nOperasjon Inndata Utdata Kort beskrivelse sendForsendelse Forsendelse ForsendelsesId Hovedtjeneste som sender inn forsendelse til ekspedering av KS-SvarUt. sendForsendelseMedId Forsendelse, ForsendelsesId ForsendelsesId Se sendForsendelse. startNyForsendelse ForsendelsesId Genererer forsendelsesid som brukes sammen med sendForsendelseMedId. retrieveForsendelsesStatus ForsendelsesId ForsendelsesStatus Henter status for en forsendelse. retrieveForsendelsesStatuser List\u0026lt;ForsendelsesId\u0026gt; List\u0026lt;ForsendelsesStatus\u0026gt; Henter status for flere forsendelser. retrieveForsendelsesHistorikk ForsendelsesId ForsendelsesHistorikk Henter historikk for en forsendelse, tilsvarer ekspederingsloggen i forsendelsesoversikten. retrieveSigneringsHistorikk ForsendelsesId SigneringsHistorikk Henter signeringshistorikk (logg) på en forsendelse som er markert for signering. retrieveSigneringsHistorikkForFlereForsendelser List\u0026lt;ForsendelsesId\u0026gt; List\u0026lt;SigneringsHistorikk\u0026gt; Henter signeringshistorikk for opp til 10 forsendelser. setForsendelseLestAvEksterntSystem LestAv Benyttes for å sette status til lest når dokumentet har blitt lest utenfor vårt system. retreiveForsendelsesTyper Set\u0026lt;String\u0026gt; Henter alle forsendelsestyper som kan brukes i SvarInn. retrieveMottakerSystemForOrgnr OrganisasjonsNummer List\u0026lt;MottakerForsendelsesTyper\u0026gt; Henter alle konfigurerte mottakersystem for orgnr. retrieveForsendelsesIderByEksternRef String List\u0026lt;ForsendelsesId\u0026gt; Henter liste med forsendelseider som har denne eksternRef. retrieveDokumentMetadata ForsendelsesId List\u0026lt;DokumentMetadata\u0026gt; Henter liste med informasjon om dokumentene til en forsendelse. Definisjonsfil (WSDL) for tjenesten finnes her https://svarut.ks.no/tjenester/forsendelseservice/ForsendelsesServiceV10?wsdl\nOperasjoner sendForsendelse Hovedtjeneste som sender inn forsendelse til ekspedering av KS-SvarUt.\nSendForsendelse for ekspedering i SvarUt. Hvis du får HTTP 200 ok er forsendelsen er mottat og akseptert av SvarUt. Dette betyr at vi da vil garantere levering til mottaker (kunDigital har ikke garantert levering). Hvis det skulle oppstå problemer vil avsender bli kontaktet. Dette betyr at jobben til avleverende system nå er ferdig.\nFeilmeldinger på tjeneste skal kunne presenteres for bruker. Det kan komme tekniske feilmeldinger, men da er disse greit å vise hvis de skal kontakte SvarUt for hjelp.\nsendForsendelseMedId Samme som sendForsendelse, men avsender setter forsendelsesid. Id må være av type UUID. Se sendForsendelse.\nstartNyForsendelse Genererer forsendelsesid (UUID) som brukes sammen med sendForsendelseMedId.\nretrieveForsendelsesStatus Henter status for en forsendelse. Denne bør brukers når det er behov for å vise status. Tenkt brukt f.eks om saksbehandler lurer på hva som er status på forsendelsen. Status kan endre seg på kort varsel, vi anbefaler derfor å ikke mellomlagre disse verdiene i eget system, men heller hente de når de skal vises.\nretrieveForsendelsesStatuser Henter status for flere forsendelseer. Samme som retrieveForsendelseStatus bare for flere forsendelser i samme kall.\nretrieveForsendelsesHistorikk Henter historikk for en forsendelse. Returnerer en liste med beskrivelse av hva som har skjedd og når det inntraff. Listen tilsvarer ekspederingsloggen i forsendelsesoversikten. Tenkt brukt hvis saksbehandler eller kundestøtte trenger å vite detaljene om en forsendelse.\nretrieveSigneringsHistorikk Henter signeringshistorikk for en gitt forsendelse.\nretrieveSigneringsHistorikkForFlereForsendelser Samme som retrieveSigneringshistorikk bare for flere forsendelser i samme kall, opp til 10 forsendelser.\nsetForsendelseLestAvEksterntSystem Setter status for en forsendelse til lest basert på forsendelsesId. Benyttes for å sette status til lest når dokumentet har blitt lest utenfor vårt system.\nretreiveForsendelsesTyper Henter alle forsendelsestyper som Svarinn-mottakersystem kan konfigureres til å bruke.\nretrieveMottakerSystemForOrgnr Henter mottakersystem som er konfigurert for orgnr. Kan brukes hvis en vil vite om mottaker har konfigurert SvarInn og til hvilket system det vil havne.\nretrieveForsendelsesIderByEksternRef Henter liste med forsendelseider som har denne eksternRef.\nretrieveDokumentMetadata Henter liste med informasjon om dokumentene til en forsendelse.\nModeller ForsendelsesId Felt Type Beskrivelse Validering id UUID Forsendelse Felt Type Beskrivelse Validering mottaker Adresse Addresse, full post adresse må være utfylt, for sending til Altinn må digitaladresse med orgnr/fødselsnr være utfylt. Støtte for utenlandske adresser. Ved signeringsoppdrag må PersonDigitalAdresse brukes. avgivendeSystem String Identifikator som identifiserer systemet som gjør web-service kallet, vil blant annet kunne benyttes for statistikk og feilsøking. Bruk følgende for sak/arkivsystemene: Doculive, Ephorte, ESA, 360 og Websak. For andre fagsystemer avtales dette med KS KommIT på svarut@ks.no. Obligatorisk felt. tittel String Tittel på forsendelsen. Tittel blir vist i tittelfeltet på melding til Altinn, og i listen over innkommende meldinger. Må være utfylt konteringsKode String Kode som beskriver faktureringskonto for forsendelsen. Kan benyttes for å gruppere meldingsstatistikk gjennom forvaltningsløsningen, og sendes videre til print-leverandør. ^[a-zA-Z0-9-.øæåØÆÅ]{0,20}$ kunDigitalLevering boolean Vi leverer kun digitalt, ingen print og postlegging. Hvis dokumentet ikke kan leveres digital blir det ikke levert. Hvis KunDigitalLevering er valgt må fødselsnr eller orgnr være utfylt. kryptert boolean Settes til true dersom fil(ene) som sendes er kryptert. Dersom kryptering ikke er brukt må denne være satt til false. Se kodeeksempler for eksempel på kryptering. Det må være kryptert med CMS med svarut sin publickey. Den offentlige nøkkelen PROD, Den offentlige nøkkelen for TEST utskriftsKonfigurasjon UtskriftsKonfigurasjon Konfigurasjon for hvordan dokumentet skal printes, dobbeltsidig, fargeprint krevNiva4Innlogging boolean Forsendelsen krever nivå 4-innlogging for å kunne lastes ned eller signeres. Disse forsendelsene må være kryptert. metadataFraAvleverendeSystem NoarkMetadataFraAvleverendeSaksSystem Noark5 metadata fra avleverende system metadataForImport NoarkMetadataForImport Noark5 metadata som stemmer med mottakende system. Kan brukes til å legge dokumentet på rett sak. svarSendesTil Adresse Dersom feltet settes må full postadresse være utfylt. Dette er adressen det skal sendes til dersom en ønsker å svare på forsendelsen. En eventuell adresse som fylles inn her vil overstyre adressen fra avsenderens forsidekonfigurasjon. Den vil også fremkomme på forsiden av brevet dersom forsendelsen sendes i posten. svarPaForsendelse ForsendelsesId Forsendelsesid til forsendelse dette er et svar på. dokumenter List Rekkefølgen er rekkefølgen de kommer i brevet. Total filstørrelse inntil 350MB er støttet når det skal printes. Ellers er det ikke begrensning. lenker List Rekkefølgen er samme som de vil komme i brevet. Kan være tom. forsendelsesType String Fritekst felt for å kunne identifisere forsendelse type. eksternReferanse String Ekstern id for forsendelsen, ingen sjekk på innhold i SvarUt. Det vil komme mulighet for å hente ut forsendelser i søk og via api på eksternref. svarPaForsendelseLink boolean Dersom dette feltet settes til true vil forsendelsen avvises om svarSendesTil ikke inneholder en gyldig adresse med organisasjonsnummer. Hvis forsendelsen aksepteres og sendes digitalt, vil det genereres en lenke hvor mottaker kan sende et svar tilbake til adressen spesifisert i svarSendesTil. signeringUtloper Date Angi hvor lenge signeringsoppdraget er gyldig, minimum 1 dag. Må angis ved signeringsforsendelser signaturType SignaturType Velge mellom autentisert eller avansert signering. Må angis ved signeringsforsendelser LestAv Felt Type Beskrivelse Validering forsendelsesId ForsendelsesId lestAvFodselsNummer String navnPaEksterntSystem String datoLest Date OrganisasjonsNummer Felt Type Beskrivelse Validering id String ForsendelsesStatus Felt Type Beskrivelse Validering forsendelsesId ForsendelsesId sisteStatusEndring Date status Status Status Verdi Beskrivelse MOTTATT Et kall mottatt på forsendelses-service. En id blir tildelt forsendelsen. AKSEPTERT Meldingen er validert og forsendelsesfil dannet. KLAR_FOR_MOTTAK Venter på at forsendelse skal bli lastet ned av mottaker. VARSLET Et varsel om forsendelsen er sendt til varslingstjenesten. LEST En forsendelse er lest når hele forsendelsesfilen er lastet ned av mottaker. SENDT_PRINT Forsendelsen er blitt overført til printleverandør. SENDT_DIGITALT Forsendelsen er motatt og sendt slik den skal. Ikke blitt lest enda. Forsendelser med denne status vil kun leveres digitalt, og vil aldri gå til print. SENDT_SDP Forsendelsen er motatt og sendt til Sikker digital postkasse. LEVERT_SDP Forsendelsen er motatt og sendt til Sikker digital postkasse. Vi har motatt Leveringskvittering fra SDP. Forsendelsen skal da være tilgjengelig for mottaker. PRINTET Printkvittering mottatt fra printleverandør eller manuell print bekreftet(via webgrensesnitt). AVVIST Forsendelsen er ikke validert pga. manglende/korrupt metadata, eller fordi forsendelsesfil ikke kunne dannes. IKKE_LEVERT Kun digital leveranse hvor vi ikke har klart å levere forsendelsen. MANUELT_HANDTERT Forsendelsen er manuelt avsluttet, f.eks. pga en feilsituasjon. ForsendelsesHistorikk Felt Type Beskrivelse Validering hendelsesLogger List\u0026lt;HendelsesLogg\u0026gt; SigneringsHistorikk Felt Type Beskrivelse Validering forsendelsesId ForsendelsesId logg List\u0026lt;SigneringsLogg\u0026gt; MottakerForsendelsesTyper Felt Type Beskrivelse Validering organisasjonsNummer OrganisasjonsNummer forsendelsesType String mottakerSystem String mottakerId String niva Integer DokumentMetadata Felt Type Beskrivelse Validering mimeType String filnavn String kanSigneres Boolean Bare en fil kan signeres og skal være av type PDF Validerer at maks ett dokument pr forsendelse har flagget slått på sizeInBytes Long sha256hash String dokumentType String nedlasningsUrl String signeringsUrl String HendelsesLogg Felt Type Beskrivelse Validering tidspunkt String hendelse String SigneringsLogg Felt Type Beskrivelse Validering tidspunkt String type String hendelse String Adresse Felt Type Beskrivelse Validering postAdresse PostAdresse Adressen forsendelsen sendes til dersom den går via brevpost Kan ikke være null digitalAdresse DigitalAdresse Se OrganisasjonDigitalAdresse og PersonDigitalAdresse PostAdresse Felt Type Beskrivelse Validering navn String Navn på mottaker Må være utfylt. adresse1 String Adresselinje1 adresse2 String Adresselinje2 adresse3 String Adresselinje3 postSted String Poststed Må være utfylt dersom forsendelsen ikke er kun digital. postNummer String Postnummer Må være utfylt dersom forsendelsen ikke er kun digital. Fire siffer for norske adresser. land String Land Må være utfylt dersom forsendelsen ikke er kun digital. DigitalAdresse Se OrganisasjonDigitalAdresse og PersonDigitalAdresse\nOrganisasjonDigitalAdresse Felt Type Beskrivelse Validering organisasjonsNummer OrganisasjonsNummer Må være utfylt for å kunne levere til altinn. PersonDigitalAdresse Felt Type Beskrivelse Validering fodselsNummer String Må være utfylt for å kunne levere til altinn. Ved signeringsoppdrag må dette feltet være utfylt. UtskriftsKonfigurasjon Felt Type Beskrivelse Validering utskriftMedFarger boolean tosidig boolean NoarkMetadataFraAvleverendeSaksSystem Felt Type Beskrivelse Validering saksSekvensNummer Integer saksAar Integer journalAar Integer journalSekvensNummer Integer journalPostNummer Integer journalPostType String journalStatus String journalDato Date dokumentetsDato Date tittel String saksBehandler String ekstraMetadata List\u0026lt;Entry\u0026gt; NoarkMetadataForImport Felt Type Beskrivelse Validering saksSekvensNummer Integer saksAar Integer journalPostType String journalStatus String dokumentetsDato Date tittel String Dokument Felt Type Beskrivelse Validering filnavn String Filnavn er for intern bruk, må være unikt i en forsendelse. Max 226 tegn. Må ikke inneholde mappe, kun filnavn. (ingen / eller ) Disse tegnene er også ugyldige \u0026quot; \u0026lt; \u0026gt; ? * | : De har andre funksjoner i windows og kan ikke brukes i filnavn på windows. Skiller ikke mellom store og små bokstaver i filnavnet. mimeType String Mimetype på være application/pdf hvis den skal til print. Kun digital levering er valgt kan vi ta imot annet. Kun application/pdf hvis den skal til print skalSigneres Boolean Angir om dokumentet skal signeres Bare et dokument kan signeres og må være av type PDF dokumentType String Fritekstfelt som kan brukes til å fortelle noe om dokumentTypen til feltet. Kan brukes til noark4 dokumenttyper data DataHandler Fildata giroarkSider Set\u0026lt;\\Integer\u0026gt; Liste med sidetall som skal printes på gult giroark. Digital versjon vil få grått giroark. Første side er 1. ekskluderesFraUtskrift Boolean Dette dokumentet blir ikke med i utskrift av forsendelsen. Brukes til filer som kun er interessant for digital levering. F.eks xml, video eller lyd filer Lenke Felt Type Beskrivelse Validering urlLenke String Selve lenken til dokument/nettside Må være utfylt og være i gyldig lenke format, altså (http/https/ftp)://(nettside).(com/no/ etc) urlTekst String Må være utfylt ledeTekst String Teksten som kommer før lenken i brevet SignaturType Verdi Beskrivelse AUTENTISERT_SIGNATUR AVANSERT_SIGNATUR Entry Felt Type Beskrivelse Validering key String value String "
},
{
	"uri": "/tjenester/svarut/integrasjon/kodeeksempelmottakerrest/",
	"title": "Kodeeksempel MottaksserviceV1",
	"tags": [],
	"description": "",
	"content": "Maven dependencies \u0026lt;dependency\u0026gt; \u0026lt;groupId\u0026gt;org.apache.httpcomponents\u0026lt;/groupId\u0026gt; \u0026lt;artifactId\u0026gt;httpclient\u0026lt;/artifactId\u0026gt; \u0026lt;version\u0026gt;4.3.5\u0026lt;/version\u0026gt; \u0026lt;/dependency\u0026gt; \u0026lt;dependency\u0026gt; \u0026lt;groupId\u0026gt;org.apache.httpcomponents\u0026lt;/groupId\u0026gt; \u0026lt;artifactId\u0026gt;httpmime\u0026lt;/artifactId\u0026gt; \u0026lt;version\u0026gt;4.3.5\u0026lt;/version\u0026gt; \u0026lt;scope\u0026gt;compile\u0026lt;/scope\u0026gt; \u0026lt;/dependency\u0026gt; \u0026lt;dependency\u0026gt; \u0026lt;groupId\u0026gt;junit\u0026lt;/groupId\u0026gt; \u0026lt;artifactId\u0026gt;junit\u0026lt;/artifactId\u0026gt; \u0026lt;version\u0026gt;4.10\u0026lt;/version\u0026gt; \u0026lt;scope\u0026gt;test\u0026lt;/scope\u0026gt; \u0026lt;/dependency\u0026gt; Maven plugin \u0026lt;plugin\u0026gt; \u0026lt;groupId\u0026gt;org.apache.maven.plugins\u0026lt;/groupId\u0026gt; \u0026lt;artifactId\u0026gt;maven-compiler-plugin\u0026lt;/artifactId\u0026gt; \u0026lt;version\u0026gt;2.5.1\u0026lt;/version\u0026gt; \u0026lt;configuration\u0026gt; \u0026lt;source\u0026gt;1.7\u0026lt;/source\u0026gt; \u0026lt;target\u0026gt;1.7\u0026lt;/target\u0026gt; \u0026lt;encoding\u0026gt;UTF-8\u0026lt;/encoding\u0026gt; \u0026lt;/configuration\u0026gt; \u0026lt;/plugin\u0026gt; Kall av tjenesten public class TestMottakerService { public static String host = \u0026#34;https://svarut.ks.no\u0026#34;; public static String mottakerid = \u0026#34;AAAAAAA-AAAA-AAAA-AAAA-AAAAAAAAAAAA\u0026#34;; public static String passord = \u0026#34;AAAAAAAAAAA^AAAAAAAA(BBBBBBBBBBBB.BBBBBBBBB\u0026#34;; public static String forsendelsesId = \u0026#34;BBBBBBB-BBBB-BBBB-BBBB-BBBBBBBBBBBB\u0026#34;; @Test public void testMottakerServiceHentNyeForsendelser(){ String urlHentNyeForsendelser = \u0026#34;/tjenester/svarinn/mottaker/hentNyeForsendelser\u0026#34;; HttpGet request1 = new HttpGet(host+urlHentNyeForsendelser); System.out.println(\u0026#34;Tester pendingForsendelser\u0026#34;); int statusCode = MottakerService.executeHttpsRequest(request1, mottakerid, passord); Assert.assertEquals(\u0026#34;Forventet statuskode 200 fikk \u0026#34;+statusCode, 200, statusCode); } @Test public void testMottakerServiceHentForsendelseFil(){ String urlForsendelseFiler = \u0026#34;/tjenester/svarinn/forsendelse/\u0026#34;+forsendelsesId; HttpGet request2 = new HttpGet(host+urlForsendelseFiler); System.out.println(\u0026#34;Tester getForsendelseFil\u0026#34;); int statusCode = MottakerService.executeHttpsRequest(request2, mottakerid, passord); Assert.assertEquals(\u0026#34;Forventet statuskode 200 fikk \u0026#34;+statusCode, 200, statusCode); } @Test public void testMottakerServiceKvitterMottak(){ String urlKvitterMottak = \u0026#34;/tjenester/svarinn/kvitterMottak/forsendelse/\u0026#34;+forsendelsesId; HttpPost request3 = new HttpPost(host+urlKvitterMottak); System.out.println(\u0026#34;Tester kvitterMottak\u0026#34;); int statusCode = MottakerService.executeHttpsRequest(request3, mottakerid, passord); Assert.assertEquals(\u0026#34;Forventet statuskode 200 fikk \u0026#34;+statusCode, 200, statusCode); } }` Underliggende klient public static void executeHttpsRequest(HttpRequestBase request, String mottakerid, String passord){ DefaultHttpClient client = getDefaultClient(); CredentialsProvider credentialsProvider = new BasicCredentialsProvider(); credentialsProvider.setCredentials( AuthScope.ANY, new UsernamePasswordCredentials(mottakerid, passord)); client.setCredentialsProvider(credentialsProvider); try{ HttpResponse response = client.execute(request); byte[] responseBody = EntityUtils.toByteArray(response.getEntity()); if(response.getStatusLine().getStatusCode() != HttpStatus.SC_OK){ System.err.println(\u0026#34;HTTP kallet feilet med kode: \u0026#34; + response.getStatusLine()); } else { System.out.println(\u0026#34;HTTP kallet suksess med kode: \u0026#34; + response.getStatusLine()); System.out.println(\u0026#34;Respons har data av type \u0026#34;+response.getEntity().getContentType()); } System.out.println(\u0026#34;Respons meldingen er:\u0026#34;); System.out.println(new String(responseBody)); System.out.println(); } catch (ClientProtocolException e) { System.err.println(\u0026#34;Fatal protocol violation: \u0026#34; + e.getMessage()); e.printStackTrace(); } catch (IOException e) { System.err.println(\u0026#34;Fatal transport error: \u0026#34; + e.getMessage()); e.printStackTrace(); } finally { request.releaseConnection(); } }` "
},
{
	"uri": "/tjenester/svarut/signeringstjeneste/",
	"title": "Signeringstjeneste",
	"tags": [],
	"description": "",
	"content": "Aktivering Avtale om bruk av signeringstjenesten må gjøres med Digdir og forutsetter at dere allerede har avtale om SDP. Når avtalene er inngått må dere aktivere tjenesten inne på konfigurasjon under SDP-fanen.\nAPI Bruker operasjonen sendForsendelse, i ForsendelseServiceV7 eller senere.\nFølgende eksisterende felter må fylles ut:\n/sendForsendelse/forsendelse/krevNiva4Innlogging - Angir hvilket nivå som skal brukes på signeringen /sendForsendelse/forsendelse/svarSendesTil[@Type=organisasjon]/orgnr - Organisasjonsnummer til enhenten som skal ha det signerte dokumentet i retur /sendForsendelse/forsendelse/mottaker[@Type=privatPerson]/fodselsnr - Fødselsnummer på mottaker av signeringsoppdraget Følgende nye felter må også fylles ut:\n/sendForsendelse/forsendelse/signeringUtloper - Angi hvor lenge signeringsoppdraget er gyldig, minimum 1 dag. /sendForsendelse/forsendelse/signaturtype - Velge mellom autentisert eller avansert signering. /sendForsendelse/forsendelse/dokumenter/skalSigneres - Markere ett dokument som inngår i signeringsoppdraget Via send forsendelse Brukergrensesnittet er oppdatert slik at man kan markere et dokument og angi utløpsdato.\nSekvensdiagrammer Fra fagsystem via Svarut til innbygger Innføringen av signeringsoppdrag gir ingen endringer i oppførsel utover validering. Varslig vil gå ut til Altinn eller SDP dersom innbygger ikke har reservert seg. Dersom innbygger ikke har åpnet Altinn innen lesefristen vil brev gå ut i posten.\nInnbygger kan signere elektronisk frem til gyldigheten på signeringsoppdraget utløper, selv om brevet er sendt i posten.\nFra innbygger via Digipost og Svarut til fagsystem Innbygger logger på Altinn/SDP og trykker på signeringslenken som er oppgitt i meldingen. Dette er en lenke til Svarut. Svarut vil validere og sjekke at det er et gyldig signeringsoppdrag.\nInnbygger får opp dokumentet og kan velge mellom å signere eller avvise. Dersom innbygger signerer opprettes det en ny forsendelse til det organisasjonsnummeret som er oppgitt i forsendelsen.\nDersom innbygger avviser oppdraget vil oppdraget ikke være mulig å signere på nytt. Dersom innbygger avbryter (lukker nettleser e.l.) er det likevel mulig å signere gitt at gyldigheten på signeringsoppdraget ikke er utløpt.\nOppdragsgiver vil bare få forsendelse i retur dersom mottaker signerer forsendelsen og kan sjekke status på om oppdraget er avvist.\n"
},
{
	"uri": "/tjenester/svarut/forsendelser-og-sikkerhet/",
	"title": "Sikkerhet",
	"tags": [],
	"description": "",
	"content": "Generelt om forsendelser Forsendelser kan, men må ikke, krypteres før de sendes inn til SvarUt. Forsendelsesfiler lagres kryptert på SvarUt sine servere. Forsendelser som lastes ned via SvarInn overføres kryptert og må dekrypteres før de blir importert til sakssystemet. Forsendelsesfiler som blir lastet ned av mottaker dekrypteres ellers i det de overføres til mottaker. Forsendelser på nivå 4 Det er mulig å sende forsendelser som inneholder sensitive persondata via SvarUt (ikke gradert informasjon). Dette kan være brev som sendes fra sikker sone.\nEn nivå 4-forsendelse må krypteres hos avgivende system før den sendes til SvarUt. Forsendelsen behandles på samme måte som alle andre forsendelser og forsendelsesfilen vil lagres kryptert på disk. Ingen andre enn mottaker har tilgang til forsendelsesfilen (heller ikke superadministratorer eller lokale administratorer hos avsender). "
},
{
	"uri": "/tjenester/svarut/integrasjon/soapv4/",
	"title": "SOAP V4",
	"tags": [],
	"description": "",
	"content": "Her beskrives funksjonalitet for ForsendelseServiceV4\nWSDL Tilgang For å benytte webservicen må en bruke HTTP Basic autentication med brukernavn(avsendernavn) og service-passord. Avsender opprettes av KS-SvarUt administrator/organisasjons administrator og service-passordet genereres av avsender ansvarlig via konfigurasjon-siden.\nTjenester Forsendelsesservicet tilbyr følgende funksjonalitet:\nsendForsendelse Hovedtjeneste som sender inn forsendelse til ekspedering av KS-SvarUt. Følgende metadata inkluderes:\nFelt Beskrivelse Validering Mottaker PrivatPerson eller Organisasjon, full adresse må være utfylt, for sending til Altinn må orgnr/fødselsnr være utfylt. Støtte for utenlandske adresser. Navn Navn på mottaker. Må være utfylt Adresse1 Adresselinje1 Adresse2 Adresselinje2 Adresse3 Adresselinje3 Postnr Postnummer Må være utfylt Poststed Poststed Må være utfylt Land Land Fødselsnr Hvis Privat, må være utfylt for å kunne levere til altinn. Orgnr Hvis organisasjon, må være utfylt for å kunne levere til altinn. Avgivende system Identifikator som identifiserer systemet som gjør web-service kallet, vil blant annet kunne benyttes for statistikk og feilsøking. Bruk følgende for sak/arkivsystemene: Doculive, Ephorte, ESA, 360 og Websak. For andre fagsystemer avtales dette med KS KommIT på [svarut@ks.no](mailto:svarut@ks.no). Obligatorisk felt. Tittel Tittel på forsendelsen. Tittel blir vist i tittelfeltet på melding til Altinn, og i listen over innkommende meldinger. Må være utfylt Konteringskode Kode som beskriver faktureringskonto for forsendelsen. Kan benyttes for å gruppere meldingsstatistikk gjennom forvaltningsløsningen, og sendes videre til print-leverandør. ^[a-zA-Z0-9\\-\\.øæåØÆÅ]{0,20}$ Printkonfigurasjon Konfigurasjon for hvordan dokumentet skal printes, dobbeltsidig, fargeprint, A-Post, B-Post KunDigitalLevering Vi leverer kun digitalt, ingen print og postlegging. Hvis dokumentet ikke kan leveres digital blir det ikke levert. Hvis KunDigitalLevering er valgt må fødselsnr eller orgnr være utfylt. kryptert Settes til true dersom fil(ene) som sendes er kryptert. Dersom kryptering ikke er brukt må denne være satt til false. Se kodeeksempler for eksempel på kryptering. Det må være kryptert med CMS med svarut sin publickey. [Den offentlige nøkkelen PROD](https://svarut.ks.no/forsendelse/publickey/hent), [Den offentlige nøkkelen for TEST](https://test.svarut.ks.no/forsendelse/publickey/hent) krevNiva4Innlogging Forsendelsen krever nivå 4-innlogging for å kunne lastes ned. Disse forsendelsene må være kryptert. Liste med pdf filer Rekkefølgen er rekkefølgen de kommer i brevet. Total filstørrelse inntil 250MB er støttet. Filnavn Filnavn er for intern bruk, må være unikt i en forsendelse. Mimetype Mimetype må være application/pdf hvis den skal til print. Dersom \"Kun digital\" levering er valgt kan vi ta imot annet. Kun application/pdf hvis den skal til print Data Fildata GiroarkSider Liste med sidetall som skal printes på gult giroark. Digital versjon vil få grått giroark. Første side er 1. Liste med Lenker Rekkefølgen er samme som de vil komme i brevet. Kan være tom. Url lenke Selve lenken til dokument/nettside Må være utfylt og være i gyldig lenke format, altså (http/https/ftp)://(nettside).(com/no/ etc) Url tekst Mimetype på være application/pdf. Kun det som blir støttet nå. Må være utfylt Ledetekst Teksten som kommer før lenken i brevet Metadata fra avleverende system Noark5 metadata fra avleverende system, foreløbig oversikt Saksekvensnummer Saksaar Journalaar Journalseksvensnummer Journalpostnummer Journalposttype Journalstatus Journaldato DokumentetsDato Tittel Saksbehandler EkstraMetadata Liste med key,value for forskjellige behov. Keys må være unique. Metadata i mottakende system Noark5 metadata som stemmer med mottakende system. Kan brukes til å legge dokumentet på rett sak. Samme som over. Saksekvensnummer Saksaar Journalposttype Journalstatus DokumentetsDato Tittel retrieveForsendelseStatus Henter status for en forsendelse. En forsendelse kan ha en av tilstandene beskrevet under:\nTilstander (normalløp): Mottatt Et kall mottatt på forsendelses-service. En id blir tildelt forsendelsen. Akseptert Meldingen er validert og forsendelsesfil dannet. Varslet Et varsel om forsendelsen er sendt til varslingstjenesten. Lest En forsendelse er lest når hele forsendelsesfilen er lastet ned av mottaker. Sendt print Forsendelsen er blitt overført til printleverandør. Sendt digitalt Forsendelsen er motatt og sendt slik den skal. Ikke blitt lest enda. Forsendelser med denne status vil kun leveres digitalt, og vil aldri gå til print. Sendt SDP Forsendelsen er motatt og sendt til Sikker digital postkasse. Levert SDP Forsendelsen er motatt og sendt til Sikker digital postkasse. Vi har motatt Leveringskvittering fra SDP. Forsendelsen skal da være tilgjengelig for mottaker. Printet Printkvittering mottatt fra printleverandør eller manuell print bekreftet(via webgrensesnitt). Tilstander (unntak): Avvist Forsendelsen er ikke validert pga. manglende/korrupt metadata, eller fordi forsendelsesfil ikke kunne dannes. Manuelt håndtert Forsendelsen er manuelt avsluttet, f.eks. pga en feilsituasjon. retrieveForsendelseStatuser Henter status for flere forsendelseer. Returnerer liste med status, når status oppstod og forsendelseid.\nforsendelseid Id på forsendelsen. sisteStatusEndring Når statusen endret seg sist ForsendelseStatus Siste forsendelse status retrieveForsendelseHistorikk Henter historikk for en forsendelse. Returnerer en liste med beskrivelse av hva som har skjedd og når det inntraff. Listen tilsvarer ekspederingsloggen i forsendelsesoversikten.\nFelt Beskrivelse Validering Forsendelsesid Identifikator som unikt identifiserer en forsendelse. Må være utfylt setForsendelseLestAvEksterntSystem Setter status for en forsendelse til lest basert på forsendelsesId. Benyttes for å sette status til lest når dokumentet har blitt lest utenfor vårt system.\nFelt Beskrivelse Validering Forsendelsesid Identifikator som unikt identifiserer en forsendelse. Må være utfylt Fødselsnummer Fødselsnummer til brukeren som har lest forsendelsen. Ikke tomt og 11 siffer langt navnPaEksterntSystem Navn til det eksterne systemet som håndterte lesingen av forsendelsen. datoLest Dato og tidpunkt som forsendelsen ble lest på. Hvis blank settes den til nåtid. "
},
{
	"uri": "/tjenester/svarut/integrasjon/soapv5/",
	"title": "SOAP V5",
	"tags": [],
	"description": "",
	"content": "Her beskrives funksjonalitet for ForsendelseServiceV5\nWSDL Tilgang For å benytte webservicen må en bruke HTTP Basic autentication med brukernavn(avsendernavn) og service-passord. Avsender opprettes av KS-SvarUt administrator/organisasjons administrator og service-passordet genereres av avsender ansvarlig via konfigurasjon-siden.\nTjenester Forsendelsesservicet tilbyr følgende funksjonalitet:\nsendForsendelse Hovedtjeneste som sender inn forsendelse til ekspedering av KS-SvarUt. Følgende metadata inkluderes:\nFelt Beskrivelse Validering Mottaker PrivatPerson eller Organisasjon, full adresse må være utfylt, for sending til Altinn må orgnr/fødselsnr være utfylt. Støtte for utenlandske adresser. Navn Navn på mottaker. Må være utfylt Adresse1 Adresselinje1 Adresse2 Adresselinje2 Adresse3 Adresselinje3 Postnr Postnummer Må være utfylt, 4 tall for norske adresser Poststed Poststed Må være utfylt Land Land Fødselsnr Hvis Privat, må være utfylt for å kunne levere til altinn. Orgnr Hvis organisasjon, må være utfylt for å kunne levere til altinn. Avgivende system Identifikator som identifiserer systemet som gjør web-service kallet, vil blant annet kunne benyttes for statistikk og feilsøking. Bruk følgende for sak/arkivsystemene: Doculive, Ephorte, ESA, 360 og Websak. For andre fagsystemer avtales dette med KS KommIT på [svarut@ks.no](mailto:svarut@ks.no). Obligatorisk felt. DokumentType - heter forsendelseType i versjon 6 Fritekst felt for å kunne identifisere forsendelse type. Dette feltet blir ikke brukt til noe i dag, men vil bli søkbart og tilgengelig i SvarInn. eksternref Ekstern id for forsendelsen, ingen sjekk på innhold i SvarUt. Det vil komme mulighet for å hente ut forsendelser i søk og via api på eksternref. Tittel Tittel på forsendelsen. Tittel blir vist i tittelfeltet på melding til Altinn, og i listen over innkommende meldinger. Må være utfylt Konteringskode Kode som beskriver faktureringskonto for forsendelsen. Kan benyttes for å gruppere meldingsstatistikk gjennom forvaltningsløsningen, og sendes videre til print-leverandør. ^[a-zA-Z0-9\\-\\.øæåØÆÅ]{0,20}$ Printkonfigurasjon Konfigurasjon for hvordan dokumentet skal printes, dobbeltsidig, fargeprint, A-Post, B-Post KunDigitalLevering Vi leverer kun digitalt, ingen print og postlegging. Hvis dokumentet ikke kan leveres digital blir det ikke levert. Hvis KunDigitalLevering er valgt må fødselsnr eller orgnr være utfylt. kryptert Settes til true dersom fil(ene) som sendes er kryptert. Dersom kryptering ikke er brukt må denne være satt til false. Se kodeeksempler for eksempel på kryptering. Det må være kryptert med CMS med svarut sin publickey. [Den offentlige nøkkelen PROD](https://svarut.ks.no/forsendelse/publickey/hent), [Den offentlige nøkkelen for TEST](https://test.svarut.ks.no/forsendelse/publickey/hent) krevNiva4Innlogging Forsendelsen krever nivå 4-innlogging for å kunne lastes ned. Disse forsendelsene må være kryptert. svarPaForsendelse Forsendelseid til forsendelse dette er et svar på. Liste med pdf filer Rekkefølgen er rekkefølgen de kommer i brevet. Total filstørrelse inntil 250MB er støttet. Filnavn Filnavn er for intern bruk, må være unikt i en forsendelse. Mimetype Mimetype må være application/pdf hvis den skal til print. Dersom \"Kun digital\" levering er valgt kan vi ta imot annet. Kun application/pdf hvis den skal til print Data Fildata GiroarkSider Liste med sidetall som skal printes på gult giroark. Digital versjon vil få grått giroark. Første side er 1. Liste med Lenker Rekkefølgen er samme som de vil komme i brevet. Kan være tom. Url lenke Selve lenken til dokument/nettside Må være utfylt og være i gyldig lenke format, altså (http/https/ftp)://(nettside).(com/no/ etc) Url tekst Mimetype på være application/pdf. Kun det som blir støttet nå. Må være utfylt Ledetekst Teksten som kommer før lenken i brevet Metadata fra avleverende system Noark5 metadata fra avleverende system, foreløbig oversikt Saksekvensnummer Saksaar Journalaar Journalseksvensnummer Journalpostnummer Journalposttype Journalstatus Journaldato DokumentetsDato Tittel Saksbehandler EkstraMetadata Liste med key,value for forskjellige behov. Keys må være unique. Metadata i mottakende system Noark5 metadata som stemmer med mottakende system. Kan brukes til å legge dokumentet på rett sak. Samme som over. Saksekvensnummer Saksaar Journalposttype Journalstatus DokumentetsDato Tittel SvarSendesTil PrivatPerson eller Organisasjon, full adresse må være utfylt. Dette er mottaker som en skal sende til om en vil svare på forsendelsen. Valgfritt å fylle ut. Dette blir brukt som avsender adresse i digital kommunikasjon og på print i posten. Vil overstyre avsender adresse i konfigurasjonen. Navn Navn på mottaker. Må være utfylt Adresse1 Adresselinje1 Adresse2 Adresselinje2 Adresse3 Adresselinje3 Postnr Postnummer Må være utfylt Poststed Poststed Må være utfylt Land Land Fødselsnr Må være utfylt om en skal svare til privatperson. Orgnr Må være utfylt om en skal svare til en organisasjon. retrieveForsendelseStatus Henter status for en forsendelse. En forsendelse kan ha en av tilstandene beskrevet under:\nTilstander (normalløp): Mottatt Et kall mottatt på forsendelses-service. En id blir tildelt forsendelsen. Akseptert Meldingen er validert og forsendelsesfil dannet. Klar for mottak Venter på at forsendelse skal bli lastet ned av mottaker. Varslet Et varsel om forsendelsen er sendt til varslingstjenesten. Lest En forsendelse er lest når hele forsendelsesfilen er lastet ned av mottaker. Sendt print Forsendelsen er blitt overført til printleverandør. Sendt digitalt Forsendelsen er motatt og sendt slik den skal. Ikke blitt lest enda. Forsendelser med denne status vil kun leveres digitalt, og vil aldri gå til print. Sendt SDP Forsendelsen er motatt og sendt til Sikker digital postkasse. Levert SDP Forsendelsen er motatt og sendt til Sikker digital postkasse. Vi har motatt Leveringskvittering fra SDP. Forsendelsen skal da være tilgjengelig for mottaker. Printet Printkvittering mottatt fra printleverandør eller manuell print bekreftet(via webgrensesnitt). Tilstander (unntak): Avvist Forsendelsen er ikke validert pga. manglende/korrupt metadata, eller fordi forsendelsesfil ikke kunne dannes. Manuelt håndtert Forsendelsen er manuelt avsluttet, f.eks. pga en feilsituasjon. retrieveForsendelseStatuser Henter status for flere forsendelseer. Returnerer liste med status, når status oppstod og forsendelseid.\nforsendelseid Id på forsendelsen. sisteStatusEndring Når statusen endret seg sist ForsendelseStatus Siste forsendelse status retrieveForsendelseHistorikk Henter historikk for en forsendelse. Returnerer en liste med beskrivelse av hva som har skjedd og når det inntraff. Listen tilsvarer ekspederingsloggen i forsendelsesoversikten.\nFelt Beskrivelse Validering Forsendelsesid Identifikator som unikt identifiserer en forsendelse. Må være utfylt setForsendelseLestAvEksterntSystem Setter status for en forsendelse til lest basert på forsendelsesId. Benyttes for å sette status til lest når dokumentet har blitt lest utenfor vårt system.\nFelt Beskrivelse Validering Forsendelsesid Identifikator som unikt identifiserer en forsendelse. Må være utfylt Fødselsnummer Fødselsnummer til brukeren som har lest forsendelsen. Ikke tomt og 11 siffer langt navnPaEksterntSystem Navn til det eksterne systemet som håndterte lesingen av forsendelsen. datoLest Dato og tidpunkt som forsendelsen ble lest på. Hvis blank settes den til nåtid. "
},
{
	"uri": "/tjenester/svarut/integrasjon/soapv6/",
	"title": "SOAP V6",
	"tags": [],
	"description": "",
	"content": "Tilgang For å benytte web-tjenesten må en bruke HTTP Basic autentication med brukernavn(avsendernavn) og service-passord. Avsender opprettes av KS-SvarUt administrator/organisasjons administrator. Service-passordet genereres av avsender-ansvarlig via konfigurasjon-siden.\nTjenester Forsendelsesservicet tilbyr følgende funksjonalitet:\nOperasjon Inndata Utdata Kort beskrivelse sendForsendelse Forsendelse forsendelsesid Hovedtjeneste som sender inn forsendelse til ekspedering av KS-SvarUt. retrieveForsendelseStatus forsendelsesid ForsendelseStatus Henter status for en forsendelse. retrieveForsendelseStatuser List\u0026lt;forsendelsesid\u0026gt; List\u0026lt;StatusResult\u0026gt; Henter status for flere forsendelseer. Returnerer liste med status, når status oppstod og forsendelseid. retrieveForsendelseHistorikk forsendelsesid ForsendelseHistorikk Henter historikk for en forsendelse, tilsvarer ekspederingsloggen i forsendelsesoversikten. retrieveForsendelseIdByEksternRef eksternref List\u0026lt;forsendelsesid\u0026gt; Henter liste med forsendelseider som har denne eksternRef. setForsendelseLestAvEksterntSystem forsendelsesid, lestAvFodselsnummer, navnPaEksterntSystem, datoLest (Ingen retur) Benyttes for å sette status til lest når dokumentet har blitt lest utenfor vårt system. Definisjonsfil (WSDL) for tjenesten finnes her https://svarut.ks.no/tjenester/forsendelseservice/ForsendelsesServiceV6?wsdl\nsendForsendelse SendForsendelse for ekspedering i SvarUt. Hvis du får HTTP 200 ok er forsendelsen er mottat og akseptert av SvarUt. Dette betyr at vi da vil garantere levering til mottaker (kunDigital har ikke garantert levering). Hvis det skulle oppstå problemer vil avsender bli kontaktet. Dette betyr at jobben til avleverende system nå er ferdig.\nFeilmeldinger på tjeneste skal kunne presenteres for bruker. Det kan komme tekniske feilmeldinger, men da er disse greit å vise hvis de skal kontakte SvarUt for hjelp.\nFølgende metadata inkluderes:\nFelt Beskrivelse Validering Mottaker PrivatPerson eller Organisasjon, full adresse må være utfylt, for sending til Altinn må orgnr/fødselsnr være utfylt. Støtte for utenlandske adresser. Navn Navn på mottaker. Må være utfylt Adresse1 Adresselinje1 Adresse2 Adresselinje2 Adresse3 Adresselinje3 Postnr Postnummer Må være utfylt, 4 tall for norske adresser Poststed Poststed Må være utfylt Land Land Fødselsnr Hvis Privat, må være utfylt for å kunne levere til altinn. Orgnr Hvis organisasjon, må være utfylt for å kunne levere til altinn. Avgivende system Identifikator som identifiserer systemet som gjør web-service kallet, vil blant annet kunne benyttes for statistikk og feilsøking. Bruk følgende for sak/arkivsystemene: Doculive, Ephorte, ESA, 360 og Websak. For andre fagsystemer avtales dette med KS KommIT på [svarut@ks.no](mailto:svarut@ks.no). Obligatorisk felt. dokumentType - blir endret til forsendelseType i nyere versjoner Fritekst felt for å kunne identifisere forsendelse type. Dette feltet blir ikke brukt til noe i dag, men vil bli søkbart og tilgengelig i SvarInn. eksternref Ekstern id for forsendelsen, ingen sjekk på innhold i SvarUt. Det vil komme mulighet for å hente ut forsendelser i søk og via api på eksternref. Tittel Tittel på forsendelsen. Tittel blir vist i tittelfeltet på melding til Altinn, og i listen over innkommende meldinger. Må være utfylt Konteringskode Kode som beskriver faktureringskonto for forsendelsen. Kan benyttes for å gruppere meldingsstatistikk gjennom forvaltningsløsningen, og sendes videre til print-leverandør. ^[a-zA-Z0-9\\-\\.øæåØÆÅ]{0,20}$ Printkonfigurasjon Konfigurasjon for hvordan dokumentet skal printes, dobbeltsidig, fargeprint, A-Post, B-Post KunDigitalLevering Vi leverer kun digitalt, ingen print og postlegging. Hvis dokumentet ikke kan leveres digital blir det ikke levert. Hvis KunDigitalLevering er valgt må fødselsnr eller orgnr være utfylt. kryptert Settes til true dersom fil(ene) som sendes er kryptert. Dersom kryptering ikke er brukt må denne være satt til false. Se kodeeksempler for eksempel på kryptering. Det må være kryptert med CMS med svarut sin publickey. [Den offentlige nøkkelen PROD](https://svarut.ks.no/forsendelse/publickey/hent), [Den offentlige nøkkelen for TEST](https://test.svarut.ks.no/forsendelse/publickey/hent) krevNiva4Innlogging Forsendelsen krever nivå 4-innlogging for å kunne lastes ned. Disse forsendelsene må være kryptert. svarPaForsendelse Forsendelseid til forsendelse dette er et svar på. svarPaForsendelseLink Dersom dette feltet settes til true vil forsendelsen avvises om svarSendesTil ikke inneholder en gyldig adresse med organisasjonsnummer. Hvis forsendelsen aksepteres og sendes digitalt, vil det genereres en lenke hvor mottaker kan sende et svar tilbake til adressen spesifisert i svarSendesTil. Liste med filer Rekkefølgen er rekkefølgen de kommer i brevet. Total filstørrelse inntil 350MB er støttet når det skal printes. Ellers er det ikke begrensning. Filnavn Filnavn er for intern bruk, må være unikt i en forsendelse. Max 226 tegn. Må ikke inneholde mappe, kun filnavn. (ingen / eller \\) Disse tegnene er også ugyldige \" \u003c \u003e ? * | : De har andre funksjoner i windows og kan ikke brukes i filnavn på windows. Mimetype Mimetype på være application/pdf hvis den skal til print. Kun digital levering er valgt kan vi ta imot annet. Kun application/pdf hvis den skal til print Data Fildata GiroarkSider Liste med sidetall som skal printes på gult giroark. Digital versjon vil få grått giroark. Første side er 1. Liste med Lenker Rekkefølgen er samme som de vil komme i brevet. Kan være tom. Url lenke Selve lenken til dokument/nettside Må være utfylt og være i gyldig lenke format, altså (http/https/ftp)://(nettside).(com/no/ etc) Url tekst Må være utfylt Ledetekst Teksten som kommer før lenken i brevet Metadata fra avleverende system Noark5 metadata fra avleverende system, foreløbig oversikt Saksekvensnummer Saksaar Journalaar Journalseksvensnummer Journalpostnummer Journalposttype Journalstatus Journaldato DokumentetsDato Tittel Saksbehandler EkstraMetadata Liste med key,value for forskjellige behov. Keys må være unique. Metadata i mottakende system Noark5 metadata som stemmer med mottakende system. Kan brukes til å legge dokumentet på rett sak. Samme som over. Saksekvensnummer Saksaar Journalposttype Journalstatus DokumentetsDato Tittel SvarSendesTil PrivatPerson eller Organisasjon, full adresse må være utfylt. Dette er mottaker som en skal sende til om en vil svare på forsendelsen. Valgfritt å fylle ut. Dette blir brukt som avsender adresse i digital kommunikasjon og på print i posten. Vil overstyre avsender adresse i konfigurasjonen. Navn Navn på mottaker. Må være utfylt Adresse1 Adresselinje1 Adresse2 Adresselinje2 Adresse3 Adresselinje3 Postnr Postnummer Må være utfylt Poststed Poststed Må være utfylt Land Land Fødselsnr Må være utfylt om en skal svare til privatperson. Orgnr Må være utfylt om en skal svare til en organisasjon. retrieveForsendelseStatus Henter status for en forsendelse. Denne bør bruker når det er behov for å vise status. Tenkt brukt f.eks om saksbehandler lurer på hva som er status på forsendelsen. Status kan endre seg på kort varsel, vi anbefaler derfor å ikke mellomlagre disse verdiene i eget system, men heller hente de når de skal vises.\nEn forsendelse kan ha en av tilstandene beskrevet under:\nTilstander (normalløp): Mottatt Et kall mottatt på forsendelses-service. En id blir tildelt forsendelsen. Akseptert Meldingen er validert og forsendelsesfil dannet. Klar for mottak Venter på at forsendelse skal bli lastet ned av mottaker. Varslet Et varsel om forsendelsen er sendt til varslingstjenesten. Lest En forsendelse er lest når hele forsendelsesfilen er lastet ned av mottaker. Sendt print Forsendelsen er blitt overført til printleverandør. Sendt digitalt Forsendelsen er motatt og sendt slik den skal. Ikke blitt lest enda. Forsendelser med denne status vil kun leveres digitalt, og vil aldri gå til print. Sendt SDP Forsendelsen er motatt og sendt til Sikker digital postkasse. Levert SDP Forsendelsen er motatt og sendt til Sikker digital postkasse. Vi har motatt Leveringskvittering fra SDP. Forsendelsen skal da være tilgjengelig for mottaker. Printet Printkvittering mottatt fra printleverandør eller manuell print bekreftet(via webgrensesnitt). Tilstander (unntak): Avvist Forsendelsen er ikke validert pga. manglende/korrupt metadata, eller fordi forsendelsesfil ikke kunne dannes. Manuelt håndtert Forsendelsen er manuelt avsluttet, f.eks. pga en feilsituasjon. retrieveForsendelseStatuser Henter status for flere forsendelseer. Samme som retrieveForsendelseStatus bare for flere forsendelser i samme kall. Returnerer liste med status, når status oppstod og forsendelseid.\nforsendelseid Id på forsendelsen. sisteStatusEndring Når statusen endret seg sist ForsendelseStatus Siste forsendelse status retrieveForsendelseHistorikk Henter historikk for en forsendelse. Returnerer en liste med beskrivelse av hva som har skjedd og når det inntraff. Listen tilsvarer ekspederingsloggen i forsendelsesoversikten. Tenkt brukt hvis saksbehandler eller kundestøtte trenger å vite detaljene ved en forsendelse.\nFelt Beskrivelse Validering Forsendelsesid Identifikator som unikt identifiserer en forsendelse. Må være utfylt setForsendelseLestAvEksterntSystem Setter status for en forsendelse til lest basert på forsendelsesId. Benyttes for å sette status til lest når dokumentet har blitt lest utenfor vårt system.\nFelt Beskrivelse Validering Forsendelsesid Identifikator som unikt identifiserer en forsendelse. Må være utfylt Fødselsnummer Fødselsnummer til brukeren som har lest forsendelsen. Ikke tomt og 11 siffer langt navnPaEksterntSystem Navn til det eksterne systemet som håndterte lesingen av forsendelsen. datoLest Dato og tidpunkt som forsendelsen ble lest på. Hvis blank settes den til nåtid. retrieveForsendelseIdByEksternRef Henter liste med forsendelseider som har denne eksternRef. Forsendelsene må være sendt av avsender som er innlogget.\nFelt Beskrivelse Validering EksternRef EksternRef, id som identifiserer forsendelsen hos avsender. Må være utfylt "
},
{
	"uri": "/tjenester/svarut/integrasjon/soapv7/",
	"title": "SOAP V7",
	"tags": [],
	"description": "",
	"content": "Tilgang For å benytte web-tjenesten må en bruke HTTP Basic autentication med brukernavn(avsendernavn) og service-passord. Avsender opprettes av KS-SvarUt administrator/organisasjons administrator. Service-passordet genereres av avsender-ansvarlig via konfigurasjon-siden.\nTjenester Forsendelsesservicet tilbyr følgende funksjonalitet:\nOperasjon Inndata Utdata Kort beskrivelse sendForsendelse Forsendelse forsendelsesid Hovedtjeneste som sender inn forsendelse til ekspedering av KS-SvarUt. retrieveForsendelseStatus forsendelsesid ForsendelseStatus Henter status for en forsendelse. retrieveForsendelseStatuser List\u0026lt;forsendelsesid\u0026gt; List\u0026lt;StatusResult\u0026gt; Henter status for flere forsendelseer. Returnerer liste med status, når status oppstod og forsendelseid. retrieveForsendelseHistorikk forsendelsesid ForsendelseHistorikk Henter historikk for en forsendelse, tilsvarer ekspederingsloggen i forsendelsesoversikten. retrieveForsendelseIdByEksternRef eksternref List\u0026lt;forsendelsesid\u0026gt; Henter liste med forsendelseider som har denne eksternRef. setForsendelseLestAvEksterntSystem forsendelsesid, lestAvFodselsnummer, navnPaEksterntSystem, datoLest (Ingen retur) Benyttes for å sette status til lest når dokumentet har blitt lest utenfor vårt system. Definisjonsfil (WSDL) for tjenesten finnes her https://svarut.ks.no/tjenester/forsendelseservice/ForsendelsesServiceV7?wsdl\nsendForsendelse SendForsendelse for ekspedering i SvarUt. Hvis du får HTTP 200 ok er forsendelsen er mottat og akseptert av SvarUt. Dette betyr at vi da vil garantere levering til mottaker (kunDigital har ikke garantert levering). Hvis det skulle oppstå problemer vil avsender bli kontaktet. Dette betyr at jobben til avleverende system nå er ferdig.\nFeilmeldinger på tjeneste skal kunne presenteres for bruker. Det kan komme tekniske feilmeldinger, men da er disse greit å vise hvis de skal kontakte SvarUt for hjelp.\nFølgende metadata inkluderes:\nFelt Beskrivelse Validering Mottaker PrivatPerson eller Organisasjon, full adresse må være utfylt, for sending til Altinn må orgnr/fødselsnr være utfylt. Støtte for utenlandske adresser. Ved signeringsoppdrag må dette feltet være av type PrivatPerson. Navn Navn på mottaker. Må være utfylt Adresse1 Adresselinje1 Adresse2 Adresselinje2 Adresse3 Adresselinje3 Postnr Postnummer Må være utfylt, 4 tall for norske adresser Poststed Poststed Må være utfylt Land Land Fødselsnr Hvis Privat, må være utfylt for å kunne levere til altinn. Ved signeringsoppdrag må dette feltet være utfylt. Orgnr Hvis organisasjon, må være utfylt for å kunne levere til altinn. Avgivende system Identifikator som identifiserer systemet som gjør web-service kallet, vil blant annet kunne benyttes for statistikk og feilsøking. Bruk følgende for sak/arkivsystemene: Doculive, Ephorte, ESA, 360 og Websak. For andre fagsystemer avtales dette med KS KommIT på [svarut@ks.no](mailto:svarut@ks.no). Obligatorisk felt. forsendelseType Fritekst felt for å kunne identifisere forsendelse type. eksternref Ekstern id for forsendelsen, ingen sjekk på innhold i SvarUt. Det vil komme mulighet for å hente ut forsendelser i søk og via api på eksternref. Tittel Tittel på forsendelsen. Tittel blir vist i tittelfeltet på melding til Altinn, og i listen over innkommende meldinger. Må være utfylt Konteringskode Kode som beskriver faktureringskonto for forsendelsen. Kan benyttes for å gruppere meldingsstatistikk gjennom forvaltningsløsningen, og sendes videre til print-leverandør. ^[a-zA-Z0-9\\-\\.øæåØÆÅ]{0,20}$ Printkonfigurasjon Konfigurasjon for hvordan dokumentet skal printes, dobbeltsidig, fargeprint, A-Post, B-Post KunDigitalLevering Vi leverer kun digitalt, ingen print og postlegging. Hvis dokumentet ikke kan leveres digital blir det ikke levert. Hvis KunDigitalLevering er valgt må fødselsnr eller orgnr være utfylt. kryptert Settes til true dersom fil(ene) som sendes er kryptert. Dersom kryptering ikke er brukt må denne være satt til false. Se kodeeksempler for eksempel på kryptering. Det må være kryptert med CMS med svarut sin publickey. [Den offentlige nøkkelen PROD](https://svarut.ks.no/forsendelse/publickey/hent), [Den offentlige nøkkelen for TEST](https://test.svarut.ks.no/forsendelse/publickey/hent) krevNiva4Innlogging Forsendelsen krever nivå 4-innlogging for å kunne lastes ned eller signeres. Disse forsendelsene må være kryptert. svarPaForsendelse Forsendelseid til forsendelse dette er et svar på. svarPaForsendelseLink Dersom dette feltet settes til true vil forsendelsen avvises om svarSendesTil ikke inneholder en gyldig adresse med organisasjonsnummer. Hvis forsendelsen aksepteres og sendes digitalt, vil det genereres en lenke hvor mottaker kan sende et svar tilbake til adressen spesifisert i svarSendesTil. Liste med filer Rekkefølgen er rekkefølgen de kommer i brevet. Total filstørrelse inntil 350MB er støttet når det skal printes. Ellers er det ikke begrensning. Filnavn Filnavn er for intern bruk, må være unikt i en forsendelse. Max 226 tegn. Må ikke inneholde mappe, kun filnavn. (ingen / eller \\) Disse tegnene er også ugyldige \" \u003c \u003e ? * | : De har andre funksjoner i windows og kan ikke brukes i filnavn på windows. Mimetype Mimetype på være application/pdf hvis den skal til print. Kun digital levering er valgt kan vi ta imot annet. Kun application/pdf hvis den skal til print Data Fildata GiroarkSider Liste med sidetall som skal printes på gult giroark. Digital versjon vil få grått giroark. Første side er 1. skalSigneres Angir om filen skal signeres Bare en fil kan signeres og skal være av type PDF Liste med Lenker Rekkefølgen er samme som de vil komme i brevet. Kan være tom. Url lenke Selve lenken til dokument/nettside Må være utfylt og være i gyldig lenke format, altså (http/https/ftp)://(nettside).(com/no/ etc) Url tekst Må være utfylt Ledetekst Teksten som kommer før lenken i brevet Metadata fra avleverende system Noark5 metadata fra avleverende system, foreløbig oversikt Saksekvensnummer Saksaar Journalaar Journalseksvensnummer Journalpostnummer Journalposttype Journalstatus Journaldato DokumentetsDato Tittel Saksbehandler EkstraMetadata Liste med key,value for forskjellige behov. Keys må være unique. Metadata i mottakende system Noark5 metadata som stemmer med mottakende system. Kan brukes til å legge dokumentet på rett sak. Samme som over. Saksekvensnummer Saksaar Journalposttype Journalstatus DokumentetsDato Tittel SvarSendesTil PrivatPerson eller Organisasjon, full adresse må være utfylt. Dette er mottaker som en skal sende til om en vil svare på forsendelsen. Valgfritt å fylle ut. Dette blir brukt som avsender adresse i digital kommunikasjon og på print i posten. Vil overstyre avsender adresse i konfigurasjonen. Ved signeringsoppdrag må feltet være satt til Organisasjon Navn Navn på mottaker. Må være utfylt Adresse1 Adresselinje1 Adresse2 Adresselinje2 Adresse3 Adresselinje3 Postnr Postnummer Må være utfylt Poststed Poststed Må være utfylt Land Land Fødselsnr Må være utfylt om en skal svare til privatperson. Orgnr Må være utfylt om en skal svare til en organisasjon. Ved signeringsoppdrag må organisasjonsnummer må være fylt ut. signeringUtloper Angi hvor lenge signeringsoppdraget er gyldig, minimum 1 dag. Må anngis ved signering signaturtype Velge mellom autentisert eller avansert signering. Må anngis ved signering retrieveForsendelseStatus Henter status for en forsendelse. Denne bør bruker når det er behov for å vise status. Tenkt brukt f.eks om saksbehandler lurer på hva som er status på forsendelsen. Status kan endre seg på kort varsel, vi anbefaler derfor å ikke mellomlagre disse verdiene i eget system, men heller hente de når de skal vises.\nEn forsendelse kan ha en av tilstandene beskrevet under:\nTilstander (normalløp): Mottatt Et kall mottatt på forsendelses-service. En id blir tildelt forsendelsen. Akseptert Meldingen er validert og forsendelsesfil dannet. Klar for mottak Venter på at forsendelse skal bli lastet ned av mottaker. Varslet Et varsel om forsendelsen er sendt til varslingstjenesten. Lest En forsendelse er lest når hele forsendelsesfilen er lastet ned av mottaker. Sendt print Forsendelsen er blitt overført til printleverandør. Sendt digitalt Forsendelsen er motatt og sendt slik den skal. Ikke blitt lest enda. Forsendelser med denne status vil kun leveres digitalt, og vil aldri gå til print. Sendt SDP Forsendelsen er motatt og sendt til Sikker digital postkasse. Levert SDP Forsendelsen er motatt og sendt til Sikker digital postkasse. Vi har motatt Leveringskvittering fra SDP. Forsendelsen skal da være tilgjengelig for mottaker. Printet Printkvittering mottatt fra printleverandør eller manuell print bekreftet(via webgrensesnitt). Tilstander (unntak): Avvist Forsendelsen er ikke validert pga. manglende/korrupt metadata, eller fordi forsendelsesfil ikke kunne dannes. Manuelt håndtert Forsendelsen er manuelt avsluttet, f.eks. pga en feilsituasjon. retrieveForsendelseStatuser Henter status for flere forsendelseer. Samme som retrieveForsendelseStatus bare for flere forsendelser i samme kall. Returnerer liste med status, når status oppstod og forsendelseid.\nforsendelseid Id på forsendelsen. sisteStatusEndring Når statusen endret seg sist ForsendelseStatus Siste forsendelse status retrieveForsendelseHistorikk Henter historikk for en forsendelse. Returnerer en liste med beskrivelse av hva som har skjedd og når det inntraff. Listen tilsvarer ekspederingsloggen i forsendelsesoversikten. Tenkt brukt hvis saksbehandler eller kundestøtte trenger å vite detaljene ved en forsendelse.\nFelt Beskrivelse Validering Forsendelsesid Identifikator som unikt identifiserer en forsendelse. Må være utfylt setForsendelseLestAvEksterntSystem Setter status for en forsendelse til lest basert på forsendelsesId. Benyttes for å sette status til lest når dokumentet har blitt lest utenfor vårt system.\nFelt Beskrivelse Validering Forsendelsesid Identifikator som unikt identifiserer en forsendelse. Må være utfylt Fødselsnummer Fødselsnummer til brukeren som har lest forsendelsen. Ikke tomt og 11 siffer langt navnPaEksterntSystem Navn til det eksterne systemet som håndterte lesingen av forsendelsen. datoLest Dato og tidpunkt som forsendelsen ble lest på. Hvis blank settes den til nåtid. retrieveForsendelseIdByEksternRef Henter liste med forsendelseider som har denne eksternRef. Forsendelsene må være sendt av avsender som er innlogget.\nFelt Beskrivelse Validering EksternRef EksternRef, id som identifiserer forsendelsen hos avsender. Må være utfylt "
},
{
	"uri": "/tjenester/svarut/integrasjon/soapv8/",
	"title": "SOAP V9",
	"tags": [],
	"description": "",
	"content": "Tilgang For å benytte web-tjenesten må en bruke HTTP Basic autentication med brukernavn(avsendernavn) og service-passord. Avsender opprettes av KS-SvarUt administrator/organisasjons administrator. Service-passordet genereres av avsender-ansvarlig via konfigurasjon-siden.\nTjenester Forsendelsesservicet tilbyr følgende funksjonalitet:\nOperasjon Inndata Utdata Kort beskrivelse sendForsendelse Forsendelse forsendelsesid Hovedtjeneste som sender inn forsendelse til ekspedering av KS-SvarUt. retrieveForsendelseStatus forsendelsesid ForsendelseStatus Henter status for en forsendelse. retrieveForsendelseStatuser List\u0026lt;forsendelsesid\u0026gt; List\u0026lt;StatusResult\u0026gt; Henter status for flere forsendelseer. Returnerer liste med status, når status oppstod og forsendelseid. retrieveForsendelseHistorikk forsendelsesid ForsendelseHistorikk Henter historikk for en forsendelse, tilsvarer ekspederingsloggen i forsendelsesoversikten. retrieveForsendelseIdByEksternRef eksternref List\u0026lt;forsendelsesid\u0026gt; Henter liste med forsendelseider som har denne eksternRef. setForsendelseLestAvEksterntSystem forsendelsesid, lestAvFodselsnummer, navnPaEksterntSystem, datoLest (Ingen retur) Benyttes for å sette status til lest når dokumentet har blitt lest utenfor vårt system. retreiveForsendelseTyper List\u0026lt;String\u0026gt; Henter alle forsendelseTyper som kan brukes i SvarInn. retrieveMottakerSystemForOrgnr organisasjonsnr Liste med orgnr, forsendelseType, nivå, mottakersystem, mottakersystemid Henter alle konfigurerte mottakersystem for orgnr Definisjonsfil (WSDL) for tjenesten finnes her https://svarut.ks.no/tjenester/forsendelseservice/ForsendelsesServiceV8?wsdl\nsendForsendelse SendForsendelse for ekspedering i SvarUt. Hvis du får HTTP 200 ok er forsendelsen er mottat og akseptert av SvarUt. Dette betyr at vi da vil garantere levering til mottaker (kunDigital har ikke garantert levering). Hvis det skulle oppstå problemer vil avsender bli kontaktet. Dette betyr at jobben til avleverende system nå er ferdig.\nFeilmeldinger på tjeneste skal kunne presenteres for bruker. Det kan komme tekniske feilmeldinger, men da er disse greit å vise hvis de skal kontakte SvarUt for hjelp.\nFølgende metadata inkluderes:\nFelt Beskrivelse Validering Mottaker Addresse, full post adresse må være utfylt, for sending til Altinn må digitaladresse med orgnr/fødselsnr være utfylt. Støtte for utenlandske adresser. Ved signeringsoppdrag må PersonDigitalAdresse brukes. PostAdresse: Navn Navn på mottaker. Må være utfylt Adresse1 Adresselinje1 Adresse2 Adresselinje2 Adresse3 Adresselinje3 Postnr Postnummer Må være utfylt, 4 tall for norske adresser Poststed Poststed Må være utfylt Land Land DigitalAdresse: Fødselsnr Hvis Privat, må være utfylt for å kunne levere til altinn. Ved signeringsoppdrag må dette feltet være utfylt. Orgnr Hvis organisasjon, må være utfylt for å kunne levere til altinn. Avgivende system Identifikator som identifiserer systemet som gjør web-service kallet, vil blant annet kunne benyttes for statistikk og feilsøking. Bruk følgende for sak/arkivsystemene: Doculive, Ephorte, ESA, 360 og Websak. For andre fagsystemer avtales dette med KS KommIT på [svarut@ks.no](mailto:svarut@ks.no). Obligatorisk felt. forsendelseType Fritekst felt for å kunne identifisere forsendelse type. eksternref Ekstern id for forsendelsen, ingen sjekk på innhold i SvarUt. Det vil komme mulighet for å hente ut forsendelser i søk og via api på eksternref. Tittel Tittel på forsendelsen. Tittel blir vist i tittelfeltet på melding til Altinn, og i listen over innkommende meldinger. Må være utfylt Konteringskode Kode som beskriver faktureringskonto for forsendelsen. Kan benyttes for å gruppere meldingsstatistikk gjennom forvaltningsløsningen, og sendes videre til print-leverandør. ^[a-zA-Z0-9\\-\\.øæåØÆÅ]{0,20}$ Printkonfigurasjon Konfigurasjon for hvordan dokumentet skal printes, dobbeltsidig, fargeprint, A-Post, B-Post KunDigitalLevering Vi leverer kun digitalt, ingen print og postlegging. Hvis dokumentet ikke kan leveres digital blir det ikke levert. Hvis KunDigitalLevering er valgt må fødselsnr eller orgnr være utfylt. kryptert Settes til true dersom fil(ene) som sendes er kryptert. Dersom kryptering ikke er brukt må denne være satt til false. Se kodeeksempler for eksempel på kryptering. Det må være kryptert med CMS med svarut sin publickey. [Den offentlige nøkkelen PROD](https://svarut.ks.no/forsendelse/publickey/hent), [Den offentlige nøkkelen for TEST](https://test.svarut.ks.no/forsendelse/publickey/hent) krevNiva4Innlogging Forsendelsen krever nivå 4-innlogging for å kunne lastes ned eller signeres. Disse forsendelsene må være kryptert. svarPaForsendelse Forsendelseid til forsendelse dette er et svar på. svarPaForsendelseLink Dersom dette feltet settes til true vil forsendelsen avvises om svarSendesTil ikke inneholder en gyldig adresse med organisasjonsnummer. Hvis forsendelsen aksepteres og sendes digitalt, vil det genereres en lenke hvor mottaker kan sende et svar tilbake til adressen spesifisert i svarSendesTil. Liste med filer Rekkefølgen er rekkefølgen de kommer i brevet. Total filstørrelse inntil 350MB er støttet når det skal printes. Ellers er det ikke begrensning. Filnavn Filnavn er for intern bruk, må være unikt i en forsendelse. Max 226 tegn. Må ikke inneholde mappe, kun filnavn. (ingen / eller \\) Disse tegnene er også ugyldige \" \u003c \u003e ? * | : De har andre funksjoner i windows og kan ikke brukes i filnavn på windows. Mimetype Mimetype på være application/pdf hvis den skal til print. Kun digital levering er valgt kan vi ta imot annet. Kun application/pdf hvis den skal til print DokumentType Fritekstfelt som kan brukes til å fortelle noe om dokumentTypen til feltet. Kan brukes til noark4 dokumenttyper Data Fildata GiroarkSider Liste med sidetall som skal printes på gult giroark. Digital versjon vil få grått giroark. Første side er 1. skalSigneres Angir om filen skal signeres Bare en fil kan signeres og skal være av type PDF Liste med Lenker Rekkefølgen er samme som de vil komme i brevet. Kan være tom. Url lenke Selve lenken til dokument/nettside Må være utfylt og være i gyldig lenke format, altså (http/https/ftp)://(nettside).(com/no/ etc) Url tekst Må være utfylt Ledetekst Teksten som kommer før lenken i brevet Metadata fra avleverende system Noark5 metadata fra avleverende system, foreløbig oversikt Saksekvensnummer Saksaar Journalaar Journalseksvensnummer Journalpostnummer Journalposttype Journalstatus Journaldato DokumentetsDato Tittel Saksbehandler EkstraMetadata Liste med key,value for forskjellige behov. Keys må være unique. Metadata i mottakende system Noark5 metadata som stemmer med mottakende system. Kan brukes til å legge dokumentet på rett sak. Samme som over. Saksekvensnummer Saksaar Journalposttype Journalstatus DokumentetsDato Tittel SvarSendesTil Dersom feltet settes må full postadresse være utfylt. Dette er adressen det skal sendes til dersom en ønsker å svare på forsendelsen. En eventuell adresse som fylles inn her vil overstyre adressen fra avsenderens forsidekonfigurasjon. Den vil også fremkomme på forsiden av brevet dersom forsendelsen sendes i posten. PostAdresse: Navn Navn på mottaker. Må være utfylt Adresse1 Adresselinje1 Adresse2 Adresselinje2 Adresse3 Adresselinje3 Postnr Postnummer Må være utfylt, 4 tall for norske adresser Poststed Poststed Må være utfylt Land Land DigitalAdresse: Fødselsnr Hvis Privat, må være utfylt for å kunne levere til altinn. Ved signeringsoppdrag må dette feltet være utfylt. Orgnr Hvis organisasjon, må være utfylt for å kunne levere til altinn. signeringUtloper Angi hvor lenge signeringsoppdraget er gyldig, minimum 1 dag. Må anngis ved signering signaturtype Velge mellom autentisert eller avansert signering. Må anngis ved signering retrieveForsendelseStatus Henter status for en forsendelse. Denne bør bruker når det er behov for å vise status. Tenkt brukt f.eks om saksbehandler lurer på hva som er status på forsendelsen. Status kan endre seg på kort varsel, vi anbefaler derfor å ikke mellomlagre disse verdiene i eget system, men heller hente de når de skal vises.\nEn forsendelse kan ha en av tilstandene beskrevet under:\nTilstander (normalløp): Mottatt Et kall mottatt på forsendelses-service. En id blir tildelt forsendelsen. Akseptert Meldingen er validert og forsendelsesfil dannet. Klar for mottak Venter på at forsendelse skal bli lastet ned av mottaker. Varslet Et varsel om forsendelsen er sendt til varslingstjenesten. Lest En forsendelse er lest når hele forsendelsesfilen er lastet ned av mottaker. Sendt print Forsendelsen er blitt overført til printleverandør. Sendt digitalt Forsendelsen er motatt og sendt slik den skal. Ikke blitt lest enda. Forsendelser med denne status vil kun leveres digitalt, og vil aldri gå til print. Sendt SDP Forsendelsen er motatt og sendt til Sikker digital postkasse. Levert SDP Forsendelsen er motatt og sendt til Sikker digital postkasse. Vi har motatt Leveringskvittering fra SDP. Forsendelsen skal da være tilgjengelig for mottaker. Printet Printkvittering mottatt fra printleverandør eller manuell print bekreftet(via webgrensesnitt). Tilstander (unntak): Avvist Forsendelsen er ikke validert pga. manglende/korrupt metadata, eller fordi forsendelsesfil ikke kunne dannes. Manuelt håndtert Forsendelsen er manuelt avsluttet, f.eks. pga en feilsituasjon. retrieveForsendelseStatuser Henter status for flere forsendelseer. Samme som retrieveForsendelseStatus bare for flere forsendelser i samme kall. Returnerer liste med status, når status oppstod og forsendelseid.\nforsendelseid Id på forsendelsen. sisteStatusEndring Når statusen endret seg sist ForsendelseStatus Siste forsendelse status retrieveForsendelseHistorikk Henter historikk for en forsendelse. Returnerer en liste med beskrivelse av hva som har skjedd og når det inntraff. Listen tilsvarer ekspederingsloggen i forsendelsesoversikten. Tenkt brukt hvis saksbehandler eller kundestøtte trenger å vite detaljene ved en forsendelse.\nFelt Beskrivelse Validering Forsendelsesid Identifikator som unikt identifiserer en forsendelse. Må være utfylt setForsendelseLestAvEksterntSystem Setter status for en forsendelse til lest basert på forsendelsesId. Benyttes for å sette status til lest når dokumentet har blitt lest utenfor vårt system.\nFelt Beskrivelse Validering Forsendelsesid Identifikator som unikt identifiserer en forsendelse. Må være utfylt Fødselsnummer Fødselsnummer til brukeren som har lest forsendelsen. Ikke tomt og 11 siffer langt navnPaEksterntSystem Navn til det eksterne systemet som håndterte lesingen av forsendelsen. datoLest Dato og tidpunkt som forsendelsen ble lest på. Hvis blank settes den til nåtid. retrieveForsendelseIdByEksternRef Henter liste med forsendelseider som har denne eksternRef. Forsendelsene må være sendt av avsender som er innlogget.\nFelt Beskrivelse Validering EksternRef EksternRef, id som identifiserer forsendelsen hos avsender. Må være utfylt retrieveMottakerSystemForOrgnr Henter mottakersystem som er konfigurert for orgnr. Kan brukes hvis en vil vite om mottaker har konfigurert SvarInn og til hvilket system det vil havne.\nFelt Beskrivelse Validering Organisasjonsnr Organisasjonsnr. Må være utfylt Du vil få tilbake en liste med:, orgnr, forsendelseType, nivå, mottakersystem, og mottakersystemid.\nFelt Beskrivelse Orgnr Organisasjonsnr. ForsendelseType Forsendelsetypen dette systemet vil motta for, hvis null eller tom vil den kunne motta alle forsendelseTyper. Nivå Hvilket forsendelsenivå dette mottakersystemet støtter. Mottakersystem Navn på mottakersystem Mottakersystemid Id for å identifiserere mottakersystem retreiveForsendelseTyper Henter alle forsnedelseTyper som Svarinn mottakersystem kan konfigureres til å bruke.\n"
},
{
	"uri": "/tjenester/svarut/integrasjon/soapv9/",
	"title": "SOAP V9",
	"tags": [],
	"description": "",
	"content": "Tilgang For å benytte web-tjenesten må en bruke HTTP Basic autentication med brukernavn(avsendernavn) og service-passord. Avsender opprettes av KS-SvarUt administrator/organisasjons administrator. Service-passordet genereres av avsender-ansvarlig via konfigurasjon-siden.\nTjenester Forsendelsesservicet tilbyr følgende funksjonalitet:\nOperasjon Inndata Utdata Kort beskrivelse sendForsendelse Forsendelse forsendelsesid Hovedtjeneste som sender inn forsendelse til ekspedering av KS-SvarUt. retrieveForsendelseStatus forsendelsesid ForsendelseStatus Henter status for en forsendelse. retrieveForsendelseStatuser List\u0026lt;forsendelsesid\u0026gt; List\u0026lt;StatusResult\u0026gt; Henter status for flere forsendelseer. Returnerer liste med status, når status oppstod og forsendelseid. retrieveForsendelseHistorikk forsendelsesid ForsendelseHistorikk Henter historikk for en forsendelse, tilsvarer ekspederingsloggen i forsendelsesoversikten. retrieveForsendelseIdByEksternRef eksternref List\u0026lt;forsendelsesid\u0026gt; Henter liste med forsendelseider som har denne eksternRef. setForsendelseLestAvEksterntSystem forsendelsesid, lestAvFodselsnummer, navnPaEksterntSystem, datoLest (Ingen retur) Benyttes for å sette status til lest når dokumentet har blitt lest utenfor vårt system. retreiveForsendelseTyper List\u0026lt;String\u0026gt; Henter alle forsendelseTyper som kan brukes i SvarInn. retrieveMottakerSystemForOrgnr organisasjonsnr Liste med orgnr, forsendelseType, nivå, mottakersystem, mottakersystemid Henter alle konfigurerte mottakersystem for orgnr retrieveSigneringshistorikk forsendelsesid Signeringshistorikk Henter signeringshistorikk (logg) på en forsendelse som er markert for signering. retrieveSigneringshistorikkForFlereForsendelser List\u0026lt;forsendelsesid\u0026gt; List\u0026lt;Signeringshistorikk\u0026gt; Henter signeringshistorikk for opp til 10 forsendelser. Definisjonsfil (WSDL) for tjenesten finnes her https://svarut.ks.no/tjenester/forsendelseservice/ForsendelsesServiceV9?wsdl\nsendForsendelse SendForsendelse for ekspedering i SvarUt. Hvis du får HTTP 200 ok er forsendelsen er mottat og akseptert av SvarUt. Dette betyr at vi da vil garantere levering til mottaker (kunDigital har ikke garantert levering). Hvis det skulle oppstå problemer vil avsender bli kontaktet. Dette betyr at jobben til avleverende system nå er ferdig.\nFeilmeldinger på tjeneste skal kunne presenteres for bruker. Det kan komme tekniske feilmeldinger, men da er disse greit å vise hvis de skal kontakte SvarUt for hjelp.\nFølgende metadata inkluderes:\nFelt Beskrivelse Validering Mottaker Addresse, full post adresse må være utfylt, for sending til Altinn må digitaladresse med orgnr/fødselsnr være utfylt. Støtte for utenlandske adresser. Ved signeringsoppdrag må PersonDigitalAdresse brukes. PostAdresse: Navn Navn på mottaker. Må være utfylt Adresse1 Adresselinje1 Adresse2 Adresselinje2 Adresse3 Adresselinje3 Postnr Postnummer Må være utfylt, 4 tall for norske adresser Poststed Poststed Må være utfylt Land Land DigitalAdresse: Fødselsnr Hvis Privat, må være utfylt for å kunne levere til altinn. Ved signeringsoppdrag må dette feltet være utfylt. Orgnr Hvis organisasjon, må være utfylt for å kunne levere til altinn. Avgivende system Identifikator som identifiserer systemet som gjør web-service kallet, vil blant annet kunne benyttes for statistikk og feilsøking. Bruk følgende for sak/arkivsystemene: Doculive, Ephorte, ESA, 360 og Websak. For andre fagsystemer avtales dette med KS KommIT på [svarut@ks.no](mailto:svarut@ks.no). Obligatorisk felt. forsendelseType Fritekst felt for å kunne identifisere forsendelse type. eksternref Ekstern id for forsendelsen, ingen sjekk på innhold i SvarUt. Det vil komme mulighet for å hente ut forsendelser i søk og via api på eksternref. Tittel Tittel på forsendelsen. Tittel blir vist i tittelfeltet på melding til Altinn, og i listen over innkommende meldinger. Må være utfylt Konteringskode Kode som beskriver faktureringskonto for forsendelsen. Kan benyttes for å gruppere meldingsstatistikk gjennom forvaltningsløsningen, og sendes videre til print-leverandør. ^[a-zA-Z0-9\\-\\.øæåØÆÅ]{0,20}$ Printkonfigurasjon Konfigurasjon for hvordan dokumentet skal printes, dobbeltsidig, fargeprint, A-Post, B-Post KunDigitalLevering Vi leverer kun digitalt, ingen print og postlegging. Hvis dokumentet ikke kan leveres digital blir det ikke levert. Hvis KunDigitalLevering er valgt må fødselsnr eller orgnr være utfylt. kryptert Settes til true dersom fil(ene) som sendes er kryptert. Dersom kryptering ikke er brukt må denne være satt til false. Se kodeeksempler for eksempel på kryptering. Det må være kryptert med CMS med svarut sin publickey. [Den offentlige nøkkelen PROD](https://svarut.ks.no/forsendelse/publickey/hent), [Den offentlige nøkkelen for TEST](https://test.svarut.ks.no/forsendelse/publickey/hent) krevNiva4Innlogging Forsendelsen krever nivå 4-innlogging for å kunne lastes ned eller signeres. Disse forsendelsene må være kryptert. svarPaForsendelse Forsendelseid til forsendelse dette er et svar på. svarPaForsendelseLink Dersom dette feltet settes til true vil forsendelsen avvises om svarSendesTil ikke inneholder en gyldig adresse med organisasjonsnummer. Hvis forsendelsen aksepteres og sendes digitalt, vil det genereres en lenke hvor mottaker kan sende et svar tilbake til adressen spesifisert i svarSendesTil. Liste med filer Rekkefølgen er rekkefølgen de kommer i brevet. Total filstørrelse inntil 350MB er støttet når det skal printes. Ellers er det ikke begrensning. Filnavn Filnavn er for intern bruk, må være unikt i en forsendelse. Max 226 tegn. Må ikke inneholde mappe, kun filnavn. (ingen / eller \\) Disse tegnene er også ugyldige \" \u003c \u003e ? * | : De har andre funksjoner i windows og kan ikke brukes i filnavn på windows. Mimetype Mimetype på være application/pdf hvis den skal til print. Kun digital levering er valgt kan vi ta imot annet. Kun application/pdf hvis den skal til print DokumentType Fritekstfelt som kan brukes til å fortelle noe om dokumentTypen til feltet. Kan brukes til noark4 dokumenttyper EkskluderesFraPrint Dette dokumentet blir ikke med i print av forsendelsen. Brukes til filer som kun er interesange ved digital levering. F.eks xml, video eller lyd filer Data Fildata GiroarkSider Liste med sidetall som skal printes på gult giroark. Digital versjon vil få grått giroark. Første side er 1. skalSigneres Angir om filen skal signeres Bare en fil kan signeres og skal være av type PDF Liste med Lenker Rekkefølgen er samme som de vil komme i brevet. Kan være tom. Url lenke Selve lenken til dokument/nettside Må være utfylt og være i gyldig lenke format, altså (http/https/ftp)://(nettside).(com/no/ etc) Url tekst Må være utfylt Ledetekst Teksten som kommer før lenken i brevet Metadata fra avleverende system Noark5 metadata fra avleverende system, foreløbig oversikt Saksekvensnummer Saksaar Journalaar Journalseksvensnummer Journalpostnummer Journalposttype Journalstatus Journaldato DokumentetsDato Tittel Saksbehandler EkstraMetadata Liste med key,value for forskjellige behov. Keys må være unique. Metadata i mottakende system Noark5 metadata som stemmer med mottakende system. Kan brukes til å legge dokumentet på rett sak. Samme som over. Saksekvensnummer Saksaar Journalposttype Journalstatus DokumentetsDato Tittel SvarSendesTil Dersom feltet settes må full postadresse være utfylt. Dette er adressen det skal sendes til dersom en ønsker å svare på forsendelsen. En eventuell adresse som fylles inn her vil overstyre adressen fra avsenderens forsidekonfigurasjon. Den vil også fremkomme på forsiden av brevet dersom forsendelsen sendes i posten. PostAdresse: Navn Navn på mottaker. Må være utfylt Adresse1 Adresselinje1 Adresse2 Adresselinje2 Adresse3 Adresselinje3 Postnr Postnummer Må være utfylt, 4 tall for norske adresser Poststed Poststed Må være utfylt Land Land DigitalAdresse: Fødselsnr Hvis Privat, må være utfylt for å kunne levere til altinn. Ved signeringsoppdrag må dette feltet være utfylt. Orgnr Hvis organisasjon, må være utfylt for å kunne levere til altinn. signeringUtloper Angi hvor lenge signeringsoppdraget er gyldig, minimum 1 dag. Må anngis ved signering signaturtype Velge mellom autentisert eller avansert signering. Må anngis ved signering retrieveForsendelseStatus Henter status for en forsendelse. Denne bør bruker når det er behov for å vise status. Tenkt brukt f.eks om saksbehandler lurer på hva som er status på forsendelsen. Status kan endre seg på kort varsel, vi anbefaler derfor å ikke mellomlagre disse verdiene i eget system, men heller hente de når de skal vises.\nEn forsendelse kan ha en av tilstandene beskrevet under:\nTilstander (normalløp): Mottatt Et kall mottatt på forsendelses-service. En id blir tildelt forsendelsen. Akseptert Meldingen er validert og forsendelsesfil dannet. Klar for mottak Venter på at forsendelse skal bli lastet ned av mottaker. Varslet Et varsel om forsendelsen er sendt til varslingstjenesten. Lest En forsendelse er lest når hele forsendelsesfilen er lastet ned av mottaker. Sendt print Forsendelsen er blitt overført til printleverandør. Sendt digitalt Forsendelsen er motatt og sendt slik den skal. Ikke blitt lest enda. Forsendelser med denne status vil kun leveres digitalt, og vil aldri gå til print. Sendt SDP Forsendelsen er motatt og sendt til Sikker digital postkasse. Levert SDP Forsendelsen er motatt og sendt til Sikker digital postkasse. Vi har motatt Leveringskvittering fra SDP. Forsendelsen skal da være tilgjengelig for mottaker. Printet Printkvittering mottatt fra printleverandør eller manuell print bekreftet(via webgrensesnitt). Tilstander (unntak): Avvist Forsendelsen er ikke validert pga. manglende/korrupt metadata, eller fordi forsendelsesfil ikke kunne dannes. Manuelt håndtert Forsendelsen er manuelt avsluttet, f.eks. pga en feilsituasjon. retrieveForsendelseStatuser Henter status for flere forsendelseer. Samme som retrieveForsendelseStatus bare for flere forsendelser i samme kall. Returnerer liste med status, når status oppstod og forsendelseid.\nforsendelseid Id på forsendelsen. sisteStatusEndring Når statusen endret seg sist ForsendelseStatus Siste forsendelse status retrieveForsendelseHistorikk Henter historikk for en forsendelse. Returnerer en liste med beskrivelse av hva som har skjedd og når det inntraff. Listen tilsvarer ekspederingsloggen i forsendelsesoversikten. Tenkt brukt hvis saksbehandler eller kundestøtte trenger å vite detaljene ved en forsendelse.\nFelt Beskrivelse Validering Forsendelsesid Identifikator som unikt identifiserer en forsendelse. Må være utfylt setForsendelseLestAvEksterntSystem Setter status for en forsendelse til lest basert på forsendelsesId. Benyttes for å sette status til lest når dokumentet har blitt lest utenfor vårt system.\nFelt Beskrivelse Validering Forsendelsesid Identifikator som unikt identifiserer en forsendelse. Må være utfylt Fødselsnummer Fødselsnummer til brukeren som har lest forsendelsen. Ikke tomt og 11 siffer langt navnPaEksterntSystem Navn til det eksterne systemet som håndterte lesingen av forsendelsen. datoLest Dato og tidpunkt som forsendelsen ble lest på. Hvis blank settes den til nåtid. retrieveForsendelseIdByEksternRef Henter liste med forsendelseider som har denne eksternRef. Forsendelsene må være sendt av avsender som er innlogget.\nFelt Beskrivelse Validering EksternRef EksternRef, id som identifiserer forsendelsen hos avsender. Må være utfylt retrieveMottakerSystemForOrgnr Henter mottakersystem som er konfigurert for orgnr. Kan brukes hvis en vil vite om mottaker har konfigurert SvarInn og til hvilket system det vil havne.\nFelt Beskrivelse Validering Organisasjonsnr Organisasjonsnr. Må være utfylt Du vil få tilbake en liste med:, orgnr, forsendelseType, nivå, mottakersystem, og mottakersystemid.\nFelt Beskrivelse Orgnr Organisasjonsnr. ForsendelseType Forsendelsetypen dette systemet vil motta for, hvis null eller tom vil den kunne motta alle forsendelseTyper. Nivå Hvilket forsendelsenivå dette mottakersystemet støtter. Mottakersystem Navn på mottakersystem Mottakersystemid Id for å identifiserere mottakersystem retreiveForsendelseTyper Henter alle forsnedelseTyper som Svarinn mottakersystem kan konfigureres til å bruke.\nretrieveSigneringshistorikk Henter signeringshistorikk for en gitt forsendelse.\nInndata Felt Type Beskrivelse Validering forsendelseid String Identifikator som unikt identifiserer en forsendelse. Må være utfylt Utdata Felt Type Beskrivelse forsendelseid String Identifikator som unikt identifiserer en forsendelse. logg List\u0026lt;Signeringslogg\u0026gt; Signeringslogg Felt Type tidspunkt String type String hendelse String Liste med logg-elementer retrieveSigneringshistorikkForFlereForsendelser Samme som retrieveSigneringshistorikk bare for flere forsendelser i samme kall, opp til 10 forsendelser. Returnerer liste med signeringshistorikk.\n"
},
{
	"uri": "/tjenester/svarut/svarinn-mottakservice/",
	"title": "SvarInn",
	"tags": [],
	"description": "",
	"content": "Mottaksservice tilsvarer svarinn og gjør det mulig å laste ned og kvittere ut forsendelser før de varsles gjennom Altinn og sendes til eventuell printing.\nHva er Mottaksservice? Primært brukes Mottaksservice til å automatisere nedlasting og import av forsendelser direkte i sakssystemer. Fra en forsendelse er mottatt i SvarUt er den tilgjengelig for nedlasting via mottaksservicen. Dersom forsendelsen ikke blir lastet ned innen 2 timer vil mottakersystem få en advarsel mail.\nMottaksservice gir mulighet for å laste ned sensitive forsendelser. Dette betyr at mottaker må legge inn sitt offentlige sertifikat i SvarUt, og bruke sin private nøkkel til å dekryptere forsendelsesfilene som blir lastet ned. Alle forsendelser blir sendt på denne måten selv, uavhengig av om forsendelsen er nivå 3 eller 4.\nMottaksservicen består av 3 tjenester (se også detaljert beskrivelse):\nhentNyeForsendelser - Henter nye forsendelser som er klar for import. getForsendelsefil - Henter filen for en gitt forsendelse, enten som PDF eller zipfil. Filen vil være kryptert og må dekrypteres etter nedlasting. kvitterMottak - Kvitterer ut en gitt forsendelse. Forsendelsesstatus vil bli satt til lest. Dette stopper varsel til Altinn og senere printing. Hvordan bruke Mottaksservice? Mottaksservicen konfigureres under menypunktet Mottakersystem. Her kan administrator opprette nye mottakersystem og gi personer tilgang til mottakersystemet. Deretter kan personene som har fått tilgang selv utføre resten av stegene. De første 3 stegene utføres kun én gang, steg 4 en gang som en test. De siste tre stegene bør settes opp som en regelmessig jobb som kjøres hvert 15. minutt.\nOpprett mottakersystem\nEn administrator oppretter et mottakersystem som skal ha tilgang til forsendelser. I dette steget legges det inn minst én person som har tilgang til dette mottakersystemet. Personen blir gitt tilgang basert på fødselsnummeret sitt.\nLegg til organisasjon\nPersonen som ble gitt tilgang i punktet over legger inn organisasjoner som mottakersystemet skal ha tilgang til. SvarUt sjekker om personen har tilgang til organisasjonsnummeret ved å spørre Altinn.\nGenerer servicepassord\nPersonen genererer et servicepassord. Dette passordet brukes for å validere mottakersystemet mot automatisk importtjeneste. Dette gjøres via Mottakersystem-siden, under \u0026ldquo;Service\u0026rdquo; fanen for et mottakersystem. Mottakersystemet må bruke brukernavnet og servicepassordet for autentisering ved hver nedlasting.\nRegistrér offentlig sertifikat\nPersonen må laste opp mottakersystemets offentlige sertifikat. Dette gjøres også via Mottakersystem-siden, under \u0026ldquo;Service\u0026rdquo; fanen for et mottakersystem. Den private nøkkelen brukes i mottakersystemet for å dekryptere forsendelsesfiler etter nedlasting.\nSend forsendelse\nOpprett minst en forsendelse til en organisasjon som personen har tilgang til.\nHent nye forsendelser\nKall automatisk importtjeneste og oppgi brukernavn og servicepassord ved autentisering. Alle forsendelser mottakersystemet har tilgang til returneres som en liste. Merk at listen ikke inneholder selve filene, kun informasjon om forsendelsen.\nHent forsendelsefil\nEtter autentisering og nedlasting av forsendelser, oppgi forsendelseid til en forsendelse til importtjenesten. Dette kallet returnerer selve filen enten som zip-fil eller som PDF.\nKvittér for mottak\nSiste steg er å kvittere ut forsendelsen. Oppgi forsendelsesid til importtjenesten, og forsendelsen markeres som lest.\nForsendelsesflyt i SvarUt "
},
{
	"uri": "/tjenester/svarut/svarinn/svarinnv1/",
	"title": "SvarInn V1",
	"tags": [],
	"description": "",
	"content": "Her beskrives funksjonalitet for Mottaksservice V1. For å sikre bakoverkompatibilitet for klientene så vil denne versjonen ikke endres.\nTilgang Tjenesten bruker HTTP Basic autentication med brukernavn og generert service-passord. Mottakersystem opprettes av KS-SvarUt administrator og service-passordet genereres av person med tilgang via mottakersystem-siden. Dersom autentiseringen feiler returneres HTTP-status 401 Unauthorized, og ukjent URL gir HTTP-status 404. Detaljerte feilmeldinger følger også ved feil.\nTjenester Forsendelser er tilgjengelig for direkte import til sakssystem i uendelig tid. Dersom forsendelsene markeres som permanent import feil går forsendelsene videre i det normale løpet med varsling i Altinn og til slutt printing. Etter 2 timer vil det bli sendt varsel mail om manglende import 3 ganger om dagen.\nTjenestene er tilgjengelige via:\nMiljø Base URL Test https://test.svarut.ks.no/tjenester/ Prod https://svarut.ks.no/tjenester/ Endepunkter og modeller er definert i OpenAPI-spec:\nOpenAPI SvarInn V1 (Åpne i swagger editor)\nKryptering Alle forsendelser som lastes ned via SvarInn er kryptert. For at dette skal fungere må den offentlige nøkkelen dere ønsker å bruke lastes opp til mottakersystemet i SvarUt med nivå 4-innlogging. Den private nøkkelen må være tilgjengelig i systemet som skal laste ned forsendelsene, slik at disse kan dekrypteres. I begge eksemplene under er disse filene kalt henholdsvis public.pem og privatekey.pem, og blir generert med en gyldighet på 99999 dager.\nUnix For å generere RSA nøkkelpar med OpenSSL kan følgende kommando brukes:\nopenssl req -x509 -newkey rsa:2048 -nodes -keyout privatekey.pem -out public.pem -days 99999\nWindows For windows kan man for eksempel laste ned denne OpenSSL-implementasjonen: https://slproweb.com/products/Win32OpenSSL.html\nopenssl req -x509 -newkey rsa:2048 -nodes -keyout privatekey.pem -out public.pem -days 99999 -config c:\\\u0026lt;opensslinstallmappe\u0026gt;\\bin\\openssl.cfg\n"
},
{
	"uri": "/tjenester/svarut/svarut-svarinn-adressering/",
	"title": "SvarUt - SvarInn adressering",
	"tags": [],
	"description": "",
	"content": "Tidligere hadde vi kun orgnr-adressering på forsendelser. Nå har SvarUt fått støtte for ForsendelseType. ForsendelseType skal beskrive hvilken type forsendelse dette er. Det er KS som styrer hvilken typer en kan benytte til adressering, hvis det er ønskelig med ny type sendes ønske om dette til svarut@ks.no.\nMottakersystem kan nå filtrere på 3 felt, orgnr, forsendelseType og nivå. For å konfigurere to mottakersystem på samme orgnr, kan en derfor filtrere videre på forsendelseType.\nEksempel system som ikke kan motta nivå4 dokument konfigureres da med.\n999888777, Alle forsendelsetyper, 3 Dette systemet vil da kun motta nivå3 forsendelser, hvis kommunen har et annet system som kan motta nivå4 kan dette konfigureres slik:\n999888777, Alle forsendelsetyper, 4 Eksempel fagsystem og arkivsystem. Fagsystemet skal ha forsendelser av typen ks.byggesøknad, mens andre brev til kommunen skal i arkivsystemet. Arkivsystemet vil da konfigureres slik\n999777888, Alle forsendelsetyper, alle nivå Fagsystemet\n999777888, ks.byggesøknad, alle nivå Da vil arkivsystemet få alt utenom ks.byggesøknad forsendelser som blir levert til fagsystemet.\nIntegrasjoner Sending SvarUt De som sender meldinger til SvarUt kan sette på forsendelseType.\nMottak SvarInn Trenger ikke gjør noen endringer, filtrering vil skje på SvarUt i konfigurasjonen, listen over forsendelser vil være de mottakersystemet skal motta.\n"
},
{
	"uri": "/_header/",
	"title": "",
	"tags": [],
	"description": "",
	"content": " "
},
{
	"uri": "/tjenester/svarut/api-versjoner/",
	"title": "API: Versjonsoversikt",
	"tags": [],
	"description": "",
	"content": "REST API for forsendelser Det kommer ikke ny funksjonalitet for SOAP-servicen etter V11. Nye endringer og features vil komme i REST-servicene. Dersom JSON-strukturen bli forandret vil det komme en ny versjon av servicen. Alle implementasjoner må takle at det kan legges til nye JSON-felt, og at eksisterende ikke-obligatoriske felt kan forsvinne.\nVersjon Status Endringer REST V1 Deprecated Funksjonaliteten i SOAP V11 flyttet til REST basert API REST V2 Stabil Benytter Fiks integrasjonsautentisering og MaskinportenEndepunkter gruppert slik at de kan versjoneres hver for seg SOAP API for forsendelser For utsending av forsendelser via KS-SvarUt kan man benytte en SOAP basert web-service. Denne servicen mottar forsendelsen og relevante metadata, og besørger videre ekspedering via elektroniske meldingstjenester eller vanlig post.\nFor å sikre bakoverkompabilitet versjoneres servicen. Når grensesnittet endres deployes en ny versjon slik at eksisterende klienter selv kan velge når de ønsker å ta i bruk ny versjon. Se tabell under for hvilke versjoner som til enhver tid er støttet. Hver versjon dokumenteres separat. Deprecated bør ikke brukes i nye integrasjoner.\nKall mot SvarUt, timer ut hvis de tar mer enn 15 minutter. Derfor kan det være lurt å ha timeout på tilkoblingen som er lenger enn dette. Da får avsender ikke timeout uten at den er initiert av SvarUt. Ellers kan avsender risikere å ikke få forsendelseID på forsendelser som har gått ok.\nVersjon WSDL Status Endringer ForsendelseServiceV1 Fjernet ForsendelseServiceV2 Fjernet Støtte for mottakeradresse ihht NOARK5 (inkl. Land)Ny metode for å hente historikk for en spesifikk forsendelseKun digital levering (dvs. dokumenter som ikke skal til print)Støtte for giroark i forsendelseNy metode for å sette status lest fra eksternt system ForsendelseServiceV3 Fjernet Støtte for lenker i forsendelserStøtte for metadata til bruk i automatisk import service ForsendelseServiceV4 WSDL Deprecated Støtte for krypterte forsendelserUtvidede metadata til bruk i automatisk import serviceStøtte forsendelser som krever nivå4-innlogging ForsendelseServiceV5 WSDL Deprecated Kan fylle ut SvarSendesTil for å gi informasjon om hvem svar på forsendelsen skal sendes til. Dette blir brukt som avsenderadresse på postlagt brev også.Kan spesifisere om dette er et svar på en tidligere forsendelse.Lagt til dokumentType for å si hvilken type forsendelse dette er(blir renamet til forsendelseType i v7)Eksternref en id som kan brukes til å finne forsendelser ForsendelseServiceV6 WSDL Deprecated Kan legge med svar på forsendelse link, slik at mottaker kan svare på forsendelsen.Søke opp forsendelseid basert på eksternref ForsendelseServiceV7 WSDL Deprecated dokumentType heter nå forsendelsetypeStøtte for Digdir sin signeringstjeneste. Beskrivelse av Signeringstjeneste ForsendelseServiceV8 WSDL Deprecated dokumentType lagt til på hver fil. Denne er tilgjengelig i Svarinn. Kan hente liste med mottakersystem for et orgnrKan hente forsendelseTyper som kan brukes i SvarUt ForsendelseServiceV9 WSDL Deprecated Hente ut signeringshistorikk på en forsendelseDokument har fått ekskluderesFraPrint, da er ikke filen med i print av forsendelsen. Brukes typisk til filer som kun er interesange om forsendelsen lastes ned digitalt. Xml, lyd, video filer osv. ForsendelsesServiceV10 WSDL Deprecated Ny operasjon: retrieveDokumentMetadata. Denne er lagt inn for å kunne hente ut informasjon om bl.a. hvor dokumentet kan lastes ned og eventuelt lenke til signeringsoppdrag. Endret operasjon: setForsendelseLestAvEksterntSystem. Denne er oppdatert til å ta imot objekt av type LestAv. Endret operasjoner: retrieveForsendelsesStatus og retrieveForsendelsesStatuser, begge returnerer nå samme modell-objekt (ForsendelsesStatus). Sistnevnte operasjon har pakket resultatet i en liste. Forsendelsesid og organisasjonsnummer er kapslet inn i egne typer. Modell-objektet StatusResult heter nå ForsendelsesStatus. Gamle ForsendelseStatus heter nå Status og blir returnert som en del av ForsendelsesStatus. Modell-objektet Brevpost er ikke lenger i bruk og er fjernet. Modell-objektet PrintKonfigurasjon heter nå UtskriftsKonfigurasjon. Alle modell-objektene er oppdatert til å bruke camelCase på felt og attributter. ForsendelsesServiceV11 WSDL Deprecated EksponertFor, kan gjør forsendelse tilgjengelig for andre enn mottaker. Brukes av edialog for å tilate innsender å laste ned filene. Nedlasting av forsendelser direkte til sakssystem Sakssystemer kan kalle SvarUt for å laste ned forsendelser direkte via REST API.\nFor å sikre bakoverkompabilitet versjoneres servicen. Når grensesnittet endres deployes en ny versjon slik at eksisterende klienter selv kan velge når de ønsker å ta i bruk ny versjon. Se tabell under for hvilke versjoner som til enhver tid er støttet. Hver versjon dokumenteres separat.\nDokumentasjon Spesifikasjon Status Endringer SvarInn V1 OpenAPI Deprecated SvarInn V2 OpenAPI Stabil Endepunkter for oppdatering av status slått sammenEndret navn og type på enkelte felterNye felter for Noark-metadata "
},
{
	"uri": "/categories/",
	"title": "Categories",
	"tags": [],
	"description": "",
	"content": ""
},
{
	"uri": "/felles/",
	"title": "Felles",
	"tags": [],
	"description": "Description",
	"content": "I menyen til venstre finnes det innhold som er felles for våre tjenester og omhandler konfigureringer eller oppsett.\n"
},
{
	"uri": "/tjenester/svarut/integrasjon/",
	"title": "Integrasjon",
	"tags": [],
	"description": "",
	"content": " Kodeeksempel .Net Kodeeksempel Java REST V1 SOAP V10 Kodeeksempel MottaksserviceV1 SOAP V4 SOAP V5 SOAP V6 SOAP V7 SOAP V9 SOAP V9 "
},
{
	"uri": "/felles/sentralisert-brukerstyring/",
	"title": "Sentralisert brukerstyring",
	"tags": [],
	"description": "",
	"content": "Sentralisert brukerstyring er en ny funksjon som skal gjøre det lettere å håndtere tilganger for ansatte til ressurser på Fiks-plattformen.\nBakgrunn For å kunne støtte mange forskjellige tilgangsstyringssystemer har vi valgt å bygge på SCIM2 standarden. Denne støttes av alle store leverandører av identity management-plattformer inkludert Microsoft Azure AD, Google m.fl. I første fase har vi lagt oss på en slags minimumsimplementasjon av standarden og støtter synkronisering av brukere og grupper. Mer om SCIM2-standarden finner du i RFC-7642, RFC-7643, RFC-7644 og på SCIM2 nettstedet. Kort fortalt støtter vi oppretting, oppdatering (med PATCH) og sletting av brukere og grupper.\nUnder utvikling av vårt SCIM2 endepunkt har vi hovedsaklig testet mot Microsoft Azure AD, men siden det bygger på en åpen standard er det ingenting i veien for å bruke andre baksystemer. Vi har tilgjengelig et testmiljø dersom noen ønsker å teste enten med egenutviklet integrasjon eller med programvare fra andre etablerte leverandører. .\nØnsker du å teste oppsett med Azure AD? Sjekk denne guiden\nHva kreves for å sette det opp? For å kunne starte synkronisering av grupper og brukere til Fiks-plattformen må en person som har adminrettigheter til kommunenes konfigurasjon opprette et nytt kildesystem og få generert et token til bruk for autentisering. Deretter kan man starte synkronisering fra sitt baksystem.\nAutentisering mot SCIM endepunktet I første omgang støttes autentisering med langtlevende (6 mnd) Bearer token. Dette var også det eneste som var støttet på det tidspunktet vi utviklet denne funksjonen. På sikt satser vi på også å støtte egen OAUTH2 client flow mot vårt eget OAUTH endepunkt. Tokenet får man første gang når man oppretter kildesystemet i Fiks forvaltning konfigurasjon. Det er også der man kan generere nytt token for eksisterende kildesystem.\nFødselsnummer for ID-porten autentisering av sluttbrukere Siden Fiks forvaltning krever ID-porten pålogging, må synkroniserte brukere også inkludere fødselsnummeret til brukeren. For å støtte overføring av fødselsnummer til oss har vi laget et eget SCIM2 extension schema (urn:ietf:params:scim:schemas:extension:ks:personidentifikasjon). Se eksempel under på bruker med dette extension schemaet på:\n{ \u0026#34;schemas\u0026#34;: [ \u0026#34;urn:ietf:params:scim:schemas:core:2.0:User\u0026#34;, \u0026#34;urn:ietf:params:scim:schemas:extension:ks:personidentifikasjon:1.0\u0026#34; ], \u0026#34;id\u0026#34;: \u0026#34;1d17878e-1433-4d65-a9cf-5588274ae286\u0026#34;, \u0026#34;externalId\u0026#34;: \u0026#34;kari\u0026#34;, \u0026#34;userName\u0026#34;: \u0026#34;kari.nordmann@test.kommune.no\u0026#34;, \u0026#34;name\u0026#34;: { \u0026#34;formatted\u0026#34;: \u0026#34;Kari Nordmann\u0026#34;, \u0026#34;familyName\u0026#34;: \u0026#34;Nordmann\u0026#34;, \u0026#34;givenName\u0026#34;: \u0026#34;Kari\u0026#34; }, \u0026#34;displayName\u0026#34;: \u0026#34;Kari Nordmann\u0026#34;, \u0026#34;active\u0026#34;: true, \u0026#34;urn:ietf:params:scim:schemas:extension:ks:personidentifikasjon:1.0\u0026#34;: { \u0026#34;foedselsnummer\u0026#34;: \u0026#34;01017012345\u0026#34; } } Det er fullt mulig å synkronisere brukere uten fødselsnummer, men du vil da ikke kunne gi de tilganger på plattformen.\nGrupper Grupper er en enkel struktur og krever ingen extension skjema for å fungere med Fiks-plattformen. Eksempel på gruppe:\n{ \u0026#34;schemas\u0026#34;: [\u0026#34;urn:ietf:params:scim:schemas:core:2.0:Group\u0026#34;], \u0026#34;id\u0026#34;: \u0026#34;e9e30dba-f08f-4109-8486-d5c6a331660a\u0026#34;, \u0026#34;displayName\u0026#34;: \u0026#34;Saksbehandlere eiendom\u0026#34;, \u0026#34;members\u0026#34;: [ { \u0026#34;value\u0026#34;: \u0026#34;1d17878e-1433-4d65-a9cf-5588274ae286\u0026#34; } ] } Hvilke tjenester på Fiks-plattformen er støttet? Målet er å støtte alle tjenester på Fiks-plattformen som er i direkte bruk av ansatte i kommunal sektor. I første omgang har vi begynt med Fiks folkeregister slik at man kan knytte synkroniserte grupper og brukere til roller.\nFiks folkeregister For å kunne bruke sentralisert brukerstyring med Fiks folkeregister må dette aktiveres av en tjenesteadministrator i Fiks forvaltning konfigurasjon. Når det aktiveres kan man først få lastet ned en Excelfil med oversikt over alle personbrukere som har tilganger til de rollene man har opprettet. Går man så videre og trykker på knappen slettes alle de eksisterende persontilgangene. Det er defor viktig at man sørger for at de personer som skal ha tilgang er synkronisert over til oss slik at man kan gi de tilgang til de rollene de trenger enten via medlemskap i en gruppe eller brukertilgang. Integrasjoner blir ikke berørt av dette siden de ikke inngår i sentralisert brukerstyring. Når sentralisert brukerstyring er aktivert vil det være enklere enn tidligere å gi tilgang da man enten kan velge gruppe fra en liste eller søke i navnet på synkroniserte brukere. KS Læring Mapping av Scim2 User felter til KS Læring Feltene som mappes fra Scim2 User ressursen tilhører et av følgende schema:\nurn:ietf:params:scim:schemas:core:2.0:User urn:ietf:params:scim:schemas:extension:enterprise:2.0:User urn:ietf:params:scim:schemas:extension:ks:personidentifikasjon:1.0 Følgende tabell lister feltene som er i bruk i KS Læring (foedselsnummer og active er ikke tatt i bruk enda)\nscim2 User schema kslæring forklaring id :core:2.0:User Generert av brukersynkronisering externalId :core:2.0:User username username mapping valgt i konfig userName :core:2.0:User username username mapping valgt i konfig employeeNumber :extension:enterprise:2.0:User username username mapping valgt i konfig foedselsnummer :extension:ks:personidentifikasjon:1.0 Blir ikke synkronisert til KSL per i dag name.givenName :core:2.0:User firstname Fornavn name.familyName :core:2.0:User lastname Etternavn emails.0.value :core:2.0:User email Første email i listen som er primary eller work active :core:2.0:User Blir ikke synkronisert til KSL per i dag Hvilket av feltene externalId, userName, og employeeNumber som mappes til username i KS Læriing konfigureres i veiviseren for KS Læring brukerstyring.\n"
},
{
	"uri": "/tjenester/svarut/svarinn/",
	"title": "SvarInn",
	"tags": [],
	"description": "",
	"content": " SvarInn V1 "
},
{
	"uri": "/tjenester/svarut/",
	"title": "SvarUt",
	"tags": [],
	"description": "",
	"content": "Kort beskrivelse KS FIKS meldingformidler er en sentralisert løsning som formidler dokumenter mellom avsender og mottaker via ulike kanaler. Kommuner og andre kan benytte KS FIKS plattform. SvarUt benyttes for utgående post, mens SvarInn benyttes for innkommet post.\nEdialog er grensesnittet som tilbys innbygger for å fylle ut et skjema som skal returneres til kommunen.\nTilgjengelige grensesnitt Grensesnitt Støtte Web portal Ja Maskin til maskin Apier Beskrivelse av tjenesten SvarUt er en tjeneste som tilbyr et grensesnitt for aktørene i en digital dialog mellom kommune og innbygger.\nTeknisk oversikt skisse Konfigurasjon av Svarut Konfigurasjon av SvarUt\nIPer Hvis dere må åpne i brannvegg ligger svarut bak disse ipene:\nSvarUT-Test SvarUT-PROD 137.221.25.65 137.221.25.66 137.221.28.65 137.221.28.66 "
},
{
	"uri": "/tags/",
	"title": "Tags",
	"tags": [],
	"description": "",
	"content": ""
}]
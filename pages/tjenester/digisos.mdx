# Kort beskrivelse
Fiks Digisos er en tjeneste for å tilrettelegge for kommunal behandling av sosialsøknader via et brukergrensesnitt på Forside privatperson - nav.no . 

Fiks Digisos tilbyr: 
- Enkelt oppsett for den enkelte kommune gjennom Fiks Konfigurasjon. 
- Innbygger får fortløpende oppdatering på saksgang, tilgjengelig på Forside privatperson - nav.no . 
- Innbygger får tilgang til alle dokumenter og mulighet til å sende inn nye søknader basert på data fra tidligere søknader. 
- Ansatte/brukerstøtte i NAV kan se utvalgte deler av saken via NAV sine systemer. 
 

# Tilgjengelige grensesnitt

|**Grensesnitt**|**Støtte**|
|---------------|----------|
| Web portal | Ja |
| Maskin til maskin | Ja |

# Beskrivelse av tjenesten

## Detaljert teknisk oversiktsskisse
![Bilde](../felles/images/fiks_digisos.png "")

## Detaljert teknisk beskrivelse av løsning og integrasjon
Digisos består av flere komponenter fra Fiks-plattformen, der Fiks Digisos er hovedkomponenten som bruker andre komponenter:

- Fiks Digisos API: API for innsending av søknader fra nav.no og innsending av saksoppdateriger fra kommunenes fagsystemer.
- Fiks Dokumentlager: Brukes for lagring av krypterte søknader og saksoppdateringer, der innbyggeren får tilgang til sine dokumenter sendt over Digisos API-et.
- Fiks IO: Brukes som leveringskanal for søknader fra NAV til kommunene, som er en sikker kanal for maskin-til-maskin integrasjon, hvor søknadene blir meldingskryptert med mottakers offentlige nøkkel.
- SvarUt/SvarInn: Brukes som en alternativ leveringskanal for søknader fra NAV til kommunene, med leveranse med print dersom kommunens fagsystem ikke klarer å motta digitale forsendelser via SvarInn.

### Flyt
1) Innbygger fyller ut søknad om sosialstønad på nav.no, som sender denne til Fiks Digisos gjennom et synkront http api.
2) Fiks Digisos mottar søknaden.
  Søknadsfilen legges i Fiks Dokumentlager, og innbyggeren autoriseres for tilgang.
Fiks Digisos henter valgt leveransekanal for søknaden fra kommunens konfigurasjon, enten anbefalt kanal 2a) Fiks IO med SvarUt som alternativ eller 2b) Bare SvarUt.
a. Fiks IO - Kommunens konfigurasjon inneholder en konto-id som blir brukt som mottaker. Digisos-meldingene vil bli validert før de sendes til denne kontoen via Fiks IO. Den vil være tilgjengelig for henting fra Fiks IO-køen i en fastsatt periode. Dersom den oppgitte kontoen ikke støtter digisos-meldinger eller om kommunen ikke bekrefter mottak før denne perioden går ut vil meldingen bli trukket og alternativ kanal SvarUt benyttes for levering av søknaden (se punkt 5).
b. SvarUt/SvarInn - Søknaden sendes til SvarUt til kommunenes SvarInn mottakersystem, enten fordi den er valgt som eneste leveransekanal, eller fordi kommunen ikke kan motta digisos-meldinger gjennom Fiks IO (se punkt 5).
Fiks returnerer 202 ACCEPTED på http-kallet fra NAV. Dette markerer ansvarsoverføring fra NAV til Fiks, som fra nå garanterer at saken leveres til kommune for behandling.
Søknanden opprettes i kommunalt fagsystem etter vellykket mottak via Fiks IO eller SvarInn.
Det kommunale fagsystemet bekrefter mottak av søknaden og oppdaterer status i Fiks Digisos.
Evt. nye filer legges til saken, autorisert for innbygger.
Saken er tilgjengelig for innbygger på nav.no.
Om fagsystemet avviser eller unnlater å bekrefte mottak av saken via Fiks IO vil SvarUt benyttes som alternativ kanal, der det inkluderes en fil som inneholder både NAV og Fiks Digisos sin id for saken. I praksis betyr dette at meldingen blir sendt til kommunens SvarInn mottakersystem, evt. sendt til print og postlagt ved problemer med mottak til kommunens fagsystem.
Søknader mottatt via SvarUt kan også manuelt lastes ned av kommunen via SvarUt-brukergrensesnittet.

### Integrasjonsutvikling??

### Fagsystem???

# Hvordan ta i bruk
1. Sjekk at kommunens fagsystem er kompatibelt med Digisos. 
2. Ta kontakt med fiks[at]ks.no for en tilgang til testmiljøet. 
3. Kommunens tjenesteadministrator oppretter en integrasjon på Fiks forvaltning portalen. 
4. Test og verifiser test integrasjonen. 
5. Skriv avtale med KS på tjenesten. 
6. Kommunens tjenesteadministrator oppretter en integrasjon på Fiks forvaltning portalen mot produksjonsdata. 
7. Verifiser at integrasjonen virker. 

# Integrerte fiks komponenter
- Fiks svarut/svarinn
- Fiks IO
- Fiks dokumentlager
- Digisos API

# Testmiljø
Send en e-post til fiks[at]ks.no for å få tilgang til testmiljøet.
Konfigurasjon finnes på [forvaltning.fiks.ks.no](https://forvaltning.fiks.test.ks.no) Benytt ID-porten testbruker for innlogging.

<!DOCTYPE html>
<html>
  <head>
    <title>KS Fiks</title>
    
      <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<meta name="revised" content="2019-06-20T15:00:57 CEST">
<title>SvarInn - Mottaksservice :: KS Fiks</title>
<link rel="shortcut icon" href="/images/favicon.png" type="image/x-icon" />
<link href="/css/nucleus.css" rel="stylesheet">
<link href="/css/font-awesome.min.css" rel="stylesheet">
<link href="/css/hybrid.css" rel="stylesheet">
<link href="/css/featherlight.min.css" rel="stylesheet">
<link href="/css/auto-complete.css" rel="stylesheet">
<link href="/theme-original/style.css" rel="stylesheet">

<link rel="stylesheet" href="/css/bootstrap.min.css">
<script src="/js/jquery-2.x.min.js"></script>
<style type="text/css">
  :root #header + #content > #left > #rlblock_left {
    display:none !important;
  }
</style>
<meta name="description" content="">


    
  </head>
  <body data-url="/svarut/svarinn-mottakservice/">
    
      <div id="headermain"></div>
<nav id="sidebar" class="">



<div class="highlightable">
  <div id="header-wrapper">
    <div id="header">
      
	
  
    <p><img src="/images/ks-logo.svg" width="30%"></p>

  


    </div>
        <div class="searchbox">
		    <label for="search-by"><i class="fa fa-search"></i></label>
		    <input data-search-input id="search-by" type="text" placeholder="">
		    <span data-search-clear=""><i class="fa fa-close"></i></span>
		</div>
		<script type="text/javascript" src="/js/lunr.min.js"></script>
		<script type="text/javascript" src="/js/auto-complete.js"></script>
		<script type="text/javascript">
        
            var baseurl = "\/";
        
		</script>
		<script type="text/javascript" src="/js/search.js"></script>
  </div>

      <ul class="topics">
            <li data-nav-id="/" class="dd-item">
            <a href="/"><i class="fa fa-fw fa-home"></i></a>
            </li>
    <li data-nav-id="/fiks-platform/" class="dd-item haschildren
        ">
      <div>
      <a href="/fiks-platform/">Fiks-plattformen</a><i class="fa fa-angle-right fa-lg category-icon"></i>
      </div>
        <ul>
      <li data-nav-id="/fiks-platform/integrasjoner/" class="dd-item">
        <div>
          <a href="/fiks-platform/integrasjoner/">
            Integrasjonsutvikling
          </a>
        </div>
    </li>
      <li data-nav-id="/fiks-platform/konfigurasjon/" class="dd-item">
        <div>
          <a href="/fiks-platform/konfigurasjon/">
            Konfigurasjon
          </a>
        </div>
    </li>
      <li data-nav-id="/fiks-platform/sikkerhet/" class="dd-item">
        <div>
          <a href="/fiks-platform/sikkerhet/">
            Sikkerhet og personvern
          </a>
        </div>
    </li>
      <li data-nav-id="/fiks-platform/testmiljo/" class="dd-item">
        <div>
          <a href="/fiks-platform/testmiljo/">
            Testmiljø
          </a>
        </div>
    </li>
    <li data-nav-id="/fiks-platform/tjenester/" class="dd-item haschildren
        ">
      <div>
      <a href="/fiks-platform/tjenester/">Tjenester</a><i class="fa fa-angle-right fa-lg category-icon"></i>
      </div>
        <ul>
      <li data-nav-id="/fiks-platform/tjenester/dokumentlager/" class="dd-item">
        <div>
          <a href="/fiks-platform/tjenester/dokumentlager/">
            Dokumentlager
          </a>
        </div>
    </li>
      <li data-nav-id="/fiks-platform/tjenester/fullmakt/" class="dd-item">
        <div>
          <a href="/fiks-platform/tjenester/fullmakt/">
            Fullmakt
          </a>
        </div>
    </li>
      <li data-nav-id="/fiks-platform/tjenester/innsyn/" class="dd-item">
        <div>
          <a href="/fiks-platform/tjenester/innsyn/">
            Innsyn
          </a>
        </div>
    </li>
      <li data-nav-id="/fiks-platform/tjenester/minside/" class="dd-item">
        <div>
          <a href="/fiks-platform/tjenester/minside/">
            MinSide
          </a>
        </div>
    </li>
        </ul>
    </li>
    <li data-nav-id="/fiks-platform/tjenester_under_utvikling/" class="dd-item haschildren
        ">
      <div>
      <a href="/fiks-platform/tjenester_under_utvikling/">Tjenester under utvikling</a><i class="fa fa-angle-right fa-lg category-icon"></i>
      </div>
        <ul>
      <li data-nav-id="/fiks-platform/tjenester_under_utvikling/audit/" class="dd-item">
        <div>
          <a href="/fiks-platform/tjenester_under_utvikling/audit/">
            Audit
          </a>
        </div>
    </li>
      <li data-nav-id="/fiks-platform/tjenester_under_utvikling/digisos/" class="dd-item">
        <div>
          <a href="/fiks-platform/tjenester_under_utvikling/digisos/">
            Digisos
          </a>
        </div>
    </li>
      <li data-nav-id="/fiks-platform/tjenester_under_utvikling/fiksio/" class="dd-item">
        <div>
          <a href="/fiks-platform/tjenester_under_utvikling/fiksio/">
            Fiks IO (SvarInn 2)
          </a>
        </div>
    </li>
        </ul>
    </li>
      <li data-nav-id="/fiks-platform/utviklingsmetodikk/" class="dd-item">
        <div>
          <a href="/fiks-platform/utviklingsmetodikk/">
            Utviklingsfilosofi
          </a>
        </div>
    </li>
        </ul>
    </li>
    <li data-nav-id="/svarut/" class="dd-item parent haschildren
        ">
      <div>
      <a href="/svarut/">SvarUt</a>
            <i class="fa fa-angle-down fa-lg category-icon"></i>
      </div>
        <ul>
      <li data-nav-id="/svarut/edialog/" class="dd-item">
        <div>
          <a href="/svarut/edialog/">
            Edialog
          </a>
        </div>
    </li>
    <li data-nav-id="/svarut/integrasjon/" class="dd-item haschildren
        ">
      <div>
      <a href="/svarut/integrasjon/">Integrasjon mot SvarUt</a><i class="fa fa-angle-right fa-lg category-icon"></i>
      </div>
        <ul>
      <li data-nav-id="/svarut/integrasjon/forsendelserestservicev1/" class="dd-item">
        <div>
          <a href="/svarut/integrasjon/forsendelserestservicev1/">
            ForsendelseRestServiceV1
          </a>
        </div>
    </li>
      <li data-nav-id="/svarut/integrasjon/forsendelseservicev1/" class="dd-item">
        <div>
          <a href="/svarut/integrasjon/forsendelseservicev1/">
            ForsendelseServiceV1
          </a>
        </div>
    </li>
      <li data-nav-id="/svarut/integrasjon/forsendelseservicev2/" class="dd-item">
        <div>
          <a href="/svarut/integrasjon/forsendelseservicev2/">
            ForsendelseServiceV2
          </a>
        </div>
    </li>
      <li data-nav-id="/svarut/integrasjon/forsendelseservicev3/" class="dd-item">
        <div>
          <a href="/svarut/integrasjon/forsendelseservicev3/">
            ForsendelseServiceV3
          </a>
        </div>
    </li>
      <li data-nav-id="/svarut/integrasjon/forsendelseservicev4/" class="dd-item">
        <div>
          <a href="/svarut/integrasjon/forsendelseservicev4/">
            ForsendelseServiceV4
          </a>
        </div>
    </li>
      <li data-nav-id="/svarut/integrasjon/forsendelseservicev5/" class="dd-item">
        <div>
          <a href="/svarut/integrasjon/forsendelseservicev5/">
            ForsendelseServiceV5
          </a>
        </div>
    </li>
      <li data-nav-id="/svarut/integrasjon/forsendelseservicev6/" class="dd-item">
        <div>
          <a href="/svarut/integrasjon/forsendelseservicev6/">
            ForsendelseServiceV6
          </a>
        </div>
    </li>
      <li data-nav-id="/svarut/integrasjon/forsendelseservicev7/" class="dd-item">
        <div>
          <a href="/svarut/integrasjon/forsendelseservicev7/">
            ForsendelseServiceV7
          </a>
        </div>
    </li>
      <li data-nav-id="/svarut/integrasjon/forsendelseservicev8/" class="dd-item">
        <div>
          <a href="/svarut/integrasjon/forsendelseservicev8/">
            ForsendelseServiceV8
          </a>
        </div>
    </li>
      <li data-nav-id="/svarut/integrasjon/forsendelseservicev9/" class="dd-item">
        <div>
          <a href="/svarut/integrasjon/forsendelseservicev9/">
            ForsendelseServiceV9
          </a>
        </div>
    </li>
      <li data-nav-id="/svarut/integrasjon/forsendelsesservicev10/" class="dd-item">
        <div>
          <a href="/svarut/integrasjon/forsendelsesservicev10/">
            ForsendelsesServiceV10
          </a>
        </div>
    </li>
      <li data-nav-id="/svarut/integrasjon/forsendelsesservicev11/" class="dd-item">
        <div>
          <a href="/svarut/integrasjon/forsendelsesservicev11/">
            ForsendelsesServiceV11
          </a>
        </div>
    </li>
      <li data-nav-id="/svarut/integrasjon/kodeeksempeldotnet/" class="dd-item">
        <div>
          <a href="/svarut/integrasjon/kodeeksempeldotnet/">
            Kodeeksempel .Net
          </a>
        </div>
    </li>
      <li data-nav-id="/svarut/integrasjon/kodeeksempeljava/" class="dd-item">
        <div>
          <a href="/svarut/integrasjon/kodeeksempeljava/">
            Kodeeksempel Java
          </a>
        </div>
    </li>
      <li data-nav-id="/svarut/integrasjon/kodeeksempelmottakerrest/" class="dd-item">
        <div>
          <a href="/svarut/integrasjon/kodeeksempelmottakerrest/">
            Kodeeksempel MottaksserviceV1
          </a>
        </div>
    </li>
      <li data-nav-id="/svarut/integrasjon/mottaksservice-rest/" class="dd-item">
        <div>
          <a href="/svarut/integrasjon/mottaksservice-rest/">
            MottakService v1
          </a>
        </div>
    </li>
        </ul>
    </li>
      <li data-nav-id="/svarut/konfigurasjon-av-svarut/" class="dd-item">
        <div>
          <a href="/svarut/konfigurasjon-av-svarut/">
            Konfigurasjon av SvarUT
          </a>
        </div>
    </li>
      <li data-nav-id="/svarut/signeringstjeneste/" class="dd-item">
        <div>
          <a href="/svarut/signeringstjeneste/">
            Signeringstjeneste
          </a>
        </div>
    </li>
      <li data-nav-id="/svarut/forsendelser-og-sikkerhet/" class="dd-item">
        <div>
          <a href="/svarut/forsendelser-og-sikkerhet/">
            Sikkerhet
          </a>
        </div>
    </li>
      <li data-nav-id="/svarut/svarinn-mottakservice/" class="dd-item active">
        <div>
          <a href="/svarut/svarinn-mottakservice/">
            SvarInn - Mottaksservice
          </a>
        </div>
    </li>
      <li data-nav-id="/svarut/svarut-svarinn-adressering/" class="dd-item">
        <div>
          <a href="/svarut/svarut-svarinn-adressering/">
            SvarUt - SvarInn adressering
          </a>
        </div>
    </li>
      <li data-nav-id="/svarut/testmiljo/" class="dd-item">
        <div>
          <a href="/svarut/testmiljo/">
            SvarUt Testmiljø
          </a>
        </div>
    </li>
      <li data-nav-id="/svarut/endringer/" class="dd-item">
        <div>
          <a href="/svarut/endringer/">
            SvarUt endringer
          </a>
        </div>
    </li>
        </ul>
    </li>



        <section id="shortcuts">
                <li class="" role=""><h3>More</h3><a href="https://github.com/ks-no/ks-no.github.io" target="_blank" rel="noopener"><i class='fa fa-github'></i> <label>Github repo</label></a></li>
                <li class="" role=""><a href="/index.xml" target="_blank" rel="noopener"><img src='/images/feed-icon-28x28.png'></a></li>
        </section>

    <hr />
    <li></li>
    
    </ul>

 <section id="footer">
    </section>
  </div>
</nav>



<section id="body">
<div id="overlay"></div>
<div class="padding highlightable">

  <div id="top-bar">
    
      
      
      
    <div id="top-github-link">
      <a class="github-link" href="https://github.com/ks-no/ks-no.github.io/edit/source/content/svarut/svarinn-mottakservice.md" target="blank">
        <i class="fa fa-code-fork"></i>
        
      </a>
    </div><div id="breadcrumbs" itemscope="" itemtype="http://data-vocabulary.org/Breadcrumb">
        <span id="sidebar-toggle-span">
          <a href="#" id="sidebar-toggle" data-sidebar-toggle="">
            <i class="fa fa-bars"></i>
          </a>
        </span>
        <span id="toc-menu"><i class="fa fa-list-alt"></i></span>
        <span class="links">
        







 <a href='/'>KS Fiks dokumentasjon</a> > <a href='/svarut/'>SvarUt</a> > SvarInn - Mottaksservice

 

 

   
        </span>
    </div>
    
    
    <div class="progress">
        <div class="wrapper">
    <nav id="TableOfContents">
<ul>
<li>
<ul>
<li><a href="#hva-er-mottaksservice">Hva er Mottaksservice?</a></li>
<li><a href="#hvordan-bruke-mottaksservice">Hvordan bruke Mottaksservice?</a></li>
<li><a href="#forsendelsesflyt-i-svarut">Forsendelsesflyt i SvarUt</a></li>
</ul></li>
</ul>
</nav>
        </div>
    </div>
    

  </div>


<div id="body-inner">
  
    <h1>SvarInn - Mottaksservice</h1>
  



    
    
    
    

<p>Mottaksservice gjør det mulig å laste ned og kvittere ut forsendelser før de varsles gjennom Altinn og sendes til eventuell printing.</p>

<h2 id="hva-er-mottaksservice">Hva er Mottaksservice?</h2>

<p>Primært brukes Mottaksservice til å automatisere nedlasting og import av forsendelser direkte i sakssystemer. Fra en forsendelse er mottatt i SvarUt er den tilgjengelig for nedlasting via mottaksservicen. Dersom forsendelsen ikke blir lastet ned innen 2 timer vil mottakersystem få en advarsel mail.</p>

<p>Mottaksservice gir mulighet for å laste ned sensitive forsendelser. Dette betyr at mottaker må legge inn sitt offentlige sertifikat i SvarUt, og bruke sin private nøkkel til å dekryptere forsendelsesfilene som blir lastet ned. Alle forsendelser blir sendt på denne måten selv, uavhengig av om forsendelsen er nivå 3 eller 4.</p>

<p>Mottaksservicen består av 3 tjenester (se også <a href="/svarut/svarinn-mottakservice/">detaljert beskrivelse</a>):</p>

<ol>
<li><strong>hentNyeForsendelser -</strong> Henter nye forsendelser som er klar for import.</li>
<li><strong>getForsendelsefil -</strong> Henter filen for en gitt forsendelse, enten som PDF eller zipfil. Filen vil være kryptert og må dekrypteres etter nedlasting.</li>
<li><strong>kvitterMottak -</strong> Kvitterer ut en gitt forsendelse. Forsendelsesstatus vil bli satt til lest. Dette stopper varsel til Altinn og senere printing.</li>
</ol>

<p>Sakssystemer må klargjøres for bruk av mottaksservicen. SvarUt-teamet har laget en modul som kan brukes for noen leverandører, samt fungere som et eksempel på hva som er nødvendig for integrasjon med SvarUt. Denne modulen er tilgjengelig <a href="https://github.com/ks-no/svarut-sak-mottak">her</a>.</p>

<h2 id="hvordan-bruke-mottaksservice">Hvordan bruke Mottaksservice?</h2>

<p>Mottaksservicen konfigureres under menypunktet <a href="/mottaker/">Mottakersystem</a>. Her kan administrator opprette nye mottakersystem og gi personer tilgang til mottakersystemet. Deretter kan personene som har fått tilgang selv utføre resten av stegene. De første 3 stegene utføres kun én gang, steg 4 en gang som en test. De siste tre stegene bør settes opp som en regelmessig jobb som kjøres hvert 15. minutt.</p>

<ol>
<li><strong>Opprett mottakersystem</strong></li>
</ol>

<p>En administrator oppretter et mottakersystem som skal ha tilgang til forsendelser. I dette steget legges det inn minst én person som har tilgang til dette mottakersystemet. Personen blir gitt tilgang basert på fødselsnummeret sitt.</p>

<ol>
<li><strong>Legg til organisasjon</strong></li>
</ol>

<p>Personen som ble gitt tilgang i punktet over legger inn organisasjoner som mottakersystemet skal ha tilgang til. SvarUt sjekker om personen har tilgang til organisasjonsnummeret ved å spørre Altinn.</p>

<ol>
<li><strong>Generer servicepassord</strong></li>
</ol>

<p>Personen genererer et servicepassord. Dette passordet brukes for å validere mottakersystemet mot automatisk importtjeneste. Dette gjøres via <a href="/mottaker/">mottakersystem</a>-siden, under &ldquo;Service&rdquo; fanen for et mottakersystem. Mottakersystemet må bruke brukernavnet og servicepassordet for autentisering ved hver nedlasting.</p>

<ol>
<li><strong>Registrér offentlig sertifikat</strong></li>
</ol>

<p>Personen må laste opp mottakersystemets offentlige sertifikat. Dette gjøres også via <a href="/mottaker/">mottakersystem</a>-siden, under &ldquo;Service&rdquo; fanen for et mottakersystem. Den private nøkkelen brukes i mottakersystemet for å dekryptere forsendelsesfiler etter nedlasting (se <a href="https://github.com/ks-no/svarut-sak-mottak">her</a> for et eksempel på integrasjon).</p>

<ol>
<li><strong>Send forsendelse</strong></li>
</ol>

<p>Opprett minst en forsendelse til en organisasjon som personen har tilgang til.</p>

<ol>
<li><strong>Hent nye forsendelser</strong></li>
</ol>

<p>Kall automatisk importtjeneste og oppgi brukernavn og servicepassord ved autentisering. Alle forsendelser mottakersystemet har tilgang til returneres som en liste. Merk at listen ikke inneholder selve filene, kun informasjon om forsendelsen.</p>

<ol>
<li><strong>Hent forsendelsefil</strong></li>
</ol>

<p>Etter autentisering og nedlasting av forsendelser, oppgi forsendelseid til en forsendelse til importtjenesten. Dette kallet returnerer selve filen enten som zip-fil eller som PDF.</p>

<ol>
<li><strong>Kvittér for mottak</strong></li>
</ol>

<p>Siste steg er å kvittere ut forsendelsen. Oppgi forsendelsesid til importtjenesten, og forsendelsen markeres som lest.</p>

<h2 id="forsendelsesflyt-i-svarut">Forsendelsesflyt i SvarUt</h2>

<p><img src="https://raw.githubusercontent.com/wiki/ks-no/svarut-dokumentasjon/mottakerserviceflyt.png" alt="forsendelsestatusoversikt" /></p>


    
    
          <footer class=" footline" >
	
</footer>
  </div>
</div>

<div id="navigation">
</div>

</section>
<div style="left: -1000px; overflow: scroll; position: absolute; top: -1000px; border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;">
  <div style="border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;"></div>
</div>    

<script src="/js/clipboard.min.js"></script>
<script src="/js/featherlight.min.js"></script>
<script src="/js/html5shiv-printshiv.min.js"></script>

<script src="/js/modernizr.custom.71422.js"></script>
<script src="/js/docdock.js"></script>
<script src="/theme-original/script.js"></script>


    

    
    

    
  </body>
</html>
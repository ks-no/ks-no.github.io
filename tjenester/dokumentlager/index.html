<!DOCTYPE html>
<html lang="no" class="js csstransforms3d">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="Hugo 0.118.2">
    <meta name="description" content="">


    <link rel="icon" href="/images/favicon.png" type="image/png">

    <title>Fiks dokumentlager :: KS Fiks</title>

    
    <link href="/css/nucleus.css?1696507688" rel="stylesheet">
    <link href="/css/fontawesome-all.min.css?1696507688" rel="stylesheet">
    <link href="/css/hybrid.css?1696507688" rel="stylesheet">
    <link href="/css/featherlight.min.css?1696507688" rel="stylesheet">
    <link href="/css/perfect-scrollbar.min.css?1696507688" rel="stylesheet">
    <link href="/css/auto-complete.css?1696507688" rel="stylesheet">
    <link href="/css/atom-one-dark-reasonable.css?1696507688" rel="stylesheet">
    <link href="/css/theme.css?1696507688" rel="stylesheet">
    <link href="/css/hugo-theme.css?1696507688" rel="stylesheet">
    
      <link href="/css/theme-ks.css?1696507688" rel="stylesheet">
    

    <script src="/js/jquery-3.3.1.min.js?1696507688"></script>

    <style>
      :root #header + #content > #left > #rlblock_left{
          display:none !important;
      }
      
    </style>
    
  </head>
  <body class="" data-url="/tjenester/dokumentlager/">
    <nav id="sidebar" class="">



  <div id="header-wrapper">
    <div id="header">
      <img src="/images/ks-logo.svg" alt="KS logo" class="ks-logo"/>

    </div>
    
        <div class="searchbox">
    <label for="search-by"><i class="fas fa-search"></i></label>
    <input data-search-input id="search-by" type="search" placeholder="">
    <span data-search-clear=""><i class="fas fa-times"></i></span>
</div>

<script type="text/javascript" src="/js/lunr.min.js?1696507688"></script>
<script type="text/javascript" src="/js/auto-complete.js?1696507688"></script>
<script type="text/javascript">
    
        var baseurl = "\/";
    
</script>
<script type="text/javascript" src="/js/search.js?1696507688"></script>

    
  </div>

    <div class="highlightable">
    <ul class="topics">

          
          
          


 
  
    
    <li data-nav-id="/felles/" title="Felles" class="dd-item 
        
        
        
        ">
      <a href="/felles/">
          Felles
          
      </a>
      
      
        <ul>
          
          
            
          
          
          
          
          
            
            


 
  
    
      <li data-nav-id="/felles/integrasjoner/" title="Integrasjoner" class="dd-item ">
        <a href="/felles/integrasjoner/">
        Integrasjoner
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/felles/difiidportenklient/" title="Maskinporten" class="dd-item ">
        <a href="/felles/difiidportenklient/">
        Maskinporten
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/felles/sentralisert-brukerstyring/" title="Sentralisert brukerstyring" class="dd-item 
        
        
        
        ">
      <a href="/felles/sentralisert-brukerstyring/">
          Sentralisert brukerstyring
          
      </a>
      
      
        <ul>
          
          
          
          
          
          
            
            


 
  
    
      <li data-nav-id="/felles/sentralisert-brukerstyring/azure/" title="Sette opp Azure AD" class="dd-item ">
        <a href="/felles/sentralisert-brukerstyring/azure/">
        Sette opp Azure AD
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/felles/sikkerhet/" title="Sikkerhet og personvern i Fiks-plattformen" class="dd-item ">
        <a href="/felles/sikkerhet/">
        Sikkerhet og personvern i Fiks-plattformen
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/felles/testmiljo/" title="Testmiljø" class="dd-item ">
        <a href="/felles/testmiljo/">
        Testmiljø
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          


 
  
    
    <li data-nav-id="/tjenester/" title="Tjenester" class="dd-item 
        parent
        
        
        ">
      <a href="/tjenester/">
          Tjenester
          
      </a>
      
      
        <ul>
          
          
            
          
          
          
          
          
            
            


 
  
    
      <li data-nav-id="/tjenester/klientpakker/" title="Distribuerte pakker og klienter - risikovurdering" class="dd-item ">
        <a href="/tjenester/klientpakker/">
        Distribuerte pakker og klienter - risikovurdering
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/tjenester/bekymringsmelding/" title="Fiks bekymringsmelding" class="dd-item ">
        <a href="/tjenester/bekymringsmelding/">
        Fiks bekymringsmelding
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/tjenester/digisos/" title="Fiks digisos" class="dd-item ">
        <a href="/tjenester/digisos/">
        Fiks digisos
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/tjenester/dokumentlager/" title="Fiks dokumentlager" class="dd-item active">
        <a href="/tjenester/dokumentlager/">
        Fiks dokumentlager
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/tjenester/innreise/" title="Fiks innreise" class="dd-item ">
        <a href="/tjenester/innreise/">
        Fiks innreise
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/tjenester/kjoretoyregister/" title="Fiks kjøretøyregister" class="dd-item ">
        <a href="/tjenester/kjoretoyregister/">
        Fiks kjøretøyregister
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/tjenester/klinikermelding/" title="Fiks klinikermelding" class="dd-item ">
        <a href="/tjenester/klinikermelding/">
        Fiks klinikermelding
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/tjenester/fiksmelding/" title="Fiks melding" class="dd-item 
        
        
        
        ">
      <a href="/tjenester/fiksmelding/">
          Fiks melding
          
      </a>
      
      
        <ul>
          
          
          
          
          
          
            
            


 
  
    
      <li data-nav-id="/tjenester/fiksmelding/edialog/" title="eDialog" class="dd-item ">
        <a href="/tjenester/fiksmelding/edialog/">
        eDialog
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/tjenester/fiksmelding/del_dokument/" title="Fiks del dokument" class="dd-item ">
        <a href="/tjenester/fiksmelding/del_dokument/">
        Fiks del dokument
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/tjenester/fiksmelding/fiks-sms/" title="Fiks SMS" class="dd-item ">
        <a href="/tjenester/fiksmelding/fiks-sms/">
        Fiks SMS
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/tjenester/fiksprotokoll/" title="Fiks protokoll" class="dd-item 
        
        
        
        ">
      <a href="/tjenester/fiksprotokoll/">
          Fiks protokoll
          
      </a>
      
      
        <ul>
          
          
            
          
          
          
          
          
            
            


 
  
    
      <li data-nav-id="/tjenester/fiksprotokoll/ssbbarnevern/" title="Barnevern - fagsysteminnrapportering til Barnevernsregisteret" class="dd-item ">
        <a href="/tjenester/fiksprotokoll/ssbbarnevern/">
        Barnevern - fagsysteminnrapportering til Barnevernsregisteret
        
        </a>
    </li>
     
  
 

            
          
             
            
          
            
            


 
  
    
      <li data-nav-id="/tjenester/fiksprotokoll/arkiv/" title="Fiks arkiv" class="dd-item ">
        <a href="/tjenester/fiksprotokoll/arkiv/">
        Fiks arkiv
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/tjenester/fiksprotokoll/arkivlett/" title="Fiks arkivlett byggesak" class="dd-item ">
        <a href="/tjenester/fiksprotokoll/arkivlett/">
        Fiks arkivlett byggesak
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/tjenester/fiksprotokoll/fiksio/" title="Fiks IO" class="dd-item ">
        <a href="/tjenester/fiksprotokoll/fiksio/">
        Fiks IO
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/tjenester/fiksprotokoll/matrikkelfoering/" title="Fiks matrikkelføring" class="dd-item ">
        <a href="/tjenester/fiksprotokoll/matrikkelfoering/">
        Fiks matrikkelføring
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/tjenester/fiksprotokoll/plan/" title="Fiks plan" class="dd-item ">
        <a href="/tjenester/fiksprotokoll/plan/">
        Fiks plan
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/tjenester/provesvar/" title="Fiks prøvesvar" class="dd-item ">
        <a href="/tjenester/provesvar/">
        Fiks prøvesvar
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/tjenester/register/" title="Fiks register" class="dd-item 
        
        
        
        ">
      <a href="/tjenester/register/">
          Fiks register
          
      </a>
      
      
        <ul>
          
          
          
          
          
          
            
            


 
  
    
      <li data-nav-id="/tjenester/register/folkeregister/" title="Folkeregister" class="dd-item ">
        <a href="/tjenester/register/folkeregister/">
        Folkeregister
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/tjenester/register/skatteoginntektsopplysninger/" title="Skatte- og inntektsopplysninger" class="dd-item ">
        <a href="/tjenester/register/skatteoginntektsopplysninger/">
        Skatte- og inntektsopplysninger
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/tjenester/dhis2/" title="Fiks smittesporing" class="dd-item ">
        <a href="/tjenester/dhis2/">
        Fiks smittesporing
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/tjenester/vaksine/" title="Fiks vaksine" class="dd-item ">
        <a href="/tjenester/vaksine/">
        Fiks vaksine
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/tjenester/kslering/" title="KS læring" class="dd-item 
        
        
        
        ">
      <a href="/tjenester/kslering/">
          KS læring
          
      </a>
      
      
        <ul>
          
          
          
          
          
          
             
            
          
             
            
          
        
        </ul>
              
    </li>
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/tjenester/minkommune/" title="Min kommune" class="dd-item 
        
        
        
        ">
      <a href="/tjenester/minkommune/">
          Min kommune
          
      </a>
      
      
        <ul>
          
          
          
          
          
          
            
            


 
  
    
      <li data-nav-id="/tjenester/minkommune/faktura/" title="Min kommune - faktura" class="dd-item ">
        <a href="/tjenester/minkommune/faktura/">
        Min kommune - faktura
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/tjenester/minkommune/innsyn/" title="Min kommune - innsyn" class="dd-item ">
        <a href="/tjenester/minkommune/innsyn/">
        Min kommune - innsyn
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/tjenester/minkommune/kommunaletjenester/" title="Min kommune - kommunale tjenester" class="dd-item ">
        <a href="/tjenester/minkommune/kommunaletjenester/">
        Min kommune - kommunale tjenester
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/tjenester/minkommune/matrikkel/" title="Min kommune - matrikkel" class="dd-item ">
        <a href="/tjenester/minkommune/matrikkel/">
        Min kommune - matrikkel
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/tjenester/svarut/" title="SvarUt" class="dd-item 
        
        
        
        ">
      <a href="/tjenester/svarut/">
          SvarUt
          
      </a>
      
      
        <ul>
          
          
            
          
          
          
          
          
            
            


 
  
    
      <li data-nav-id="/tjenester/svarut/restv1/" title="API: Integrasjon med REST" class="dd-item ">
        <a href="/tjenester/svarut/restv1/">
        API: Integrasjon med REST
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/tjenester/svarut/soapv11/" title="API: Integrasjon med SOAP" class="dd-item ">
        <a href="/tjenester/svarut/soapv11/">
        API: Integrasjon med SOAP
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/tjenester/svarut/svarinn-rest/" title="API: SvarInn REST" class="dd-item ">
        <a href="/tjenester/svarut/svarinn-rest/">
        API: SvarInn REST
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/tjenester/svarut/api-versjoner/" title="API: Versjonsoversikt" class="dd-item ">
        <a href="/tjenester/svarut/api-versjoner/">
        API: Versjonsoversikt
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/tjenester/svarut/edialog/" title="Fiks eDialog" class="dd-item ">
        <a href="/tjenester/svarut/edialog/">
        Fiks eDialog
        
        </a>
    </li>
     
  
 

            
          
             
            
          
            
            


 
  
    
      <li data-nav-id="/tjenester/svarut/konfigurasjon-av-svarut/" title="Konfigurasjon av SvarUT" class="dd-item ">
        <a href="/tjenester/svarut/konfigurasjon-av-svarut/">
        Konfigurasjon av SvarUT
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/tjenester/svarut/signeringstjeneste/" title="Signeringstjeneste" class="dd-item ">
        <a href="/tjenester/svarut/signeringstjeneste/">
        Signeringstjeneste
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/tjenester/svarut/forsendelser-og-sikkerhet/" title="Sikkerhet" class="dd-item ">
        <a href="/tjenester/svarut/forsendelser-og-sikkerhet/">
        Sikkerhet
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/tjenester/svarut/svarinn-mottakservice/" title="SvarInn" class="dd-item ">
        <a href="/tjenester/svarut/svarinn-mottakservice/">
        SvarInn
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/tjenester/svarut/svarut-svarinn-adressering/" title="SvarUt - SvarInn adressering" class="dd-item ">
        <a href="/tjenester/svarut/svarut-svarinn-adressering/">
        SvarUt - SvarInn adressering
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/tjenester/svarut/testmiljo/" title="SvarUt Testmiljø" class="dd-item ">
        <a href="/tjenester/svarut/testmiljo/">
        SvarUt Testmiljø
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
         
    </ul>

    
    
      <section id="shortcuts">
        <h3></h3>
        <ul>
          
              <li> 
                  <h3>Lenker</h3><a class="padding" href="https://github.com/ks-no/ks-no.github.io"><label>Github repo</label></a>
              </li>
          
              <li> 
                  <a class="padding" href="/index.xml"><img src='/images/feed-icon-28x28.png' aria-hidden='true'>&nbsp;RSS</a>
              </li>
          
        </ul>
      </section>
    

    
    <section id="footer">
      <p>Built with <a href="https://github.com/matcornic/hugo-theme-learn"><i class="fas fa-heart"></i></a> from <a href="https://getgrav.org">Grav</a> and <a href="https://gohugo.io/">Hugo</a></p>

    </section>
  </div>
</nav>





        <section id="body">
        <div id="overlay"></div>
        <div class="padding highlightable">
              
              <div>
                <div id="top-bar">
                
                  
                  
                  
                  <div id="top-github-link">
                    <a class="github-link" title='' href="https://github.com/ks-no/ks-no.github.io/edit/source/content/Tjenester/dokumentlager.md" target="blank">
                      <i class="fas fa-code-branch"></i>
                      <span id="top-github-link-text"></span>
                    </a>
                  </div>
                  
                
                
                <div id="breadcrumbs" itemscope="" itemtype="http://data-vocabulary.org/Breadcrumb">
                    <span id="sidebar-toggle-span">
                        <a href="#" id="sidebar-toggle" data-sidebar-toggle="">
                          <i class="fas fa-bars"></i>
                        </a>
                    </span>
                  
                  <span id="toc-menu"><i class="fas fa-list-alt"></i></span>
                  
                  <span class="links">
                 
                 
                    
          
          
            
            
          
          
            
            
          
          
            <a href='/'>KS Fiks dokumentasjon</a> > <a href='/tjenester/'>Tjenester</a> > Fiks dokumentlager
          
         
          
         
          
        
                 
                  </span>
                </div>
                
                    <div class="progress">
    <div class="wrapper">
<nav id="TableOfContents">
  <ol>
    <li><a href="#kort-beskrivelse">Kort beskrivelse</a></li>
    <li><a href="#tilgjengelige-grensesnitt">Tilgjengelige grensesnitt</a></li>
    <li><a href="#beskrivelse-av-tjenesten">Beskrivelse av tjenesten</a>
      <ol>
        <li><a href="#klienter">Klienter</a></li>
        <li><a href="#integrasjonsutvikling">Integrasjonsutvikling</a></li>
      </ol>
    </li>
  </ol>
</nav>
    </div>
</div>

                
              </div>
            </div>
            
        <div id="head-tags">
        
        </div>
        
        <div id="body-inner">
          
            <h1>
              
              Fiks dokumentlager
            </h1>
          

        



<h2 id="kort-beskrivelse">Kort beskrivelse</h2>
<p>Dokumentlager-tjenesten lar kommunen og andre Fiks-organisasjoner laste opp dokumenter. Ved opplasting autoriseres en eller
flere personer og/eller organisasjoner for tilgang til dokumentet. Det er også mulig å laste opp dokumenter med en begrenset
levetid, slik at det blir gjort utilgjengelig når denne tiden utløper.</p>
<p>En Fiks-organisasjon kan organisere sine dokumenter ved bruk av det som kalles kontoer. Alle dokumenter som lastes opp
vil tilhøre en konto. Om man vil bruke en eller flere kontoer er helt opp til hver organisasjon. Kontoer administreres
gjennom konfigurasjonsgrensesnittet, hvor man også finner statistikk for diskbruk, metadata for dokumenter, med mer.</p>
<p>Dokumentlageret vil bli benyttet av flere Fiks-tjenester: SvarUt, SvarInn, Digisos og Innsyn, men det kan også benyttes av
en Fiks-organisasjons egne integrasjoner.</p>
<h2 id="tilgjengelige-grensesnitt">Tilgjengelige grensesnitt</h2>
<table>
<thead>
<tr>
<th>Grensesnitt</th>
<th>Støtte</th>
</tr>
</thead>
<tbody>
<tr>
<td>Web portal</td>
<td>Nei</td>
</tr>
<tr>
<td>Maskin til maskin</td>
<td>Ja</td>
</tr>
</tbody>
</table>
<h2 id="beskrivelse-av-tjenesten">Beskrivelse av tjenesten</h2>
<p>Dokumentlageret fungerer på følgende måte:</p>
<ol>
<li>En laster opp metadata om dokumentet. Her spesifiseres blant annet hvem dokumentet skal eksponeres for, dokumentets levetid, osv.</li>
<li>En laster opp dokumentdata</li>
<li>Dokumentet blir tilgjengelig for alle som er autorisert til å se det</li>
<li>Dokumentet kan bli utilgjengeliggjort og slettet av en av grunnene spesifisert under</li>
</ol>
<p>Det er tre forskjellige måter et dokument kan bli slettet på:</p>
<ul>
<li>Manuelt gjennom webgrensesnitt eller API</li>
<li>Ved at dokumentets levetid utløper</li>
<li>Dersom kontoen dokumentet hører til blir slettet</li>
</ul>
<p>Når et dokument slettes vil metadata fortsette å eksistere, men selve dokumentet vil ikke lenger være tilgjengelig.</p>
<h3 id="klienter">Klienter</h3>
<p>For å gjøre det enklere å ta i bruk Dokumentlageret har KS utviklet en klient for opplasting og nedlasting. Denne støtter
blant annet klient-side kryptering ved opplasting.</p>
<p>Per i dag finnes denne klienten kun for Java, med en egen modul for konfigurering via Spring Boot. Kode og dokumentasjon
finnes på GitHub: <a href="https://github.com/ks-no/fiks-dokumentlager-klient">https://github.com/ks-no/fiks-dokumentlager-klient</a></p>
<h3 id="integrasjonsutvikling">Integrasjonsutvikling</h3>
<p>Alle operasjoner i dokumentlageret utføres på en konto, som er en ressurs som hører til dokumentlager-tjenesten til en
Fiks-organisasjon. Hvordan disse organiseres er opp til hver organisasjon. Man kan ha én konto for alt, eller dele det
opp over mange, slik at man for eksempel kan gi forskjellige tilganger for hver konto.</p>
<p>De vanlige <a href="/felles/sikkerhet/">autentiseringsreglene</a> for Fiks-plattformen gjelder for denne tjenesten, men i
tillegg må integrasjonen ha rett til å laste opp dokumenter på en dokumentlager konto. Disse tilgangene tildeles som vanlig
gjennom konfigurasjonsgrensesnittet, men må gis på kontonivå. Dersom man har flere kontoer, men ønsker å gi en integrasjon
tilgang til flere av disse må tilgang gis på hver enkelt konto.</p>
<h4 id="opplasting">Opplasting</h4>
<p>Opplasting gjøres med en POST-request mot følgende URL:</p>
<ul>
<li>Test: <code>https://api.fiks.test.ks.no/dokumentlager/api/v1/{fiksOrganisasjonId}/kontoer/{kontoId}/dokumenter/</code></li>
<li>Prod: <code>https://api.fiks.ks.no/dokumentlager/api/v1/{fiksOrganisasjonId}/kontoer/{kontoId}/dokumenter/</code></li>
</ul>
<p>Ved vellykket opplasting returneres et JSON objekt som inneholder ID for det opplastede dokumentet:</p>
<div class="highlight"><pre tabindex="0" style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span><span style="color:#111">{</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;id&#34;</span><span style="color:#111">:</span> <span style="color:#d88200">&#34;9dba7b9e-8fb8-4589-ae3e-740897852a6b&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#111">}</span>
</span></span></code></pre></div><p>URL for nedlasting ligger i Location-header på returnert 201 CREATED respons, eller her:</p>
<ul>
<li>Test
<ul>
<li><code>https://minside.fiks.test.ks.no/dokumentlager/nedlasting/{id}</code></li>
<li><code>https://minside.fiks.test.ks.no/dokumentlager/nedlasting/niva4/{id}</code> (Krever nivå 4 innlogging)</li>
</ul>
</li>
<li>Prod
<ul>
<li><code>https://minside.kommune.no/dokumentlager/nedlasting/{id}</code></li>
<li><code>https://minside.kommune.no/dokumentlager/nedlasting/niva4/{id}</code> (Krever nivå 4 innlogging)</li>
</ul>
</li>
</ul>
<h5 id="metadata">Metadata</h5>
<p>Metadata for dokumenter legges i multipart med navn <code>metadata</code> og defineres i JSON.
Content-Type må på multiparten må settes til application/json.
Et eksempel er vist under (ttl og tilgjengeligTil kan ikke settes samtidig):</p>
<div class="highlight"><pre tabindex="0" style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span><span style="color:#111">{</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;dokumentnavn&#34;</span><span style="color:#111">:</span> <span style="color:#d88200">&#34;dokument.pdf&#34;</span><span style="color:#111">,</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;mimetype&#34;</span><span style="color:#111">:</span> <span style="color:#d88200">&#34;application/pdf&#34;</span><span style="color:#111">,</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;ttl&#34;</span><span style="color:#111">:</span> <span style="color:#ae81ff">86400</span><span style="color:#111">,</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;tilgjengeligTil&#34;</span><span style="color:#111">:</span> <span style="color:#d88200">&#34;2023-05-04T08:05:17+02:00&#34;</span><span style="color:#111">,</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;sikkerhetsniva&#34;</span><span style="color:#111">:</span> <span style="color:#ae81ff">3</span><span style="color:#111">,</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;korrelasjonsid&#34;</span><span style="color:#111">:</span> <span style="color:#d88200">&#34;fa315d73-7ed0-4192-99d1-4049f47e2200&#34;</span><span style="color:#111">,</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;eksponertFor&#34;</span><span style="color:#111">:</span> <span style="color:#111">[</span>
</span></span><span style="display:flex;"><span>    <span style="color:#111">{</span> <span style="color:#f92672">&#34;type&#34;</span><span style="color:#111">:</span> <span style="color:#d88200">&#34;PERSON&#34;</span><span style="color:#111">,</span> <span style="color:#f92672">&#34;fnr&#34;</span><span style="color:#111">:</span> <span style="color:#d88200">&#34;12345679810&#34;</span> <span style="color:#111">},</span>
</span></span><span style="display:flex;"><span>    <span style="color:#111">{</span> <span style="color:#f92672">&#34;type&#34;</span><span style="color:#111">:</span> <span style="color:#d88200">&#34;INTEGRASJON&#34;</span><span style="color:#111">,</span> <span style="color:#f92672">&#34;id&#34;</span><span style="color:#111">:</span> <span style="color:#d88200">&#34;249e3fde-e3d8-435e-835f-16a432598c10&#34;</span> <span style="color:#111">},</span>
</span></span><span style="display:flex;"><span>    <span style="color:#111">{</span> <span style="color:#f92672">&#34;type&#34;</span><span style="color:#111">:</span> <span style="color:#d88200">&#34;ORGANISASJON&#34;</span><span style="color:#111">,</span> <span style="color:#f92672">&#34;orgnr&#34;</span><span style="color:#111">:</span> <span style="color:#d88200">&#34;123456789&#34;</span> <span style="color:#111">},</span>
</span></span><span style="display:flex;"><span>    <span style="color:#111">{</span> <span style="color:#f92672">&#34;type&#34;</span><span style="color:#111">:</span> <span style="color:#d88200">&#34;AUTORISASJON&#34;</span><span style="color:#111">,</span> <span style="color:#f92672">&#34;privilegium&#34;</span><span style="color:#111">:</span> <span style="color:#d88200">&#34;EN.TILGANG&#34;</span><span style="color:#111">,</span> <span style="color:#f92672">&#34;ressurs&#34;</span><span style="color:#111">:</span> <span style="color:#d88200">&#34;77e0d6b5-f2cd-4f54-80bb-723c598026da&#34;</span> <span style="color:#111">}</span>
</span></span><span style="display:flex;"><span>  <span style="color:#111">]</span>
</span></span><span style="display:flex;"><span><span style="color:#111">}</span>
</span></span></code></pre></div><ul>
<li>Dokumentnavn - Dokumentets navn, ved nedlasting gjennom en browser vil dette bli satt som default navn på filen som lagres på disk</li>
<li>MIME type - Dokumenttype på gyldig MIME-format. Se <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Basics_of_HTTP/MIME_types">https://developer.mozilla.org/en-US/docs/Web/HTTP/Basics_of_HTTP/MIME_types</a></li>
<li>TTL - Hvor mange sekunder etter opplasting dokumentet skal være tilgjengelig. Ved utløp blir dokumentet utilgjengeliggjort og slettes. En negativ verdi betyr at dokumentet aldri vil slettes. Kan ikke settes sammen med tilgjengeligTil, men en av disse må settes.</li>
<li>Tilgjengelig til - Tidspunkt for når dokumentet utløper og skal slettes på ISO 8601-format. Opplastingen vil bli avvist dersom tidspunktet er i fortiden. Kan ikke settes sammen med ttl, men en av disse må settes.</li>
<li>Sikkerhetsniva - Sikkerhetsnivå som skal kreves ved nedlasting av dokument. Ved nivå 4 kreves kryptering hos klient før opplasting.
Se <a href="https://eid.difi.no/nb/sikkerhet-og-informasjonskapsler/ulike-sikkerhetsniva">https://eid.difi.no/nb/sikkerhet-og-informasjonskapsler/ulike-sikkerhetsniva</a></li>
<li>Korrelasjonsid - Id som kan brukes til å indikere at flere dokumenter hører sammen. Feltet er ikke påkrevd.</li>
<li>Eksponert for - Liste over aktører som skal ha tilgang til å laste ned dokumentet. Kan være følgende typer:
<ul>
<li>Person - Eksponeres for en persons fødselsnummer. En gyldig ID-porten innlogging for en person med dette
fødselsnummeret vil ha lov til å laste ned dokumentet.</li>
<li>Integrasjon - Eksponeres for en UUID som identifiserer en integrasjon. En klient innlogget med integrasjonsid,
integrasjonspassord og virksomhetssertifikatet som er autentisert til å bruke integrasjonen vil ha lov til å laste ned dokumentet.</li>
<li>Organisasjon - Eksponeres for et organisasjonsnummer. Personer med <em>Post/arkiv</em>- eller <em>Kommunale tjenester</em>-rollen i Altinn på dette
organisasjonsnummeret vil ha lov til å laste ned dokumentet.</li>
<li>Autorisasjon - Eksponeres for et &ldquo;privilegium, ressurs&rdquo;-par. Personer eller integrasjoner med gitt privilegium på
gitt ressurs vil ha lov til å laste ned dokumentet.</li>
</ul>
</li>
</ul>
<h5 id="dokument">Dokument</h5>
<p>Dokumentdata legges i multipart med navn <code>dokument</code>.</p>
<p>Dersom ikke <code>kryptert</code> query parameter er satt til true vil dokumentet krypteres av tjenesten før det lagres. Dersom man ønsker
å laste opp dokumenter på nivå 4, eller bare ønsker ende-til-ende-kryptering ved opplasting, må dette flagget settes til
true, og dokumentet må krypteres med dokumentlagerets public-key før opplasting. Uavhengig av hva man velger vil alle
dokumenter være kryptert etter opplasting, og vil kun dekrypteres når en aktør som er autorisert til å laste ned dokumentet
laster det ned.</p>
<p>Public-keyen kan hentes med en GET-request mot følgende endepunkt:</p>
<ul>
<li>Test: <code>https://api.fiks.test.ks.no/dokumentlager/api/v1/public-key</code></li>
<li>Prod: <code>https://api.fiks.ks.no/dokumentlager/api/v1/public-key</code></li>
</ul>
<h5 id="responskoder">Responskoder</h5>
<ul>
<li>
<p>201 Created - Dokumentet ble lastet opp.
Body inneholder metadata:</p>
<div class="highlight"><pre tabindex="0" style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span><span style="color:#111">{</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;id&#34;</span><span style="color:#111">:</span> <span style="color:#d88200">&#34;5636b391-41e7-4504-ab3c-1f3df122b483&#34;</span><span style="color:#111">,</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;dokumentnavn&#34;</span><span style="color:#111">:</span> <span style="color:#d88200">&#34;dokument.pdf&#34;</span><span style="color:#111">,</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;mimeType&#34;</span><span style="color:#111">:</span> <span style="color:#d88200">&#34;application/pdf&#34;</span><span style="color:#111">,</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;ukryptertStorrelse&#34;</span><span style="color:#111">:</span> <span style="color:#ae81ff">29765</span><span style="color:#111">,</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;kryptertStorrelse&#34;</span><span style="color:#111">:</span> <span style="color:#ae81ff">30680</span>
</span></span><span style="display:flex;"><span><span style="color:#111">}</span>
</span></span></code></pre></div><p>Url for personnedlasting returneres i Location-header:
<code>Location: https://minside.kommune.no/dokumentlager/nedlasting/5636b391-41e7-4504-ab3c-1f3df122b483</code></p>
</li>
<li>
<p>400 Bad Request - Request er ikke i henhold til spesifikasjonen.</p>
</li>
<li>
<p>403 Forbidden - Integrasjonen har ikke nødvendige tilganger til å laste opp dokumenter på spesifisert konto og organisasjon.</p>
</li>
<li>
<p>404 Not Found - Fant ingen konto med spesifisert id for organisasjonen.</p>
</li>
<li>
<p>410 Gone - Konto er slettet.</p>
</li>
</ul>
<h5 id="eksempel-curl">Eksempel (cURL)</h5>
<div class="highlight"><pre tabindex="0" style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>curl -X POST https://api.fiks.test.ks.no/dokumentlager/api/v1/<span style="color:#f92672">{</span>fiksOrganisasjonId<span style="color:#f92672">}</span>/kontoer/<span style="color:#f92672">{</span>kontoId<span style="color:#f92672">}</span>/dokumenter/ <span style="color:#8045ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#8045ff"></span>-H <span style="color:#d88200">&#34;Authorization: Bearer &lt;gyldig access token&gt;&#34;</span> <span style="color:#8045ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#8045ff"></span>-H <span style="color:#d88200">&#34;IntegrasjonId: &lt;integrasjonsid&gt;&#34;</span> <span style="color:#8045ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#8045ff"></span>-H <span style="color:#d88200">&#34;IntegrasjonPassord: &lt;integrasjonspassord&gt;&#34;</span> <span style="color:#8045ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#8045ff"></span>-F <span style="color:#d88200">&#34;metadata={\&#34;dokumentnavn\&#34;:\&#34;dokument.pdf\&#34;,\&#34;mimetype\&#34;:\&#34;application/pdf\&#34;,\&#34;ttl\&#34;:3600,\&#34;eksponertFor\&#34;:[{\&#34;type\&#34;:\&#34;PERSON\&#34;, \&#34;fnr\&#34;:\&#34;&lt;fødselsnummer&gt;\&#34;}],\&#34;sikkerhetsniva\&#34;:3};type=application/json&#34;</span> <span style="color:#8045ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#8045ff"></span>-F <span style="color:#d88200">&#34;dokument=@dokument.pdf&#34;</span>
</span></span></code></pre></div><h4 id="oppdatering-av-metadata">Oppdatering av metadata</h4>
<p>Oppdatering av metadata gjøres med en PATCH-request mot følgende URL:</p>
<ul>
<li>Test: <code>https://api.fiks.test.ks.no/dokumentlager/api/v1/{fiksOrganisasjonId}/kontoer/{kontoId}/dokumenter/{dokumentId}</code></li>
<li>Prod: <code>https://api.fiks.ks.no/dokumentlager/api/v1/{fiksOrganisasjonId}/kontoer/{kontoId}/dokumenter/{dokumentId}</code></li>
</ul>
<p>Kun tilgjengeligTil kan oppdateres, enten via ttl, som oppgis i sekunder relativt til tid for oppdateringen, eller via tilgjengeligTil, som er et eksakt tidspunkt i fremtiden.
Eksempel på request body:</p>
<div class="highlight"><pre tabindex="0" style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span><span style="color:#111">{</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;ttl&#34;</span><span style="color:#111">:</span> <span style="color:#ae81ff">3600</span><span style="color:#111">,</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;tilgjengeligTil&#34;</span><span style="color:#111">:</span> <span style="color:#d88200">&#34;2023-05-04T10:42:40.943+02:00&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#111">}</span>
</span></span></code></pre></div><h5 id="responskoder-1">Responskoder</h5>
<ul>
<li>200 OK - Dokumentet med spesifisert id oppdatert. Body inneholder id og oppdatert data:
<div class="highlight"><pre tabindex="0" style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span><span style="color:#111">{</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;id&#34;</span><span style="color:#111">:</span> <span style="color:#d88200">&#34;bd393a3a-78f6-4902-af96-b604c24850a6&#34;</span><span style="color:#111">,</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;tilgjengeligTil&#34;</span><span style="color:#111">:</span> <span style="color:#d88200">&#34;2023-05-04T10:41:13.485+02:00&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#111">}</span>
</span></span></code></pre></div></li>
<li>400 Bad Request - Request er ikke i henhold til spesifikasjonen.</li>
<li>403 Forbidden - Integrasjonen har ikke nødvendige tilganger til å slette dokumenter på spesifisert konto og organisasjon.</li>
<li>404 Not Found - Fant ikke et dokument med oppgitt id, eller spesifisert konto og organisasjon.</li>
<li>410 Gone - Dokumentet er allerede slettet, eller konto er slettet.</li>
</ul>
<h4 id="sletting">Sletting</h4>
<p>Integrasjoner som er autorisert til å laste opp dokumenter har også lov til å slette.</p>
<p>Dette gjøres med en DELETE-request mot følgende URL:</p>
<ul>
<li>Test: <code>https://api.fiks.test.ks.no/dokumentlager/api/v1/{fiksOrganisasjonId}/kontoer/{kontoId}/dokumenter/{dokumentId}</code></li>
<li>Prod: <code>https://api.fiks.ks.no/dokumentlager/api/v1/{fiksOrganisasjonId}/kontoer/{kontoId}/dokumenter/{dokumentId}</code></li>
</ul>
<h5 id="responskoder-2">Responskoder</h5>
<ul>
<li>200 OK - Dokumentet med spesifisert id ble slettet. Tom body.</li>
<li>400 Bad Request - Request er ikke i henhold til spesifikasjonen.</li>
<li>403 Forbidden - Integrasjonen har ikke nødvendige tilganger til å slette dokumenter på spesifisert konto og organisasjon.</li>
<li>404 Not Found - Fant ikke et dokument med oppgitt id, eller spesifisert konto og organisasjon.</li>
<li>410 Gone - Dokumentet er allerede slettet, eller konto er slettet.</li>
</ul>
<h4 id="feilmeldinger">Feilmeldinger</h4>
<p><a href="../../integrasjoner/#feilmeldinger">Beskrivelse av feilmeldinger</a></p>


<footer class=" footline" >
	
</footer>


        
        </div> 
        

      </div>

    <div id="navigation">
        
        
        
        
            
            
                
                    
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
        
                    
                        
            
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
        
                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
            
        
                    
            
        
        
        


	 
	 
		
			<a class="nav nav-prev" href="/tjenester/bekymringsmelding/" title="Fiks bekymringsmelding"> <i class="fa fa-chevron-left"></i></a>
		
		
			<a class="nav nav-next" href="/tjenester/svarut/" title="SvarUt" style="margin-right: 0px;"><i class="fa fa-chevron-right"></i></a>
		
	
    </div>

    </section>
    
    <div style="left: -1000px; overflow: scroll; position: absolute; top: -1000px; border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;">
      <div style="border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;"></div>
    </div>
    <script src="/js/clipboard.min.js?1696507688"></script>
    <script src="/js/perfect-scrollbar.min.js?1696507688"></script>
    <script src="/js/perfect-scrollbar.jquery.min.js?1696507688"></script>
    <script src="/js/jquery.sticky.js?1696507688"></script>
    <script src="/js/featherlight.min.js?1696507688"></script>
    <script src="/js/highlight.pack.js?1696507688"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    <script src="/js/modernizr.custom-3.6.0.js?1696507688"></script>
    <script src="/js/learn.js?1696507688"></script>
    <script src="/js/hugo-learn.js?1696507688"></script>

    <link href="/mermaid/mermaid.css?1696507688" rel="stylesheet" />
    <script src="/mermaid/mermaid.js?1696507688"></script>
    <script>
        mermaid.initialize({ startOnLoad: true });
    </script>
    

  </body>
</html>

